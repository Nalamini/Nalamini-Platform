var mW=Object.defineProperty;var Gk=t=>{throw TypeError(t)};var hW=(t,r,s)=>r in t?mW(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s;var le=(t,r,s)=>hW(t,typeof r!="symbol"?r+"":r,s),qb=(t,r,s)=>r.has(t)||Gk("Cannot "+s);var ne=(t,r,s)=>(qb(t,r,"read from private field"),s?s.call(t):r.get(t)),wt=(t,r,s)=>r.has(t)?Gk("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,s),lt=(t,r,s,n)=>(qb(t,r,"write to private field"),n?n.call(t,s):r.set(t,s),s),Zt=(t,r,s)=>(qb(t,r,"access private method"),s);var ax=(t,r,s,n)=>({set _(a){lt(t,r,a,s)},get _(){return ne(t,r,n)}});function pW(t,r){for(var s=0;s<r.length;s++){const n=r[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var l5={exports:{}},Vy={},o5={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf=Symbol.for("react.element"),fW=Symbol.for("react.portal"),xW=Symbol.for("react.fragment"),gW=Symbol.for("react.strict_mode"),vW=Symbol.for("react.profiler"),yW=Symbol.for("react.provider"),jW=Symbol.for("react.context"),bW=Symbol.for("react.forward_ref"),NW=Symbol.for("react.suspense"),wW=Symbol.for("react.memo"),SW=Symbol.for("react.lazy"),Yk=Symbol.iterator;function CW(t){return t===null||typeof t!="object"?null:(t=Yk&&t[Yk]||t["@@iterator"],typeof t=="function"?t:null)}var c5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d5=Object.assign,u5={};function xm(t,r,s){this.props=t,this.context=r,this.refs=u5,this.updater=s||c5}xm.prototype.isReactComponent={};xm.prototype.setState=function(t,r){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,r,"setState")};xm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function m5(){}m5.prototype=xm.prototype;function a2(t,r,s){this.props=t,this.context=r,this.refs=u5,this.updater=s||c5}var i2=a2.prototype=new m5;i2.constructor=a2;d5(i2,xm.prototype);i2.isPureReactComponent=!0;var Qk=Array.isArray,h5=Object.prototype.hasOwnProperty,l2={current:null},p5={key:!0,ref:!0,__self:!0,__source:!0};function f5(t,r,s){var n,a={},i=null,l=null;if(r!=null)for(n in r.ref!==void 0&&(l=r.ref),r.key!==void 0&&(i=""+r.key),r)h5.call(r,n)&&!p5.hasOwnProperty(n)&&(a[n]=r[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Nf,type:t,key:i,ref:l,props:a,_owner:l2.current}}function PW(t,r){return{$$typeof:Nf,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}function o2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nf}function kW(t){var r={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return r[s]})}var Xk=/\/+/g;function zb(t,r){return typeof t=="object"&&t!==null&&t.key!=null?kW(""+t.key):r.toString(36)}function rg(t,r,s,n,a){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Nf:case fW:l=!0}}if(l)return l=t,a=a(l),t=n===""?"."+zb(l,0):n,Qk(a)?(s="",t!=null&&(s=t.replace(Xk,"$&/")+"/"),rg(a,r,s,"",function(d){return d})):a!=null&&(o2(a)&&(a=PW(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Xk,"$&/")+"/")+t)),r.push(a)),1;if(l=0,n=n===""?".":n+":",Qk(t))for(var o=0;o<t.length;o++){i=t[o];var c=n+zb(i,o);l+=rg(i,r,s,c,a)}else if(c=CW(t),typeof c=="function")for(t=c.call(t),o=0;!(i=t.next()).done;)i=i.value,c=n+zb(i,o++),l+=rg(i,r,s,c,a);else if(i==="object")throw r=String(t),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return l}function lx(t,r,s){if(t==null)return t;var n=[],a=0;return rg(t,n,"","",function(i){return r.call(s,i,a++)}),n}function AW(t){if(t._status===-1){var r=t._result;r=r(),r.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=r)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},sg={transition:null},_W={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:sg,ReactCurrentOwner:l2};function x5(){throw Error("act(...) is not supported in production builds of React.")}ar.Children={map:lx,forEach:function(t,r,s){lx(t,function(){r.apply(this,arguments)},s)},count:function(t){var r=0;return lx(t,function(){r++}),r},toArray:function(t){return lx(t,function(r){return r})||[]},only:function(t){if(!o2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ar.Component=xm;ar.Fragment=xW;ar.Profiler=vW;ar.PureComponent=a2;ar.StrictMode=gW;ar.Suspense=NW;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_W;ar.act=x5;ar.cloneElement=function(t,r,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=d5({},t.props),a=t.key,i=t.ref,l=t._owner;if(r!=null){if(r.ref!==void 0&&(i=r.ref,l=l2.current),r.key!==void 0&&(a=""+r.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in r)h5.call(r,c)&&!p5.hasOwnProperty(c)&&(n[c]=r[c]===void 0&&o!==void 0?o[c]:r[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:Nf,type:t.type,key:a,ref:i,props:n,_owner:l}};ar.createContext=function(t){return t={$$typeof:jW,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yW,_context:t},t.Consumer=t};ar.createElement=f5;ar.createFactory=function(t){var r=f5.bind(null,t);return r.type=t,r};ar.createRef=function(){return{current:null}};ar.forwardRef=function(t){return{$$typeof:bW,render:t}};ar.isValidElement=o2;ar.lazy=function(t){return{$$typeof:SW,_payload:{_status:-1,_result:t},_init:AW}};ar.memo=function(t,r){return{$$typeof:wW,type:t,compare:r===void 0?null:r}};ar.startTransition=function(t){var r=sg.transition;sg.transition={};try{t()}finally{sg.transition=r}};ar.unstable_act=x5;ar.useCallback=function(t,r){return Tn.current.useCallback(t,r)};ar.useContext=function(t){return Tn.current.useContext(t)};ar.useDebugValue=function(){};ar.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};ar.useEffect=function(t,r){return Tn.current.useEffect(t,r)};ar.useId=function(){return Tn.current.useId()};ar.useImperativeHandle=function(t,r,s){return Tn.current.useImperativeHandle(t,r,s)};ar.useInsertionEffect=function(t,r){return Tn.current.useInsertionEffect(t,r)};ar.useLayoutEffect=function(t,r){return Tn.current.useLayoutEffect(t,r)};ar.useMemo=function(t,r){return Tn.current.useMemo(t,r)};ar.useReducer=function(t,r,s){return Tn.current.useReducer(t,r,s)};ar.useRef=function(t){return Tn.current.useRef(t)};ar.useState=function(t){return Tn.current.useState(t)};ar.useSyncExternalStore=function(t,r,s){return Tn.current.useSyncExternalStore(t,r,s)};ar.useTransition=function(){return Tn.current.useTransition()};ar.version="18.3.1";o5.exports=ar;var j=o5.exports;const Q=jr(j),c2=pW({__proto__:null,default:Q},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TW=j,OW=Symbol.for("react.element"),EW=Symbol.for("react.fragment"),DW=Object.prototype.hasOwnProperty,MW=TW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IW={key:!0,ref:!0,__self:!0,__source:!0};function g5(t,r,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(l=r.ref);for(n in r)DW.call(r,n)&&!IW.hasOwnProperty(n)&&(a[n]=r[n]);if(t&&t.defaultProps)for(n in r=t.defaultProps,r)a[n]===void 0&&(a[n]=r[n]);return{$$typeof:OW,type:t,key:i,ref:l,props:a,_owner:MW.current}}Vy.Fragment=EW;Vy.jsx=g5;Vy.jsxs=g5;l5.exports=Vy;var e=l5.exports,v5={exports:{}},va={},y5={exports:{}},j5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function r(K,Z){var ue=K.length;K.push(Z);e:for(;0<ue;){var Ne=ue-1>>>1,J=K[Ne];if(0<a(J,Z))K[Ne]=Z,K[ue]=J,ue=Ne;else break e}}function s(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var Z=K[0],ue=K.pop();if(ue!==Z){K[0]=ue;e:for(var Ne=0,J=K.length,Re=J>>>1;Ne<Re;){var Ee=2*(Ne+1)-1,ut=K[Ee],ce=Ee+1,ke=K[ce];if(0>a(ut,ue))ce<J&&0>a(ke,ut)?(K[Ne]=ke,K[ce]=ue,Ne=ce):(K[Ne]=ut,K[Ee]=ue,Ne=Ee);else if(ce<J&&0>a(ke,ue))K[Ne]=ke,K[ce]=ue,Ne=ce;else break e}}return Z}function a(K,Z){var ue=K.sortIndex-Z.sortIndex;return ue!==0?ue:K.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,g=!1,x=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var Z=s(d);Z!==null;){if(Z.callback===null)n(d);else if(Z.startTime<=K)n(d),Z.sortIndex=Z.expirationTime,r(c,Z);else break;Z=s(d)}}function N(K){if(p=!1,b(K),!x)if(s(c)!==null)x=!0,W(w);else{var Z=s(d);Z!==null&&X(N,Z.startTime-K)}}function w(K,Z){x=!1,p&&(p=!1,v(S),S=-1),g=!0;var ue=h;try{for(b(Z),m=s(c);m!==null&&(!(m.expirationTime>Z)||K&&!D());){var Ne=m.callback;if(typeof Ne=="function"){m.callback=null,h=m.priorityLevel;var J=Ne(m.expirationTime<=Z);Z=t.unstable_now(),typeof J=="function"?m.callback=J:m===s(c)&&n(c),b(Z)}else n(c);m=s(c)}if(m!==null)var Re=!0;else{var Ee=s(d);Ee!==null&&X(N,Ee.startTime-Z),Re=!1}return Re}finally{m=null,h=ue,g=!1}}var C=!1,P=null,S=-1,A=5,k=-1;function D(){return!(t.unstable_now()-k<A)}function q(){if(P!==null){var K=t.unstable_now();k=K;var Z=!0;try{Z=P(!0,K)}finally{Z?z():(C=!1,P=null)}}else C=!1}var z;if(typeof f=="function")z=function(){f(q)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=q,z=function(){F.postMessage(null)}}else z=function(){y(q,0)};function W(K){P=K,C||(C=!0,z())}function X(K,Z){S=y(function(){K(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,W(w))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(K){switch(h){case 1:case 2:case 3:var Z=3;break;default:Z=h}var ue=h;h=Z;try{return K()}finally{h=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ue=h;h=K;try{return Z()}finally{h=ue}},t.unstable_scheduleCallback=function(K,Z,ue){var Ne=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ne+ue:Ne):ue=Ne,K){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ue+J,K={id:u++,callback:Z,priorityLevel:K,startTime:ue,expirationTime:J,sortIndex:-1},ue>Ne?(K.sortIndex=ue,r(d,K),s(c)===null&&K===s(d)&&(p?(v(S),S=-1):p=!0,X(N,ue-Ne))):(K.sortIndex=J,r(c,K),x||g||(x=!0,W(w))),K},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(K){var Z=h;return function(){var ue=h;h=Z;try{return K.apply(this,arguments)}finally{h=ue}}}})(j5);y5.exports=j5;var RW=y5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FW=j,pa=RW;function Ke(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b5=new Set,Jh={};function Jc(t,r){Nu(t,r),Nu(t+"Capture",r)}function Nu(t,r){for(Jh[t]=r,t=0;t<r.length;t++)b5.add(r[t])}var Nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ON=Object.prototype.hasOwnProperty,$W=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zk={},Jk={};function LW(t){return ON.call(Jk,t)?!0:ON.call(Zk,t)?!1:$W.test(t)?Jk[t]=!0:(Zk[t]=!0,!1)}function BW(t,r,s,n){if(s!==null&&s.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VW(t,r,s,n){if(r===null||typeof r>"u"||BW(t,r,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function On(t,r,s,n,a,i,l){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=t,this.type=r,this.sanitizeURL=i,this.removeEmptyString=l}var Js={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Js[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];Js[r]=new On(r,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Js[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Js[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Js[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Js[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Js[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Js[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Js[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var d2=/[\-:]([a-z])/g;function u2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(d2,u2);Js[r]=new On(r,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(d2,u2);Js[r]=new On(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(d2,u2);Js[r]=new On(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Js[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});Js.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Js[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function m2(t,r,s,n){var a=Js.hasOwnProperty(r)?Js[r]:null;(a!==null?a.type!==0:n||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(VW(r,s,a,n)&&(s=null),n||a===null?LW(r)&&(s===null?t.removeAttribute(r):t.setAttribute(r,""+s)):a.mustUseProperty?t[a.propertyName]=s===null?a.type===3?!1:"":s:(r=a.attributeName,n=a.attributeNamespace,s===null?t.removeAttribute(r):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?t.setAttributeNS(n,r,s):t.setAttribute(r,s))))}var Dl=FW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ox=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Od=Symbol.for("react.fragment"),h2=Symbol.for("react.strict_mode"),EN=Symbol.for("react.profiler"),N5=Symbol.for("react.provider"),w5=Symbol.for("react.context"),p2=Symbol.for("react.forward_ref"),DN=Symbol.for("react.suspense"),MN=Symbol.for("react.suspense_list"),f2=Symbol.for("react.memo"),Gl=Symbol.for("react.lazy"),S5=Symbol.for("react.offscreen"),eA=Symbol.iterator;function Hm(t){return t===null||typeof t!="object"?null:(t=eA&&t[eA]||t["@@iterator"],typeof t=="function"?t:null)}var ns=Object.assign,Kb;function bh(t){if(Kb===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);Kb=r&&r[1]||""}return`
`+Kb+t}var Hb=!1;function Wb(t,r){if(!t||Hb)return"";Hb=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(d){var n=d}Reflect.construct(t,[],r)}else{try{r.call()}catch(d){n=d}t.call(r.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Hb=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?bh(t):""}function UW(t){switch(t.tag){case 5:return bh(t.type);case 16:return bh("Lazy");case 13:return bh("Suspense");case 19:return bh("SuspenseList");case 0:case 2:case 15:return t=Wb(t.type,!1),t;case 11:return t=Wb(t.type.render,!1),t;case 1:return t=Wb(t.type,!0),t;default:return""}}function IN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Od:return"Fragment";case Td:return"Portal";case EN:return"Profiler";case h2:return"StrictMode";case DN:return"Suspense";case MN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case w5:return(t.displayName||"Context")+".Consumer";case N5:return(t._context.displayName||"Context")+".Provider";case p2:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case f2:return r=t.displayName||null,r!==null?r:IN(t.type)||"Memo";case Gl:r=t._payload,t=t._init;try{return IN(t(r))}catch{}}return null}function qW(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IN(r);case 8:return r===h2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C5(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function zW(t){var r=C5(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),n=""+t[r];if(!t.hasOwnProperty(r)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(t,r,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function cx(t){t._valueTracker||(t._valueTracker=zW(t))}function P5(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),n="";return t&&(n=C5(t)?t.checked?"true":"false":t.value),t=n,t!==s?(r.setValue(t),!0):!1}function Ag(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function RN(t,r){var s=r.checked;return ns({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function tA(t,r){var s=r.defaultValue==null?"":r.defaultValue,n=r.checked!=null?r.checked:r.defaultChecked;s=Po(r.value!=null?r.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function k5(t,r){r=r.checked,r!=null&&m2(t,"checked",r,!1)}function FN(t,r){k5(t,r);var s=Po(r.value),n=r.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?$N(t,r.type,s):r.hasOwnProperty("defaultValue")&&$N(t,r.type,Po(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function rA(t,r,s){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var n=r.type;if(!(n!=="submit"&&n!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,s||r===t.value||(t.value=r),t.defaultValue=r}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function $N(t,r,s){(r!=="number"||Ag(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Nh=Array.isArray;function Gd(t,r,s,n){if(t=t.options,r){r={};for(var a=0;a<s.length;a++)r["$"+s[a]]=!0;for(s=0;s<t.length;s++)a=r.hasOwnProperty("$"+t[s].value),t[s].selected!==a&&(t[s].selected=a),a&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Po(s),r=null,a=0;a<t.length;a++){if(t[a].value===s){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}r!==null||t[a].disabled||(r=t[a])}r!==null&&(r.selected=!0)}}function LN(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return ns({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sA(t,r){var s=r.value;if(s==null){if(s=r.children,r=r.defaultValue,s!=null){if(r!=null)throw Error(Ke(92));if(Nh(s)){if(1<s.length)throw Error(Ke(93));s=s[0]}r=s}r==null&&(r=""),s=r}t._wrapperState={initialValue:Po(s)}}function A5(t,r){var s=Po(r.value),n=Po(r.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),r.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function nA(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function _5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function BN(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?_5(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dx,T5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,s,n,a){MSApp.execUnsafeLocalFunction(function(){return t(r,s,n,a)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(dx=dx||document.createElement("div"),dx.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=dx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function ep(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var Eh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KW=["Webkit","ms","Moz","O"];Object.keys(Eh).forEach(function(t){KW.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),Eh[r]=Eh[t]})});function O5(t,r,s){return r==null||typeof r=="boolean"||r===""?"":s||typeof r!="number"||r===0||Eh.hasOwnProperty(t)&&Eh[t]?(""+r).trim():r+"px"}function E5(t,r){t=t.style;for(var s in r)if(r.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=O5(s,r[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,a):t[s]=a}}var HW=ns({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function VN(t,r){if(r){if(HW[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(Ke(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(Ke(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(Ke(61))}if(r.style!=null&&typeof r.style!="object")throw Error(Ke(62))}}function UN(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qN=null;function x2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zN=null,Yd=null,Qd=null;function aA(t){if(t=Cf(t)){if(typeof zN!="function")throw Error(Ke(280));var r=t.stateNode;r&&(r=Hy(r),zN(t.stateNode,t.type,r))}}function D5(t){Yd?Qd?Qd.push(t):Qd=[t]:Yd=t}function M5(){if(Yd){var t=Yd,r=Qd;if(Qd=Yd=null,aA(t),r)for(t=0;t<r.length;t++)aA(r[t])}}function I5(t,r){return t(r)}function R5(){}var Gb=!1;function F5(t,r,s){if(Gb)return t(r,s);Gb=!0;try{return I5(t,r,s)}finally{Gb=!1,(Yd!==null||Qd!==null)&&(R5(),M5())}}function tp(t,r){var s=t.stateNode;if(s===null)return null;var n=Hy(s);if(n===null)return null;s=n[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(Ke(231,r,typeof s));return s}var KN=!1;if(Nl)try{var Wm={};Object.defineProperty(Wm,"passive",{get:function(){KN=!0}}),window.addEventListener("test",Wm,Wm),window.removeEventListener("test",Wm,Wm)}catch{KN=!1}function WW(t,r,s,n,a,i,l,o,c){var d=Array.prototype.slice.call(arguments,3);try{r.apply(s,d)}catch(u){this.onError(u)}}var Dh=!1,_g=null,Tg=!1,HN=null,GW={onError:function(t){Dh=!0,_g=t}};function YW(t,r,s,n,a,i,l,o,c){Dh=!1,_g=null,WW.apply(GW,arguments)}function QW(t,r,s,n,a,i,l,o,c){if(YW.apply(this,arguments),Dh){if(Dh){var d=_g;Dh=!1,_g=null}else throw Error(Ke(198));Tg||(Tg=!0,HN=d)}}function ed(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function $5(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function iA(t){if(ed(t)!==t)throw Error(Ke(188))}function XW(t){var r=t.alternate;if(!r){if(r=ed(t),r===null)throw Error(Ke(188));return r!==t?null:t}for(var s=t,n=r;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return iA(a),t;if(i===n)return iA(a),r;i=i.sibling}throw Error(Ke(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(Ke(189))}}if(s.alternate!==n)throw Error(Ke(190))}if(s.tag!==3)throw Error(Ke(188));return s.stateNode.current===s?t:r}function L5(t){return t=XW(t),t!==null?B5(t):null}function B5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=B5(t);if(r!==null)return r;t=t.sibling}return null}var V5=pa.unstable_scheduleCallback,lA=pa.unstable_cancelCallback,ZW=pa.unstable_shouldYield,JW=pa.unstable_requestPaint,xs=pa.unstable_now,eG=pa.unstable_getCurrentPriorityLevel,g2=pa.unstable_ImmediatePriority,U5=pa.unstable_UserBlockingPriority,Og=pa.unstable_NormalPriority,tG=pa.unstable_LowPriority,q5=pa.unstable_IdlePriority,Uy=null,Ei=null;function rG(t){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(Uy,t,void 0,(t.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:aG,sG=Math.log,nG=Math.LN2;function aG(t){return t>>>=0,t===0?32:31-(sG(t)/nG|0)|0}var ux=64,mx=4194304;function wh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eg(t,r){var s=t.pendingLanes;if(s===0)return 0;var n=0,a=t.suspendedLanes,i=t.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?n=wh(o):(i&=l,i!==0&&(n=wh(i)))}else l=s&~a,l!==0?n=wh(l):i!==0&&(n=wh(i));if(n===0)return 0;if(r!==0&&r!==n&&!(r&a)&&(a=n&-n,i=r&-r,a>=i||a===16&&(i&4194240)!==0))return r;if(n&4&&(n|=s&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=n;0<r;)s=31-ni(r),a=1<<s,n|=t[s],r&=~a;return n}function iG(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lG(t,r){for(var s=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,i=t.pendingLanes;0<i;){var l=31-ni(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&n)&&(a[l]=iG(o,r)):c<=r&&(t.expiredLanes|=o),i&=~o}}function WN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z5(){var t=ux;return ux<<=1,!(ux&4194240)&&(ux=64),t}function Yb(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function wf(t,r,s){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-ni(r),t[r]=s}function oG(t,r){var s=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var a=31-ni(s),i=1<<a;r[a]=0,n[a]=-1,t[a]=-1,s&=~i}}function v2(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var n=31-ni(s),a=1<<n;a&r|t[n]&r&&(t[n]|=r),s&=~a}}var Pr=0;function K5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var H5,y2,W5,G5,Y5,GN=!1,hx=[],fo=null,xo=null,go=null,rp=new Map,sp=new Map,Xl=[],cG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oA(t,r){switch(t){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":rp.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":sp.delete(r.pointerId)}}function Gm(t,r,s,n,a,i){return t===null||t.nativeEvent!==i?(t={blockedOn:r,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},r!==null&&(r=Cf(r),r!==null&&y2(r)),t):(t.eventSystemFlags|=n,r=t.targetContainers,a!==null&&r.indexOf(a)===-1&&r.push(a),t)}function dG(t,r,s,n,a){switch(r){case"focusin":return fo=Gm(fo,t,r,s,n,a),!0;case"dragenter":return xo=Gm(xo,t,r,s,n,a),!0;case"mouseover":return go=Gm(go,t,r,s,n,a),!0;case"pointerover":var i=a.pointerId;return rp.set(i,Gm(rp.get(i)||null,t,r,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,sp.set(i,Gm(sp.get(i)||null,t,r,s,n,a)),!0}return!1}function Q5(t){var r=lc(t.target);if(r!==null){var s=ed(r);if(s!==null){if(r=s.tag,r===13){if(r=$5(s),r!==null){t.blockedOn=r,Y5(t.priority,function(){W5(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ng(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=YN(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);qN=n,s.target.dispatchEvent(n),qN=null}else return r=Cf(s),r!==null&&y2(r),t.blockedOn=s,!1;r.shift()}return!0}function cA(t,r,s){ng(t)&&s.delete(r)}function uG(){GN=!1,fo!==null&&ng(fo)&&(fo=null),xo!==null&&ng(xo)&&(xo=null),go!==null&&ng(go)&&(go=null),rp.forEach(cA),sp.forEach(cA)}function Ym(t,r){t.blockedOn===r&&(t.blockedOn=null,GN||(GN=!0,pa.unstable_scheduleCallback(pa.unstable_NormalPriority,uG)))}function np(t){function r(a){return Ym(a,t)}if(0<hx.length){Ym(hx[0],t);for(var s=1;s<hx.length;s++){var n=hx[s];n.blockedOn===t&&(n.blockedOn=null)}}for(fo!==null&&Ym(fo,t),xo!==null&&Ym(xo,t),go!==null&&Ym(go,t),rp.forEach(r),sp.forEach(r),s=0;s<Xl.length;s++)n=Xl[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Xl.length&&(s=Xl[0],s.blockedOn===null);)Q5(s),s.blockedOn===null&&Xl.shift()}var Xd=Dl.ReactCurrentBatchConfig,Dg=!0;function mG(t,r,s,n){var a=Pr,i=Xd.transition;Xd.transition=null;try{Pr=1,j2(t,r,s,n)}finally{Pr=a,Xd.transition=i}}function hG(t,r,s,n){var a=Pr,i=Xd.transition;Xd.transition=null;try{Pr=4,j2(t,r,s,n)}finally{Pr=a,Xd.transition=i}}function j2(t,r,s,n){if(Dg){var a=YN(t,r,s,n);if(a===null)a0(t,r,n,Mg,s),oA(t,n);else if(dG(a,t,r,s,n))n.stopPropagation();else if(oA(t,n),r&4&&-1<cG.indexOf(t)){for(;a!==null;){var i=Cf(a);if(i!==null&&H5(i),i=YN(t,r,s,n),i===null&&a0(t,r,n,Mg,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else a0(t,r,n,null,s)}}var Mg=null;function YN(t,r,s,n){if(Mg=null,t=x2(n),t=lc(t),t!==null)if(r=ed(t),r===null)t=null;else if(s=r.tag,s===13){if(t=$5(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Mg=t,null}function X5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eG()){case g2:return 1;case U5:return 4;case Og:case tG:return 16;case q5:return 536870912;default:return 16}default:return 16}}var mo=null,b2=null,ag=null;function Z5(){if(ag)return ag;var t,r=b2,s=r.length,n,a="value"in mo?mo.value:mo.textContent,i=a.length;for(t=0;t<s&&r[t]===a[t];t++);var l=s-t;for(n=1;n<=l&&r[s-n]===a[i-n];n++);return ag=a.slice(t,1<n?1-n:void 0)}function ig(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function px(){return!0}function dA(){return!1}function ya(t){function r(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?px:dA,this.isPropagationStopped=dA,this}return ns(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=px)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=px)},persist:function(){},isPersistent:px}),r}var gm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N2=ya(gm),Sf=ns({},gm,{view:0,detail:0}),pG=ya(Sf),Qb,Xb,Qm,qy=ns({},Sf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qm&&(Qm&&t.type==="mousemove"?(Qb=t.screenX-Qm.screenX,Xb=t.screenY-Qm.screenY):Xb=Qb=0,Qm=t),Qb)},movementY:function(t){return"movementY"in t?t.movementY:Xb}}),uA=ya(qy),fG=ns({},qy,{dataTransfer:0}),xG=ya(fG),gG=ns({},Sf,{relatedTarget:0}),Zb=ya(gG),vG=ns({},gm,{animationName:0,elapsedTime:0,pseudoElement:0}),yG=ya(vG),jG=ns({},gm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bG=ya(jG),NG=ns({},gm,{data:0}),mA=ya(NG),wG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PG(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=CG[t])?!!r[t]:!1}function w2(){return PG}var kG=ns({},Sf,{key:function(t){if(t.key){var r=wG[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ig(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w2,charCode:function(t){return t.type==="keypress"?ig(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ig(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AG=ya(kG),_G=ns({},qy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hA=ya(_G),TG=ns({},Sf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w2}),OG=ya(TG),EG=ns({},gm,{propertyName:0,elapsedTime:0,pseudoElement:0}),DG=ya(EG),MG=ns({},qy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),IG=ya(MG),RG=[9,13,27,32],S2=Nl&&"CompositionEvent"in window,Mh=null;Nl&&"documentMode"in document&&(Mh=document.documentMode);var FG=Nl&&"TextEvent"in window&&!Mh,J5=Nl&&(!S2||Mh&&8<Mh&&11>=Mh),pA=" ",fA=!1;function e6(t,r){switch(t){case"keyup":return RG.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ed=!1;function $G(t,r){switch(t){case"compositionend":return t6(r);case"keypress":return r.which!==32?null:(fA=!0,pA);case"textInput":return t=r.data,t===pA&&fA?null:t;default:return null}}function LG(t,r){if(Ed)return t==="compositionend"||!S2&&e6(t,r)?(t=Z5(),ag=b2=mo=null,Ed=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return J5&&r.locale!=="ko"?null:r.data;default:return null}}var BG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xA(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!BG[t.type]:r==="textarea"}function r6(t,r,s,n){D5(n),r=Ig(r,"onChange"),0<r.length&&(s=new N2("onChange","change",null,s,n),t.push({event:s,listeners:r}))}var Ih=null,ap=null;function VG(t){h6(t,0)}function zy(t){var r=Id(t);if(P5(r))return t}function UG(t,r){if(t==="change")return r}var s6=!1;if(Nl){var Jb;if(Nl){var e0="oninput"in document;if(!e0){var gA=document.createElement("div");gA.setAttribute("oninput","return;"),e0=typeof gA.oninput=="function"}Jb=e0}else Jb=!1;s6=Jb&&(!document.documentMode||9<document.documentMode)}function vA(){Ih&&(Ih.detachEvent("onpropertychange",n6),ap=Ih=null)}function n6(t){if(t.propertyName==="value"&&zy(ap)){var r=[];r6(r,ap,t,x2(t)),F5(VG,r)}}function qG(t,r,s){t==="focusin"?(vA(),Ih=r,ap=s,Ih.attachEvent("onpropertychange",n6)):t==="focusout"&&vA()}function zG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zy(ap)}function KG(t,r){if(t==="click")return zy(r)}function HG(t,r){if(t==="input"||t==="change")return zy(r)}function WG(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var ci=typeof Object.is=="function"?Object.is:WG;function ip(t,r){if(ci(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),n=Object.keys(r);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!ON.call(r,a)||!ci(t[a],r[a]))return!1}return!0}function yA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jA(t,r){var s=yA(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=r&&n>=r)return{node:s,offset:r-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=yA(s)}}function a6(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?a6(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function i6(){for(var t=window,r=Ag();r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=Ag(t.document)}return r}function C2(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function GG(t){var r=i6(),s=t.focusedElem,n=t.selectionRange;if(r!==s&&s&&s.ownerDocument&&a6(s.ownerDocument.documentElement,s)){if(n!==null&&C2(s)){if(r=n.start,t=n.end,t===void 0&&(t=r),"selectionStart"in s)s.selectionStart=r,s.selectionEnd=Math.min(t,s.value.length);else if(t=(r=s.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!t.extend&&i>n&&(a=n,n=i,i=a),a=jA(s,i);var l=jA(s,n);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(r=r.createRange(),r.setStart(a.node,a.offset),t.removeAllRanges(),i>n?(t.addRange(r),t.extend(l.node,l.offset)):(r.setEnd(l.node,l.offset),t.addRange(r)))}}for(r=[],t=s;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<r.length;s++)t=r[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YG=Nl&&"documentMode"in document&&11>=document.documentMode,Dd=null,QN=null,Rh=null,XN=!1;function bA(t,r,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;XN||Dd==null||Dd!==Ag(n)||(n=Dd,"selectionStart"in n&&C2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rh&&ip(Rh,n)||(Rh=n,n=Ig(QN,"onSelect"),0<n.length&&(r=new N2("onSelect","select",null,r,s),t.push({event:r,listeners:n}),r.target=Dd)))}function fx(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Md={animationend:fx("Animation","AnimationEnd"),animationiteration:fx("Animation","AnimationIteration"),animationstart:fx("Animation","AnimationStart"),transitionend:fx("Transition","TransitionEnd")},t0={},l6={};Nl&&(l6=document.createElement("div").style,"AnimationEvent"in window||(delete Md.animationend.animation,delete Md.animationiteration.animation,delete Md.animationstart.animation),"TransitionEvent"in window||delete Md.transitionend.transition);function Ky(t){if(t0[t])return t0[t];if(!Md[t])return t;var r=Md[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in l6)return t0[t]=r[s];return t}var o6=Ky("animationend"),c6=Ky("animationiteration"),d6=Ky("animationstart"),u6=Ky("transitionend"),m6=new Map,NA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lo(t,r){m6.set(t,r),Jc(r,[t])}for(var r0=0;r0<NA.length;r0++){var s0=NA[r0],QG=s0.toLowerCase(),XG=s0[0].toUpperCase()+s0.slice(1);Lo(QG,"on"+XG)}Lo(o6,"onAnimationEnd");Lo(c6,"onAnimationIteration");Lo(d6,"onAnimationStart");Lo("dblclick","onDoubleClick");Lo("focusin","onFocus");Lo("focusout","onBlur");Lo(u6,"onTransitionEnd");Nu("onMouseEnter",["mouseout","mouseover"]);Nu("onMouseLeave",["mouseout","mouseover"]);Nu("onPointerEnter",["pointerout","pointerover"]);Nu("onPointerLeave",["pointerout","pointerover"]);Jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sh));function wA(t,r,s){var n=t.type||"unknown-event";t.currentTarget=s,QW(n,r,void 0,t),t.currentTarget=null}function h6(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],a=n.event;n=n.listeners;e:{var i=void 0;if(r)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;wA(a,o,d),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;wA(a,o,d),i=c}}}if(Tg)throw t=HN,Tg=!1,HN=null,t}function Vr(t,r){var s=r[rw];s===void 0&&(s=r[rw]=new Set);var n=t+"__bubble";s.has(n)||(p6(r,t,2,!1),s.add(n))}function n0(t,r,s){var n=0;r&&(n|=4),p6(s,t,n,r)}var xx="_reactListening"+Math.random().toString(36).slice(2);function lp(t){if(!t[xx]){t[xx]=!0,b5.forEach(function(s){s!=="selectionchange"&&(ZG.has(s)||n0(s,!1,t),n0(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[xx]||(r[xx]=!0,n0("selectionchange",!1,r))}}function p6(t,r,s,n){switch(X5(r)){case 1:var a=mG;break;case 4:a=hG;break;default:a=j2}s=a.bind(null,r,s,t),a=void 0,!KN||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(r,s,{capture:!0,passive:a}):t.addEventListener(r,s,!0):a!==void 0?t.addEventListener(r,s,{passive:a}):t.addEventListener(r,s,!1)}function a0(t,r,s,n,a){var i=n;if(!(r&1)&&!(r&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=lc(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}F5(function(){var d=i,u=x2(s),m=[];e:{var h=m6.get(t);if(h!==void 0){var g=N2,x=t;switch(t){case"keypress":if(ig(s)===0)break e;case"keydown":case"keyup":g=AG;break;case"focusin":x="focus",g=Zb;break;case"focusout":x="blur",g=Zb;break;case"beforeblur":case"afterblur":g=Zb;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=uA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=xG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=OG;break;case o6:case c6:case d6:g=yG;break;case u6:g=DG;break;case"scroll":g=pG;break;case"wheel":g=IG;break;case"copy":case"cut":case"paste":g=bG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=hA}var p=(r&4)!==0,y=!p&&t==="scroll",v=p?h!==null?h+"Capture":null:h;p=[];for(var f=d,b;f!==null;){b=f;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,v!==null&&(N=tp(f,v),N!=null&&p.push(op(f,N,b)))),y)break;f=f.return}0<p.length&&(h=new g(h,x,null,s,u),m.push({event:h,listeners:p}))}}if(!(r&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&s!==qN&&(x=s.relatedTarget||s.fromElement)&&(lc(x)||x[wl]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(x=s.relatedTarget||s.toElement,g=d,x=x?lc(x):null,x!==null&&(y=ed(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(p=uA,N="onMouseLeave",v="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(p=hA,N="onPointerLeave",v="onPointerEnter",f="pointer"),y=g==null?h:Id(g),b=x==null?h:Id(x),h=new p(N,f+"leave",g,s,u),h.target=y,h.relatedTarget=b,N=null,lc(u)===d&&(p=new p(v,f+"enter",x,s,u),p.target=b,p.relatedTarget=y,N=p),y=N,g&&x)t:{for(p=g,v=x,f=0,b=p;b;b=xd(b))f++;for(b=0,N=v;N;N=xd(N))b++;for(;0<f-b;)p=xd(p),f--;for(;0<b-f;)v=xd(v),b--;for(;f--;){if(p===v||v!==null&&p===v.alternate)break t;p=xd(p),v=xd(v)}p=null}else p=null;g!==null&&SA(m,h,g,p,!1),x!==null&&y!==null&&SA(m,y,x,p,!0)}}e:{if(h=d?Id(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var w=UG;else if(xA(h))if(s6)w=HG;else{w=zG;var C=qG}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=KG);if(w&&(w=w(t,d))){r6(m,w,s,u);break e}C&&C(t,h,d),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&$N(h,"number",h.value)}switch(C=d?Id(d):window,t){case"focusin":(xA(C)||C.contentEditable==="true")&&(Dd=C,QN=d,Rh=null);break;case"focusout":Rh=QN=Dd=null;break;case"mousedown":XN=!0;break;case"contextmenu":case"mouseup":case"dragend":XN=!1,bA(m,s,u);break;case"selectionchange":if(YG)break;case"keydown":case"keyup":bA(m,s,u)}var P;if(S2)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ed?e6(t,s)&&(S="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(S="onCompositionStart");S&&(J5&&s.locale!=="ko"&&(Ed||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ed&&(P=Z5()):(mo=u,b2="value"in mo?mo.value:mo.textContent,Ed=!0)),C=Ig(d,S),0<C.length&&(S=new mA(S,t,null,s,u),m.push({event:S,listeners:C}),P?S.data=P:(P=t6(s),P!==null&&(S.data=P)))),(P=FG?$G(t,s):LG(t,s))&&(d=Ig(d,"onBeforeInput"),0<d.length&&(u=new mA("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:d}),u.data=P))}h6(m,r)})}function op(t,r,s){return{instance:t,listener:r,currentTarget:s}}function Ig(t,r){for(var s=r+"Capture",n=[];t!==null;){var a=t,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=tp(t,s),i!=null&&n.unshift(op(t,i,a)),i=tp(t,r),i!=null&&n.push(op(t,i,a))),t=t.return}return n}function xd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SA(t,r,s,n,a){for(var i=r._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,d=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&d!==null&&(o=d,a?(c=tp(s,i),c!=null&&l.unshift(op(s,c,o))):a||(c=tp(s,i),c!=null&&l.push(op(s,c,o)))),s=s.return}l.length!==0&&t.push({event:r,listeners:l})}var JG=/\r\n?/g,eY=/\u0000|\uFFFD/g;function CA(t){return(typeof t=="string"?t:""+t).replace(JG,`
`).replace(eY,"")}function gx(t,r,s){if(r=CA(r),CA(t)!==r&&s)throw Error(Ke(425))}function Rg(){}var ZN=null,JN=null;function ew(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var tw=typeof setTimeout=="function"?setTimeout:void 0,tY=typeof clearTimeout=="function"?clearTimeout:void 0,PA=typeof Promise=="function"?Promise:void 0,rY=typeof queueMicrotask=="function"?queueMicrotask:typeof PA<"u"?function(t){return PA.resolve(null).then(t).catch(sY)}:tw;function sY(t){setTimeout(function(){throw t})}function i0(t,r){var s=r,n=0;do{var a=s.nextSibling;if(t.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){t.removeChild(a),np(r);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);np(r)}function vo(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function kA(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(r===0)return t;r--}else s==="/$"&&r++}t=t.previousSibling}return null}var vm=Math.random().toString(36).slice(2),Ci="__reactFiber$"+vm,cp="__reactProps$"+vm,wl="__reactContainer$"+vm,rw="__reactEvents$"+vm,nY="__reactListeners$"+vm,aY="__reactHandles$"+vm;function lc(t){var r=t[Ci];if(r)return r;for(var s=t.parentNode;s;){if(r=s[wl]||s[Ci]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=kA(t);t!==null;){if(s=t[Ci])return s;t=kA(t)}return r}t=s,s=t.parentNode}return null}function Cf(t){return t=t[Ci]||t[wl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Id(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ke(33))}function Hy(t){return t[cp]||null}var sw=[],Rd=-1;function Bo(t){return{current:t}}function zr(t){0>Rd||(t.current=sw[Rd],sw[Rd]=null,Rd--)}function Rr(t,r){Rd++,sw[Rd]=t.current,t.current=r}var ko={},mn=Bo(ko),Vn=Bo(!1),_c=ko;function wu(t,r){var s=t.type.contextTypes;if(!s)return ko;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===r)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=r[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),a}function Un(t){return t=t.childContextTypes,t!=null}function Fg(){zr(Vn),zr(mn)}function AA(t,r,s){if(mn.current!==ko)throw Error(Ke(168));Rr(mn,r),Rr(Vn,s)}function f6(t,r,s){var n=t.stateNode;if(r=r.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in r))throw Error(Ke(108,qW(t)||"Unknown",a));return ns({},s,n)}function $g(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ko,_c=mn.current,Rr(mn,t),Rr(Vn,Vn.current),!0}function _A(t,r,s){var n=t.stateNode;if(!n)throw Error(Ke(169));s?(t=f6(t,r,_c),n.__reactInternalMemoizedMergedChildContext=t,zr(Vn),zr(mn),Rr(mn,t)):zr(Vn),Rr(Vn,s)}var il=null,Wy=!1,l0=!1;function x6(t){il===null?il=[t]:il.push(t)}function iY(t){Wy=!0,x6(t)}function Vo(){if(!l0&&il!==null){l0=!0;var t=0,r=Pr;try{var s=il;for(Pr=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}il=null,Wy=!1}catch(a){throw il!==null&&(il=il.slice(t+1)),V5(g2,Vo),a}finally{Pr=r,l0=!1}}return null}var Fd=[],$d=0,Lg=null,Bg=0,Pa=[],ka=0,Tc=null,ul=1,ml="";function Jo(t,r){Fd[$d++]=Bg,Fd[$d++]=Lg,Lg=t,Bg=r}function g6(t,r,s){Pa[ka++]=ul,Pa[ka++]=ml,Pa[ka++]=Tc,Tc=t;var n=ul;t=ml;var a=32-ni(n)-1;n&=~(1<<a),s+=1;var i=32-ni(r)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,ul=1<<32-ni(r)+a|s<<a|n,ml=i+t}else ul=1<<i|s<<a|n,ml=t}function P2(t){t.return!==null&&(Jo(t,1),g6(t,1,0))}function k2(t){for(;t===Lg;)Lg=Fd[--$d],Fd[$d]=null,Bg=Fd[--$d],Fd[$d]=null;for(;t===Tc;)Tc=Pa[--ka],Pa[ka]=null,ml=Pa[--ka],Pa[ka]=null,ul=Pa[--ka],Pa[ka]=null}var la=null,aa=null,Qr=!1,Ga=null;function v6(t,r){var s=_a(5,null,null,0);s.elementType="DELETED",s.stateNode=r,s.return=t,r=t.deletions,r===null?(t.deletions=[s],t.flags|=16):r.push(s)}function TA(t,r){switch(t.tag){case 5:var s=t.type;return r=r.nodeType!==1||s.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,la=t,aa=vo(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,la=t,aa=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(s=Tc!==null?{id:ul,overflow:ml}:null,t.memoizedState={dehydrated:r,treeContext:s,retryLane:1073741824},s=_a(18,null,null,0),s.stateNode=r,s.return=t,t.child=s,la=t,aa=null,!0):!1;default:return!1}}function nw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aw(t){if(Qr){var r=aa;if(r){var s=r;if(!TA(t,r)){if(nw(t))throw Error(Ke(418));r=vo(s.nextSibling);var n=la;r&&TA(t,r)?v6(n,s):(t.flags=t.flags&-4097|2,Qr=!1,la=t)}}else{if(nw(t))throw Error(Ke(418));t.flags=t.flags&-4097|2,Qr=!1,la=t}}}function OA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;la=t}function vx(t){if(t!==la)return!1;if(!Qr)return OA(t),Qr=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!ew(t.type,t.memoizedProps)),r&&(r=aa)){if(nw(t))throw y6(),Error(Ke(418));for(;r;)v6(t,r),r=vo(r.nextSibling)}if(OA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ke(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(r===0){aa=vo(t.nextSibling);break e}r--}else s!=="$"&&s!=="$!"&&s!=="$?"||r++}t=t.nextSibling}aa=null}}else aa=la?vo(t.stateNode.nextSibling):null;return!0}function y6(){for(var t=aa;t;)t=vo(t.nextSibling)}function Su(){aa=la=null,Qr=!1}function A2(t){Ga===null?Ga=[t]:Ga.push(t)}var lY=Dl.ReactCurrentBatchConfig;function Xm(t,r,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Ke(309));var n=s.stateNode}if(!n)throw Error(Ke(147,t));var a=n,i=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===i?r.ref:(r=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},r._stringRef=i,r)}if(typeof t!="string")throw Error(Ke(284));if(!s._owner)throw Error(Ke(290,t))}return t}function yx(t,r){throw t=Object.prototype.toString.call(r),Error(Ke(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function EA(t){var r=t._init;return r(t._payload)}function j6(t){function r(v,f){if(t){var b=v.deletions;b===null?(v.deletions=[f],v.flags|=16):b.push(f)}}function s(v,f){if(!t)return null;for(;f!==null;)r(v,f),f=f.sibling;return null}function n(v,f){for(v=new Map;f!==null;)f.key!==null?v.set(f.key,f):v.set(f.index,f),f=f.sibling;return v}function a(v,f){return v=No(v,f),v.index=0,v.sibling=null,v}function i(v,f,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<f?(v.flags|=2,f):b):(v.flags|=2,f)):(v.flags|=1048576,f)}function l(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,f,b,N){return f===null||f.tag!==6?(f=p0(b,v.mode,N),f.return=v,f):(f=a(f,b),f.return=v,f)}function c(v,f,b,N){var w=b.type;return w===Od?u(v,f,b.props.children,N,b.key):f!==null&&(f.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gl&&EA(w)===f.type)?(N=a(f,b.props),N.ref=Xm(v,f,b),N.return=v,N):(N=hg(b.type,b.key,b.props,null,v.mode,N),N.ref=Xm(v,f,b),N.return=v,N)}function d(v,f,b,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==b.containerInfo||f.stateNode.implementation!==b.implementation?(f=f0(b,v.mode,N),f.return=v,f):(f=a(f,b.children||[]),f.return=v,f)}function u(v,f,b,N,w){return f===null||f.tag!==7?(f=Cc(b,v.mode,N,w),f.return=v,f):(f=a(f,b),f.return=v,f)}function m(v,f,b){if(typeof f=="string"&&f!==""||typeof f=="number")return f=p0(""+f,v.mode,b),f.return=v,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ox:return b=hg(f.type,f.key,f.props,null,v.mode,b),b.ref=Xm(v,null,f),b.return=v,b;case Td:return f=f0(f,v.mode,b),f.return=v,f;case Gl:var N=f._init;return m(v,N(f._payload),b)}if(Nh(f)||Hm(f))return f=Cc(f,v.mode,b,null),f.return=v,f;yx(v,f)}return null}function h(v,f,b,N){var w=f!==null?f.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:o(v,f,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ox:return b.key===w?c(v,f,b,N):null;case Td:return b.key===w?d(v,f,b,N):null;case Gl:return w=b._init,h(v,f,w(b._payload),N)}if(Nh(b)||Hm(b))return w!==null?null:u(v,f,b,N,null);yx(v,b)}return null}function g(v,f,b,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(b)||null,o(f,v,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ox:return v=v.get(N.key===null?b:N.key)||null,c(f,v,N,w);case Td:return v=v.get(N.key===null?b:N.key)||null,d(f,v,N,w);case Gl:var C=N._init;return g(v,f,b,C(N._payload),w)}if(Nh(N)||Hm(N))return v=v.get(b)||null,u(f,v,N,w,null);yx(f,N)}return null}function x(v,f,b,N){for(var w=null,C=null,P=f,S=f=0,A=null;P!==null&&S<b.length;S++){P.index>S?(A=P,P=null):A=P.sibling;var k=h(v,P,b[S],N);if(k===null){P===null&&(P=A);break}t&&P&&k.alternate===null&&r(v,P),f=i(k,f,S),C===null?w=k:C.sibling=k,C=k,P=A}if(S===b.length)return s(v,P),Qr&&Jo(v,S),w;if(P===null){for(;S<b.length;S++)P=m(v,b[S],N),P!==null&&(f=i(P,f,S),C===null?w=P:C.sibling=P,C=P);return Qr&&Jo(v,S),w}for(P=n(v,P);S<b.length;S++)A=g(P,v,S,b[S],N),A!==null&&(t&&A.alternate!==null&&P.delete(A.key===null?S:A.key),f=i(A,f,S),C===null?w=A:C.sibling=A,C=A);return t&&P.forEach(function(D){return r(v,D)}),Qr&&Jo(v,S),w}function p(v,f,b,N){var w=Hm(b);if(typeof w!="function")throw Error(Ke(150));if(b=w.call(b),b==null)throw Error(Ke(151));for(var C=w=null,P=f,S=f=0,A=null,k=b.next();P!==null&&!k.done;S++,k=b.next()){P.index>S?(A=P,P=null):A=P.sibling;var D=h(v,P,k.value,N);if(D===null){P===null&&(P=A);break}t&&P&&D.alternate===null&&r(v,P),f=i(D,f,S),C===null?w=D:C.sibling=D,C=D,P=A}if(k.done)return s(v,P),Qr&&Jo(v,S),w;if(P===null){for(;!k.done;S++,k=b.next())k=m(v,k.value,N),k!==null&&(f=i(k,f,S),C===null?w=k:C.sibling=k,C=k);return Qr&&Jo(v,S),w}for(P=n(v,P);!k.done;S++,k=b.next())k=g(P,v,S,k.value,N),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?S:k.key),f=i(k,f,S),C===null?w=k:C.sibling=k,C=k);return t&&P.forEach(function(q){return r(v,q)}),Qr&&Jo(v,S),w}function y(v,f,b,N){if(typeof b=="object"&&b!==null&&b.type===Od&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ox:e:{for(var w=b.key,C=f;C!==null;){if(C.key===w){if(w=b.type,w===Od){if(C.tag===7){s(v,C.sibling),f=a(C,b.props.children),f.return=v,v=f;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gl&&EA(w)===C.type){s(v,C.sibling),f=a(C,b.props),f.ref=Xm(v,C,b),f.return=v,v=f;break e}s(v,C);break}else r(v,C);C=C.sibling}b.type===Od?(f=Cc(b.props.children,v.mode,N,b.key),f.return=v,v=f):(N=hg(b.type,b.key,b.props,null,v.mode,N),N.ref=Xm(v,f,b),N.return=v,v=N)}return l(v);case Td:e:{for(C=b.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===b.containerInfo&&f.stateNode.implementation===b.implementation){s(v,f.sibling),f=a(f,b.children||[]),f.return=v,v=f;break e}else{s(v,f);break}else r(v,f);f=f.sibling}f=f0(b,v.mode,N),f.return=v,v=f}return l(v);case Gl:return C=b._init,y(v,f,C(b._payload),N)}if(Nh(b))return x(v,f,b,N);if(Hm(b))return p(v,f,b,N);yx(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,f!==null&&f.tag===6?(s(v,f.sibling),f=a(f,b),f.return=v,v=f):(s(v,f),f=p0(b,v.mode,N),f.return=v,v=f),l(v)):s(v,f)}return y}var Cu=j6(!0),b6=j6(!1),Vg=Bo(null),Ug=null,Ld=null,_2=null;function T2(){_2=Ld=Ug=null}function O2(t){var r=Vg.current;zr(Vg),t._currentValue=r}function iw(t,r,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,n!==null&&(n.childLanes|=r)):n!==null&&(n.childLanes&r)!==r&&(n.childLanes|=r),t===s)break;t=t.return}}function Zd(t,r){Ug=t,_2=Ld=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Fn=!0),t.firstContext=null)}function Da(t){var r=t._currentValue;if(_2!==t)if(t={context:t,memoizedValue:r,next:null},Ld===null){if(Ug===null)throw Error(Ke(308));Ld=t,Ug.dependencies={lanes:0,firstContext:t}}else Ld=Ld.next=t;return r}var oc=null;function E2(t){oc===null?oc=[t]:oc.push(t)}function N6(t,r,s,n){var a=r.interleaved;return a===null?(s.next=s,E2(r)):(s.next=a.next,a.next=s),r.interleaved=s,Sl(t,n)}function Sl(t,r){t.lanes|=r;var s=t.alternate;for(s!==null&&(s.lanes|=r),s=t,t=t.return;t!==null;)t.childLanes|=r,s=t.alternate,s!==null&&(s.childLanes|=r),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Yl=!1;function D2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w6(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xl(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function yo(t,r,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,mr&2){var a=n.pending;return a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r,Sl(t,s)}return a=n.interleaved,a===null?(r.next=r,E2(n)):(r.next=a.next,a.next=r),n.interleaved=r,Sl(t,s)}function lg(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194240)!==0)){var n=r.lanes;n&=t.pendingLanes,s|=n,r.lanes=s,v2(t,s)}}function DA(t,r){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=r:i=i.next=r}else a=i=r;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}function qg(t,r,s,n){var a=t.updateQueue;Yl=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,l===null?i=d:l.next=d,l=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==l&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;l=0,u=d=c=null,o=i;do{var h=o.lane,g=o.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var x=t,p=o;switch(h=r,g=s,p.tag){case 1:if(x=p.payload,typeof x=="function"){m=x.call(g,m,h);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,h=typeof x=="function"?x.call(g,m,h):x,h==null)break e;m=ns({},m,h);break e;case 2:Yl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=g,c=m):u=u.next=g,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,r=a.shared.interleaved,r!==null){a=r;do l|=a.lane,a=a.next;while(a!==r)}else i===null&&(a.shared.lanes=0);Ec|=l,t.lanes=l,t.memoizedState=m}}function MA(t,r,s){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var n=t[r],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(Ke(191,a));a.call(n)}}}var Pf={},Di=Bo(Pf),dp=Bo(Pf),up=Bo(Pf);function cc(t){if(t===Pf)throw Error(Ke(174));return t}function M2(t,r){switch(Rr(up,r),Rr(dp,t),Rr(Di,Pf),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:BN(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=BN(r,t)}zr(Di),Rr(Di,r)}function Pu(){zr(Di),zr(dp),zr(up)}function S6(t){cc(up.current);var r=cc(Di.current),s=BN(r,t.type);r!==s&&(Rr(dp,t),Rr(Di,s))}function I2(t){dp.current===t&&(zr(Di),zr(dp))}var rs=Bo(0);function zg(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var o0=[];function R2(){for(var t=0;t<o0.length;t++)o0[t]._workInProgressVersionPrimary=null;o0.length=0}var og=Dl.ReactCurrentDispatcher,c0=Dl.ReactCurrentBatchConfig,Oc=0,ss=null,ks=null,Ls=null,Kg=!1,Fh=!1,mp=0,oY=0;function sn(){throw Error(Ke(321))}function F2(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!ci(t[s],r[s]))return!1;return!0}function $2(t,r,s,n,a,i){if(Oc=i,ss=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,og.current=t===null||t.memoizedState===null?mY:hY,t=s(n,a),Fh){i=0;do{if(Fh=!1,mp=0,25<=i)throw Error(Ke(301));i+=1,Ls=ks=null,r.updateQueue=null,og.current=pY,t=s(n,a)}while(Fh)}if(og.current=Hg,r=ks!==null&&ks.next!==null,Oc=0,Ls=ks=ss=null,Kg=!1,r)throw Error(Ke(300));return t}function L2(){var t=mp!==0;return mp=0,t}function bi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?ss.memoizedState=Ls=t:Ls=Ls.next=t,Ls}function Ma(){if(ks===null){var t=ss.alternate;t=t!==null?t.memoizedState:null}else t=ks.next;var r=Ls===null?ss.memoizedState:Ls.next;if(r!==null)Ls=r,ks=t;else{if(t===null)throw Error(Ke(310));ks=t,t={memoizedState:ks.memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},Ls===null?ss.memoizedState=Ls=t:Ls=Ls.next=t}return Ls}function hp(t,r){return typeof r=="function"?r(t):r}function d0(t){var r=Ma(),s=r.queue;if(s===null)throw Error(Ke(311));s.lastRenderedReducer=t;var n=ks,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((Oc&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,l=n):c=c.next=m,ss.lanes|=u,Ec|=u}d=d.next}while(d!==null&&d!==i);c===null?l=n:c.next=o,ci(n,r.memoizedState)||(Fn=!0),r.memoizedState=n,r.baseState=l,r.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){a=t;do i=a.lane,ss.lanes|=i,Ec|=i,a=a.next;while(a!==t)}else a===null&&(s.lanes=0);return[r.memoizedState,s.dispatch]}function u0(t){var r=Ma(),s=r.queue;if(s===null)throw Error(Ke(311));s.lastRenderedReducer=t;var n=s.dispatch,a=s.pending,i=r.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=t(i,l.action),l=l.next;while(l!==a);ci(i,r.memoizedState)||(Fn=!0),r.memoizedState=i,r.baseQueue===null&&(r.baseState=i),s.lastRenderedState=i}return[i,n]}function C6(){}function P6(t,r){var s=ss,n=Ma(),a=r(),i=!ci(n.memoizedState,a);if(i&&(n.memoizedState=a,Fn=!0),n=n.queue,B2(_6.bind(null,s,n,t),[t]),n.getSnapshot!==r||i||Ls!==null&&Ls.memoizedState.tag&1){if(s.flags|=2048,pp(9,A6.bind(null,s,n,a,r),void 0,null),qs===null)throw Error(Ke(349));Oc&30||k6(s,r,a)}return a}function k6(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=ss.updateQueue,r===null?(r={lastEffect:null,stores:null},ss.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function A6(t,r,s,n){r.value=s,r.getSnapshot=n,T6(r)&&O6(t)}function _6(t,r,s){return s(function(){T6(r)&&O6(t)})}function T6(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!ci(t,s)}catch{return!0}}function O6(t){var r=Sl(t,1);r!==null&&ai(r,t,1,-1)}function IA(t){var r=bi();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:t},r.queue=t,t=t.dispatch=uY.bind(null,ss,t),[r.memoizedState,t]}function pp(t,r,s,n){return t={tag:t,create:r,destroy:s,deps:n,next:null},r=ss.updateQueue,r===null?(r={lastEffect:null,stores:null},ss.updateQueue=r,r.lastEffect=t.next=t):(s=r.lastEffect,s===null?r.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,r.lastEffect=t)),t}function E6(){return Ma().memoizedState}function cg(t,r,s,n){var a=bi();ss.flags|=t,a.memoizedState=pp(1|r,s,void 0,n===void 0?null:n)}function Gy(t,r,s,n){var a=Ma();n=n===void 0?null:n;var i=void 0;if(ks!==null){var l=ks.memoizedState;if(i=l.destroy,n!==null&&F2(n,l.deps)){a.memoizedState=pp(r,s,i,n);return}}ss.flags|=t,a.memoizedState=pp(1|r,s,i,n)}function RA(t,r){return cg(8390656,8,t,r)}function B2(t,r){return Gy(2048,8,t,r)}function D6(t,r){return Gy(4,2,t,r)}function M6(t,r){return Gy(4,4,t,r)}function I6(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function R6(t,r,s){return s=s!=null?s.concat([t]):null,Gy(4,4,I6.bind(null,r,t),s)}function V2(){}function F6(t,r){var s=Ma();r=r===void 0?null:r;var n=s.memoizedState;return n!==null&&r!==null&&F2(r,n[1])?n[0]:(s.memoizedState=[t,r],t)}function $6(t,r){var s=Ma();r=r===void 0?null:r;var n=s.memoizedState;return n!==null&&r!==null&&F2(r,n[1])?n[0]:(t=t(),s.memoizedState=[t,r],t)}function L6(t,r,s){return Oc&21?(ci(s,r)||(s=z5(),ss.lanes|=s,Ec|=s,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=s)}function cY(t,r){var s=Pr;Pr=s!==0&&4>s?s:4,t(!0);var n=c0.transition;c0.transition={};try{t(!1),r()}finally{Pr=s,c0.transition=n}}function B6(){return Ma().memoizedState}function dY(t,r,s){var n=bo(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},V6(t))U6(r,s);else if(s=N6(t,r,s,n),s!==null){var a=Cn();ai(s,t,n,a),q6(s,r,n)}}function uY(t,r,s){var n=bo(t),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(V6(t))U6(r,a);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=r.lastRenderedReducer,i!==null))try{var l=r.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,ci(o,l)){var c=r.interleaved;c===null?(a.next=a,E2(r)):(a.next=c.next,c.next=a),r.interleaved=a;return}}catch{}finally{}s=N6(t,r,a,n),s!==null&&(a=Cn(),ai(s,t,n,a),q6(s,r,n))}}function V6(t){var r=t.alternate;return t===ss||r!==null&&r===ss}function U6(t,r){Fh=Kg=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function q6(t,r,s){if(s&4194240){var n=r.lanes;n&=t.pendingLanes,s|=n,r.lanes=s,v2(t,s)}}var Hg={readContext:Da,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},mY={readContext:Da,useCallback:function(t,r){return bi().memoizedState=[t,r===void 0?null:r],t},useContext:Da,useEffect:RA,useImperativeHandle:function(t,r,s){return s=s!=null?s.concat([t]):null,cg(4194308,4,I6.bind(null,r,t),s)},useLayoutEffect:function(t,r){return cg(4194308,4,t,r)},useInsertionEffect:function(t,r){return cg(4,2,t,r)},useMemo:function(t,r){var s=bi();return r=r===void 0?null:r,t=t(),s.memoizedState=[t,r],t},useReducer:function(t,r,s){var n=bi();return r=s!==void 0?s(r):r,n.memoizedState=n.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},n.queue=t,t=t.dispatch=dY.bind(null,ss,t),[n.memoizedState,t]},useRef:function(t){var r=bi();return t={current:t},r.memoizedState=t},useState:IA,useDebugValue:V2,useDeferredValue:function(t){return bi().memoizedState=t},useTransition:function(){var t=IA(!1),r=t[0];return t=cY.bind(null,t[1]),bi().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,s){var n=ss,a=bi();if(Qr){if(s===void 0)throw Error(Ke(407));s=s()}else{if(s=r(),qs===null)throw Error(Ke(349));Oc&30||k6(n,r,s)}a.memoizedState=s;var i={value:s,getSnapshot:r};return a.queue=i,RA(_6.bind(null,n,i,t),[t]),n.flags|=2048,pp(9,A6.bind(null,n,i,s,r),void 0,null),s},useId:function(){var t=bi(),r=qs.identifierPrefix;if(Qr){var s=ml,n=ul;s=(n&~(1<<32-ni(n)-1)).toString(32)+s,r=":"+r+"R"+s,s=mp++,0<s&&(r+="H"+s.toString(32)),r+=":"}else s=oY++,r=":"+r+"r"+s.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},hY={readContext:Da,useCallback:F6,useContext:Da,useEffect:B2,useImperativeHandle:R6,useInsertionEffect:D6,useLayoutEffect:M6,useMemo:$6,useReducer:d0,useRef:E6,useState:function(){return d0(hp)},useDebugValue:V2,useDeferredValue:function(t){var r=Ma();return L6(r,ks.memoizedState,t)},useTransition:function(){var t=d0(hp)[0],r=Ma().memoizedState;return[t,r]},useMutableSource:C6,useSyncExternalStore:P6,useId:B6,unstable_isNewReconciler:!1},pY={readContext:Da,useCallback:F6,useContext:Da,useEffect:B2,useImperativeHandle:R6,useInsertionEffect:D6,useLayoutEffect:M6,useMemo:$6,useReducer:u0,useRef:E6,useState:function(){return u0(hp)},useDebugValue:V2,useDeferredValue:function(t){var r=Ma();return ks===null?r.memoizedState=t:L6(r,ks.memoizedState,t)},useTransition:function(){var t=u0(hp)[0],r=Ma().memoizedState;return[t,r]},useMutableSource:C6,useSyncExternalStore:P6,useId:B6,unstable_isNewReconciler:!1};function Ua(t,r){if(t&&t.defaultProps){r=ns({},r),t=t.defaultProps;for(var s in t)r[s]===void 0&&(r[s]=t[s]);return r}return r}function lw(t,r,s,n){r=t.memoizedState,s=s(n,r),s=s==null?r:ns({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Yy={isMounted:function(t){return(t=t._reactInternals)?ed(t)===t:!1},enqueueSetState:function(t,r,s){t=t._reactInternals;var n=Cn(),a=bo(t),i=xl(n,a);i.payload=r,s!=null&&(i.callback=s),r=yo(t,i,a),r!==null&&(ai(r,t,a,n),lg(r,t,a))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var n=Cn(),a=bo(t),i=xl(n,a);i.tag=1,i.payload=r,s!=null&&(i.callback=s),r=yo(t,i,a),r!==null&&(ai(r,t,a,n),lg(r,t,a))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=Cn(),n=bo(t),a=xl(s,n);a.tag=2,r!=null&&(a.callback=r),r=yo(t,a,n),r!==null&&(ai(r,t,n,s),lg(r,t,n))}};function FA(t,r,s,n,a,i,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,l):r.prototype&&r.prototype.isPureReactComponent?!ip(s,n)||!ip(a,i):!0}function z6(t,r,s){var n=!1,a=ko,i=r.contextType;return typeof i=="object"&&i!==null?i=Da(i):(a=Un(r)?_c:mn.current,n=r.contextTypes,i=(n=n!=null)?wu(t,a):ko),r=new r(s,i),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Yy,t.stateNode=r,r._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=i),r}function $A(t,r,s,n){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,n),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,n),r.state!==t&&Yy.enqueueReplaceState(r,r.state,null)}function ow(t,r,s,n){var a=t.stateNode;a.props=s,a.state=t.memoizedState,a.refs={},D2(t);var i=r.contextType;typeof i=="object"&&i!==null?a.context=Da(i):(i=Un(r)?_c:mn.current,a.context=wu(t,i)),a.state=t.memoizedState,i=r.getDerivedStateFromProps,typeof i=="function"&&(lw(t,r,i,s),a.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&Yy.enqueueReplaceState(a,a.state,null),qg(t,s,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function ku(t,r){try{var s="",n=r;do s+=UW(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:r,stack:a,digest:null}}function m0(t,r,s){return{value:t,source:null,stack:s??null,digest:r??null}}function cw(t,r){try{console.error(r.value)}catch(s){setTimeout(function(){throw s})}}var fY=typeof WeakMap=="function"?WeakMap:Map;function K6(t,r,s){s=xl(-1,s),s.tag=3,s.payload={element:null};var n=r.value;return s.callback=function(){Gg||(Gg=!0,yw=n),cw(t,r)},s}function H6(t,r,s){s=xl(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=r.value;s.payload=function(){return n(a)},s.callback=function(){cw(t,r)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){cw(t,r),typeof n!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})}),s}function LA(t,r,s){var n=t.pingCache;if(n===null){n=t.pingCache=new fY;var a=new Set;n.set(r,a)}else a=n.get(r),a===void 0&&(a=new Set,n.set(r,a));a.has(s)||(a.add(s),t=_Y.bind(null,t,r,s),r.then(t,t))}function BA(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function VA(t,r,s,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===r?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(r=xl(-1,1),r.tag=2,yo(s,r,1))),s.lanes|=1),t)}var xY=Dl.ReactCurrentOwner,Fn=!1;function xn(t,r,s,n){r.child=t===null?b6(r,null,s,n):Cu(r,t.child,s,n)}function UA(t,r,s,n,a){s=s.render;var i=r.ref;return Zd(r,a),n=$2(t,r,s,n,i,a),s=L2(),t!==null&&!Fn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a,Cl(t,r,a)):(Qr&&s&&P2(r),r.flags|=1,xn(t,r,n,a),r.child)}function qA(t,r,s,n,a){if(t===null){var i=s.type;return typeof i=="function"&&!Y2(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(r.tag=15,r.type=i,W6(t,r,i,n,a)):(t=hg(s.type,null,n,r,r.mode,a),t.ref=r.ref,t.return=r,r.child=t)}if(i=t.child,!(t.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:ip,s(l,n)&&t.ref===r.ref)return Cl(t,r,a)}return r.flags|=1,t=No(i,n),t.ref=r.ref,t.return=r,r.child=t}function W6(t,r,s,n,a){if(t!==null){var i=t.memoizedProps;if(ip(i,n)&&t.ref===r.ref)if(Fn=!1,r.pendingProps=n=i,(t.lanes&a)!==0)t.flags&131072&&(Fn=!0);else return r.lanes=t.lanes,Cl(t,r,a)}return dw(t,r,s,n,a)}function G6(t,r,s){var n=r.pendingProps,a=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(Vd,Xn),Xn|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Rr(Vd,Xn),Xn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Rr(Vd,Xn),Xn|=n}else i!==null?(n=i.baseLanes|s,r.memoizedState=null):n=s,Rr(Vd,Xn),Xn|=n;return xn(t,r,a,s),r.child}function Y6(t,r){var s=r.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(r.flags|=512,r.flags|=2097152)}function dw(t,r,s,n,a){var i=Un(s)?_c:mn.current;return i=wu(r,i),Zd(r,a),s=$2(t,r,s,n,i,a),n=L2(),t!==null&&!Fn?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a,Cl(t,r,a)):(Qr&&n&&P2(r),r.flags|=1,xn(t,r,s,a),r.child)}function zA(t,r,s,n,a){if(Un(s)){var i=!0;$g(r)}else i=!1;if(Zd(r,a),r.stateNode===null)dg(t,r),z6(r,s,n),ow(r,s,n,a),n=!0;else if(t===null){var l=r.stateNode,o=r.memoizedProps;l.props=o;var c=l.context,d=s.contextType;typeof d=="object"&&d!==null?d=Da(d):(d=Un(s)?_c:mn.current,d=wu(r,d));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==d)&&$A(r,l,n,d),Yl=!1;var h=r.memoizedState;l.state=h,qg(r,n,l,a),c=r.memoizedState,o!==n||h!==c||Vn.current||Yl?(typeof u=="function"&&(lw(r,s,u,n),c=r.memoizedState),(o=Yl||FA(r,s,o,n,h,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(r.flags|=4194308)):(typeof l.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=n,r.memoizedState=c),l.props=n,l.state=c,l.context=d,n=o):(typeof l.componentDidMount=="function"&&(r.flags|=4194308),n=!1)}else{l=r.stateNode,w6(t,r),o=r.memoizedProps,d=r.type===r.elementType?o:Ua(r.type,o),l.props=d,m=r.pendingProps,h=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Da(c):(c=Un(s)?_c:mn.current,c=wu(r,c));var g=s.getDerivedStateFromProps;(u=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==m||h!==c)&&$A(r,l,n,c),Yl=!1,h=r.memoizedState,l.state=h,qg(r,n,l,a);var x=r.memoizedState;o!==m||h!==x||Vn.current||Yl?(typeof g=="function"&&(lw(r,s,g,n),x=r.memoizedState),(d=Yl||FA(r,s,d,n,h,x,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,x,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,x,c)),typeof l.componentDidUpdate=="function"&&(r.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(r.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(r.flags|=1024),r.memoizedProps=n,r.memoizedState=x),l.props=n,l.state=x,l.context=c,n=d):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(r.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(r.flags|=1024),n=!1)}return uw(t,r,s,n,i,a)}function uw(t,r,s,n,a,i){Y6(t,r);var l=(r.flags&128)!==0;if(!n&&!l)return a&&_A(r,s,!1),Cl(t,r,i);n=r.stateNode,xY.current=r;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return r.flags|=1,t!==null&&l?(r.child=Cu(r,t.child,null,i),r.child=Cu(r,null,o,i)):xn(t,r,o,i),r.memoizedState=n.state,a&&_A(r,s,!0),r.child}function Q6(t){var r=t.stateNode;r.pendingContext?AA(t,r.pendingContext,r.pendingContext!==r.context):r.context&&AA(t,r.context,!1),M2(t,r.containerInfo)}function KA(t,r,s,n,a){return Su(),A2(a),r.flags|=256,xn(t,r,s,n),r.child}var mw={dehydrated:null,treeContext:null,retryLane:0};function hw(t){return{baseLanes:t,cachePool:null,transitions:null}}function X6(t,r,s){var n=r.pendingProps,a=rs.current,i=!1,l=(r.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(i=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Rr(rs,a&1),t===null)return aw(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(l=n.children,t=n.fallback,i?(n=r.mode,i=r.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Zy(l,n,0,null),t=Cc(t,n,s,null),i.return=r,t.return=r,i.sibling=t,r.child=i,r.child.memoizedState=hw(s),r.memoizedState=mw,t):U2(r,l));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return gY(t,r,l,n,o,a,s);if(i){i=n.fallback,l=r.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&r.child!==a?(n=r.child,n.childLanes=0,n.pendingProps=c,r.deletions=null):(n=No(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=No(o,i):(i=Cc(i,l,s,null),i.flags|=2),i.return=r,n.return=r,n.sibling=i,r.child=n,n=i,i=r.child,l=t.child.memoizedState,l=l===null?hw(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=t.childLanes&~s,r.memoizedState=mw,n}return i=t.child,t=i.sibling,n=No(i,{mode:"visible",children:n.children}),!(r.mode&1)&&(n.lanes=s),n.return=r,n.sibling=null,t!==null&&(s=r.deletions,s===null?(r.deletions=[t],r.flags|=16):s.push(t)),r.child=n,r.memoizedState=null,n}function U2(t,r){return r=Zy({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function jx(t,r,s,n){return n!==null&&A2(n),Cu(r,t.child,null,s),t=U2(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function gY(t,r,s,n,a,i,l){if(s)return r.flags&256?(r.flags&=-257,n=m0(Error(Ke(422))),jx(t,r,l,n)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(i=n.fallback,a=r.mode,n=Zy({mode:"visible",children:n.children},a,0,null),i=Cc(i,a,l,null),i.flags|=2,n.return=r,i.return=r,n.sibling=i,r.child=n,r.mode&1&&Cu(r,t.child,null,l),r.child.memoizedState=hw(l),r.memoizedState=mw,i);if(!(r.mode&1))return jx(t,r,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Ke(419)),n=m0(i,n,void 0),jx(t,r,l,n)}if(o=(l&t.childLanes)!==0,Fn||o){if(n=qs,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Sl(t,a),ai(n,t,a,-1))}return G2(),n=m0(Error(Ke(421))),jx(t,r,l,n)}return a.data==="$?"?(r.flags|=128,r.child=t.child,r=TY.bind(null,t),a._reactRetry=r,null):(t=i.treeContext,aa=vo(a.nextSibling),la=r,Qr=!0,Ga=null,t!==null&&(Pa[ka++]=ul,Pa[ka++]=ml,Pa[ka++]=Tc,ul=t.id,ml=t.overflow,Tc=r),r=U2(r,n.children),r.flags|=4096,r)}function HA(t,r,s){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r),iw(t.return,r,s)}function h0(t,r,s,n,a){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=r,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function Z6(t,r,s){var n=r.pendingProps,a=n.revealOrder,i=n.tail;if(xn(t,r,n.children,s),n=rs.current,n&2)n=n&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HA(t,s,r);else if(t.tag===19)HA(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Rr(rs,n),!(r.mode&1))r.memoizedState=null;else switch(a){case"forwards":for(s=r.child,a=null;s!==null;)t=s.alternate,t!==null&&zg(t)===null&&(a=s),s=s.sibling;s=a,s===null?(a=r.child,r.child=null):(a=s.sibling,s.sibling=null),h0(r,!1,a,s,i);break;case"backwards":for(s=null,a=r.child,r.child=null;a!==null;){if(t=a.alternate,t!==null&&zg(t)===null){r.child=a;break}t=a.sibling,a.sibling=s,s=a,a=t}h0(r,!0,s,null,i);break;case"together":h0(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function dg(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Cl(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),Ec|=r.lanes,!(s&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(Ke(153));if(r.child!==null){for(t=r.child,s=No(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=No(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function vY(t,r,s){switch(r.tag){case 3:Q6(r),Su();break;case 5:S6(r);break;case 1:Un(r.type)&&$g(r);break;case 4:M2(r,r.stateNode.containerInfo);break;case 10:var n=r.type._context,a=r.memoizedProps.value;Rr(Vg,n._currentValue),n._currentValue=a;break;case 13:if(n=r.memoizedState,n!==null)return n.dehydrated!==null?(Rr(rs,rs.current&1),r.flags|=128,null):s&r.child.childLanes?X6(t,r,s):(Rr(rs,rs.current&1),t=Cl(t,r,s),t!==null?t.sibling:null);Rr(rs,rs.current&1);break;case 19:if(n=(s&r.childLanes)!==0,t.flags&128){if(n)return Z6(t,r,s);r.flags|=128}if(a=r.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Rr(rs,rs.current),n)break;return null;case 22:case 23:return r.lanes=0,G6(t,r,s)}return Cl(t,r,s)}var J6,pw,eF,tF;J6=function(t,r){for(var s=r.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};pw=function(){};eF=function(t,r,s,n){var a=t.memoizedProps;if(a!==n){t=r.stateNode,cc(Di.current);var i=null;switch(s){case"input":a=RN(t,a),n=RN(t,n),i=[];break;case"select":a=ns({},a,{value:void 0}),n=ns({},n,{value:void 0}),i=[];break;case"textarea":a=LN(t,a),n=LN(t,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Rg)}VN(s,n);var l;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jh.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Vr("scroll",t),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(r.updateQueue=d)&&(r.flags|=4)}};tF=function(t,r,s,n){s!==n&&(r.flags|=4)};function Zm(t,r){if(!Qr)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function nn(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(r)for(var a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=s,r}function yY(t,r,s){var n=r.pendingProps;switch(k2(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(r),null;case 1:return Un(r.type)&&Fg(),nn(r),null;case 3:return n=r.stateNode,Pu(),zr(Vn),zr(mn),R2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vx(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Ga!==null&&(Nw(Ga),Ga=null))),pw(t,r),nn(r),null;case 5:I2(r);var a=cc(up.current);if(s=r.type,t!==null&&r.stateNode!=null)eF(t,r,s,n,a),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!n){if(r.stateNode===null)throw Error(Ke(166));return nn(r),null}if(t=cc(Di.current),vx(r)){n=r.stateNode,s=r.type;var i=r.memoizedProps;switch(n[Ci]=r,n[cp]=i,t=(r.mode&1)!==0,s){case"dialog":Vr("cancel",n),Vr("close",n);break;case"iframe":case"object":case"embed":Vr("load",n);break;case"video":case"audio":for(a=0;a<Sh.length;a++)Vr(Sh[a],n);break;case"source":Vr("error",n);break;case"img":case"image":case"link":Vr("error",n),Vr("load",n);break;case"details":Vr("toggle",n);break;case"input":tA(n,i),Vr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Vr("invalid",n);break;case"textarea":sA(n,i),Vr("invalid",n)}VN(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&gx(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&gx(n.textContent,o,t),a=["children",""+o]):Jh.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Vr("scroll",n)}switch(s){case"input":cx(n),rA(n,i,!0);break;case"textarea":cx(n),nA(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Rg)}n=a,r.updateQueue=n,n!==null&&(r.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_5(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[Ci]=r,t[cp]=n,J6(t,r,!1,!1),r.stateNode=t;e:{switch(l=UN(s,n),s){case"dialog":Vr("cancel",t),Vr("close",t),a=n;break;case"iframe":case"object":case"embed":Vr("load",t),a=n;break;case"video":case"audio":for(a=0;a<Sh.length;a++)Vr(Sh[a],t);a=n;break;case"source":Vr("error",t),a=n;break;case"img":case"image":case"link":Vr("error",t),Vr("load",t),a=n;break;case"details":Vr("toggle",t),a=n;break;case"input":tA(t,n),a=RN(t,n),Vr("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ns({},n,{value:void 0}),Vr("invalid",t);break;case"textarea":sA(t,n),a=LN(t,n),Vr("invalid",t);break;default:a=n}VN(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?E5(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&T5(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ep(t,c):typeof c=="number"&&ep(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Vr("scroll",t):c!=null&&m2(t,i,c,l))}switch(s){case"input":cx(t),rA(t,n,!1);break;case"textarea":cx(t),nA(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Po(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Gd(t,!!n.multiple,i,!1):n.defaultValue!=null&&Gd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Rg)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return nn(r),null;case 6:if(t&&r.stateNode!=null)tF(t,r,t.memoizedProps,n);else{if(typeof n!="string"&&r.stateNode===null)throw Error(Ke(166));if(s=cc(up.current),cc(Di.current),vx(r)){if(n=r.stateNode,s=r.memoizedProps,n[Ci]=r,(i=n.nodeValue!==s)&&(t=la,t!==null))switch(t.tag){case 3:gx(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gx(n.nodeValue,s,(t.mode&1)!==0)}i&&(r.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ci]=r,r.stateNode=n}return nn(r),null;case 13:if(zr(rs),n=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qr&&aa!==null&&r.mode&1&&!(r.flags&128))y6(),Su(),r.flags|=98560,i=!1;else if(i=vx(r),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Ke(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ke(317));i[Ci]=r}else Su(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;nn(r),i=!1}else Ga!==null&&(Nw(Ga),Ga=null),i=!0;if(!i)return r.flags&65536?r:null}return r.flags&128?(r.lanes=s,r):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(r.child.flags|=8192,r.mode&1&&(t===null||rs.current&1?Ts===0&&(Ts=3):G2())),r.updateQueue!==null&&(r.flags|=4),nn(r),null);case 4:return Pu(),pw(t,r),t===null&&lp(r.stateNode.containerInfo),nn(r),null;case 10:return O2(r.type._context),nn(r),null;case 17:return Un(r.type)&&Fg(),nn(r),null;case 19:if(zr(rs),i=r.memoizedState,i===null)return nn(r),null;if(n=(r.flags&128)!==0,l=i.rendering,l===null)if(n)Zm(i,!1);else{if(Ts!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(l=zg(t),l!==null){for(r.flags|=128,Zm(i,!1),n=l.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),r.subtreeFlags=0,n=s,s=r.child;s!==null;)i=s,t=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,t=l.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Rr(rs,rs.current&1|2),r.child}t=t.sibling}i.tail!==null&&xs()>Au&&(r.flags|=128,n=!0,Zm(i,!1),r.lanes=4194304)}else{if(!n)if(t=zg(l),t!==null){if(r.flags|=128,n=!0,s=t.updateQueue,s!==null&&(r.updateQueue=s,r.flags|=4),Zm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!Qr)return nn(r),null}else 2*xs()-i.renderingStartTime>Au&&s!==1073741824&&(r.flags|=128,n=!0,Zm(i,!1),r.lanes=4194304);i.isBackwards?(l.sibling=r.child,r.child=l):(s=i.last,s!==null?s.sibling=l:r.child=l,i.last=l)}return i.tail!==null?(r=i.tail,i.rendering=r,i.tail=r.sibling,i.renderingStartTime=xs(),r.sibling=null,s=rs.current,Rr(rs,n?s&1|2:s&1),r):(nn(r),null);case 22:case 23:return W2(),n=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(r.flags|=8192),n&&r.mode&1?Xn&1073741824&&(nn(r),r.subtreeFlags&6&&(r.flags|=8192)):nn(r),null;case 24:return null;case 25:return null}throw Error(Ke(156,r.tag))}function jY(t,r){switch(k2(r),r.tag){case 1:return Un(r.type)&&Fg(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Pu(),zr(Vn),zr(mn),R2(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return I2(r),null;case 13:if(zr(rs),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(Ke(340));Su()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return zr(rs),null;case 4:return Pu(),null;case 10:return O2(r.type._context),null;case 22:case 23:return W2(),null;case 24:return null;default:return null}}var bx=!1,on=!1,bY=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Bd(t,r){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){os(t,r,n)}else s.current=null}function fw(t,r,s){try{s()}catch(n){os(t,r,n)}}var WA=!1;function NY(t,r){if(ZN=Dg,t=i6(),C2(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=t,h=null;t:for(;;){for(var g;m!==s||a!==0&&m.nodeType!==3||(o=l+a),m!==i||n!==0&&m.nodeType!==3||(c=l+n),m.nodeType===3&&(l+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===t)break t;if(h===s&&++d===a&&(o=l),h===i&&++u===n&&(c=l),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(JN={focusedElem:t,selectionRange:s},Dg=!1,mt=r;mt!==null;)if(r=mt,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,mt=t;else for(;mt!==null;){r=mt;try{var x=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,y=x.memoizedState,v=r.stateNode,f=v.getSnapshotBeforeUpdate(r.elementType===r.type?p:Ua(r.type,p),y);v.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var b=r.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(N){os(r,r.return,N)}if(t=r.sibling,t!==null){t.return=r.return,mt=t;break}mt=r.return}return x=WA,WA=!1,x}function $h(t,r,s){var n=r.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var i=a.destroy;a.destroy=void 0,i!==void 0&&fw(r,s,i)}a=a.next}while(a!==n)}}function Qy(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==r)}}function xw(t){var r=t.ref;if(r!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof r=="function"?r(t):r.current=t}}function rF(t){var r=t.alternate;r!==null&&(t.alternate=null,rF(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Ci],delete r[cp],delete r[rw],delete r[nY],delete r[aY])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sF(t){return t.tag===5||t.tag===3||t.tag===4}function GA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sF(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gw(t,r,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,r?s.nodeType===8?s.parentNode.insertBefore(t,r):s.insertBefore(t,r):(s.nodeType===8?(r=s.parentNode,r.insertBefore(t,s)):(r=s,r.appendChild(t)),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=Rg));else if(n!==4&&(t=t.child,t!==null))for(gw(t,r,s),t=t.sibling;t!==null;)gw(t,r,s),t=t.sibling}function vw(t,r,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vw(t,r,s),t=t.sibling;t!==null;)vw(t,r,s),t=t.sibling}var Qs=null,Ka=!1;function Vl(t,r,s){for(s=s.child;s!==null;)nF(t,r,s),s=s.sibling}function nF(t,r,s){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(Uy,s)}catch{}switch(s.tag){case 5:on||Bd(s,r);case 6:var n=Qs,a=Ka;Qs=null,Vl(t,r,s),Qs=n,Ka=a,Qs!==null&&(Ka?(t=Qs,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Qs.removeChild(s.stateNode));break;case 18:Qs!==null&&(Ka?(t=Qs,s=s.stateNode,t.nodeType===8?i0(t.parentNode,s):t.nodeType===1&&i0(t,s),np(t)):i0(Qs,s.stateNode));break;case 4:n=Qs,a=Ka,Qs=s.stateNode.containerInfo,Ka=!0,Vl(t,r,s),Qs=n,Ka=a;break;case 0:case 11:case 14:case 15:if(!on&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&fw(s,r,l),a=a.next}while(a!==n)}Vl(t,r,s);break;case 1:if(!on&&(Bd(s,r),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){os(s,r,o)}Vl(t,r,s);break;case 21:Vl(t,r,s);break;case 22:s.mode&1?(on=(n=on)||s.memoizedState!==null,Vl(t,r,s),on=n):Vl(t,r,s);break;default:Vl(t,r,s)}}function YA(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new bY),r.forEach(function(n){var a=OY.bind(null,t,n);s.has(n)||(s.add(n),n.then(a,a))})}}function La(t,r){var s=r.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=t,l=r,o=l;e:for(;o!==null;){switch(o.tag){case 5:Qs=o.stateNode,Ka=!1;break e;case 3:Qs=o.stateNode.containerInfo,Ka=!0;break e;case 4:Qs=o.stateNode.containerInfo,Ka=!0;break e}o=o.return}if(Qs===null)throw Error(Ke(160));nF(i,l,a),Qs=null,Ka=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){os(a,r,d)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)aF(r,t),r=r.sibling}function aF(t,r){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(La(r,t),ji(t),n&4){try{$h(3,t,t.return),Qy(3,t)}catch(p){os(t,t.return,p)}try{$h(5,t,t.return)}catch(p){os(t,t.return,p)}}break;case 1:La(r,t),ji(t),n&512&&s!==null&&Bd(s,s.return);break;case 5:if(La(r,t),ji(t),n&512&&s!==null&&Bd(s,s.return),t.flags&32){var a=t.stateNode;try{ep(a,"")}catch(p){os(t,t.return,p)}}if(n&4&&(a=t.stateNode,a!=null)){var i=t.memoizedProps,l=s!==null?s.memoizedProps:i,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&k5(a,i),UN(o,l);var d=UN(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?E5(a,m):u==="dangerouslySetInnerHTML"?T5(a,m):u==="children"?ep(a,m):m2(a,u,m,d)}switch(o){case"input":FN(a,i);break;case"textarea":A5(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Gd(a,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Gd(a,!!i.multiple,i.defaultValue,!0):Gd(a,!!i.multiple,i.multiple?[]:"",!1))}a[cp]=i}catch(p){os(t,t.return,p)}}break;case 6:if(La(r,t),ji(t),n&4){if(t.stateNode===null)throw Error(Ke(162));a=t.stateNode,i=t.memoizedProps;try{a.nodeValue=i}catch(p){os(t,t.return,p)}}break;case 3:if(La(r,t),ji(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{np(r.containerInfo)}catch(p){os(t,t.return,p)}break;case 4:La(r,t),ji(t);break;case 13:La(r,t),ji(t),a=t.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(K2=xs())),n&4&&YA(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(on=(d=on)||u,La(r,t),on=d):La(r,t),ji(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(mt=t,u=t.child;u!==null;){for(m=mt=u;mt!==null;){switch(h=mt,g=h.child,h.tag){case 0:case 11:case 14:case 15:$h(4,h,h.return);break;case 1:Bd(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){n=h,s=h.return;try{r=n,x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(p){os(n,s,p)}}break;case 5:Bd(h,h.return);break;case 22:if(h.memoizedState!==null){XA(m);continue}}g!==null?(g.return=h,mt=g):XA(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=O5("display",l))}catch(p){os(t,t.return,p)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(p){os(t,t.return,p)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:La(r,t),ji(t),n&4&&YA(t);break;case 21:break;default:La(r,t),ji(t)}}function ji(t){var r=t.flags;if(r&2){try{e:{for(var s=t.return;s!==null;){if(sF(s)){var n=s;break e}s=s.return}throw Error(Ke(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ep(a,""),n.flags&=-33);var i=GA(t);vw(t,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=GA(t);gw(t,o,l);break;default:throw Error(Ke(161))}}catch(c){os(t,t.return,c)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function wY(t,r,s){mt=t,iF(t)}function iF(t,r,s){for(var n=(t.mode&1)!==0;mt!==null;){var a=mt,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||bx;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||on;o=bx;var d=on;if(bx=l,(on=c)&&!d)for(mt=a;mt!==null;)l=mt,c=l.child,l.tag===22&&l.memoizedState!==null?ZA(a):c!==null?(c.return=l,mt=c):ZA(a);for(;i!==null;)mt=i,iF(i),i=i.sibling;mt=a,bx=o,on=d}QA(t)}else a.subtreeFlags&8772&&i!==null?(i.return=a,mt=i):QA(t)}}function QA(t){for(;mt!==null;){var r=mt;if(r.flags&8772){var s=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:on||Qy(5,r);break;case 1:var n=r.stateNode;if(r.flags&4&&!on)if(s===null)n.componentDidMount();else{var a=r.elementType===r.type?s.memoizedProps:Ua(r.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=r.updateQueue;i!==null&&MA(r,i,n);break;case 3:var l=r.updateQueue;if(l!==null){if(s=null,r.child!==null)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}MA(r,l,s)}break;case 5:var o=r.stateNode;if(s===null&&r.flags&4){s=o;var c=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var d=r.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&np(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}on||r.flags&512&&xw(r)}catch(h){os(r,r.return,h)}}if(r===t){mt=null;break}if(s=r.sibling,s!==null){s.return=r.return,mt=s;break}mt=r.return}}function XA(t){for(;mt!==null;){var r=mt;if(r===t){mt=null;break}var s=r.sibling;if(s!==null){s.return=r.return,mt=s;break}mt=r.return}}function ZA(t){for(;mt!==null;){var r=mt;try{switch(r.tag){case 0:case 11:case 15:var s=r.return;try{Qy(4,r)}catch(c){os(r,s,c)}break;case 1:var n=r.stateNode;if(typeof n.componentDidMount=="function"){var a=r.return;try{n.componentDidMount()}catch(c){os(r,a,c)}}var i=r.return;try{xw(r)}catch(c){os(r,i,c)}break;case 5:var l=r.return;try{xw(r)}catch(c){os(r,l,c)}}}catch(c){os(r,r.return,c)}if(r===t){mt=null;break}var o=r.sibling;if(o!==null){o.return=r.return,mt=o;break}mt=r.return}}var SY=Math.ceil,Wg=Dl.ReactCurrentDispatcher,q2=Dl.ReactCurrentOwner,Oa=Dl.ReactCurrentBatchConfig,mr=0,qs=null,bs=null,Zs=0,Xn=0,Vd=Bo(0),Ts=0,fp=null,Ec=0,Xy=0,z2=0,Lh=null,Rn=null,K2=0,Au=1/0,nl=null,Gg=!1,yw=null,jo=null,Nx=!1,ho=null,Yg=0,Bh=0,jw=null,ug=-1,mg=0;function Cn(){return mr&6?xs():ug!==-1?ug:ug=xs()}function bo(t){return t.mode&1?mr&2&&Zs!==0?Zs&-Zs:lY.transition!==null?(mg===0&&(mg=z5()),mg):(t=Pr,t!==0||(t=window.event,t=t===void 0?16:X5(t.type)),t):1}function ai(t,r,s,n){if(50<Bh)throw Bh=0,jw=null,Error(Ke(185));wf(t,s,n),(!(mr&2)||t!==qs)&&(t===qs&&(!(mr&2)&&(Xy|=s),Ts===4&&Zl(t,Zs)),qn(t,n),s===1&&mr===0&&!(r.mode&1)&&(Au=xs()+500,Wy&&Vo()))}function qn(t,r){var s=t.callbackNode;lG(t,r);var n=Eg(t,t===qs?Zs:0);if(n===0)s!==null&&lA(s),t.callbackNode=null,t.callbackPriority=0;else if(r=n&-n,t.callbackPriority!==r){if(s!=null&&lA(s),r===1)t.tag===0?iY(JA.bind(null,t)):x6(JA.bind(null,t)),rY(function(){!(mr&6)&&Vo()}),s=null;else{switch(K5(n)){case 1:s=g2;break;case 4:s=U5;break;case 16:s=Og;break;case 536870912:s=q5;break;default:s=Og}s=pF(s,lF.bind(null,t))}t.callbackPriority=r,t.callbackNode=s}}function lF(t,r){if(ug=-1,mg=0,mr&6)throw Error(Ke(327));var s=t.callbackNode;if(Jd()&&t.callbackNode!==s)return null;var n=Eg(t,t===qs?Zs:0);if(n===0)return null;if(n&30||n&t.expiredLanes||r)r=Qg(t,n);else{r=n;var a=mr;mr|=2;var i=cF();(qs!==t||Zs!==r)&&(nl=null,Au=xs()+500,Sc(t,r));do try{kY();break}catch(o){oF(t,o)}while(!0);T2(),Wg.current=i,mr=a,bs!==null?r=0:(qs=null,Zs=0,r=Ts)}if(r!==0){if(r===2&&(a=WN(t),a!==0&&(n=a,r=bw(t,a))),r===1)throw s=fp,Sc(t,0),Zl(t,n),qn(t,xs()),s;if(r===6)Zl(t,n);else{if(a=t.current.alternate,!(n&30)&&!CY(a)&&(r=Qg(t,n),r===2&&(i=WN(t),i!==0&&(n=i,r=bw(t,i))),r===1))throw s=fp,Sc(t,0),Zl(t,n),qn(t,xs()),s;switch(t.finishedWork=a,t.finishedLanes=n,r){case 0:case 1:throw Error(Ke(345));case 2:ec(t,Rn,nl);break;case 3:if(Zl(t,n),(n&130023424)===n&&(r=K2+500-xs(),10<r)){if(Eg(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Cn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=tw(ec.bind(null,t,Rn,nl),r);break}ec(t,Rn,nl);break;case 4:if(Zl(t,n),(n&4194240)===n)break;for(r=t.eventTimes,a=-1;0<n;){var l=31-ni(n);i=1<<l,l=r[l],l>a&&(a=l),n&=~i}if(n=a,n=xs()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*SY(n/1960))-n,10<n){t.timeoutHandle=tw(ec.bind(null,t,Rn,nl),n);break}ec(t,Rn,nl);break;case 5:ec(t,Rn,nl);break;default:throw Error(Ke(329))}}}return qn(t,xs()),t.callbackNode===s?lF.bind(null,t):null}function bw(t,r){var s=Lh;return t.current.memoizedState.isDehydrated&&(Sc(t,r).flags|=256),t=Qg(t,r),t!==2&&(r=Rn,Rn=s,r!==null&&Nw(r)),t}function Nw(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function CY(t){for(var r=t;;){if(r.flags&16384){var s=r.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!ci(i(),a))return!1}catch{return!1}}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zl(t,r){for(r&=~z2,r&=~Xy,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var s=31-ni(r),n=1<<s;t[s]=-1,r&=~n}}function JA(t){if(mr&6)throw Error(Ke(327));Jd();var r=Eg(t,0);if(!(r&1))return qn(t,xs()),null;var s=Qg(t,r);if(t.tag!==0&&s===2){var n=WN(t);n!==0&&(r=n,s=bw(t,n))}if(s===1)throw s=fp,Sc(t,0),Zl(t,r),qn(t,xs()),s;if(s===6)throw Error(Ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,ec(t,Rn,nl),qn(t,xs()),null}function H2(t,r){var s=mr;mr|=1;try{return t(r)}finally{mr=s,mr===0&&(Au=xs()+500,Wy&&Vo())}}function Dc(t){ho!==null&&ho.tag===0&&!(mr&6)&&Jd();var r=mr;mr|=1;var s=Oa.transition,n=Pr;try{if(Oa.transition=null,Pr=1,t)return t()}finally{Pr=n,Oa.transition=s,mr=r,!(mr&6)&&Vo()}}function W2(){Xn=Vd.current,zr(Vd)}function Sc(t,r){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,tY(s)),bs!==null)for(s=bs.return;s!==null;){var n=s;switch(k2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fg();break;case 3:Pu(),zr(Vn),zr(mn),R2();break;case 5:I2(n);break;case 4:Pu();break;case 13:zr(rs);break;case 19:zr(rs);break;case 10:O2(n.type._context);break;case 22:case 23:W2()}s=s.return}if(qs=t,bs=t=No(t.current,null),Zs=Xn=r,Ts=0,fp=null,z2=Xy=Ec=0,Rn=Lh=null,oc!==null){for(r=0;r<oc.length;r++)if(s=oc[r],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}oc=null}return t}function oF(t,r){do{var s=bs;try{if(T2(),og.current=Hg,Kg){for(var n=ss.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Kg=!1}if(Oc=0,Ls=ks=ss=null,Fh=!1,mp=0,q2.current=null,s===null||s.return===null){Ts=1,fp=r,bs=null;break}e:{var i=t,l=s.return,o=s,c=r;if(r=Zs,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=BA(l);if(g!==null){g.flags&=-257,VA(g,l,o,i,r),g.mode&1&&LA(i,d,r),r=g,c=d;var x=r.updateQueue;if(x===null){var p=new Set;p.add(c),r.updateQueue=p}else x.add(c);break e}else{if(!(r&1)){LA(i,d,r),G2();break e}c=Error(Ke(426))}}else if(Qr&&o.mode&1){var y=BA(l);if(y!==null){!(y.flags&65536)&&(y.flags|=256),VA(y,l,o,i,r),A2(ku(c,o));break e}}i=c=ku(c,o),Ts!==4&&(Ts=2),Lh===null?Lh=[i]:Lh.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,r&=-r,i.lanes|=r;var v=K6(i,c,r);DA(i,v);break e;case 1:o=c;var f=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(jo===null||!jo.has(b)))){i.flags|=65536,r&=-r,i.lanes|=r;var N=H6(i,o,r);DA(i,N);break e}}i=i.return}while(i!==null)}uF(s)}catch(w){r=w,bs===s&&s!==null&&(bs=s=s.return);continue}break}while(!0)}function cF(){var t=Wg.current;return Wg.current=Hg,t===null?Hg:t}function G2(){(Ts===0||Ts===3||Ts===2)&&(Ts=4),qs===null||!(Ec&268435455)&&!(Xy&268435455)||Zl(qs,Zs)}function Qg(t,r){var s=mr;mr|=2;var n=cF();(qs!==t||Zs!==r)&&(nl=null,Sc(t,r));do try{PY();break}catch(a){oF(t,a)}while(!0);if(T2(),mr=s,Wg.current=n,bs!==null)throw Error(Ke(261));return qs=null,Zs=0,Ts}function PY(){for(;bs!==null;)dF(bs)}function kY(){for(;bs!==null&&!ZW();)dF(bs)}function dF(t){var r=hF(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,r===null?uF(t):bs=r,q2.current=null}function uF(t){var r=t;do{var s=r.alternate;if(t=r.return,r.flags&32768){if(s=jY(s,r),s!==null){s.flags&=32767,bs=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ts=6,bs=null;return}}else if(s=yY(s,r,Xn),s!==null){bs=s;return}if(r=r.sibling,r!==null){bs=r;return}bs=r=t}while(r!==null);Ts===0&&(Ts=5)}function ec(t,r,s){var n=Pr,a=Oa.transition;try{Oa.transition=null,Pr=1,AY(t,r,s,n)}finally{Oa.transition=a,Pr=n}return null}function AY(t,r,s,n){do Jd();while(ho!==null);if(mr&6)throw Error(Ke(327));s=t.finishedWork;var a=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(Ke(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(oG(t,i),t===qs&&(bs=qs=null,Zs=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Nx||(Nx=!0,pF(Og,function(){return Jd(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Oa.transition,Oa.transition=null;var l=Pr;Pr=1;var o=mr;mr|=4,q2.current=null,NY(t,s),aF(s,t),GG(JN),Dg=!!ZN,JN=ZN=null,t.current=s,wY(s),JW(),mr=o,Pr=l,Oa.transition=i}else t.current=s;if(Nx&&(Nx=!1,ho=t,Yg=a),i=t.pendingLanes,i===0&&(jo=null),rG(s.stateNode),qn(t,xs()),r!==null)for(n=t.onRecoverableError,s=0;s<r.length;s++)a=r[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Gg)throw Gg=!1,t=yw,yw=null,t;return Yg&1&&t.tag!==0&&Jd(),i=t.pendingLanes,i&1?t===jw?Bh++:(Bh=0,jw=t):Bh=0,Vo(),null}function Jd(){if(ho!==null){var t=K5(Yg),r=Oa.transition,s=Pr;try{if(Oa.transition=null,Pr=16>t?16:t,ho===null)var n=!1;else{if(t=ho,ho=null,Yg=0,mr&6)throw Error(Ke(331));var a=mr;for(mr|=4,mt=t.current;mt!==null;){var i=mt,l=i.child;if(mt.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(mt=d;mt!==null;){var u=mt;switch(u.tag){case 0:case 11:case 15:$h(8,u,i)}var m=u.child;if(m!==null)m.return=u,mt=m;else for(;mt!==null;){u=mt;var h=u.sibling,g=u.return;if(rF(u),u===d){mt=null;break}if(h!==null){h.return=g,mt=h;break}mt=g}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}mt=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,mt=l;else e:for(;mt!==null;){if(i=mt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$h(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,mt=v;break e}mt=i.return}}var f=t.current;for(mt=f;mt!==null;){l=mt;var b=l.child;if(l.subtreeFlags&2064&&b!==null)b.return=l,mt=b;else e:for(l=f;mt!==null;){if(o=mt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Qy(9,o)}}catch(w){os(o,o.return,w)}if(o===l){mt=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,mt=N;break e}mt=o.return}}if(mr=a,Vo(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(Uy,t)}catch{}n=!0}return n}finally{Pr=s,Oa.transition=r}}return!1}function e_(t,r,s){r=ku(s,r),r=K6(t,r,1),t=yo(t,r,1),r=Cn(),t!==null&&(wf(t,1,r),qn(t,r))}function os(t,r,s){if(t.tag===3)e_(t,t,s);else for(;r!==null;){if(r.tag===3){e_(r,t,s);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(jo===null||!jo.has(n))){t=ku(s,t),t=H6(r,t,1),r=yo(r,t,1),t=Cn(),r!==null&&(wf(r,1,t),qn(r,t));break}}r=r.return}}function _Y(t,r,s){var n=t.pingCache;n!==null&&n.delete(r),r=Cn(),t.pingedLanes|=t.suspendedLanes&s,qs===t&&(Zs&s)===s&&(Ts===4||Ts===3&&(Zs&130023424)===Zs&&500>xs()-K2?Sc(t,0):z2|=s),qn(t,r)}function mF(t,r){r===0&&(t.mode&1?(r=mx,mx<<=1,!(mx&130023424)&&(mx=4194304)):r=1);var s=Cn();t=Sl(t,r),t!==null&&(wf(t,r,s),qn(t,s))}function TY(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),mF(t,s)}function OY(t,r){var s=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ke(314))}n!==null&&n.delete(r),mF(t,s)}var hF;hF=function(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps||Vn.current)Fn=!0;else{if(!(t.lanes&s)&&!(r.flags&128))return Fn=!1,vY(t,r,s);Fn=!!(t.flags&131072)}else Fn=!1,Qr&&r.flags&1048576&&g6(r,Bg,r.index);switch(r.lanes=0,r.tag){case 2:var n=r.type;dg(t,r),t=r.pendingProps;var a=wu(r,mn.current);Zd(r,s),a=$2(null,r,n,t,a,s);var i=L2();return r.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Un(n)?(i=!0,$g(r)):i=!1,r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,D2(r),a.updater=Yy,r.stateNode=a,a._reactInternals=r,ow(r,n,t,s),r=uw(null,r,n,!0,i,s)):(r.tag=0,Qr&&i&&P2(r),xn(null,r,a,s),r=r.child),r;case 16:n=r.elementType;e:{switch(dg(t,r),t=r.pendingProps,a=n._init,n=a(n._payload),r.type=n,a=r.tag=DY(n),t=Ua(n,t),a){case 0:r=dw(null,r,n,t,s);break e;case 1:r=zA(null,r,n,t,s);break e;case 11:r=UA(null,r,n,t,s);break e;case 14:r=qA(null,r,n,Ua(n.type,t),s);break e}throw Error(Ke(306,n,""))}return r;case 0:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:Ua(n,a),dw(t,r,n,a,s);case 1:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:Ua(n,a),zA(t,r,n,a,s);case 3:e:{if(Q6(r),t===null)throw Error(Ke(387));n=r.pendingProps,i=r.memoizedState,a=i.element,w6(t,r),qg(r,n,null,s);var l=r.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},r.updateQueue.baseState=i,r.memoizedState=i,r.flags&256){a=ku(Error(Ke(423)),r),r=KA(t,r,n,s,a);break e}else if(n!==a){a=ku(Error(Ke(424)),r),r=KA(t,r,n,s,a);break e}else for(aa=vo(r.stateNode.containerInfo.firstChild),la=r,Qr=!0,Ga=null,s=b6(r,null,n,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Su(),n===a){r=Cl(t,r,s);break e}xn(t,r,n,s)}r=r.child}return r;case 5:return S6(r),t===null&&aw(r),n=r.type,a=r.pendingProps,i=t!==null?t.memoizedProps:null,l=a.children,ew(n,a)?l=null:i!==null&&ew(n,i)&&(r.flags|=32),Y6(t,r),xn(t,r,l,s),r.child;case 6:return t===null&&aw(r),null;case 13:return X6(t,r,s);case 4:return M2(r,r.stateNode.containerInfo),n=r.pendingProps,t===null?r.child=Cu(r,null,n,s):xn(t,r,n,s),r.child;case 11:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:Ua(n,a),UA(t,r,n,a,s);case 7:return xn(t,r,r.pendingProps,s),r.child;case 8:return xn(t,r,r.pendingProps.children,s),r.child;case 12:return xn(t,r,r.pendingProps.children,s),r.child;case 10:e:{if(n=r.type._context,a=r.pendingProps,i=r.memoizedProps,l=a.value,Rr(Vg,n._currentValue),n._currentValue=l,i!==null)if(ci(i.value,l)){if(i.children===a.children&&!Vn.current){r=Cl(t,r,s);break e}}else for(i=r.child,i!==null&&(i.return=r);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=xl(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),iw(i.return,s,r),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===r.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Ke(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),iw(l,s,r),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===r){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}xn(t,r,a.children,s),r=r.child}return r;case 9:return a=r.type,n=r.pendingProps.children,Zd(r,s),a=Da(a),n=n(a),r.flags|=1,xn(t,r,n,s),r.child;case 14:return n=r.type,a=Ua(n,r.pendingProps),a=Ua(n.type,a),qA(t,r,n,a,s);case 15:return W6(t,r,r.type,r.pendingProps,s);case 17:return n=r.type,a=r.pendingProps,a=r.elementType===n?a:Ua(n,a),dg(t,r),r.tag=1,Un(n)?(t=!0,$g(r)):t=!1,Zd(r,s),z6(r,n,a),ow(r,n,a,s),uw(null,r,n,!0,t,s);case 19:return Z6(t,r,s);case 22:return G6(t,r,s)}throw Error(Ke(156,r.tag))};function pF(t,r){return V5(t,r)}function EY(t,r,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _a(t,r,s,n){return new EY(t,r,s,n)}function Y2(t){return t=t.prototype,!(!t||!t.isReactComponent)}function DY(t){if(typeof t=="function")return Y2(t)?1:0;if(t!=null){if(t=t.$$typeof,t===p2)return 11;if(t===f2)return 14}return 2}function No(t,r){var s=t.alternate;return s===null?(s=_a(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function hg(t,r,s,n,a,i){var l=2;if(n=t,typeof t=="function")Y2(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Od:return Cc(s.children,a,i,r);case h2:l=8,a|=8;break;case EN:return t=_a(12,s,r,a|2),t.elementType=EN,t.lanes=i,t;case DN:return t=_a(13,s,r,a),t.elementType=DN,t.lanes=i,t;case MN:return t=_a(19,s,r,a),t.elementType=MN,t.lanes=i,t;case S5:return Zy(s,a,i,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case N5:l=10;break e;case w5:l=9;break e;case p2:l=11;break e;case f2:l=14;break e;case Gl:l=16,n=null;break e}throw Error(Ke(130,t==null?t:typeof t,""))}return r=_a(l,s,r,a),r.elementType=t,r.type=n,r.lanes=i,r}function Cc(t,r,s,n){return t=_a(7,t,n,r),t.lanes=s,t}function Zy(t,r,s,n){return t=_a(22,t,n,r),t.elementType=S5,t.lanes=s,t.stateNode={isHidden:!1},t}function p0(t,r,s){return t=_a(6,t,null,r),t.lanes=s,t}function f0(t,r,s){return r=_a(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function MY(t,r,s,n,a){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yb(0),this.expirationTimes=Yb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yb(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Q2(t,r,s,n,a,i,l,o,c){return t=new MY(t,r,s,o,c),r===1?(r=1,i===!0&&(r|=8)):r=0,i=_a(3,null,null,r),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},D2(i),t}function IY(t,r,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Td,key:n==null?null:""+n,children:t,containerInfo:r,implementation:s}}function fF(t){if(!t)return ko;t=t._reactInternals;e:{if(ed(t)!==t||t.tag!==1)throw Error(Ke(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Un(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(Ke(171))}if(t.tag===1){var s=t.type;if(Un(s))return f6(t,s,r)}return r}function xF(t,r,s,n,a,i,l,o,c){return t=Q2(s,n,!0,t,a,i,l,o,c),t.context=fF(null),s=t.current,n=Cn(),a=bo(s),i=xl(n,a),i.callback=r??null,yo(s,i,a),t.current.lanes=a,wf(t,a,n),qn(t,n),t}function Jy(t,r,s,n){var a=r.current,i=Cn(),l=bo(a);return s=fF(s),r.context===null?r.context=s:r.pendingContext=s,r=xl(i,l),r.payload={element:t},n=n===void 0?null:n,n!==null&&(r.callback=n),t=yo(a,r,l),t!==null&&(ai(t,a,l,i),lg(t,a,l)),l}function Xg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t_(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function X2(t,r){t_(t,r),(t=t.alternate)&&t_(t,r)}function RY(){return null}var gF=typeof reportError=="function"?reportError:function(t){console.error(t)};function Z2(t){this._internalRoot=t}ej.prototype.render=Z2.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(Ke(409));Jy(t,r,null,null)};ej.prototype.unmount=Z2.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Dc(function(){Jy(null,t,null,null)}),r[wl]=null}};function ej(t){this._internalRoot=t}ej.prototype.unstable_scheduleHydration=function(t){if(t){var r=G5();t={blockedOn:null,target:t,priority:r};for(var s=0;s<Xl.length&&r!==0&&r<Xl[s].priority;s++);Xl.splice(s,0,t),s===0&&Q5(t)}};function J2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r_(){}function FY(t,r,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Xg(l);i.call(d)}}var l=xF(r,n,t,0,null,!1,!1,"",r_);return t._reactRootContainer=l,t[wl]=l.current,lp(t.nodeType===8?t.parentNode:t),Dc(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var d=Xg(c);o.call(d)}}var c=Q2(t,0,!1,null,null,!1,!1,"",r_);return t._reactRootContainer=c,t[wl]=c.current,lp(t.nodeType===8?t.parentNode:t),Dc(function(){Jy(r,c,s,n)}),c}function rj(t,r,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=Xg(l);o.call(c)}}Jy(r,l,t,a)}else l=FY(s,r,t,a,n);return Xg(l)}H5=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var s=wh(r.pendingLanes);s!==0&&(v2(r,s|1),qn(r,xs()),!(mr&6)&&(Au=xs()+500,Vo()))}break;case 13:Dc(function(){var n=Sl(t,1);if(n!==null){var a=Cn();ai(n,t,1,a)}}),X2(t,1)}};y2=function(t){if(t.tag===13){var r=Sl(t,134217728);if(r!==null){var s=Cn();ai(r,t,134217728,s)}X2(t,134217728)}};W5=function(t){if(t.tag===13){var r=bo(t),s=Sl(t,r);if(s!==null){var n=Cn();ai(s,t,r,n)}X2(t,r)}};G5=function(){return Pr};Y5=function(t,r){var s=Pr;try{return Pr=t,r()}finally{Pr=s}};zN=function(t,r,s){switch(r){case"input":if(FN(t,s),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<s.length;r++){var n=s[r];if(n!==t&&n.form===t.form){var a=Hy(n);if(!a)throw Error(Ke(90));P5(n),FN(n,a)}}}break;case"textarea":A5(t,s);break;case"select":r=s.value,r!=null&&Gd(t,!!s.multiple,r,!1)}};I5=H2;R5=Dc;var $Y={usingClientEntryPoint:!1,Events:[Cf,Id,Hy,D5,M5,H2]},Jm={findFiberByHostInstance:lc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LY={bundleType:Jm.bundleType,version:Jm.version,rendererPackageName:Jm.rendererPackageName,rendererConfig:Jm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=L5(t),t===null?null:t.stateNode},findFiberByHostInstance:Jm.findFiberByHostInstance||RY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wx.isDisabled&&wx.supportsFiber)try{Uy=wx.inject(LY),Ei=wx}catch{}}va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$Y;va.createPortal=function(t,r){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J2(r))throw Error(Ke(200));return IY(t,r,null,s)};va.createRoot=function(t,r){if(!J2(t))throw Error(Ke(299));var s=!1,n="",a=gF;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),r=Q2(t,1,!1,null,null,s,!1,n,a),t[wl]=r.current,lp(t.nodeType===8?t.parentNode:t),new Z2(r)};va.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(Ke(188)):(t=Object.keys(t).join(","),Error(Ke(268,t)));return t=L5(r),t=t===null?null:t.stateNode,t};va.flushSync=function(t){return Dc(t)};va.hydrate=function(t,r,s){if(!tj(r))throw Error(Ke(200));return rj(null,t,r,!0,s)};va.hydrateRoot=function(t,r,s){if(!J2(t))throw Error(Ke(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=gF;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),r=xF(r,null,t,1,s??null,a,!1,i,l),t[wl]=r.current,lp(t),n)for(t=0;t<n.length;t++)s=n[t],a=s._getVersion,a=a(s._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[s,a]:r.mutableSourceEagerHydrationData.push(s,a);return new ej(r)};va.render=function(t,r,s){if(!tj(r))throw Error(Ke(200));return rj(null,t,r,!1,s)};va.unmountComponentAtNode=function(t){if(!tj(t))throw Error(Ke(40));return t._reactRootContainer?(Dc(function(){rj(null,null,t,!1,function(){t._reactRootContainer=null,t[wl]=null})}),!0):!1};va.unstable_batchedUpdates=H2;va.unstable_renderSubtreeIntoContainer=function(t,r,s,n){if(!tj(s))throw Error(Ke(200));if(t==null||t._reactInternals===void 0)throw Error(Ke(38));return rj(t,r,s,!1,n)};va.version="18.3.1-next-f1338f8080-20240426";function vF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vF)}catch(t){console.error(t)}}vF(),v5.exports=va;var td=v5.exports;const BY=jr(td);var yF,s_=td;yF=s_.createRoot,s_.hydrateRoot;function VY(t,r){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,n,a,i,l=[],o="",c=t.split("/");for(c[0]||c.shift();a=c.shift();)s=a[0],s==="*"?(l.push(s),o+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(n=a.indexOf("?",1),i=a.indexOf(".",1),l.push(a.substring(1,~n?n:~i?i:a.length)),o+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(o+=(~n?"?":"")+"\\"+a.substring(i))):o+="/"+a;return{keys:l,pattern:new RegExp("^"+o+(r?"(?=$|/)":"/?$"),"i")}}var jF={exports:{}},bF={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _u=j;function UY(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var qY=typeof Object.is=="function"?Object.is:UY,zY=_u.useState,KY=_u.useEffect,HY=_u.useLayoutEffect,WY=_u.useDebugValue;function GY(t,r){var s=r(),n=zY({inst:{value:s,getSnapshot:r}}),a=n[0].inst,i=n[1];return HY(function(){a.value=s,a.getSnapshot=r,x0(a)&&i({inst:a})},[t,s,r]),KY(function(){return x0(a)&&i({inst:a}),t(function(){x0(a)&&i({inst:a})})},[t]),WY(s),s}function x0(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!qY(t,s)}catch{return!0}}function YY(t,r){return r()}var QY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YY:GY;bF.useSyncExternalStore=_u.useSyncExternalStore!==void 0?_u.useSyncExternalStore:QY;jF.exports=bF;var NF=jF.exports;const XY=c2.useInsertionEffect,ZY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wF=ZY?j.useLayoutEffect:j.useEffect,JY=XY||wF,eC=t=>{const r=j.useRef([t,(...s)=>r[0](...s)]).current;return JY(()=>{r[0]=t}),r[1]},eQ="popstate",tC="pushState",rC="replaceState",tQ="hashchange",n_=[eQ,tC,rC,tQ],rQ=t=>{for(const r of n_)addEventListener(r,t);return()=>{for(const r of n_)removeEventListener(r,t)}},SF=(t,r)=>NF.useSyncExternalStore(rQ,t,r),sQ=()=>location.search,nQ=({ssrSearch:t=""}={})=>SF(sQ,()=>t),a_=()=>location.pathname,aQ=({ssrPath:t}={})=>SF(a_,t?()=>t:a_),iQ=(t,{replace:r=!1,state:s=null}={})=>history[r?rC:tC](s,"",t),lQ=(t={})=>[aQ(t),iQ],i_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[i_]>"u"){for(const t of[tC,rC]){const r=history[t];history[t]=function(){const s=r.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),s}}Object.defineProperty(window,i_,{value:!0})}const oQ=(t,r)=>r.toLowerCase().indexOf(t.toLowerCase())?"~"+r:r.slice(t.length)||"/",CF=(t="")=>t==="/"?"":t,cQ=(t,r)=>t[0]==="~"?t.slice(1):CF(r)+t,dQ=(t="",r)=>oQ(l_(CF(t)),l_(r)),l_=t=>{try{return decodeURI(t)}catch{return t}},PF={hook:lQ,searchHook:nQ,parser:VY,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},kF=j.createContext(PF),rd=()=>j.useContext(kF),AF={},_F=j.createContext(AF),sj=()=>j.useContext(_F),kf=t=>{const[r,s]=t.hook(t);return[dQ(t.base,r),eC((n,a)=>s(cQ(n,t.base),a))]},br=()=>kf(rd()),sC=(t,r,s,n)=>{const{pattern:a,keys:i}=r instanceof RegExp?{keys:!1,pattern:r}:t(r||"*",n),l=a.exec(s)||[],[o,...c]=l;return o!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((m,h)=>[m,c[h]])):l.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[o]:[]]:[!1,null]},uQ=t=>sC(rd().parser,t,br()[0]),mQ=({children:t,...r})=>{var u,m;const s=rd(),n=r.hook?PF:s;let a=n;const[i,l]=((u=r.ssrPath)==null?void 0:u.split("?"))??[];l&&(r.ssrSearch=l,r.ssrPath=i),r.hrefs=r.hrefs??((m=r.hook)==null?void 0:m.hrefs);let o=j.useRef({}),c=o.current,d=c;for(let h in n){const g=h==="base"?n[h]+(r[h]||""):r[h]||n[h];c===d&&g!==d[h]&&(o.current=d={...d}),d[h]=g,(g!==n[h]||g!==a[h])&&(a=d)}return j.createElement(kF.Provider,{value:a,children:t})},o_=({children:t,component:r},s)=>r?j.createElement(r,{params:s}):typeof t=="function"?t(s):t,hQ=t=>{let r=j.useRef(AF);const s=r.current;return r.current=Object.keys(t).length!==Object.keys(s).length||Object.entries(t).some(([n,a])=>a!==s[n])?t:s},is=({path:t,nest:r,match:s,...n})=>{const a=rd(),[i]=kf(a),[l,o,c]=s??sC(a.parser,t,i,r),d=hQ({...sj(),...o});if(!l)return null;const u=c?j.createElement(mQ,{base:c},o_(n,d)):o_(n,d);return j.createElement(_F.Provider,{value:d,children:u})},Ot=j.forwardRef((t,r)=>{const s=rd(),[n,a]=kf(s),{to:i="",href:l=i,onClick:o,asChild:c,children:d,className:u,replace:m,state:h,...g}=t,x=eC(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(o==null||o(y),y.defaultPrevented||(y.preventDefault(),a(l,t)))}),p=s.hrefs(l[0]==="~"?l.slice(1):s.base+l,s);return c&&j.isValidElement(d)?j.cloneElement(d,{onClick:x,href:p}):j.createElement("a",{...g,onClick:x,href:p,className:u!=null&&u.call?u(n===l):u,children:d,ref:r})}),TF=t=>Array.isArray(t)?t.flatMap(r=>TF(r&&r.type===j.Fragment?r.props.children:r)):[t],pQ=({children:t,location:r})=>{const s=rd(),[n]=kf(s);for(const a of TF(t)){let i=0;if(j.isValidElement(a)&&(i=sC(s.parser,a.props.path,r||n,a.props.nest))[0])return j.cloneElement(a,{match:i})}return null},OF=t=>{const{to:r,href:s=r}=t,n=rd(),[,a]=kf(n),i=eC(()=>a(r||s,t)),{ssrContext:l}=n;return wF(()=>{i()},[]),l&&(l.redirectTo=r),null};var ym=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mc=typeof window>"u"||"Deno"in globalThis;function gn(){}function fQ(t,r){return typeof t=="function"?t(r):t}function ww(t){return typeof t=="number"&&t>=0&&t!==1/0}function EF(t,r){return Math.max(t+(r||0)-Date.now(),0)}function wo(t,r){return typeof t=="function"?t(r):t}function Ca(t,r){return typeof t=="function"?t(r):t}function c_(t,r){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=t;if(l){if(n){if(r.queryHash!==nC(l,r.options))return!1}else if(!xp(r.queryKey,l))return!1}if(s!=="all"){const c=r.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&r.isStale()!==o||a&&a!==r.state.fetchStatus||i&&!i(r))}function d_(t,r){const{exact:s,status:n,predicate:a,mutationKey:i}=t;if(i){if(!r.options.mutationKey)return!1;if(s){if(Ic(r.options.mutationKey)!==Ic(i))return!1}else if(!xp(r.options.mutationKey,i))return!1}return!(n&&r.state.status!==n||a&&!a(r))}function nC(t,r){return((r==null?void 0:r.queryKeyHashFn)||Ic)(t)}function Ic(t){return JSON.stringify(t,(r,s)=>Sw(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function xp(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(s=>xp(t[s],r[s])):!1}function DF(t,r){if(t===r)return t;const s=u_(t)&&u_(r);if(s||Sw(t)&&Sw(r)){const n=s?t:Object.keys(t),a=n.length,i=s?r:Object.keys(r),l=i.length,o=s?[]:{},c=new Set(n);let d=0;for(let u=0;u<l;u++){const m=s?u:i[u];(!s&&c.has(m)||s)&&t[m]===void 0&&r[m]===void 0?(o[m]=void 0,d++):(o[m]=DF(t[m],r[m]),o[m]===t[m]&&t[m]!==void 0&&d++)}return a===l&&d===a?t:o}return r}function Zg(t,r){if(!r||Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}function u_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Sw(t){if(!m_(t))return!1;const r=t.constructor;if(r===void 0)return!0;const s=r.prototype;return!(!m_(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function m_(t){return Object.prototype.toString.call(t)==="[object Object]"}function xQ(t){return new Promise(r=>{setTimeout(r,t)})}function Cw(t,r,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,r):s.structuralSharing!==!1?DF(t,r):r}function gQ(t,r,s=0){const n=[...t,r];return s&&n.length>s?n.slice(1):n}function vQ(t,r,s=0){const n=[r,...t];return s&&n.length>s?n.slice(0,-1):n}var aC=Symbol();function MF(t,r){return!t.queryFn&&(r!=null&&r.initialPromise)?()=>r.initialPromise:!t.queryFn||t.queryFn===aC?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function IF(t,r){return typeof t=="function"?t(...r):!!t}var fc,to,du,mM,yQ=(mM=class extends ym{constructor(){super();wt(this,fc);wt(this,to);wt(this,du);lt(this,du,r=>{if(!Mc&&window.addEventListener){const s=()=>r();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){ne(this,to)||this.setEventListener(ne(this,du))}onUnsubscribe(){var r;this.hasListeners()||((r=ne(this,to))==null||r.call(this),lt(this,to,void 0))}setEventListener(r){var s;lt(this,du,r),(s=ne(this,to))==null||s.call(this),lt(this,to,r(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(r){ne(this,fc)!==r&&(lt(this,fc,r),this.onFocus())}onFocus(){const r=this.isFocused();this.listeners.forEach(s=>{s(r)})}isFocused(){var r;return typeof ne(this,fc)=="boolean"?ne(this,fc):((r=globalThis.document)==null?void 0:r.visibilityState)!=="hidden"}},fc=new WeakMap,to=new WeakMap,du=new WeakMap,mM),iC=new yQ,uu,ro,mu,hM,jQ=(hM=class extends ym{constructor(){super();wt(this,uu,!0);wt(this,ro);wt(this,mu);lt(this,mu,r=>{if(!Mc&&window.addEventListener){const s=()=>r(!0),n=()=>r(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){ne(this,ro)||this.setEventListener(ne(this,mu))}onUnsubscribe(){var r;this.hasListeners()||((r=ne(this,ro))==null||r.call(this),lt(this,ro,void 0))}setEventListener(r){var s;lt(this,mu,r),(s=ne(this,ro))==null||s.call(this),lt(this,ro,r(this.setOnline.bind(this)))}setOnline(r){ne(this,uu)!==r&&(lt(this,uu,r),this.listeners.forEach(n=>{n(r)}))}isOnline(){return ne(this,uu)}},uu=new WeakMap,ro=new WeakMap,mu=new WeakMap,hM),Jg=new jQ;function Pw(){let t,r;const s=new Promise((a,i)=>{t=a,r=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},s.reject=a=>{n({status:"rejected",reason:a}),r(a)},s}function bQ(t){return Math.min(1e3*2**t,3e4)}function RF(t){return(t??"online")==="online"?Jg.isOnline():!0}var FF=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function g0(t){return t instanceof FF}function $F(t){let r=!1,s=0,n=!1,a;const i=Pw(),l=p=>{var y;n||(h(new FF(p)),(y=t.abort)==null||y.call(t))},o=()=>{r=!0},c=()=>{r=!1},d=()=>iC.isFocused()&&(t.networkMode==="always"||Jg.isOnline())&&t.canRun(),u=()=>RF(t.networkMode)&&t.canRun(),m=p=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,p),a==null||a(),i.resolve(p))},h=p=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,p),a==null||a(),i.reject(p))},g=()=>new Promise(p=>{var y;a=v=>{(n||d())&&p(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var p;a=void 0,n||(p=t.onContinue)==null||p.call(t)}),x=()=>{if(n)return;let p;const y=s===0?t.initialPromise:void 0;try{p=y??t.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(m).catch(v=>{var C;if(n)return;const f=t.retry??(Mc?0:3),b=t.retryDelay??bQ,N=typeof b=="function"?b(s,v):b,w=f===!0||typeof f=="number"&&s<f||typeof f=="function"&&f(s,v);if(r||!w){h(v);return}s++,(C=t.onFail)==null||C.call(t,s,v),xQ(N).then(()=>d()?void 0:g()).then(()=>{r?h(v):x()})})};return{promise:i,cancel:l,continue:()=>(a==null||a(),i),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?x():g().then(x),i)}}var NQ=t=>setTimeout(t,0);function wQ(){let t=[],r=0,s=o=>{o()},n=o=>{o()},a=NQ;const i=o=>{r?t.push(o):a(()=>{s(o)})},l=()=>{const o=t;t=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;r++;try{c=o()}finally{r--,r||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var As=wQ(),xc,pM,LF=(pM=class{constructor(){wt(this,xc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ww(this.gcTime)&&lt(this,xc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Mc?1/0:5*60*1e3))}clearGcTimeout(){ne(this,xc)&&(clearTimeout(ne(this,xc)),lt(this,xc,void 0))}},xc=new WeakMap,pM),hu,gc,wa,vc,an,vf,yc,qa,rl,fM,SQ=(fM=class extends LF{constructor(r){super();wt(this,qa);wt(this,hu);wt(this,gc);wt(this,wa);wt(this,vc);wt(this,an);wt(this,vf);wt(this,yc);lt(this,yc,!1),lt(this,vf,r.defaultOptions),this.setOptions(r.options),this.observers=[],lt(this,vc,r.client),lt(this,wa,ne(this,vc).getQueryCache()),this.queryKey=r.queryKey,this.queryHash=r.queryHash,lt(this,hu,CQ(this.options)),this.state=r.state??ne(this,hu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var r;return(r=ne(this,an))==null?void 0:r.promise}setOptions(r){this.options={...ne(this,vf),...r},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ne(this,wa).remove(this)}setData(r,s){const n=Cw(this.state.data,r,this.options);return Zt(this,qa,rl).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(r,s){Zt(this,qa,rl).call(this,{type:"setState",state:r,setStateOptions:s})}cancel(r){var n,a;const s=(n=ne(this,an))==null?void 0:n.promise;return(a=ne(this,an))==null||a.cancel(r),s?s.then(gn).catch(gn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ne(this,hu))}isActive(){return this.observers.some(r=>Ca(r.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(r=>wo(r.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(r=>r.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(r=0){return this.state.data===void 0?!0:r==="static"?!1:this.state.isInvalidated?!0:!EF(this.state.dataUpdatedAt,r)}onFocus(){var s;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r==null||r.refetch({cancelRefetch:!1}),(s=ne(this,an))==null||s.continue()}onOnline(){var s;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r==null||r.refetch({cancelRefetch:!1}),(s=ne(this,an))==null||s.continue()}addObserver(r){this.observers.includes(r)||(this.observers.push(r),this.clearGcTimeout(),ne(this,wa).notify({type:"observerAdded",query:this,observer:r}))}removeObserver(r){this.observers.includes(r)&&(this.observers=this.observers.filter(s=>s!==r),this.observers.length||(ne(this,an)&&(ne(this,yc)?ne(this,an).cancel({revert:!0}):ne(this,an).cancelRetry()),this.scheduleGc()),ne(this,wa).notify({type:"observerRemoved",query:this,observer:r}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Zt(this,qa,rl).call(this,{type:"invalidate"})}fetch(r,s){var d,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(ne(this,an))return ne(this,an).continueRetry(),ne(this,an).promise}if(r&&this.setOptions(r),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(lt(this,yc,!0),n.signal)})},i=()=>{const h=MF(this.options,s),x=(()=>{const p={client:ne(this,vc),queryKey:this.queryKey,meta:this.meta};return a(p),p})();return lt(this,yc,!1),this.options.persister?this.options.persister(h,x,this):h(x)},o=(()=>{const h={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:ne(this,vc),state:this.state,fetchFn:i};return a(h),h})();(d=this.options.behavior)==null||d.onFetch(o,this),lt(this,gc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&Zt(this,qa,rl).call(this,{type:"fetch",meta:(m=o.fetchOptions)==null?void 0:m.meta});const c=h=>{var g,x,p,y;g0(h)&&h.silent||Zt(this,qa,rl).call(this,{type:"error",error:h}),g0(h)||((x=(g=ne(this,wa).config).onError)==null||x.call(g,h,this),(y=(p=ne(this,wa).config).onSettled)==null||y.call(p,this.state.data,h,this)),this.scheduleGc()};return lt(this,an,$F({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var g,x,p,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){c(v);return}(x=(g=ne(this,wa).config).onSuccess)==null||x.call(g,h,this),(y=(p=ne(this,wa).config).onSettled)==null||y.call(p,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,g)=>{Zt(this,qa,rl).call(this,{type:"failed",failureCount:h,error:g})},onPause:()=>{Zt(this,qa,rl).call(this,{type:"pause"})},onContinue:()=>{Zt(this,qa,rl).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ne(this,an).start()}},hu=new WeakMap,gc=new WeakMap,wa=new WeakMap,vc=new WeakMap,an=new WeakMap,vf=new WeakMap,yc=new WeakMap,qa=new WeakSet,rl=function(r){const s=n=>{switch(r.type){case"failed":return{...n,fetchFailureCount:r.failureCount,fetchFailureReason:r.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...BF(n.data,this.options),fetchMeta:r.meta??null};case"success":return lt(this,gc,void 0),{...n,data:r.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:r.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!r.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=r.error;return g0(a)&&a.revert&&ne(this,gc)?{...ne(this,gc),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...r.state}}};this.state=s(this.state),As.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ne(this,wa).notify({query:this,type:"updated",action:r})})},fM);function BF(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RF(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function CQ(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,s=r!==void 0,n=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ni,xM,PQ=(xM=class extends ym{constructor(r={}){super();wt(this,Ni);this.config=r,lt(this,Ni,new Map)}build(r,s,n){const a=s.queryKey,i=s.queryHash??nC(a,s);let l=this.get(i);return l||(l=new SQ({client:r,queryKey:a,queryHash:i,options:r.defaultQueryOptions(s),state:n,defaultOptions:r.getQueryDefaults(a)}),this.add(l)),l}add(r){ne(this,Ni).has(r.queryHash)||(ne(this,Ni).set(r.queryHash,r),this.notify({type:"added",query:r}))}remove(r){const s=ne(this,Ni).get(r.queryHash);s&&(r.destroy(),s===r&&ne(this,Ni).delete(r.queryHash),this.notify({type:"removed",query:r}))}clear(){As.batch(()=>{this.getAll().forEach(r=>{this.remove(r)})})}get(r){return ne(this,Ni).get(r)}getAll(){return[...ne(this,Ni).values()]}find(r){const s={exact:!0,...r};return this.getAll().find(n=>c_(s,n))}findAll(r={}){const s=this.getAll();return Object.keys(r).length>0?s.filter(n=>c_(r,n)):s}notify(r){As.batch(()=>{this.listeners.forEach(s=>{s(r)})})}onFocus(){As.batch(()=>{this.getAll().forEach(r=>{r.onFocus()})})}onOnline(){As.batch(()=>{this.getAll().forEach(r=>{r.onOnline()})})}},Ni=new WeakMap,xM),wi,pn,jc,Si,Hl,gM,kQ=(gM=class extends LF{constructor(r){super();wt(this,Si);wt(this,wi);wt(this,pn);wt(this,jc);this.mutationId=r.mutationId,lt(this,pn,r.mutationCache),lt(this,wi,[]),this.state=r.state||VF(),this.setOptions(r.options),this.scheduleGc()}setOptions(r){this.options=r,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(r){ne(this,wi).includes(r)||(ne(this,wi).push(r),this.clearGcTimeout(),ne(this,pn).notify({type:"observerAdded",mutation:this,observer:r}))}removeObserver(r){lt(this,wi,ne(this,wi).filter(s=>s!==r)),this.scheduleGc(),ne(this,pn).notify({type:"observerRemoved",mutation:this,observer:r})}optionalRemove(){ne(this,wi).length||(this.state.status==="pending"?this.scheduleGc():ne(this,pn).remove(this))}continue(){var r;return((r=ne(this,jc))==null?void 0:r.continue())??this.execute(this.state.variables)}async execute(r){var i,l,o,c,d,u,m,h,g,x,p,y,v,f,b,N,w,C,P,S;const s=()=>{Zt(this,Si,Hl).call(this,{type:"continue"})};lt(this,jc,$F({fn:()=>this.options.mutationFn?this.options.mutationFn(r):Promise.reject(new Error("No mutationFn found")),onFail:(A,k)=>{Zt(this,Si,Hl).call(this,{type:"failed",failureCount:A,error:k})},onPause:()=>{Zt(this,Si,Hl).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ne(this,pn).canRun(this)}));const n=this.state.status==="pending",a=!ne(this,jc).canStart();try{if(n)s();else{Zt(this,Si,Hl).call(this,{type:"pending",variables:r,isPaused:a}),await((l=(i=ne(this,pn).config).onMutate)==null?void 0:l.call(i,r,this));const k=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,r));k!==this.state.context&&Zt(this,Si,Hl).call(this,{type:"pending",context:k,variables:r,isPaused:a})}const A=await ne(this,jc).start();return await((u=(d=ne(this,pn).config).onSuccess)==null?void 0:u.call(d,A,r,this.state.context,this)),await((h=(m=this.options).onSuccess)==null?void 0:h.call(m,A,r,this.state.context)),await((x=(g=ne(this,pn).config).onSettled)==null?void 0:x.call(g,A,null,this.state.variables,this.state.context,this)),await((y=(p=this.options).onSettled)==null?void 0:y.call(p,A,null,r,this.state.context)),Zt(this,Si,Hl).call(this,{type:"success",data:A}),A}catch(A){try{throw await((f=(v=ne(this,pn).config).onError)==null?void 0:f.call(v,A,r,this.state.context,this)),await((N=(b=this.options).onError)==null?void 0:N.call(b,A,r,this.state.context)),await((C=(w=ne(this,pn).config).onSettled)==null?void 0:C.call(w,void 0,A,this.state.variables,this.state.context,this)),await((S=(P=this.options).onSettled)==null?void 0:S.call(P,void 0,A,r,this.state.context)),A}finally{Zt(this,Si,Hl).call(this,{type:"error",error:A})}}finally{ne(this,pn).runNext(this)}}},wi=new WeakMap,pn=new WeakMap,jc=new WeakMap,Si=new WeakSet,Hl=function(r){const s=n=>{switch(r.type){case"failed":return{...n,failureCount:r.failureCount,failureReason:r.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:r.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:r.isPaused,status:"pending",variables:r.variables,submittedAt:Date.now()};case"success":return{...n,data:r.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:r.error,failureCount:n.failureCount+1,failureReason:r.error,isPaused:!1,status:"error"}}};this.state=s(this.state),As.batch(()=>{ne(this,wi).forEach(n=>{n.onMutationUpdate(r)}),ne(this,pn).notify({mutation:this,type:"updated",action:r})})},gM);function VF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var cl,za,yf,vM,AQ=(vM=class extends ym{constructor(r={}){super();wt(this,cl);wt(this,za);wt(this,yf);this.config=r,lt(this,cl,new Set),lt(this,za,new Map),lt(this,yf,0)}build(r,s,n){const a=new kQ({mutationCache:this,mutationId:++ax(this,yf)._,options:r.defaultMutationOptions(s),state:n});return this.add(a),a}add(r){ne(this,cl).add(r);const s=Sx(r);if(typeof s=="string"){const n=ne(this,za).get(s);n?n.push(r):ne(this,za).set(s,[r])}this.notify({type:"added",mutation:r})}remove(r){if(ne(this,cl).delete(r)){const s=Sx(r);if(typeof s=="string"){const n=ne(this,za).get(s);if(n)if(n.length>1){const a=n.indexOf(r);a!==-1&&n.splice(a,1)}else n[0]===r&&ne(this,za).delete(s)}}this.notify({type:"removed",mutation:r})}canRun(r){const s=Sx(r);if(typeof s=="string"){const n=ne(this,za).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===r}else return!0}runNext(r){var n;const s=Sx(r);if(typeof s=="string"){const a=(n=ne(this,za).get(s))==null?void 0:n.find(i=>i!==r&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){As.batch(()=>{ne(this,cl).forEach(r=>{this.notify({type:"removed",mutation:r})}),ne(this,cl).clear(),ne(this,za).clear()})}getAll(){return Array.from(ne(this,cl))}find(r){const s={exact:!0,...r};return this.getAll().find(n=>d_(s,n))}findAll(r={}){return this.getAll().filter(s=>d_(r,s))}notify(r){As.batch(()=>{this.listeners.forEach(s=>{s(r)})})}resumePausedMutations(){const r=this.getAll().filter(s=>s.state.isPaused);return As.batch(()=>Promise.all(r.map(s=>s.continue().catch(gn))))}},cl=new WeakMap,za=new WeakMap,yf=new WeakMap,vM);function Sx(t){var r;return(r=t.options.scope)==null?void 0:r.id}function h_(t){return{onFetch:(r,s)=>{var u,m,h,g,x;const n=r.options,a=(h=(m=(u=r.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:h.direction,i=((g=r.state.data)==null?void 0:g.pages)||[],l=((x=r.state.data)==null?void 0:x.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const y=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(r.signal.aborted?p=!0:r.signal.addEventListener("abort",()=>{p=!0}),r.signal)})},v=MF(r.options,r.fetchOptions),f=async(b,N,w)=>{if(p)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const P=(()=>{const D={client:r.client,queryKey:r.queryKey,pageParam:N,direction:w?"backward":"forward",meta:r.options.meta};return y(D),D})(),S=await v(P),{maxPages:A}=r.options,k=w?vQ:gQ;return{pages:k(b.pages,S,A),pageParams:k(b.pageParams,N,A)}};if(a&&i.length){const b=a==="backward",N=b?_Q:p_,w={pages:i,pageParams:l},C=N(n,w);o=await f(w,C,b)}else{const b=t??i.length;do{const N=c===0?l[0]??n.initialPageParam:p_(n,o);if(c>0&&N==null)break;o=await f(o,N),c++}while(c<b)}return o};r.options.persister?r.fetchFn=()=>{var p,y;return(y=(p=r.options).persister)==null?void 0:y.call(p,d,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},s)}:r.fetchFn=d}}}function p_(t,{pages:r,pageParams:s}){const n=r.length-1;return r.length>0?t.getNextPageParam(r[n],r,s[n],s):void 0}function _Q(t,{pages:r,pageParams:s}){var n;return r.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,r[0],r,s[0],s):void 0}var ls,so,no,pu,fu,ao,xu,gu,yM,TQ=(yM=class{constructor(t={}){wt(this,ls);wt(this,so);wt(this,no);wt(this,pu);wt(this,fu);wt(this,ao);wt(this,xu);wt(this,gu);lt(this,ls,t.queryCache||new PQ),lt(this,so,t.mutationCache||new AQ),lt(this,no,t.defaultOptions||{}),lt(this,pu,new Map),lt(this,fu,new Map),lt(this,ao,0)}mount(){ax(this,ao)._++,ne(this,ao)===1&&(lt(this,xu,iC.subscribe(async t=>{t&&(await this.resumePausedMutations(),ne(this,ls).onFocus())})),lt(this,gu,Jg.subscribe(async t=>{t&&(await this.resumePausedMutations(),ne(this,ls).onOnline())})))}unmount(){var t,r;ax(this,ao)._--,ne(this,ao)===0&&((t=ne(this,xu))==null||t.call(this),lt(this,xu,void 0),(r=ne(this,gu))==null||r.call(this),lt(this,gu,void 0))}isFetching(t){return ne(this,ls).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ne(this,so).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const r=this.defaultQueryOptions({queryKey:t});return(s=ne(this,ls).get(r.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),s=ne(this,ls).build(this,r),n=s.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(wo(r.staleTime,s))&&this.prefetchQuery(r),Promise.resolve(n))}getQueriesData(t){return ne(this,ls).findAll(t).map(({queryKey:r,state:s})=>{const n=s.data;return[r,n]})}setQueryData(t,r,s){const n=this.defaultQueryOptions({queryKey:t}),a=ne(this,ls).get(n.queryHash),i=a==null?void 0:a.state.data,l=fQ(r,i);if(l!==void 0)return ne(this,ls).build(this,n).setData(l,{...s,manual:!0})}setQueriesData(t,r,s){return As.batch(()=>ne(this,ls).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,r,s)]))}getQueryState(t){var s;const r=this.defaultQueryOptions({queryKey:t});return(s=ne(this,ls).get(r.queryHash))==null?void 0:s.state}removeQueries(t){const r=ne(this,ls);As.batch(()=>{r.findAll(t).forEach(s=>{r.remove(s)})})}resetQueries(t,r){const s=ne(this,ls);return As.batch(()=>(s.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const s={revert:!0,...r},n=As.batch(()=>ne(this,ls).findAll(t).map(a=>a.cancel(s)));return Promise.all(n).then(gn).catch(gn)}invalidateQueries(t,r={}){return As.batch(()=>(ne(this,ls).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},r)))}refetchQueries(t,r={}){const s={...r,cancelRefetch:r.cancelRefetch??!0},n=As.batch(()=>ne(this,ls).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(gn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(gn)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const s=ne(this,ls).build(this,r);return s.isStaleByTime(wo(r.staleTime,s))?s.fetch(r):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gn).catch(gn)}fetchInfiniteQuery(t){return t.behavior=h_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gn).catch(gn)}ensureInfiniteQueryData(t){return t.behavior=h_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Jg.isOnline()?ne(this,so).resumePausedMutations():Promise.resolve()}getQueryCache(){return ne(this,ls)}getMutationCache(){return ne(this,so)}getDefaultOptions(){return ne(this,no)}setDefaultOptions(t){lt(this,no,t)}setQueryDefaults(t,r){ne(this,pu).set(Ic(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...ne(this,pu).values()],s={};return r.forEach(n=>{xp(t,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(t,r){ne(this,fu).set(Ic(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...ne(this,fu).values()],s={};return r.forEach(n=>{xp(t,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const r={...ne(this,no).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=nC(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===aC&&(r.enabled=!1),r}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ne(this,no).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ne(this,ls).clear(),ne(this,so).clear()}},ls=new WeakMap,so=new WeakMap,no=new WeakMap,pu=new WeakMap,fu=new WeakMap,ao=new WeakMap,xu=new WeakMap,gu=new WeakMap,yM),Dn,cr,jf,fn,bc,vu,io,lo,bf,yu,ju,Nc,wc,oo,bu,yr,Ch,kw,Aw,_w,Tw,Ow,Ew,Dw,UF,jM,OQ=(jM=class extends ym{constructor(r,s){super();wt(this,yr);wt(this,Dn);wt(this,cr);wt(this,jf);wt(this,fn);wt(this,bc);wt(this,vu);wt(this,io);wt(this,lo);wt(this,bf);wt(this,yu);wt(this,ju);wt(this,Nc);wt(this,wc);wt(this,oo);wt(this,bu,new Set);this.options=s,lt(this,Dn,r),lt(this,lo,null),lt(this,io,Pw()),this.options.experimental_prefetchInRender||ne(this,io).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ne(this,cr).addObserver(this),f_(ne(this,cr),this.options)?Zt(this,yr,Ch).call(this):this.updateResult(),Zt(this,yr,Tw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Mw(ne(this,cr),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Mw(ne(this,cr),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Zt(this,yr,Ow).call(this),Zt(this,yr,Ew).call(this),ne(this,cr).removeObserver(this)}setOptions(r){const s=this.options,n=ne(this,cr);if(this.options=ne(this,Dn).defaultQueryOptions(r),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ca(this.options.enabled,ne(this,cr))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Zt(this,yr,Dw).call(this),ne(this,cr).setOptions(this.options),s._defaulted&&!Zg(this.options,s)&&ne(this,Dn).getQueryCache().notify({type:"observerOptionsUpdated",query:ne(this,cr),observer:this});const a=this.hasListeners();a&&x_(ne(this,cr),n,this.options,s)&&Zt(this,yr,Ch).call(this),this.updateResult(),a&&(ne(this,cr)!==n||Ca(this.options.enabled,ne(this,cr))!==Ca(s.enabled,ne(this,cr))||wo(this.options.staleTime,ne(this,cr))!==wo(s.staleTime,ne(this,cr)))&&Zt(this,yr,kw).call(this);const i=Zt(this,yr,Aw).call(this);a&&(ne(this,cr)!==n||Ca(this.options.enabled,ne(this,cr))!==Ca(s.enabled,ne(this,cr))||i!==ne(this,oo))&&Zt(this,yr,_w).call(this,i)}getOptimisticResult(r){const s=ne(this,Dn).getQueryCache().build(ne(this,Dn),r),n=this.createResult(s,r);return DQ(this,n)&&(lt(this,fn,n),lt(this,vu,this.options),lt(this,bc,ne(this,cr).state)),n}getCurrentResult(){return ne(this,fn)}trackResult(r,s){return new Proxy(r,{get:(n,a)=>(this.trackProp(a),s==null||s(a),Reflect.get(n,a))})}trackProp(r){ne(this,bu).add(r)}getCurrentQuery(){return ne(this,cr)}refetch({...r}={}){return this.fetch({...r})}fetchOptimistic(r){const s=ne(this,Dn).defaultQueryOptions(r),n=ne(this,Dn).getQueryCache().build(ne(this,Dn),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(r){return Zt(this,yr,Ch).call(this,{...r,cancelRefetch:r.cancelRefetch??!0}).then(()=>(this.updateResult(),ne(this,fn)))}createResult(r,s){var A;const n=ne(this,cr),a=this.options,i=ne(this,fn),l=ne(this,bc),o=ne(this,vu),d=r!==n?r.state:ne(this,jf),{state:u}=r;let m={...u},h=!1,g;if(s._optimisticResults){const k=this.hasListeners(),D=!k&&f_(r,s),q=k&&x_(r,n,s,a);(D||q)&&(m={...m,...BF(u.data,r.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:p,status:y}=m;g=m.data;let v=!1;if(s.placeholderData!==void 0&&g===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&s.placeholderData===(o==null?void 0:o.placeholderData)?(k=i.data,v=!0):k=typeof s.placeholderData=="function"?s.placeholderData((A=ne(this,ju))==null?void 0:A.state.data,ne(this,ju)):s.placeholderData,k!==void 0&&(y="success",g=Cw(i==null?void 0:i.data,k,s),h=!0)}if(s.select&&g!==void 0&&!v)if(i&&g===(l==null?void 0:l.data)&&s.select===ne(this,bf))g=ne(this,yu);else try{lt(this,bf,s.select),g=s.select(g),g=Cw(i==null?void 0:i.data,g,s),lt(this,yu,g),lt(this,lo,null)}catch(k){lt(this,lo,k)}ne(this,lo)&&(x=ne(this,lo),g=ne(this,yu),p=Date.now(),y="error");const f=m.fetchStatus==="fetching",b=y==="pending",N=y==="error",w=b&&f,C=g!==void 0,S={status:y,fetchStatus:m.fetchStatus,isPending:b,isSuccess:y==="success",isError:N,isInitialLoading:w,isLoading:w,data:g,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:p,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:f,isRefetching:f&&!b,isLoadingError:N&&!C,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&C,isStale:lC(r,s),refetch:this.refetch,promise:ne(this,io),isEnabled:Ca(s.enabled,r)!==!1};if(this.options.experimental_prefetchInRender){const k=z=>{S.status==="error"?z.reject(S.error):S.data!==void 0&&z.resolve(S.data)},D=()=>{const z=lt(this,io,S.promise=Pw());k(z)},q=ne(this,io);switch(q.status){case"pending":r.queryHash===n.queryHash&&k(q);break;case"fulfilled":(S.status==="error"||S.data!==q.value)&&D();break;case"rejected":(S.status!=="error"||S.error!==q.reason)&&D();break}}return S}updateResult(){const r=ne(this,fn),s=this.createResult(ne(this,cr),this.options);if(lt(this,bc,ne(this,cr).state),lt(this,vu,this.options),ne(this,bc).data!==void 0&&lt(this,ju,ne(this,cr)),Zg(s,r))return;lt(this,fn,s);const n=()=>{if(!r)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!ne(this,bu).size)return!0;const l=new Set(i??ne(this,bu));return this.options.throwOnError&&l.add("error"),Object.keys(ne(this,fn)).some(o=>{const c=o;return ne(this,fn)[c]!==r[c]&&l.has(c)})};Zt(this,yr,UF).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Zt(this,yr,Tw).call(this)}},Dn=new WeakMap,cr=new WeakMap,jf=new WeakMap,fn=new WeakMap,bc=new WeakMap,vu=new WeakMap,io=new WeakMap,lo=new WeakMap,bf=new WeakMap,yu=new WeakMap,ju=new WeakMap,Nc=new WeakMap,wc=new WeakMap,oo=new WeakMap,bu=new WeakMap,yr=new WeakSet,Ch=function(r){Zt(this,yr,Dw).call(this);let s=ne(this,cr).fetch(this.options,r);return r!=null&&r.throwOnError||(s=s.catch(gn)),s},kw=function(){Zt(this,yr,Ow).call(this);const r=wo(this.options.staleTime,ne(this,cr));if(Mc||ne(this,fn).isStale||!ww(r))return;const n=EF(ne(this,fn).dataUpdatedAt,r)+1;lt(this,Nc,setTimeout(()=>{ne(this,fn).isStale||this.updateResult()},n))},Aw=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ne(this,cr)):this.options.refetchInterval)??!1},_w=function(r){Zt(this,yr,Ew).call(this),lt(this,oo,r),!(Mc||Ca(this.options.enabled,ne(this,cr))===!1||!ww(ne(this,oo))||ne(this,oo)===0)&&lt(this,wc,setInterval(()=>{(this.options.refetchIntervalInBackground||iC.isFocused())&&Zt(this,yr,Ch).call(this)},ne(this,oo)))},Tw=function(){Zt(this,yr,kw).call(this),Zt(this,yr,_w).call(this,Zt(this,yr,Aw).call(this))},Ow=function(){ne(this,Nc)&&(clearTimeout(ne(this,Nc)),lt(this,Nc,void 0))},Ew=function(){ne(this,wc)&&(clearInterval(ne(this,wc)),lt(this,wc,void 0))},Dw=function(){const r=ne(this,Dn).getQueryCache().build(ne(this,Dn),this.options);if(r===ne(this,cr))return;const s=ne(this,cr);lt(this,cr,r),lt(this,jf,r.state),this.hasListeners()&&(s==null||s.removeObserver(this),r.addObserver(this))},UF=function(r){As.batch(()=>{r.listeners&&this.listeners.forEach(s=>{s(ne(this,fn))}),ne(this,Dn).getQueryCache().notify({query:ne(this,cr),type:"observerResultsUpdated"})})},jM);function EQ(t,r){return Ca(r.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&r.retryOnMount===!1)}function f_(t,r){return EQ(t,r)||t.state.data!==void 0&&Mw(t,r,r.refetchOnMount)}function Mw(t,r,s){if(Ca(r.enabled,t)!==!1&&wo(r.staleTime,t)!=="static"){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&lC(t,r)}return!1}function x_(t,r,s,n){return(t!==r||Ca(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&lC(t,s)}function lC(t,r){return Ca(r.enabled,t)!==!1&&t.isStaleByTime(wo(r.staleTime,t))}function DQ(t,r){return!Zg(t.getCurrentResult(),r)}var co,uo,Mn,dl,bl,pg,Iw,bM,MQ=(bM=class extends ym{constructor(s,n){super();wt(this,bl);wt(this,co);wt(this,uo);wt(this,Mn);wt(this,dl);lt(this,co,s),this.setOptions(n),this.bindMethods(),Zt(this,bl,pg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var a;const n=this.options;this.options=ne(this,co).defaultMutationOptions(s),Zg(this.options,n)||ne(this,co).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ne(this,Mn),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ic(n.mutationKey)!==Ic(this.options.mutationKey)?this.reset():((a=ne(this,Mn))==null?void 0:a.state.status)==="pending"&&ne(this,Mn).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=ne(this,Mn))==null||s.removeObserver(this)}onMutationUpdate(s){Zt(this,bl,pg).call(this),Zt(this,bl,Iw).call(this,s)}getCurrentResult(){return ne(this,uo)}reset(){var s;(s=ne(this,Mn))==null||s.removeObserver(this),lt(this,Mn,void 0),Zt(this,bl,pg).call(this),Zt(this,bl,Iw).call(this)}mutate(s,n){var a;return lt(this,dl,n),(a=ne(this,Mn))==null||a.removeObserver(this),lt(this,Mn,ne(this,co).getMutationCache().build(ne(this,co),this.options)),ne(this,Mn).addObserver(this),ne(this,Mn).execute(s)}},co=new WeakMap,uo=new WeakMap,Mn=new WeakMap,dl=new WeakMap,bl=new WeakSet,pg=function(){var n;const s=((n=ne(this,Mn))==null?void 0:n.state)??VF();lt(this,uo,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},Iw=function(s){As.batch(()=>{var n,a,i,l,o,c,d,u;if(ne(this,dl)&&this.hasListeners()){const m=ne(this,uo).variables,h=ne(this,uo).context;(s==null?void 0:s.type)==="success"?((a=(n=ne(this,dl)).onSuccess)==null||a.call(n,s.data,m,h),(l=(i=ne(this,dl)).onSettled)==null||l.call(i,s.data,null,m,h)):(s==null?void 0:s.type)==="error"&&((c=(o=ne(this,dl)).onError)==null||c.call(o,s.error,m,h),(u=(d=ne(this,dl)).onSettled)==null||u.call(d,void 0,s.error,m,h))}this.listeners.forEach(m=>{m(ne(this,uo))})})},bM),qF=j.createContext(void 0),Ml=t=>{const r=j.useContext(qF);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},IQ=({client:t,children:r})=>(j.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(qF.Provider,{value:t,children:r})),zF=j.createContext(!1),RQ=()=>j.useContext(zF);zF.Provider;function FQ(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var $Q=j.createContext(FQ()),LQ=()=>j.useContext($Q),BQ=(t,r)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(r.isReset()||(t.retryOnMount=!1))},VQ=t=>{j.useEffect(()=>{t.clearReset()},[t])},UQ=({result:t,errorResetBoundary:r,throwOnError:s,query:n,suspense:a})=>t.isError&&!r.isReset()&&!t.isFetching&&n&&(a&&t.data===void 0||IF(s,[t.error,n])),qQ=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...n)=>r(s(...n)):r(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},zQ=(t,r)=>t.isLoading&&t.isFetching&&!r,KQ=(t,r)=>(t==null?void 0:t.suspense)&&r.isPending,g_=(t,r,s)=>r.fetchOptimistic(t).catch(()=>{s.clearReset()});function HQ(t,r,s){var m,h,g,x,p;const n=RQ(),a=LQ(),i=Ml(),l=i.defaultQueryOptions(t);(h=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||h.call(m,l),l._optimisticResults=n?"isRestoring":"optimistic",qQ(l),BQ(l,a),VQ(a);const o=!i.getQueryCache().get(l.queryHash),[c]=j.useState(()=>new r(i,l)),d=c.getOptimisticResult(l),u=!n&&t.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(y=>{const v=u?c.subscribe(As.batchCalls(y)):gn;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(l)},[l,c]),KQ(l,d))throw g_(l,c,a);if(UQ({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((x=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||x.call(g,l,d),l.experimental_prefetchInRender&&!Mc&&zQ(d,n)){const y=o?g_(l,c,a):(p=i.getQueryCache().get(l.queryHash))==null?void 0:p.promise;y==null||y.catch(gn).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function fe(t,r){return HQ(t,OQ)}function Se(t,r){const s=Ml(),[n]=j.useState(()=>new MQ(s,t));j.useEffect(()=>{n.setOptions(t)},[n,t]);const a=j.useSyncExternalStore(j.useCallback(l=>n.subscribe(As.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=j.useCallback((l,o)=>{n.mutate(l,o).catch(gn)},[n]);if(a.error&&IF(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}async function KF(t){if(!t.ok){let r=t.statusText;try{const s=t.headers.get("content-type");if(s&&s.includes("application/json")){const n=await t.json();r=n.error||n.message||t.statusText}else r=await t.text()||t.statusText}catch{r=t.statusText}throw new Error(`${t.status}: ${r}`)}}async function ie(t,r,s){const n=await fetch(r,{method:t,headers:s?{"Content-Type":"application/json"}:{},body:s?JSON.stringify(s):void 0,credentials:"include"});return await KF(n),n}const HF=({on401:t})=>async({queryKey:r})=>{const s=await fetch(r[0],{credentials:"include"});if(t==="returnNull"&&s.status===401||(await KF(s),s.headers.get("content-length")==="0"))return null;const a=s.headers.get("content-type");if(a&&a.includes("application/json"))try{const i=await s.text();return i.trim()?JSON.parse(i):null}catch(i){throw console.error("JSON parsing error in queryClient:",i),console.error("Response text that failed to parse:",await s.text()),new Error(`Failed to parse JSON response: ${i.message}`)}return null},pe=new TQ({defaultOptions:{queries:{queryFn:HF({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),WQ=1,GQ=1e6;let v0=0;function YQ(){return v0=(v0+1)%Number.MAX_SAFE_INTEGER,v0.toString()}const y0=new Map,v_=t=>{if(y0.has(t))return;const r=setTimeout(()=>{y0.delete(t),Vh({type:"REMOVE_TOAST",toastId:t})},GQ);y0.set(t,r)},QQ=(t,r)=>{switch(r.type){case"ADD_TOAST":return{...t,toasts:[r.toast,...t.toasts].slice(0,WQ)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===r.toast.id?{...s,...r.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=r;return s?v_(s):t.toasts.forEach(n=>{v_(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return r.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==r.toastId)}}},fg=[];let xg={toasts:[]};function Vh(t){xg=QQ(xg,t),fg.forEach(r=>{r(xg)})}function XQ({...t}){const r=YQ(),s=a=>Vh({type:"UPDATE_TOAST",toast:{...a,id:r}}),n=()=>Vh({type:"DISMISS_TOAST",toastId:r});return Vh({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:a=>{a||n()}}}),{id:r,dismiss:n,update:s}}function Ue(){const[t,r]=j.useState(xg);return j.useEffect(()=>(fg.push(r),()=>{const s=fg.indexOf(r);s>-1&&fg.splice(s,1)}),[t]),{...t,toast:XQ,dismiss:s=>Vh({type:"DISMISS_TOAST",toastId:s})}}function We(t,r,{checkForDefaultPrevented:s=!0}={}){return function(a){if(t==null||t(a),s===!1||!a.defaultPrevented)return r==null?void 0:r(a)}}function y_(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function nj(...t){return r=>{let s=!1;const n=t.map(a=>{const i=y_(a,r);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():y_(t[a],null)}}}}function $t(...t){return j.useCallback(nj(...t),t)}function ZQ(t,r){const s=j.createContext(r),n=i=>{const{children:l,...o}=i,c=j.useMemo(()=>o,Object.values(o));return e.jsx(s.Provider,{value:c,children:l})};n.displayName=t+"Provider";function a(i){const l=j.useContext(s);if(l)return l;if(r!==void 0)return r;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function ws(t,r=[]){let s=[];function n(i,l){const o=j.createContext(l),c=s.length;s=[...s,l];const d=m=>{var v;const{scope:h,children:g,...x}=m,p=((v=h==null?void 0:h[t])==null?void 0:v[c])||o,y=j.useMemo(()=>x,Object.values(x));return e.jsx(p.Provider,{value:y,children:g})};d.displayName=i+"Provider";function u(m,h){var p;const g=((p=h==null?void 0:h[t])==null?void 0:p[c])||o,x=j.useContext(g);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=s.map(l=>j.createContext(l));return function(o){const c=(o==null?void 0:o[t])||i;return j.useMemo(()=>({[`__scope${t}`]:{...o,[t]:c}}),[o,c])}};return a.scopeName=t,[n,JQ(a,...r)]}function JQ(...t){const r=t[0];if(t.length===1)return r;const s=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const l=n.reduce((o,{useScope:c,scopeName:d})=>{const m=c(i)[`__scope${d}`];return{...o,...m}},{});return j.useMemo(()=>({[`__scope${r.scopeName}`]:l}),[l])}};return s.scopeName=r.scopeName,s}function Ao(t){const r=eX(t),s=j.forwardRef((n,a)=>{const{children:i,...l}=n,o=j.Children.toArray(i),c=o.find(rX);if(c){const d=c.props.children,u=o.map(m=>m===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:m);return e.jsx(r,{...l,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return e.jsx(r,{...l,ref:a,children:i})});return s.displayName=`${t}.Slot`,s}var WF=Ao("Slot");function eX(t){const r=j.forwardRef((s,n)=>{const{children:a,...i}=s;if(j.isValidElement(a)){const l=nX(a),o=sX(i,a.props);return a.type!==j.Fragment&&(o.ref=n?nj(n,l):l),j.cloneElement(a,o)}return j.Children.count(a)>1?j.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var GF=Symbol("radix.slottable");function tX(t){const r=({children:s})=>e.jsx(e.Fragment,{children:s});return r.displayName=`${t}.Slottable`,r.__radixId=GF,r}function rX(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===GF}function sX(t,r){const s={...r};for(const n in r){const a=t[n],i=r[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...t,...s}}function nX(t){var n,a;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function Af(t){const r=t+"CollectionProvider",[s,n]=ws(r),[a,i]=s(r,{collectionRef:{current:null},itemMap:new Map}),l=p=>{const{scope:y,children:v}=p,f=Q.useRef(null),b=Q.useRef(new Map).current;return e.jsx(a,{scope:y,itemMap:b,collectionRef:f,children:v})};l.displayName=r;const o=t+"CollectionSlot",c=Ao(o),d=Q.forwardRef((p,y)=>{const{scope:v,children:f}=p,b=i(o,v),N=$t(y,b.collectionRef);return e.jsx(c,{ref:N,children:f})});d.displayName=o;const u=t+"CollectionItemSlot",m="data-radix-collection-item",h=Ao(u),g=Q.forwardRef((p,y)=>{const{scope:v,children:f,...b}=p,N=Q.useRef(null),w=$t(y,N),C=i(u,v);return Q.useEffect(()=>(C.itemMap.set(N,{ref:N,...b}),()=>void C.itemMap.delete(N))),e.jsx(h,{[m]:"",ref:w,children:f})});g.displayName=u;function x(p){const y=i(t+"CollectionConsumer",p);return Q.useCallback(()=>{const f=y.collectionRef.current;if(!f)return[];const b=Array.from(f.querySelectorAll(`[${m}]`));return Array.from(y.itemMap.values()).sort((C,P)=>b.indexOf(C.ref.current)-b.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:l,Slot:d,ItemSlot:g},x,n]}var aX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],it=aX.reduce((t,r)=>{const s=Ao(`Primitive.${r}`),n=j.forwardRef((a,i)=>{const{asChild:l,...o}=a,c=l?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...o,ref:i})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{});function oC(t,r){t&&td.flushSync(()=>t.dispatchEvent(r))}function ds(t){const r=j.useRef(t);return j.useEffect(()=>{r.current=t}),j.useMemo(()=>(...s)=>{var n;return(n=r.current)==null?void 0:n.call(r,...s)},[])}function iX(t,r=globalThis==null?void 0:globalThis.document){const s=ds(t);j.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return r.addEventListener("keydown",n,{capture:!0}),()=>r.removeEventListener("keydown",n,{capture:!0})},[s,r])}var lX="DismissableLayer",Rw="dismissableLayer.update",oX="dismissableLayer.pointerDownOutside",cX="dismissableLayer.focusOutside",j_,YF=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jm=j.forwardRef((t,r)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...c}=t,d=j.useContext(YF),[u,m]=j.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=j.useState({}),x=$t(r,P=>m(P)),p=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=p.indexOf(y),f=u?p.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,N=f>=v,w=uX(P=>{const S=P.target,A=[...d.branches].some(k=>k.contains(S));!N||A||(a==null||a(P),l==null||l(P),P.defaultPrevented||o==null||o())},h),C=mX(P=>{const S=P.target;[...d.branches].some(k=>k.contains(S))||(i==null||i(P),l==null||l(P),P.defaultPrevented||o==null||o())},h);return iX(P=>{f===d.layers.size-1&&(n==null||n(P),!P.defaultPrevented&&o&&(P.preventDefault(),o()))},h),j.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(j_=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),b_(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=j_)}},[u,h,s,d]),j.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),b_())},[u,d]),j.useEffect(()=>{const P=()=>g({});return document.addEventListener(Rw,P),()=>document.removeEventListener(Rw,P)},[]),e.jsx(it.div,{...c,ref:x,style:{pointerEvents:b?N?"auto":"none":void 0,...t.style},onFocusCapture:We(t.onFocusCapture,C.onFocusCapture),onBlurCapture:We(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:We(t.onPointerDownCapture,w.onPointerDownCapture)})});jm.displayName=lX;var dX="DismissableLayerBranch",QF=j.forwardRef((t,r)=>{const s=j.useContext(YF),n=j.useRef(null),a=$t(r,n);return j.useEffect(()=>{const i=n.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),e.jsx(it.div,{...t,ref:a})});QF.displayName=dX;function uX(t,r=globalThis==null?void 0:globalThis.document){const s=ds(t),n=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=o=>{if(o.target&&!n.current){let c=function(){XF(oX,s,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(r.removeEventListener("click",a.current),a.current=c,r.addEventListener("click",a.current,{once:!0})):c()}else r.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{r.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",i),r.removeEventListener("click",a.current)}},[r,s]),{onPointerDownCapture:()=>n.current=!0}}function mX(t,r=globalThis==null?void 0:globalThis.document){const s=ds(t),n=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!n.current&&XF(cX,s,{originalEvent:i},{discrete:!1})};return r.addEventListener("focusin",a),()=>r.removeEventListener("focusin",a)},[r,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function b_(){const t=new CustomEvent(Rw);document.dispatchEvent(t)}function XF(t,r,s,{discrete:n}){const a=s.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});r&&a.addEventListener(t,r,{once:!0}),n?oC(a,i):a.dispatchEvent(i)}var hX=jm,pX=QF,ms=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},fX="Portal",bm=j.forwardRef((t,r)=>{var o;const{container:s,...n}=t,[a,i]=j.useState(!1);ms(()=>i(!0),[]);const l=s||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return l?BY.createPortal(e.jsx(it.div,{...n,ref:r}),l):null});bm.displayName=fX;function xX(t,r){return j.useReducer((s,n)=>r[s][n]??s,t)}var Rs=t=>{const{present:r,children:s}=t,n=gX(r),a=typeof s=="function"?s({present:n.isPresent}):j.Children.only(s),i=$t(n.ref,vX(a));return typeof s=="function"||n.isPresent?j.cloneElement(a,{ref:i}):null};Rs.displayName="Presence";function gX(t){const[r,s]=j.useState(),n=j.useRef(null),a=j.useRef(t),i=j.useRef("none"),l=t?"mounted":"unmounted",[o,c]=xX(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=Cx(n.current);i.current=o==="mounted"?d:"none"},[o]),ms(()=>{const d=n.current,u=a.current;if(u!==t){const h=i.current,g=Cx(d);t?c("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),ms(()=>{if(r){let d;const u=r.ownerDocument.defaultView??window,m=g=>{const p=Cx(n.current).includes(g.animationName);if(g.target===r&&p&&(c("ANIMATION_END"),!a.current)){const y=r.style.animationFillMode;r.style.animationFillMode="forwards",d=u.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=y)})}},h=g=>{g.target===r&&(i.current=Cx(n.current))};return r.addEventListener("animationstart",h),r.addEventListener("animationcancel",m),r.addEventListener("animationend",m),()=>{u.clearTimeout(d),r.removeEventListener("animationstart",h),r.removeEventListener("animationcancel",m),r.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:j.useCallback(d=>{n.current=d?getComputedStyle(d):null,s(d)},[])}}function Cx(t){return(t==null?void 0:t.animationName)||"none"}function vX(t){var n,a;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var yX=c2[" useInsertionEffect ".trim().toString()]||ms;function Hn({prop:t,defaultProp:r,onChange:s=()=>{},caller:n}){const[a,i,l]=jX({defaultProp:r,onChange:s}),o=t!==void 0,c=o?t:a;{const u=j.useRef(t!==void 0);j.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,n])}const d=j.useCallback(u=>{var m;if(o){const h=bX(u)?u(t):u;h!==t&&((m=l.current)==null||m.call(l,h))}else i(u)},[o,t,i,l]);return[c,d]}function jX({defaultProp:t,onChange:r}){const[s,n]=j.useState(t),a=j.useRef(s),i=j.useRef(r);return yX(()=>{i.current=r},[r]),j.useEffect(()=>{var l;a.current!==s&&((l=i.current)==null||l.call(i,s),a.current=s)},[s,a]),[s,n,i]}function bX(t){return typeof t=="function"}var ZF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NX="VisuallyHidden",cC=j.forwardRef((t,r)=>e.jsx(it.span,{...t,ref:r,style:{...ZF,...t.style}}));cC.displayName=NX;var dC="ToastProvider",[uC,wX,SX]=Af("Toast"),[JF,KFe]=ws("Toast",[SX]),[CX,aj]=JF(dC),e$=t=>{const{__scopeToast:r,label:s="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:l}=t,[o,c]=j.useState(null),[d,u]=j.useState(0),m=j.useRef(!1),h=j.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${dC}\`. Expected non-empty \`string\`.`),e.jsx(uC.Provider,{scope:r,children:e.jsx(CX,{scope:r,label:s,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:j.useCallback(()=>u(g=>g+1),[]),onToastRemove:j.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:h,children:l})})};e$.displayName=dC;var t$="ToastViewport",PX=["F8"],Fw="toast.viewportPause",$w="toast.viewportResume",r$=j.forwardRef((t,r)=>{const{__scopeToast:s,hotkey:n=PX,label:a="Notifications ({hotkey})",...i}=t,l=aj(t$,s),o=wX(s),c=j.useRef(null),d=j.useRef(null),u=j.useRef(null),m=j.useRef(null),h=$t(r,m,l.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=l.toastCount>0;j.useEffect(()=>{const y=v=>{var b;n.length!==0&&n.every(N=>v[N]||v.code===N)&&((b=m.current)==null||b.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),j.useEffect(()=>{const y=c.current,v=m.current;if(x&&y&&v){const f=()=>{if(!l.isClosePausedRef.current){const C=new CustomEvent(Fw);v.dispatchEvent(C),l.isClosePausedRef.current=!0}},b=()=>{if(l.isClosePausedRef.current){const C=new CustomEvent($w);v.dispatchEvent(C),l.isClosePausedRef.current=!1}},N=C=>{!y.contains(C.relatedTarget)&&b()},w=()=>{y.contains(document.activeElement)||b()};return y.addEventListener("focusin",f),y.addEventListener("focusout",N),y.addEventListener("pointermove",f),y.addEventListener("pointerleave",w),window.addEventListener("blur",f),window.addEventListener("focus",b),()=>{y.removeEventListener("focusin",f),y.removeEventListener("focusout",N),y.removeEventListener("pointermove",f),y.removeEventListener("pointerleave",w),window.removeEventListener("blur",f),window.removeEventListener("focus",b)}}},[x,l.isClosePausedRef]);const p=j.useCallback(({tabbingDirection:y})=>{const f=o().map(b=>{const N=b.ref.current,w=[N,...LX(N)];return y==="forwards"?w:w.reverse()});return(y==="forwards"?f.reverse():f).flat()},[o]);return j.useEffect(()=>{const y=m.current;if(y){const v=f=>{var w,C,P;const b=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!b){const S=document.activeElement,A=f.shiftKey;if(f.target===y&&A){(w=d.current)==null||w.focus();return}const q=p({tabbingDirection:A?"backwards":"forwards"}),z=q.findIndex(I=>I===S);j0(q.slice(z+1))?f.preventDefault():A?(C=d.current)==null||C.focus():(P=u.current)==null||P.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[o,p]),e.jsxs(pX,{ref:c,role:"region","aria-label":a.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&e.jsx(Lw,{ref:d,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"forwards"});j0(y)}}),e.jsx(uC.Slot,{scope:s,children:e.jsx(it.ol,{tabIndex:-1,...i,ref:h})}),x&&e.jsx(Lw,{ref:u,onFocusFromOutsideViewport:()=>{const y=p({tabbingDirection:"backwards"});j0(y)}})]})});r$.displayName=t$;var s$="ToastFocusProxy",Lw=j.forwardRef((t,r)=>{const{__scopeToast:s,onFocusFromOutsideViewport:n,...a}=t,i=aj(s$,s);return e.jsx(cC,{"aria-hidden":!0,tabIndex:0,...a,ref:r,style:{position:"fixed"},onFocus:l=>{var d;const o=l.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&n()}})});Lw.displayName=s$;var _f="Toast",kX="toast.swipeStart",AX="toast.swipeMove",_X="toast.swipeCancel",TX="toast.swipeEnd",n$=j.forwardRef((t,r)=>{const{forceMount:s,open:n,defaultOpen:a,onOpenChange:i,...l}=t,[o,c]=Hn({prop:n,defaultProp:a??!0,onChange:i,caller:_f});return e.jsx(Rs,{present:s||o,children:e.jsx(DX,{open:o,...l,ref:r,onClose:()=>c(!1),onPause:ds(t.onPause),onResume:ds(t.onResume),onSwipeStart:We(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:We(t.onSwipeMove,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:We(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:We(t.onSwipeEnd,d=>{const{x:u,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});n$.displayName=_f;var[OX,EX]=JF(_f,{onClose(){}}),DX=j.forwardRef((t,r)=>{const{__scopeToast:s,type:n="foreground",duration:a,open:i,onClose:l,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:g,...x}=t,p=aj(_f,s),[y,v]=j.useState(null),f=$t(r,I=>v(I)),b=j.useRef(null),N=j.useRef(null),w=a||p.duration,C=j.useRef(0),P=j.useRef(w),S=j.useRef(0),{onToastAdd:A,onToastRemove:k}=p,D=ds(()=>{var F;(y==null?void 0:y.contains(document.activeElement))&&((F=p.viewport)==null||F.focus()),l()}),q=j.useCallback(I=>{!I||I===1/0||(window.clearTimeout(S.current),C.current=new Date().getTime(),S.current=window.setTimeout(D,I))},[D]);j.useEffect(()=>{const I=p.viewport;if(I){const F=()=>{q(P.current),d==null||d()},W=()=>{const X=new Date().getTime()-C.current;P.current=P.current-X,window.clearTimeout(S.current),c==null||c()};return I.addEventListener(Fw,W),I.addEventListener($w,F),()=>{I.removeEventListener(Fw,W),I.removeEventListener($w,F)}}},[p.viewport,w,c,d,q]),j.useEffect(()=>{i&&!p.isClosePausedRef.current&&q(w)},[i,w,p.isClosePausedRef,q]),j.useEffect(()=>(A(),()=>k()),[A,k]);const z=j.useMemo(()=>y?u$(y):null,[y]);return p.viewport?e.jsxs(e.Fragment,{children:[z&&e.jsx(MX,{__scopeToast:s,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),e.jsx(OX,{scope:s,onClose:D,children:td.createPortal(e.jsx(uC.ItemSlot,{scope:s,children:e.jsx(hX,{asChild:!0,onEscapeKeyDown:We(o,()=>{p.isFocusedToastEscapeKeyDownRef.current||D(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(it.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...x,ref:f,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:We(t.onKeyDown,I=>{I.key==="Escape"&&(o==null||o(I.nativeEvent),I.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:We(t.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:We(t.onPointerMove,I=>{if(!b.current)return;const F=I.clientX-b.current.x,W=I.clientY-b.current.y,X=!!N.current,K=["left","right"].includes(p.swipeDirection),Z=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,ue=K?Z(0,F):0,Ne=K?0:Z(0,W),J=I.pointerType==="touch"?10:2,Re={x:ue,y:Ne},Ee={originalEvent:I,delta:Re};X?(N.current=Re,Px(AX,m,Ee,{discrete:!1})):N_(Re,p.swipeDirection,J)?(N.current=Re,Px(kX,u,Ee,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(F)>J||Math.abs(W)>J)&&(b.current=null)}),onPointerUp:We(t.onPointerUp,I=>{const F=N.current,W=I.target;if(W.hasPointerCapture(I.pointerId)&&W.releasePointerCapture(I.pointerId),N.current=null,b.current=null,F){const X=I.currentTarget,K={originalEvent:I,delta:F};N_(F,p.swipeDirection,p.swipeThreshold)?Px(TX,g,K,{discrete:!0}):Px(_X,h,K,{discrete:!0}),X.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),MX=t=>{const{__scopeToast:r,children:s,...n}=t,a=aj(_f,r),[i,l]=j.useState(!1),[o,c]=j.useState(!1);return FX(()=>l(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:e.jsx(bm,{asChild:!0,children:e.jsx(cC,{...n,children:i&&e.jsxs(e.Fragment,{children:[a.label," ",s]})})})},IX="ToastTitle",a$=j.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t;return e.jsx(it.div,{...n,ref:r})});a$.displayName=IX;var RX="ToastDescription",i$=j.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t;return e.jsx(it.div,{...n,ref:r})});i$.displayName=RX;var l$="ToastAction",o$=j.forwardRef((t,r)=>{const{altText:s,...n}=t;return s.trim()?e.jsx(d$,{altText:s,asChild:!0,children:e.jsx(mC,{...n,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${l$}\`. Expected non-empty \`string\`.`),null)});o$.displayName=l$;var c$="ToastClose",mC=j.forwardRef((t,r)=>{const{__scopeToast:s,...n}=t,a=EX(c$,s);return e.jsx(d$,{asChild:!0,children:e.jsx(it.button,{type:"button",...n,ref:r,onClick:We(t.onClick,a.onClose)})})});mC.displayName=c$;var d$=j.forwardRef((t,r)=>{const{__scopeToast:s,altText:n,...a}=t;return e.jsx(it.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:r})});function u$(t){const r=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&r.push(n.textContent),$X(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const l=n.dataset.radixToastAnnounceAlt;l&&r.push(l)}else r.push(...u$(n))}}),r}function Px(t,r,s,{discrete:n}){const a=s.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});r&&a.addEventListener(t,r,{once:!0}),n?oC(a,i):a.dispatchEvent(i)}var N_=(t,r,s=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),i=n>a;return r==="left"||r==="right"?i&&n>s:!i&&a>s};function FX(t=()=>{}){const r=ds(t);ms(()=>{let s=0,n=0;return s=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(n)}},[r])}function $X(t){return t.nodeType===t.ELEMENT_NODE}function LX(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function j0(t){const r=document.activeElement;return t.some(s=>s===r?!0:(s.focus(),document.activeElement!==r))}var BX=e$,m$=r$,h$=n$,p$=a$,f$=i$,x$=o$,g$=mC;function v$(t){var r,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(s=v$(t[r]))&&(n&&(n+=" "),n+=s)}else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}function Ut(){for(var t,r,s=0,n="",a=arguments.length;s<a;s++)(t=arguments[s])&&(r=v$(t))&&(n&&(n+=" "),n+=r);return n}const w_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,S_=Ut,Nm=(t,r)=>s=>{var n;if((r==null?void 0:r.variants)==null)return S_(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=r,l=Object.keys(a).map(d=>{const u=s==null?void 0:s[d],m=i==null?void 0:i[d];if(u===null)return null;const h=w_(u)||w_(m);return a[d][h]}),o=s&&Object.entries(s).reduce((d,u)=>{let[m,h]=u;return h===void 0||(d[m]=h),d},{}),c=r==null||(n=r.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:m,className:h,...g}=u;return Object.entries(g).every(x=>{let[p,y]=x;return Array.isArray(y)?y.includes({...i,...o}[p]):{...i,...o}[p]===y})?[...d,m,h]:d},[]);return S_(t,l,c,s==null?void 0:s.class,s==null?void 0:s.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),y$=(...t)=>t.filter((r,s,n)=>!!r&&n.indexOf(r)===s).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=j.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>j.createElement("svg",{ref:c,...UX,width:r,height:r,stroke:t,strokeWidth:n?Number(s)*24/Number(r):s,className:y$("lucide",a),...o},[...l.map(([d,u])=>j.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(t,r)=>{const s=j.forwardRef(({className:n,...a},i)=>j.createElement(qX,{ref:i,iconNode:r,className:y$(`lucide-${VX(t)}`,n),...a}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=Pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=Pe("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=Pe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WX=Pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=Pe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=Pe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=Pe("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QX=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=Pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZX=Pe("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=Pe("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Pe("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Pe("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=Pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Pe("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=Pe("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=Pe("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=Pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=Pe("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=Pe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=Pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=Pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=Pe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=Pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=Pe("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Pe("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=Pe("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=Pe("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=Pe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=Pe("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=Pe("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Pe("Hotel",[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Pe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=Pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Pe("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=Pe("LandPlot",[["path",{d:"m12 8 6-3-6-3v10",key:"mvpnpy"}],["path",{d:"m8 11.99-5.5 3.14a1 1 0 0 0 0 1.74l8.5 4.86a2 2 0 0 0 2 0l8.5-4.86a1 1 0 0 0 0-1.74L16 12",key:"ek95tt"}],["path",{d:"m6.49 12.85 11.02 6.3",key:"1kt42w"}],["path",{d:"M17.51 12.85 6.5 19.15",key:"v55bdg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Pe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Pe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=Pe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=Pe("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=Pe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=Pe("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=Pe("LocateFixed",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=Pe("Luggage",[["path",{d:"M6 20a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2",key:"1m57jg"}],["path",{d:"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14",key:"1l99gc"}],["path",{d:"M10 20h4",key:"ni2waw"}],["circle",{cx:"16",cy:"20",r:"2",key:"1vifvg"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=Pe("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=Pe("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=Pe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=Pe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=Pe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=Pe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Pe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Pe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Pe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=Pe("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=Pe("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=Pe("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Pe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=Pe("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=Pe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=Pe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=Pe("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=Pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=Pe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=Pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=Pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Pe("ShoppingBasket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Pe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Pe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Pe("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=Pe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=Pe("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=Pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Pe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=Pe("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=Pe("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=Pe("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Pe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=Pe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=Pe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=Pe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Pe("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Pe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Pe("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=Pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),xC="-",SZ=t=>{const r=PZ(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:l=>{const o=l.split(xC);return o[0]===""&&o.length!==1&&o.shift(),D$(o,r)||CZ(l)},getConflictingClassGroupIds:(l,o)=>{const c=s[l]||[];return o&&n[l]?[...c,...n[l]]:c}}},D$=(t,r)=>{var l;if(t.length===0)return r.classGroupId;const s=t[0],n=r.nextPart.get(s),a=n?D$(t.slice(1),n):void 0;if(a)return a;if(r.validators.length===0)return;const i=t.join(xC);return(l=r.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},D_=/^\[(.+)\]$/,CZ=t=>{if(D_.test(t)){const r=D_.exec(t)[1],s=r==null?void 0:r.substring(0,r.indexOf(":"));if(s)return"arbitrary.."+s}},PZ=t=>{const{theme:r,prefix:s}=t,n={nextPart:new Map,validators:[]};return AZ(Object.entries(t.classGroups),s).forEach(([i,l])=>{Gw(l,n,i,r)}),n},Gw=(t,r,s,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?r:M_(r,a);i.classGroupId=s;return}if(typeof a=="function"){if(kZ(a)){Gw(a(n),r,s,n);return}r.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,l])=>{Gw(l,M_(r,i),s,n)})})},M_=(t,r)=>{let s=t;return r.split(xC).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},kZ=t=>t.isThemeGetter,AZ=(t,r)=>r?t.map(([s,n])=>{const a=n.map(i=>typeof i=="string"?r+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[r+l,o])):i);return[s,a]}):t,_Z=t=>{if(t<1)return{get:()=>{},set:()=>{}};let r=0,s=new Map,n=new Map;const a=(i,l)=>{s.set(i,l),r++,r>t&&(r=0,n=s,s=new Map)};return{get(i){let l=s.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return a(i,l),l},set(i,l){s.has(i)?s.set(i,l):a(i,l)}}},M$="!",TZ=t=>{const{separator:r,experimentalParseClassName:s}=t,n=r.length===1,a=r[0],i=r.length,l=o=>{const c=[];let d=0,u=0,m;for(let y=0;y<o.length;y++){let v=o[y];if(d===0){if(v===a&&(n||o.slice(y,y+i)===r)){c.push(o.slice(u,y)),u=y+i;continue}if(v==="/"){m=y;continue}}v==="["?d++:v==="]"&&d--}const h=c.length===0?o:o.substring(u),g=h.startsWith(M$),x=g?h.substring(1):h,p=m&&m>u?m-u:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:p}};return s?o=>s({className:o,parseClassName:l}):l},OZ=t=>{if(t.length<=1)return t;const r=[];let s=[];return t.forEach(n=>{n[0]==="["?(r.push(...s.sort(),n),s=[]):s.push(n)}),r.push(...s.sort()),r},EZ=t=>({cache:_Z(t.cacheSize),parseClassName:TZ(t),...SZ(t)}),DZ=/\s+/,MZ=(t,r)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=r,i=[],l=t.trim().split(DZ);let o="";for(let c=l.length-1;c>=0;c-=1){const d=l[c],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}=s(d);let x=!!g,p=n(x?h.substring(0,g):h);if(!p){if(!x){o=d+(o.length>0?" "+o:o);continue}if(p=n(h),!p){o=d+(o.length>0?" "+o:o);continue}x=!1}const y=OZ(u).join(":"),v=m?y+M$:y,f=v+p;if(i.includes(f))continue;i.push(f);const b=a(p,x);for(let N=0;N<b.length;++N){const w=b[N];i.push(v+w)}o=d+(o.length>0?" "+o:o)}return o};function IZ(){let t=0,r,s,n="";for(;t<arguments.length;)(r=arguments[t++])&&(s=I$(r))&&(n&&(n+=" "),n+=s);return n}const I$=t=>{if(typeof t=="string")return t;let r,s="";for(let n=0;n<t.length;n++)t[n]&&(r=I$(t[n]))&&(s&&(s+=" "),s+=r);return s};function RZ(t,...r){let s,n,a,i=l;function l(c){const d=r.reduce((u,m)=>m(u),t());return s=EZ(d),n=s.cache.get,a=s.cache.set,i=o,o(c)}function o(c){const d=n(c);if(d)return d;const u=MZ(c,s);return a(c,u),u}return function(){return i(IZ.apply(null,arguments))}}const Br=t=>{const r=s=>s[t]||[];return r.isThemeGetter=!0,r},R$=/^\[(?:([a-z-]+):)?(.+)\]$/i,FZ=/^\d+\/\d+$/,$Z=new Set(["px","full","screen"]),LZ=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BZ=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,VZ=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,UZ=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qZ=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zi=t=>eu(t)||$Z.has(t)||FZ.test(t),Ul=t=>wm(t,"length",XZ),eu=t=>!!t&&!Number.isNaN(Number(t)),P0=t=>wm(t,"number",eu),eh=t=>!!t&&Number.isInteger(Number(t)),zZ=t=>t.endsWith("%")&&eu(t.slice(0,-1)),Wt=t=>R$.test(t),ql=t=>LZ.test(t),KZ=new Set(["length","size","percentage"]),HZ=t=>wm(t,KZ,F$),WZ=t=>wm(t,"position",F$),GZ=new Set(["image","url"]),YZ=t=>wm(t,GZ,JZ),QZ=t=>wm(t,"",ZZ),th=()=>!0,wm=(t,r,s)=>{const n=R$.exec(t);return n?n[1]?typeof r=="string"?n[1]===r:r.has(n[1]):s(n[2]):!1},XZ=t=>BZ.test(t)&&!VZ.test(t),F$=()=>!1,ZZ=t=>UZ.test(t),JZ=t=>qZ.test(t),eJ=()=>{const t=Br("colors"),r=Br("spacing"),s=Br("blur"),n=Br("brightness"),a=Br("borderColor"),i=Br("borderRadius"),l=Br("borderSpacing"),o=Br("borderWidth"),c=Br("contrast"),d=Br("grayscale"),u=Br("hueRotate"),m=Br("invert"),h=Br("gap"),g=Br("gradientColorStops"),x=Br("gradientColorStopPositions"),p=Br("inset"),y=Br("margin"),v=Br("opacity"),f=Br("padding"),b=Br("saturate"),N=Br("scale"),w=Br("sepia"),C=Br("skew"),P=Br("space"),S=Br("translate"),A=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Wt,r],q=()=>[Wt,r],z=()=>["",Zi,Ul],I=()=>["auto",eu,Wt],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Wt],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ne=()=>[eu,Wt];return{cacheSize:500,separator:":",theme:{colors:[th],spacing:[Zi,Ul],blur:["none","",ql,Wt],brightness:Ne(),borderColor:[t],borderRadius:["none","","full",ql,Wt],borderSpacing:q(),borderWidth:z(),contrast:Ne(),grayscale:Z(),hueRotate:Ne(),invert:Z(),gap:q(),gradientColorStops:[t],gradientColorStopPositions:[zZ,Ul],inset:D(),margin:D(),opacity:Ne(),padding:q(),saturate:Ne(),scale:Ne(),sepia:Z(),skew:Ne(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Wt]}],container:["container"],columns:[{columns:[ql]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Wt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",eh,Wt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wt]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",eh,Wt]}],"grid-cols":[{"grid-cols":[th]}],"col-start-end":[{col:["auto",{span:["full",eh,Wt]},Wt]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[th]}],"row-start-end":[{row:["auto",{span:[eh,Wt]},Wt]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[f]}],px:[{px:[f]}],py:[{py:[f]}],ps:[{ps:[f]}],pe:[{pe:[f]}],pt:[{pt:[f]}],pr:[{pr:[f]}],pb:[{pb:[f]}],pl:[{pl:[f]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wt,r]}],"min-w":[{"min-w":[Wt,r,"min","max","fit"]}],"max-w":[{"max-w":[Wt,r,"none","full","min","max","fit","prose",{screen:[ql]},ql]}],h:[{h:[Wt,r,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wt,r,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wt,r,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wt,r,"auto","min","max","fit"]}],"font-size":[{text:["base",ql,Ul]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",P0]}],"font-family":[{font:[th]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wt]}],"line-clamp":[{"line-clamp":["none",eu,P0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zi,Wt]}],"list-image":[{"list-image":["none",Wt]}],"list-style-type":[{list:["none","disc","decimal",Wt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zi,Ul]}],"underline-offset":[{"underline-offset":["auto",Zi,Wt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),WZ]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HZ]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YZ]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:W()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[Zi,Wt]}],"outline-w":[{outline:[Zi,Ul]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Zi,Ul]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ql,QZ]}],"shadow-color":[{shadow:[th]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ql,Wt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wt]}],duration:[{duration:Ne()}],ease:[{ease:["linear","in","out","in-out",Wt]}],delay:[{delay:Ne()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[eh,Wt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Zi,Ul,P0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tJ=RZ(eJ);function De(...t){return tJ(Ut(t))}const rJ=BX,$$=j.forwardRef(({className:t,...r},s)=>e.jsx(m$,{ref:s,className:De("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r}));$$.displayName=m$.displayName;const sJ=Nm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),L$=j.forwardRef(({className:t,variant:r,...s},n)=>e.jsx(h$,{ref:n,className:De(sJ({variant:r}),t),...s}));L$.displayName=h$.displayName;const nJ=j.forwardRef(({className:t,...r},s)=>e.jsx(x$,{ref:s,className:De("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r}));nJ.displayName=x$.displayName;const B$=j.forwardRef(({className:t,...r},s)=>e.jsx(g$,{ref:s,className:De("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:e.jsx(Es,{className:"h-4 w-4"})}));B$.displayName=g$.displayName;const V$=j.forwardRef(({className:t,...r},s)=>e.jsx(p$,{ref:s,className:De("text-sm font-semibold",t),...r}));V$.displayName=p$.displayName;const U$=j.forwardRef(({className:t,...r},s)=>e.jsx(f$,{ref:s,className:De("text-sm opacity-90",t),...r}));U$.displayName=f$.displayName;function aJ(){const{toasts:t}=Ue();return e.jsxs(rJ,{children:[t.map(function({id:r,title:s,description:n,action:a,...i}){return e.jsxs(L$,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(V$,{children:s}),n&&e.jsx(U$,{children:n})]}),a,e.jsx(B$,{})]},r)}),e.jsx($$,{})]})}const q$=j.createContext(null);function iJ({children:t}){const{toast:r}=Ue(),[s,n]=j.useState(!1),[,a]=br(),{data:i,error:l,isLoading:o}=fe({queryKey:["/api/user"],queryFn:HF({on401:"returnNull"})}),c=Se({mutationFn:async m=>await(await ie("POST","/api/login",m)).json(),onSuccess:m=>{pe.setQueryData(["/api/user"],m),r({title:"Login successful",description:`Welcome back, ${m.fullName}!`});const h=m.userType==="service_provider";a(h?"/provider-dashboard":"/dashboard")},onError:m=>{r({title:"Login failed",description:m.message,variant:"destructive"})}}),d=Se({mutationFn:async m=>{const h={...m,userType:m.userType||"customer"};return await(await ie("POST","/api/register",h)).json()},onSuccess:m=>{pe.setQueryData(["/api/user"],m);const h=m.userType==="service_provider";r({title:"Registration successful",description:h?`Welcome to TN Services, ${m.fullName}! Your service provider application is pending approval.`:`Welcome to TN Services, ${m.fullName}!`}),n(!1),a(h?"/provider-dashboard":"/dashboard")},onError:m=>{r({title:"Registration failed",description:m.message,variant:"destructive"})}}),u=Se({mutationFn:async()=>{await ie("POST","/api/logout")},onSuccess:()=>{pe.setQueryData(["/api/user"],null),r({title:"Logged out",description:"You have been successfully logged out."}),a("/")},onError:m=>{r({title:"Logout failed",description:m.message,variant:"destructive"})}});return e.jsx(q$.Provider,{value:{user:i??null,isLoading:o,error:l,loginMutation:c,logoutMutation:u,registerMutation:d},children:t})}function dt(){const t=j.useContext(q$);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function Fe({path:t,children:r}){const{user:s,isLoading:n}=dt();return e.jsx(is,{path:t,children:n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):s?r:e.jsx(OF,{to:"/auth"})})}var Of=t=>t.type==="checkbox",dc=t=>t instanceof Date,vn=t=>t==null;const z$=t=>typeof t=="object";var vs=t=>!vn(t)&&!Array.isArray(t)&&z$(t)&&!dc(t),K$=t=>vs(t)&&t.target?Of(t.target)?t.target.checked:t.target.value:t,lJ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,H$=(t,r)=>t.has(lJ(r)),oJ=t=>{const r=t.constructor&&t.constructor.prototype;return vs(r)&&r.hasOwnProperty("isPrototypeOf")},gC=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ps(t){let r;const s=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)r=new Date(t);else if(!(gC&&(t instanceof Blob||n))&&(s||vs(t)))if(r=s?[]:{},!s&&!oJ(t))r=t;else for(const a in t)t.hasOwnProperty(a)&&(r[a]=Ps(t[a]));else return t;return r}var oj=t=>/^\w*$/.test(t),fs=t=>t===void 0,vC=t=>Array.isArray(t)?t.filter(Boolean):[],yC=t=>vC(t.replace(/["|']|\]/g,"").split(/\.|\[/)),tt=(t,r,s)=>{if(!r||!vs(t))return s;const n=(oj(r)?[r]:yC(r)).reduce((a,i)=>vn(a)?a:a[i],t);return fs(n)||n===t?fs(t[r])?s:t[r]:n},Jn=t=>typeof t=="boolean",Sr=(t,r,s)=>{let n=-1;const a=oj(r)?[r]:yC(r),i=a.length,l=i-1;for(;++n<i;){const o=a[n];let c=s;if(n!==l){const d=t[o];c=vs(d)||Array.isArray(d)?d:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const lv={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ji={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},jC=Q.createContext(null);jC.displayName="HookFormContext";const cj=()=>Q.useContext(jC),cJ=t=>{const{children:r,...s}=t;return Q.createElement(jC.Provider,{value:s},r)};var W$=(t,r,s,n=!0)=>{const a={defaultValues:r._defaultValues};for(const i in t)Object.defineProperty(a,i,{get:()=>{const l=i;return r._proxyFormState[l]!==Xa.all&&(r._proxyFormState[l]=!n||Xa.all),s&&(s[l]=!0),t[l]}});return a};const bC=typeof window<"u"?j.useLayoutEffect:j.useEffect;function dJ(t){const r=cj(),{control:s=r.control,disabled:n,name:a,exact:i}=t||{},[l,o]=Q.useState(s._formState),c=Q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return bC(()=>s._subscribe({name:a,formState:c.current,exact:i,callback:d=>{!n&&o({...s._formState,...d})}}),[a,n,i]),Q.useEffect(()=>{c.current.isValid&&s._setValid(!0)},[s]),Q.useMemo(()=>W$(l,s,c.current,!1),[l,s])}var _i=t=>typeof t=="string",G$=(t,r,s,n,a)=>_i(t)?(n&&r.watch.add(t),tt(s,t,a)):Array.isArray(t)?t.map(i=>(n&&r.watch.add(i),tt(s,i))):(n&&(r.watchAll=!0),s);function uJ(t){const r=cj(),{control:s=r.control,name:n,defaultValue:a,disabled:i,exact:l}=t||{},o=Q.useRef(a),[c,d]=Q.useState(s._getWatch(n,o.current));return bC(()=>s._subscribe({name:n,formState:{values:!0},exact:l,callback:u=>!i&&d(G$(n,s._names,u.values||s._formValues,!1,o.current))}),[n,s,i,l]),Q.useEffect(()=>s._removeUnmounted()),c}function mJ(t){const r=cj(),{name:s,disabled:n,control:a=r.control,shouldUnregister:i}=t,l=H$(a._names.array,s),o=uJ({control:a,name:s,defaultValue:tt(a._formValues,s,tt(a._defaultValues,s,t.defaultValue)),exact:!0}),c=dJ({control:a,name:s,exact:!0}),d=Q.useRef(t),u=Q.useRef(a.register(s,{...t.rules,value:o,...Jn(t.disabled)?{disabled:t.disabled}:{}})),m=Q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!tt(c.errors,s)},isDirty:{enumerable:!0,get:()=>!!tt(c.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!tt(c.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!tt(c.validatingFields,s)},error:{enumerable:!0,get:()=>tt(c.errors,s)}}),[c,s]),h=Q.useCallback(y=>u.current.onChange({target:{value:K$(y),name:s},type:lv.CHANGE}),[s]),g=Q.useCallback(()=>u.current.onBlur({target:{value:tt(a._formValues,s),name:s},type:lv.BLUR}),[s,a._formValues]),x=Q.useCallback(y=>{const v=tt(a._fields,s);v&&y&&(v._f.ref={focus:()=>y.focus&&y.focus(),select:()=>y.select&&y.select(),setCustomValidity:f=>y.setCustomValidity(f),reportValidity:()=>y.reportValidity()})},[a._fields,s]),p=Q.useMemo(()=>({name:s,value:o,...Jn(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:h,onBlur:g,ref:x}),[s,n,c.disabled,h,g,x,o]);return Q.useEffect(()=>{const y=a._options.shouldUnregister||i;a.register(s,{...d.current.rules,...Jn(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(f,b)=>{const N=tt(a._fields,f);N&&N._f&&(N._f.mount=b)};if(v(s,!0),y){const f=Ps(tt(a._options.defaultValues,s));Sr(a._defaultValues,s,f),fs(tt(a._formValues,s))&&Sr(a._formValues,s,f)}return!l&&a.register(s),()=>{(l?y&&!a._state.action:y)?a.unregister(s):v(s,!1)}},[s,a,l,i]),Q.useEffect(()=>{a._setDisabledField({disabled:n,name:s})},[n,s,a]),Q.useMemo(()=>({field:p,formState:c,fieldState:m}),[p,c,m])}const hJ=t=>t.render(mJ(t));var Y$=(t,r,s,n,a)=>r?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[n]:a||!0}}:{},Uh=t=>Array.isArray(t)?t:[t],I_=()=>{let t=[];return{get observers(){return t},next:a=>{for(const i of t)i.next&&i.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(i=>i!==a)}}),unsubscribe:()=>{t=[]}}},Yw=t=>vn(t)||!z$(t);function Jl(t,r,s=new WeakSet){if(Yw(t)||Yw(r))return t===r;if(dc(t)&&dc(r))return t.getTime()===r.getTime();const n=Object.keys(t),a=Object.keys(r);if(n.length!==a.length)return!1;if(s.has(t)||s.has(r))return!0;s.add(t),s.add(r);for(const i of n){const l=t[i];if(!a.includes(i))return!1;if(i!=="ref"){const o=r[i];if(dc(l)&&dc(o)||vs(l)&&vs(o)||Array.isArray(l)&&Array.isArray(o)?!Jl(l,o,s):l!==o)return!1}}return!0}var In=t=>vs(t)&&!Object.keys(t).length,NC=t=>t.type==="file",Za=t=>typeof t=="function",ov=t=>{if(!gC)return!1;const r=t?t.ownerDocument:0;return t instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Q$=t=>t.type==="select-multiple",wC=t=>t.type==="radio",pJ=t=>wC(t)||Of(t),k0=t=>ov(t)&&t.isConnected;function fJ(t,r){const s=r.slice(0,-1).length;let n=0;for(;n<s;)t=fs(t)?n++:t[r[n++]];return t}function xJ(t){for(const r in t)if(t.hasOwnProperty(r)&&!fs(t[r]))return!1;return!0}function ys(t,r){const s=Array.isArray(r)?r:oj(r)?[r]:yC(r),n=s.length===1?t:fJ(t,s),a=s.length-1,i=s[a];return n&&delete n[i],a!==0&&(vs(n)&&In(n)||Array.isArray(n)&&xJ(n))&&ys(t,s.slice(0,-1)),t}var X$=t=>{for(const r in t)if(Za(t[r]))return!0;return!1};function cv(t,r={}){const s=Array.isArray(t);if(vs(t)||s)for(const n in t)Array.isArray(t[n])||vs(t[n])&&!X$(t[n])?(r[n]=Array.isArray(t[n])?[]:{},cv(t[n],r[n])):vn(t[n])||(r[n]=!0);return r}function Z$(t,r,s){const n=Array.isArray(t);if(vs(t)||n)for(const a in t)Array.isArray(t[a])||vs(t[a])&&!X$(t[a])?fs(r)||Yw(s[a])?s[a]=Array.isArray(t[a])?cv(t[a],[]):{...cv(t[a])}:Z$(t[a],vn(r)?{}:r[a],s[a]):s[a]=!Jl(t[a],r[a]);return s}var rh=(t,r)=>Z$(t,r,cv(r));const R_={value:!1,isValid:!1},F_={value:!0,isValid:!0};var J$=t=>{if(Array.isArray(t)){if(t.length>1){const r=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:r,isValid:!!r.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!fs(t[0].attributes.value)?fs(t[0].value)||t[0].value===""?F_:{value:t[0].value,isValid:!0}:F_:R_}return R_},eL=(t,{valueAsNumber:r,valueAsDate:s,setValueAs:n})=>fs(t)?t:r?t===""?NaN:t&&+t:s&&_i(t)?new Date(t):n?n(t):t;const $_={isValid:!1,value:null};var tL=t=>Array.isArray(t)?t.reduce((r,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:r,$_):$_;function L_(t){const r=t.ref;return NC(r)?r.files:wC(r)?tL(t.refs).value:Q$(r)?[...r.selectedOptions].map(({value:s})=>s):Of(r)?J$(t.refs).value:eL(fs(r.value)?t.ref.value:r.value,t)}var gJ=(t,r,s,n)=>{const a={};for(const i of t){const l=tt(r,i);l&&Sr(a,i,l._f)}return{criteriaMode:s,names:[...t],fields:a,shouldUseNativeValidation:n}},dv=t=>t instanceof RegExp,sh=t=>fs(t)?t:dv(t)?t.source:vs(t)?dv(t.value)?t.value.source:t.value:t,B_=t=>({isOnSubmit:!t||t===Xa.onSubmit,isOnBlur:t===Xa.onBlur,isOnChange:t===Xa.onChange,isOnAll:t===Xa.all,isOnTouch:t===Xa.onTouched});const V_="AsyncFunction";var vJ=t=>!!t&&!!t.validate&&!!(Za(t.validate)&&t.validate.constructor.name===V_||vs(t.validate)&&Object.values(t.validate).find(r=>r.constructor.name===V_)),yJ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),U_=(t,r,s)=>!s&&(r.watchAll||r.watch.has(t)||[...r.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const qh=(t,r,s,n)=>{for(const a of s||Object.keys(t)){const i=tt(t,a);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&r(l.refs[0],a)&&!n)return!0;if(l.ref&&r(l.ref,l.name)&&!n)return!0;if(qh(o,r))break}else if(vs(o)&&qh(o,r))break}}};function q_(t,r,s){const n=tt(t,s);if(n||oj(s))return{error:n,name:s};const a=s.split(".");for(;a.length;){const i=a.join("."),l=tt(r,i),o=tt(t,i);if(l&&!Array.isArray(l)&&s!==i)return{name:s};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};a.pop()}return{name:s}}var jJ=(t,r,s,n)=>{s(t);const{name:a,...i}=t;return In(i)||Object.keys(i).length>=Object.keys(r).length||Object.keys(i).find(l=>r[l]===(!n||Xa.all))},bJ=(t,r,s)=>!t||!r||t===r||Uh(t).some(n=>n&&(s?n===r:n.startsWith(r)||r.startsWith(n))),NJ=(t,r,s,n,a)=>a.isOnAll?!1:!s&&a.isOnTouch?!(r||t):(s?n.isOnBlur:a.isOnBlur)?!t:(s?n.isOnChange:a.isOnChange)?t:!0,wJ=(t,r)=>!vC(tt(t,r)).length&&ys(t,r),SJ=(t,r,s)=>{const n=Uh(tt(t,s));return Sr(n,"root",r[s]),Sr(t,s,n),t},yg=t=>_i(t);function z_(t,r,s="validate"){if(yg(t)||Array.isArray(t)&&t.every(yg)||Jn(t)&&!t)return{type:s,message:yg(t)?t:"",ref:r}}var yd=t=>vs(t)&&!dv(t)?t:{value:t,message:""},K_=async(t,r,s,n,a,i)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:m,max:h,pattern:g,validate:x,name:p,valueAsNumber:y,mount:v}=t._f,f=tt(s,p);if(!v||r.has(p))return{};const b=o?o[0]:l,N=q=>{a&&b.reportValidity&&(b.setCustomValidity(Jn(q)?"":q||""),b.reportValidity())},w={},C=wC(l),P=Of(l),S=C||P,A=(y||NC(l))&&fs(l.value)&&fs(f)||ov(l)&&l.value===""||f===""||Array.isArray(f)&&!f.length,k=Y$.bind(null,p,n,w),D=(q,z,I,F=Ji.maxLength,W=Ji.minLength)=>{const X=q?z:I;w[p]={type:q?F:W,message:X,ref:l,...k(q?F:W,X)}};if(i?!Array.isArray(f)||!f.length:c&&(!S&&(A||vn(f))||Jn(f)&&!f||P&&!J$(o).isValid||C&&!tL(o).isValid)){const{value:q,message:z}=yg(c)?{value:!!c,message:c}:yd(c);if(q&&(w[p]={type:Ji.required,message:z,ref:b,...k(Ji.required,z)},!n))return N(z),w}if(!A&&(!vn(m)||!vn(h))){let q,z;const I=yd(h),F=yd(m);if(!vn(f)&&!isNaN(f)){const W=l.valueAsNumber||f&&+f;vn(I.value)||(q=W>I.value),vn(F.value)||(z=W<F.value)}else{const W=l.valueAsDate||new Date(f),X=ue=>new Date(new Date().toDateString()+" "+ue),K=l.type=="time",Z=l.type=="week";_i(I.value)&&f&&(q=K?X(f)>X(I.value):Z?f>I.value:W>new Date(I.value)),_i(F.value)&&f&&(z=K?X(f)<X(F.value):Z?f<F.value:W<new Date(F.value))}if((q||z)&&(D(!!q,I.message,F.message,Ji.max,Ji.min),!n))return N(w[p].message),w}if((d||u)&&!A&&(_i(f)||i&&Array.isArray(f))){const q=yd(d),z=yd(u),I=!vn(q.value)&&f.length>+q.value,F=!vn(z.value)&&f.length<+z.value;if((I||F)&&(D(I,q.message,z.message),!n))return N(w[p].message),w}if(g&&!A&&_i(f)){const{value:q,message:z}=yd(g);if(dv(q)&&!f.match(q)&&(w[p]={type:Ji.pattern,message:z,ref:l,...k(Ji.pattern,z)},!n))return N(z),w}if(x){if(Za(x)){const q=await x(f,s),z=z_(q,b);if(z&&(w[p]={...z,...k(Ji.validate,z.message)},!n))return N(z.message),w}else if(vs(x)){let q={};for(const z in x){if(!In(q)&&!n)break;const I=z_(await x[z](f,s),b,z);I&&(q={...I,...k(z,I.message)},N(I.message),n&&(w[p]=q))}if(!In(q)&&(w[p]={ref:b,...q},!n))return w}}return N(!0),w};const CJ={mode:Xa.onSubmit,reValidateMode:Xa.onChange,shouldFocusError:!0};function PJ(t={}){let r={...CJ,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Za(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},a=vs(r.defaultValues)||vs(r.values)?Ps(r.defaultValues||r.values)||{}:{},i=r.shouldUnregister?{}:Ps(a),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...u};const h={array:I_(),state:I_()},g=r.criteriaMode===Xa.all,x=ee=>me=>{clearTimeout(d),d=setTimeout(ee,me)},p=async ee=>{if(!r.disabled&&(u.isValid||m.isValid||ee)){const me=r.resolver?In((await P()).errors):await A(n,!0);me!==s.isValid&&h.state.next({isValid:me})}},y=(ee,me)=>{!r.disabled&&(u.isValidating||u.validatingFields||m.isValidating||m.validatingFields)&&((ee||Array.from(o.mount)).forEach(Ce=>{Ce&&(me?Sr(s.validatingFields,Ce,me):ys(s.validatingFields,Ce))}),h.state.next({validatingFields:s.validatingFields,isValidating:!In(s.validatingFields)}))},v=(ee,me=[],Ce,te,Oe=!0,Ie=!0)=>{if(te&&Ce&&!r.disabled){if(l.action=!0,Ie&&Array.isArray(tt(n,ee))){const rt=Ce(tt(n,ee),te.argA,te.argB);Oe&&Sr(n,ee,rt)}if(Ie&&Array.isArray(tt(s.errors,ee))){const rt=Ce(tt(s.errors,ee),te.argA,te.argB);Oe&&Sr(s.errors,ee,rt),wJ(s.errors,ee)}if((u.touchedFields||m.touchedFields)&&Ie&&Array.isArray(tt(s.touchedFields,ee))){const rt=Ce(tt(s.touchedFields,ee),te.argA,te.argB);Oe&&Sr(s.touchedFields,ee,rt)}(u.dirtyFields||m.dirtyFields)&&(s.dirtyFields=rh(a,i)),h.state.next({name:ee,isDirty:D(ee,me),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Sr(i,ee,me)},f=(ee,me)=>{Sr(s.errors,ee,me),h.state.next({errors:s.errors})},b=ee=>{s.errors=ee,h.state.next({errors:s.errors,isValid:!1})},N=(ee,me,Ce,te)=>{const Oe=tt(n,ee);if(Oe){const Ie=tt(i,ee,fs(Ce)?tt(a,ee):Ce);fs(Ie)||te&&te.defaultChecked||me?Sr(i,ee,me?Ie:L_(Oe._f)):I(ee,Ie),l.mount&&p()}},w=(ee,me,Ce,te,Oe)=>{let Ie=!1,rt=!1;const qt={name:ee};if(!r.disabled){if(!Ce||te){(u.isDirty||m.isDirty)&&(rt=s.isDirty,s.isDirty=qt.isDirty=D(),Ie=rt!==qt.isDirty);const xr=Jl(tt(a,ee),me);rt=!!tt(s.dirtyFields,ee),xr?ys(s.dirtyFields,ee):Sr(s.dirtyFields,ee,!0),qt.dirtyFields=s.dirtyFields,Ie=Ie||(u.dirtyFields||m.dirtyFields)&&rt!==!xr}if(Ce){const xr=tt(s.touchedFields,ee);xr||(Sr(s.touchedFields,ee,Ce),qt.touchedFields=s.touchedFields,Ie=Ie||(u.touchedFields||m.touchedFields)&&xr!==Ce)}Ie&&Oe&&h.state.next(qt)}return Ie?qt:{}},C=(ee,me,Ce,te)=>{const Oe=tt(s.errors,ee),Ie=(u.isValid||m.isValid)&&Jn(me)&&s.isValid!==me;if(r.delayError&&Ce?(c=x(()=>f(ee,Ce)),c(r.delayError)):(clearTimeout(d),c=null,Ce?Sr(s.errors,ee,Ce):ys(s.errors,ee)),(Ce?!Jl(Oe,Ce):Oe)||!In(te)||Ie){const rt={...te,...Ie&&Jn(me)?{isValid:me}:{},errors:s.errors,name:ee};s={...s,...rt},h.state.next(rt)}},P=async ee=>{y(ee,!0);const me=await r.resolver(i,r.context,gJ(ee||o.mount,n,r.criteriaMode,r.shouldUseNativeValidation));return y(ee),me},S=async ee=>{const{errors:me}=await P(ee);if(ee)for(const Ce of ee){const te=tt(me,Ce);te?Sr(s.errors,Ce,te):ys(s.errors,Ce)}else s.errors=me;return me},A=async(ee,me,Ce={valid:!0})=>{for(const te in ee){const Oe=ee[te];if(Oe){const{_f:Ie,...rt}=Oe;if(Ie){const qt=o.array.has(Ie.name),xr=Oe._f&&vJ(Oe._f);xr&&u.validatingFields&&y([te],!0);const Gs=await K_(Oe,o.disabled,i,g,r.shouldUseNativeValidation&&!me,qt);if(xr&&u.validatingFields&&y([te]),Gs[Ie.name]&&(Ce.valid=!1,me))break;!me&&(tt(Gs,Ie.name)?qt?SJ(s.errors,Gs,Ie.name):Sr(s.errors,Ie.name,Gs[Ie.name]):ys(s.errors,Ie.name))}!In(rt)&&await A(rt,me,Ce)}}return Ce.valid},k=()=>{for(const ee of o.unMount){const me=tt(n,ee);me&&(me._f.refs?me._f.refs.every(Ce=>!k0(Ce)):!k0(me._f.ref))&&ke(ee)}o.unMount=new Set},D=(ee,me)=>!r.disabled&&(ee&&me&&Sr(i,ee,me),!Jl(ue(),a)),q=(ee,me,Ce)=>G$(ee,o,{...l.mount?i:fs(me)?a:_i(ee)?{[ee]:me}:me},Ce,me),z=ee=>vC(tt(l.mount?i:a,ee,r.shouldUnregister?tt(a,ee,[]):[])),I=(ee,me,Ce={})=>{const te=tt(n,ee);let Oe=me;if(te){const Ie=te._f;Ie&&(!Ie.disabled&&Sr(i,ee,eL(me,Ie)),Oe=ov(Ie.ref)&&vn(me)?"":me,Q$(Ie.ref)?[...Ie.ref.options].forEach(rt=>rt.selected=Oe.includes(rt.value)):Ie.refs?Of(Ie.ref)?Ie.refs.forEach(rt=>{(!rt.defaultChecked||!rt.disabled)&&(Array.isArray(Oe)?rt.checked=!!Oe.find(qt=>qt===rt.value):rt.checked=Oe===rt.value||!!Oe)}):Ie.refs.forEach(rt=>rt.checked=rt.value===Oe):NC(Ie.ref)?Ie.ref.value="":(Ie.ref.value=Oe,Ie.ref.type||h.state.next({name:ee,values:Ps(i)})))}(Ce.shouldDirty||Ce.shouldTouch)&&w(ee,Oe,Ce.shouldTouch,Ce.shouldDirty,!0),Ce.shouldValidate&&Z(ee)},F=(ee,me,Ce)=>{for(const te in me){if(!me.hasOwnProperty(te))return;const Oe=me[te],Ie=ee+"."+te,rt=tt(n,Ie);(o.array.has(ee)||vs(Oe)||rt&&!rt._f)&&!dc(Oe)?F(Ie,Oe,Ce):I(Ie,Oe,Ce)}},W=(ee,me,Ce={})=>{const te=tt(n,ee),Oe=o.array.has(ee),Ie=Ps(me);Sr(i,ee,Ie),Oe?(h.array.next({name:ee,values:Ps(i)}),(u.isDirty||u.dirtyFields||m.isDirty||m.dirtyFields)&&Ce.shouldDirty&&h.state.next({name:ee,dirtyFields:rh(a,i),isDirty:D(ee,Ie)})):te&&!te._f&&!vn(Ie)?F(ee,Ie,Ce):I(ee,Ie,Ce),U_(ee,o)&&h.state.next({...s}),h.state.next({name:l.mount?ee:void 0,values:Ps(i)})},X=async ee=>{l.mount=!0;const me=ee.target;let Ce=me.name,te=!0;const Oe=tt(n,Ce),Ie=xr=>{te=Number.isNaN(xr)||dc(xr)&&isNaN(xr.getTime())||Jl(xr,tt(i,Ce,xr))},rt=B_(r.mode),qt=B_(r.reValidateMode);if(Oe){let xr,Gs;const fd=me.type?L_(Oe._f):K$(ee),yi=ee.type===lv.BLUR||ee.type===lv.FOCUS_OUT,Lb=!yJ(Oe._f)&&!r.resolver&&!tt(s.errors,Ce)&&!Oe._f.deps||NJ(yi,tt(s.touchedFields,Ce),s.isSubmitted,qt,rt),zm=U_(Ce,o,yi);Sr(i,Ce,fd),yi?(Oe._f.onBlur&&Oe._f.onBlur(ee),c&&c(0)):Oe._f.onChange&&Oe._f.onChange(ee);const Km=w(Ce,fd,yi),Bb=!In(Km)||zm;if(!yi&&h.state.next({name:Ce,type:ee.type,values:Ps(i)}),Lb)return(u.isValid||m.isValid)&&(r.mode==="onBlur"?yi&&p():yi||p()),Bb&&h.state.next({name:Ce,...zm?{}:Km});if(!yi&&zm&&h.state.next({...s}),r.resolver){const{errors:nx}=await P([Ce]);if(Ie(fd),te){const Vb=q_(s.errors,n,Ce),Bl=q_(nx,n,Vb.name||Ce);xr=Bl.error,Ce=Bl.name,Gs=In(nx)}}else y([Ce],!0),xr=(await K_(Oe,o.disabled,i,g,r.shouldUseNativeValidation))[Ce],y([Ce]),Ie(fd),te&&(xr?Gs=!1:(u.isValid||m.isValid)&&(Gs=await A(n,!0)));te&&(Oe._f.deps&&Z(Oe._f.deps),C(Ce,Gs,xr,Km))}},K=(ee,me)=>{if(tt(s.errors,me)&&ee.focus)return ee.focus(),1},Z=async(ee,me={})=>{let Ce,te;const Oe=Uh(ee);if(r.resolver){const Ie=await S(fs(ee)?ee:Oe);Ce=In(Ie),te=ee?!Oe.some(rt=>tt(Ie,rt)):Ce}else ee?(te=(await Promise.all(Oe.map(async Ie=>{const rt=tt(n,Ie);return await A(rt&&rt._f?{[Ie]:rt}:rt)}))).every(Boolean),!(!te&&!s.isValid)&&p()):te=Ce=await A(n);return h.state.next({...!_i(ee)||(u.isValid||m.isValid)&&Ce!==s.isValid?{}:{name:ee},...r.resolver||!ee?{isValid:Ce}:{},errors:s.errors}),me.shouldFocus&&!te&&qh(n,K,ee?Oe:o.mount),te},ue=ee=>{const me={...l.mount?i:a};return fs(ee)?me:_i(ee)?tt(me,ee):ee.map(Ce=>tt(me,Ce))},Ne=(ee,me)=>({invalid:!!tt((me||s).errors,ee),isDirty:!!tt((me||s).dirtyFields,ee),error:tt((me||s).errors,ee),isValidating:!!tt(s.validatingFields,ee),isTouched:!!tt((me||s).touchedFields,ee)}),J=ee=>{ee&&Uh(ee).forEach(me=>ys(s.errors,me)),h.state.next({errors:ee?s.errors:{}})},Re=(ee,me,Ce)=>{const te=(tt(n,ee,{_f:{}})._f||{}).ref,Oe=tt(s.errors,ee)||{},{ref:Ie,message:rt,type:qt,...xr}=Oe;Sr(s.errors,ee,{...xr,...me,ref:te}),h.state.next({name:ee,errors:s.errors,isValid:!1}),Ce&&Ce.shouldFocus&&te&&te.focus&&te.focus()},Ee=(ee,me)=>Za(ee)?h.state.subscribe({next:Ce=>ee(q(void 0,me),Ce)}):q(ee,me,!0),ut=ee=>h.state.subscribe({next:me=>{bJ(ee.name,me.name,ee.exact)&&jJ(me,ee.formState||u,Nr,ee.reRenderRoot)&&ee.callback({values:{...i},...s,...me})}}).unsubscribe,ce=ee=>(l.mount=!0,m={...m,...ee.formState},ut({...ee,formState:m})),ke=(ee,me={})=>{for(const Ce of ee?Uh(ee):o.mount)o.mount.delete(Ce),o.array.delete(Ce),me.keepValue||(ys(n,Ce),ys(i,Ce)),!me.keepError&&ys(s.errors,Ce),!me.keepDirty&&ys(s.dirtyFields,Ce),!me.keepTouched&&ys(s.touchedFields,Ce),!me.keepIsValidating&&ys(s.validatingFields,Ce),!r.shouldUnregister&&!me.keepDefaultValue&&ys(a,Ce);h.state.next({values:Ps(i)}),h.state.next({...s,...me.keepDirty?{isDirty:D()}:{}}),!me.keepIsValid&&p()},Be=({disabled:ee,name:me})=>{(Jn(ee)&&l.mount||ee||o.disabled.has(me))&&(ee?o.disabled.add(me):o.disabled.delete(me))},Me=(ee,me={})=>{let Ce=tt(n,ee);const te=Jn(me.disabled)||Jn(r.disabled);return Sr(n,ee,{...Ce||{},_f:{...Ce&&Ce._f?Ce._f:{ref:{name:ee}},name:ee,mount:!0,...me}}),o.mount.add(ee),Ce?Be({disabled:Jn(me.disabled)?me.disabled:r.disabled,name:ee}):N(ee,!0,me.value),{...te?{disabled:me.disabled||r.disabled}:{},...r.progressive?{required:!!me.required,min:sh(me.min),max:sh(me.max),minLength:sh(me.minLength),maxLength:sh(me.maxLength),pattern:sh(me.pattern)}:{},name:ee,onChange:X,onBlur:X,ref:Oe=>{if(Oe){Me(ee,me),Ce=tt(n,ee);const Ie=fs(Oe.value)&&Oe.querySelectorAll&&Oe.querySelectorAll("input,select,textarea")[0]||Oe,rt=pJ(Ie),qt=Ce._f.refs||[];if(rt?qt.find(xr=>xr===Ie):Ie===Ce._f.ref)return;Sr(n,ee,{_f:{...Ce._f,...rt?{refs:[...qt.filter(k0),Ie,...Array.isArray(tt(a,ee))?[{}]:[]],ref:{type:Ie.type,name:ee}}:{ref:Ie}}}),N(ee,!1,void 0,Ie)}else Ce=tt(n,ee,{}),Ce._f&&(Ce._f.mount=!1),(r.shouldUnregister||me.shouldUnregister)&&!(H$(o.array,ee)&&l.action)&&o.unMount.add(ee)}}},He=()=>r.shouldFocusError&&qh(n,K,o.mount),Xe=ee=>{Jn(ee)&&(h.state.next({disabled:ee}),qh(n,(me,Ce)=>{const te=tt(n,Ce);te&&(me.disabled=te._f.disabled||ee,Array.isArray(te._f.refs)&&te._f.refs.forEach(Oe=>{Oe.disabled=te._f.disabled||ee}))},0,!1))},we=(ee,me)=>async Ce=>{let te;Ce&&(Ce.preventDefault&&Ce.preventDefault(),Ce.persist&&Ce.persist());let Oe=Ps(i);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:Ie,values:rt}=await P();s.errors=Ie,Oe=Ps(rt)}else await A(n);if(o.disabled.size)for(const Ie of o.disabled)ys(Oe,Ie);if(ys(s.errors,"root"),In(s.errors)){h.state.next({errors:{}});try{await ee(Oe,Ce)}catch(Ie){te=Ie}}else me&&await me({...s.errors},Ce),He(),setTimeout(He);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:In(s.errors)&&!te,submitCount:s.submitCount+1,errors:s.errors}),te)throw te},Bt=(ee,me={})=>{tt(n,ee)&&(fs(me.defaultValue)?W(ee,Ps(tt(a,ee))):(W(ee,me.defaultValue),Sr(a,ee,Ps(me.defaultValue))),me.keepTouched||ys(s.touchedFields,ee),me.keepDirty||(ys(s.dirtyFields,ee),s.isDirty=me.defaultValue?D(ee,Ps(tt(a,ee))):D()),me.keepError||(ys(s.errors,ee),u.isValid&&p()),h.state.next({...s}))},jt=(ee,me={})=>{const Ce=ee?Ps(ee):a,te=Ps(Ce),Oe=In(ee),Ie=Oe?a:te;if(me.keepDefaultValues||(a=Ce),!me.keepValues){if(me.keepDirtyValues){const rt=new Set([...o.mount,...Object.keys(rh(a,i))]);for(const qt of Array.from(rt))tt(s.dirtyFields,qt)?Sr(Ie,qt,tt(i,qt)):W(qt,tt(Ie,qt))}else{if(gC&&fs(ee))for(const rt of o.mount){const qt=tt(n,rt);if(qt&&qt._f){const xr=Array.isArray(qt._f.refs)?qt._f.refs[0]:qt._f.ref;if(ov(xr)){const Gs=xr.closest("form");if(Gs){Gs.reset();break}}}}if(me.keepFieldsRef)for(const rt of o.mount)W(rt,tt(Ie,rt));else n={}}i=r.shouldUnregister?me.keepDefaultValues?Ps(a):{}:Ps(Ie),h.array.next({values:{...Ie}}),h.state.next({values:{...Ie}})}o={mount:me.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!me.keepIsValid||!!me.keepDirtyValues,l.watch=!!r.shouldUnregister,h.state.next({submitCount:me.keepSubmitCount?s.submitCount:0,isDirty:Oe?!1:me.keepDirty?s.isDirty:!!(me.keepDefaultValues&&!Jl(ee,a)),isSubmitted:me.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Oe?{}:me.keepDirtyValues?me.keepDefaultValues&&i?rh(a,i):s.dirtyFields:me.keepDefaultValues&&ee?rh(a,ee):me.keepDirty?s.dirtyFields:{},touchedFields:me.keepTouched?s.touchedFields:{},errors:me.keepErrors?s.errors:{},isSubmitSuccessful:me.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},or=(ee,me)=>jt(Za(ee)?ee(i):ee,me),ir=(ee,me={})=>{const Ce=tt(n,ee),te=Ce&&Ce._f;if(te){const Oe=te.refs?te.refs[0]:te.ref;Oe.focus&&(Oe.focus(),me.shouldSelect&&Za(Oe.select)&&Oe.select())}},Nr=ee=>{s={...s,...ee}},Ge={control:{register:Me,unregister:ke,getFieldState:Ne,handleSubmit:we,setError:Re,_subscribe:ut,_runSchema:P,_focusError:He,_getWatch:q,_getDirty:D,_setValid:p,_setFieldArray:v,_setDisabledField:Be,_setErrors:b,_getFieldArray:z,_reset:jt,_resetDefaultValues:()=>Za(r.defaultValues)&&r.defaultValues().then(ee=>{or(ee,r.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:k,_disableForm:Xe,_subjects:h,_proxyFormState:u,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(ee){l=ee},get _defaultValues(){return a},get _names(){return o},set _names(ee){o=ee},get _formState(){return s},get _options(){return r},set _options(ee){r={...r,...ee}}},subscribe:ce,trigger:Z,register:Me,handleSubmit:we,watch:Ee,setValue:W,getValues:ue,reset:or,resetField:Bt,clearErrors:J,unregister:ke,setError:Re,setFocus:ir,getFieldState:Ne};return{...Ge,formControl:Ge}}function Gt(t={}){const r=Q.useRef(void 0),s=Q.useRef(void 0),[n,a]=Q.useState({isDirty:!1,isValidating:!1,isLoading:Za(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Za(t.defaultValues)?void 0:t.defaultValues});if(!r.current)if(t.formControl)r.current={...t.formControl,formState:n},t.defaultValues&&!Za(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=PJ(t);r.current={...o,formState:n}}const i=r.current.control;return i._options=t,bC(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),Q.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Q.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Q.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Q.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Q.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),Q.useEffect(()=>{t.values&&!Jl(t.values,s.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),s.current=t.values,a(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),Q.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),r.current.formState=W$(n,i),r.current}const H_=(t,r,s)=>{if(t&&"reportValidity"in t){const n=tt(s,r);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},rL=(t,r)=>{for(const s in r.fields){const n=r.fields[s];n&&n.ref&&"reportValidity"in n.ref?H_(n.ref,s,t):n.refs&&n.refs.forEach(a=>H_(a,s,t))}},kJ=(t,r)=>{r.shouldUseNativeValidation&&rL(t,r);const s={};for(const n in t){const a=tt(r.fields,n),i=Object.assign(t[n]||{},{ref:a&&a.ref});if(AJ(r.names||Object.keys(t),n)){const l=Object.assign({},tt(s,n));Sr(l,"root",i),Sr(s,n,l)}else Sr(s,n,i)}return s},AJ=(t,r)=>t.some(s=>s.startsWith(r+"."));var _J=function(t,r){for(var s={};t.length;){var n=t[0],a=n.code,i=n.message,l=n.path.join(".");if(!s[l])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];s[l]={message:o.message,type:o.code}}else s[l]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(u){return u.errors.forEach(function(m){return t.push(m)})}),r){var c=s[l].types,d=c&&c[n.code];s[l]=Y$(l,r,s,a,d?[].concat(d,n.message):n.message)}t.shift()}return s},Yt=function(t,r,s){return s===void 0&&(s={}),function(n,a,i){try{return Promise.resolve(function(l,o){try{var c=Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](n,r)).then(function(d){return i.shouldUseNativeValidation&&rL({},i),{errors:{},values:s.raw?n:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(l){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(l))return{values:{},errors:kJ(_J(l.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw l}))}catch(l){return Promise.reject(l)}}},dr;(function(t){t.assertEqual=a=>{};function r(a){}t.assertIs=r;function s(a){throw new Error}t.assertNever=s,t.arrayToEnum=a=>{const i={};for(const l of a)i[l]=l;return i},t.getValidEnumValues=a=>{const i=t.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),l={};for(const o of i)l[o]=a[o];return t.objectValues(l)},t.objectValues=a=>t.objectKeys(a).map(function(i){return a[i]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&i.push(l);return i},t.find=(a,i)=>{for(const l of a)if(i(l))return l},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(dr||(dr={}));var Qw;(function(t){t.mergeShapes=(r,s)=>({...r,...s})})(Qw||(Qw={}));const ot=dr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ll=t=>{switch(typeof t){case"undefined":return ot.undefined;case"string":return ot.string;case"number":return Number.isNaN(t)?ot.nan:ot.number;case"boolean":return ot.boolean;case"function":return ot.function;case"bigint":return ot.bigint;case"symbol":return ot.symbol;case"object":return Array.isArray(t)?ot.array:t===null?ot.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ot.promise:typeof Map<"u"&&t instanceof Map?ot.map:typeof Set<"u"&&t instanceof Set?ot.set:typeof Date<"u"&&t instanceof Date?ot.date:ot.object;default:return ot.unknown}},ze=dr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),TJ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ca extends Error{get errors(){return this.issues}constructor(r){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=r}format(r){const s=r||function(i){return i.message},n={_errors:[]},a=i=>{for(const l of i.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)n._errors.push(s(l));else{let o=n,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(s(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return a(this),n}static assert(r){if(!(r instanceof ca))throw new Error(`Not a ZodError: ${r}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,dr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(r=s=>s.message){const s={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];s[i]=s[i]||[],s[i].push(r(a))}else n.push(r(a));return{formErrors:n,fieldErrors:s}}get formErrors(){return this.flatten()}}ca.create=t=>new ca(t);const Du=(t,r)=>{let s;switch(t.code){case ze.invalid_type:t.received===ot.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case ze.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,dr.jsonStringifyReplacer)}`;break;case ze.unrecognized_keys:s=`Unrecognized key(s) in object: ${dr.joinValues(t.keys,", ")}`;break;case ze.invalid_union:s="Invalid input";break;case ze.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${dr.joinValues(t.options)}`;break;case ze.invalid_enum_value:s=`Invalid enum value. Expected ${dr.joinValues(t.options)}, received '${t.received}'`;break;case ze.invalid_arguments:s="Invalid function arguments";break;case ze.invalid_return_type:s="Invalid function return type";break;case ze.invalid_date:s="Invalid date";break;case ze.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:dr.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case ze.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case ze.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case ze.custom:s="Invalid input";break;case ze.invalid_intersection_types:s="Intersection results could not be merged";break;case ze.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case ze.not_finite:s="Number must be finite";break;default:s=r.defaultError,dr.assertNever(t)}return{message:s}};let sL=Du;function OJ(t){sL=t}function uv(){return sL}const mv=t=>{const{data:r,path:s,errorMaps:n,issueData:a}=t,i=[...s,...a.path||[]],l={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const c=n.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:r,defaultError:o}).message;return{...a,path:i,message:o}},EJ=[];function st(t,r){const s=uv(),n=mv({issueData:r,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Du?void 0:Du].filter(a=>!!a)});t.common.issues.push(n)}class hn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(r,s){const n=[];for(const a of s){if(a.status==="aborted")return _t;a.status==="dirty"&&r.dirty(),n.push(a.value)}return{status:r.value,value:n}}static async mergeObjectAsync(r,s){const n=[];for(const a of s){const i=await a.key,l=await a.value;n.push({key:i,value:l})}return hn.mergeObjectSync(r,n)}static mergeObjectSync(r,s){const n={};for(const a of s){const{key:i,value:l}=a;if(i.status==="aborted"||l.status==="aborted")return _t;i.status==="dirty"&&r.dirty(),l.status==="dirty"&&r.dirty(),i.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(n[i.value]=l.value)}return{status:r.value,value:n}}}const _t=Object.freeze({status:"aborted"}),Ud=t=>({status:"dirty",value:t}),_n=t=>({status:"valid",value:t}),Xw=t=>t.status==="aborted",Zw=t=>t.status==="dirty",$c=t=>t.status==="valid",vp=t=>typeof Promise<"u"&&t instanceof Promise;var xt;(function(t){t.errToObj=r=>typeof r=="string"?{message:r}:r||{},t.toString=r=>typeof r=="string"?r:r==null?void 0:r.message})(xt||(xt={}));class Vi{constructor(r,s,n,a){this._cachedPath=[],this.parent=r,this.data=s,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const W_=(t,r)=>{if($c(r))return{success:!0,data:r.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new ca(t.common.issues);return this._error=s,this._error}}};function zt(t){if(!t)return{};const{errorMap:r,invalid_type_error:s,required_error:n,description:a}=t;if(r&&(s||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return r?{errorMap:r,description:a}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??n??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??s??o.defaultError}},description:a}}class er{get description(){return this._def.description}_getType(r){return ll(r.data)}_getOrReturnCtx(r,s){return s||{common:r.parent.common,data:r.data,parsedType:ll(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}_processInputParams(r){return{status:new hn,ctx:{common:r.parent.common,data:r.data,parsedType:ll(r.data),schemaErrorMap:this._def.errorMap,path:r.path,parent:r.parent}}}_parseSync(r){const s=this._parse(r);if(vp(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(r){const s=this._parse(r);return Promise.resolve(s)}parse(r,s){const n=this.safeParse(r,s);if(n.success)return n.data;throw n.error}safeParse(r,s){const n={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:ll(r)},a=this._parseSync({data:r,path:n.path,parent:n});return W_(n,a)}"~validate"(r){var n,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:ll(r)};if(!this["~standard"].async)try{const i=this._parseSync({data:r,path:[],parent:s});return $c(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:r,path:[],parent:s}).then(i=>$c(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(r,s){const n=await this.safeParseAsync(r,s);if(n.success)return n.data;throw n.error}async safeParseAsync(r,s){const n={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:r,parsedType:ll(r)},a=this._parse({data:r,path:n.path,parent:n}),i=await(vp(a)?a:Promise.resolve(a));return W_(n,i)}refine(r,s){const n=a=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(a):s;return this._refinement((a,i)=>{const l=r(a),o=()=>i.addIssue({code:ze.custom,...n(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(r,s){return this._refinement((n,a)=>r(n)?!0:(a.addIssue(typeof s=="function"?s(n,a):s),!1))}_refinement(r){return new ui({schema:this,typeName:Dt.ZodEffects,effect:{type:"refinement",refinement:r}})}superRefine(r){return this._refinement(r)}constructor(r){this.spa=this.safeParseAsync,this._def=r,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return Fi.create(this,this._def)}nullable(){return Do.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return li.create(this)}promise(){return Iu.create(this,this._def)}or(r){return Np.create([this,r],this._def)}and(r){return wp.create(this,r,this._def)}transform(r){return new ui({...zt(this._def),schema:this,typeName:Dt.ZodEffects,effect:{type:"transform",transform:r}})}default(r){const s=typeof r=="function"?r:()=>r;return new Ap({...zt(this._def),innerType:this,defaultValue:s,typeName:Dt.ZodDefault})}brand(){return new SC({typeName:Dt.ZodBranded,type:this,...zt(this._def)})}catch(r){const s=typeof r=="function"?r:()=>r;return new _p({...zt(this._def),innerType:this,catchValue:s,typeName:Dt.ZodCatch})}describe(r){const s=this.constructor;return new s({...this._def,description:r})}pipe(r){return Ef.create(this,r)}readonly(){return Tp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DJ=/^c[^\s-]{8,}$/i,MJ=/^[0-9a-z]+$/,IJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,RJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FJ=/^[a-z0-9_-]{21}$/i,$J=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,LJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,BJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,VJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let A0;const UJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,zJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,KJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",GJ=new RegExp(`^${nL}$`);function aL(t){let r="[0-5]\\d";t.precision?r=`${r}\\.\\d{${t.precision}}`:t.precision==null&&(r=`${r}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${r})${s}`}function YJ(t){return new RegExp(`^${aL(t)}$`)}function iL(t){let r=`${nL}T${aL(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),r=`${r}(${s.join("|")})`,new RegExp(`^${r}$`)}function QJ(t,r){return!!((r==="v4"||!r)&&UJ.test(t)||(r==="v6"||!r)&&zJ.test(t))}function XJ(t,r){if(!$J.test(t))return!1;try{const[s]=t.split(".");if(!s)return!1;const n=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||r&&a.alg!==r)}catch{return!1}}function ZJ(t,r){return!!((r==="v4"||!r)&&qJ.test(t)||(r==="v6"||!r)&&KJ.test(t))}class ti extends er{_parse(r){if(this._def.coerce&&(r.data=String(r.data)),this._getType(r)!==ot.string){const i=this._getOrReturnCtx(r);return st(i,{code:ze.invalid_type,expected:ot.string,received:i.parsedType}),_t}const n=new hn;let a;for(const i of this._def.checks)if(i.kind==="min")r.data.length<i.value&&(a=this._getOrReturnCtx(r,a),st(a,{code:ze.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")r.data.length>i.value&&(a=this._getOrReturnCtx(r,a),st(a,{code:ze.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const l=r.data.length>i.value,o=r.data.length<i.value;(l||o)&&(a=this._getOrReturnCtx(r,a),l?st(a,{code:ze.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&st(a,{code:ze.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")BJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"email",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")A0||(A0=new RegExp(VJ,"u")),A0.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"emoji",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")RJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"uuid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")FJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"nanoid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")DJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"cuid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")MJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"cuid2",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")IJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"ulid",code:ze.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(r.data)}catch{a=this._getOrReturnCtx(r,a),st(a,{validation:"url",code:ze.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"regex",code:ze.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?r.data=r.data.trim():i.kind==="includes"?r.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(r,a),st(a,{code:ze.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?r.data=r.data.toLowerCase():i.kind==="toUpperCase"?r.data=r.data.toUpperCase():i.kind==="startsWith"?r.data.startsWith(i.value)||(a=this._getOrReturnCtx(r,a),st(a,{code:ze.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?r.data.endsWith(i.value)||(a=this._getOrReturnCtx(r,a),st(a,{code:ze.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?iL(i).test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{code:ze.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?GJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{code:ze.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?YJ(i).test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{code:ze.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?LJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"duration",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?QJ(r.data,i.version)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"ip",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?XJ(r.data,i.alg)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"jwt",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?ZJ(r.data,i.version)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"cidr",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?HJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"base64",code:ze.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?WJ.test(r.data)||(a=this._getOrReturnCtx(r,a),st(a,{validation:"base64url",code:ze.invalid_string,message:i.message}),n.dirty()):dr.assertNever(i);return{status:n.value,value:r.data}}_regex(r,s,n){return this.refinement(a=>r.test(a),{validation:s,code:ze.invalid_string,...xt.errToObj(n)})}_addCheck(r){return new ti({...this._def,checks:[...this._def.checks,r]})}email(r){return this._addCheck({kind:"email",...xt.errToObj(r)})}url(r){return this._addCheck({kind:"url",...xt.errToObj(r)})}emoji(r){return this._addCheck({kind:"emoji",...xt.errToObj(r)})}uuid(r){return this._addCheck({kind:"uuid",...xt.errToObj(r)})}nanoid(r){return this._addCheck({kind:"nanoid",...xt.errToObj(r)})}cuid(r){return this._addCheck({kind:"cuid",...xt.errToObj(r)})}cuid2(r){return this._addCheck({kind:"cuid2",...xt.errToObj(r)})}ulid(r){return this._addCheck({kind:"ulid",...xt.errToObj(r)})}base64(r){return this._addCheck({kind:"base64",...xt.errToObj(r)})}base64url(r){return this._addCheck({kind:"base64url",...xt.errToObj(r)})}jwt(r){return this._addCheck({kind:"jwt",...xt.errToObj(r)})}ip(r){return this._addCheck({kind:"ip",...xt.errToObj(r)})}cidr(r){return this._addCheck({kind:"cidr",...xt.errToObj(r)})}datetime(r){return typeof r=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:r}):this._addCheck({kind:"datetime",precision:typeof(r==null?void 0:r.precision)>"u"?null:r==null?void 0:r.precision,offset:(r==null?void 0:r.offset)??!1,local:(r==null?void 0:r.local)??!1,...xt.errToObj(r==null?void 0:r.message)})}date(r){return this._addCheck({kind:"date",message:r})}time(r){return typeof r=="string"?this._addCheck({kind:"time",precision:null,message:r}):this._addCheck({kind:"time",precision:typeof(r==null?void 0:r.precision)>"u"?null:r==null?void 0:r.precision,...xt.errToObj(r==null?void 0:r.message)})}duration(r){return this._addCheck({kind:"duration",...xt.errToObj(r)})}regex(r,s){return this._addCheck({kind:"regex",regex:r,...xt.errToObj(s)})}includes(r,s){return this._addCheck({kind:"includes",value:r,position:s==null?void 0:s.position,...xt.errToObj(s==null?void 0:s.message)})}startsWith(r,s){return this._addCheck({kind:"startsWith",value:r,...xt.errToObj(s)})}endsWith(r,s){return this._addCheck({kind:"endsWith",value:r,...xt.errToObj(s)})}min(r,s){return this._addCheck({kind:"min",value:r,...xt.errToObj(s)})}max(r,s){return this._addCheck({kind:"max",value:r,...xt.errToObj(s)})}length(r,s){return this._addCheck({kind:"length",value:r,...xt.errToObj(s)})}nonempty(r){return this.min(1,xt.errToObj(r))}trim(){return new ti({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ti({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ti({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(r=>r.kind==="datetime")}get isDate(){return!!this._def.checks.find(r=>r.kind==="date")}get isTime(){return!!this._def.checks.find(r=>r.kind==="time")}get isDuration(){return!!this._def.checks.find(r=>r.kind==="duration")}get isEmail(){return!!this._def.checks.find(r=>r.kind==="email")}get isURL(){return!!this._def.checks.find(r=>r.kind==="url")}get isEmoji(){return!!this._def.checks.find(r=>r.kind==="emoji")}get isUUID(){return!!this._def.checks.find(r=>r.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(r=>r.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(r=>r.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(r=>r.kind==="cuid2")}get isULID(){return!!this._def.checks.find(r=>r.kind==="ulid")}get isIP(){return!!this._def.checks.find(r=>r.kind==="ip")}get isCIDR(){return!!this._def.checks.find(r=>r.kind==="cidr")}get isBase64(){return!!this._def.checks.find(r=>r.kind==="base64")}get isBase64url(){return!!this._def.checks.find(r=>r.kind==="base64url")}get minLength(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r}get maxLength(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r}}ti.create=t=>new ti({checks:[],typeName:Dt.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...zt(t)});function JJ(t,r){const s=(t.toString().split(".")[1]||"").length,n=(r.toString().split(".")[1]||"").length,a=s>n?s:n,i=Number.parseInt(t.toFixed(a).replace(".","")),l=Number.parseInt(r.toFixed(a).replace(".",""));return i%l/10**a}class To extends er{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(r){if(this._def.coerce&&(r.data=Number(r.data)),this._getType(r)!==ot.number){const i=this._getOrReturnCtx(r);return st(i,{code:ze.invalid_type,expected:ot.number,received:i.parsedType}),_t}let n;const a=new hn;for(const i of this._def.checks)i.kind==="int"?dr.isInteger(r.data)||(n=this._getOrReturnCtx(r,n),st(n,{code:ze.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?r.data<i.value:r.data<=i.value)&&(n=this._getOrReturnCtx(r,n),st(n,{code:ze.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?r.data>i.value:r.data>=i.value)&&(n=this._getOrReturnCtx(r,n),st(n,{code:ze.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?JJ(r.data,i.value)!==0&&(n=this._getOrReturnCtx(r,n),st(n,{code:ze.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(r.data)||(n=this._getOrReturnCtx(r,n),st(n,{code:ze.not_finite,message:i.message}),a.dirty()):dr.assertNever(i);return{status:a.value,value:r.data}}gte(r,s){return this.setLimit("min",r,!0,xt.toString(s))}gt(r,s){return this.setLimit("min",r,!1,xt.toString(s))}lte(r,s){return this.setLimit("max",r,!0,xt.toString(s))}lt(r,s){return this.setLimit("max",r,!1,xt.toString(s))}setLimit(r,s,n,a){return new To({...this._def,checks:[...this._def.checks,{kind:r,value:s,inclusive:n,message:xt.toString(a)}]})}_addCheck(r){return new To({...this._def,checks:[...this._def.checks,r]})}int(r){return this._addCheck({kind:"int",message:xt.toString(r)})}positive(r){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xt.toString(r)})}negative(r){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xt.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xt.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xt.toString(r)})}multipleOf(r,s){return this._addCheck({kind:"multipleOf",value:r,message:xt.toString(s)})}finite(r){return this._addCheck({kind:"finite",message:xt.toString(r)})}safe(r){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xt.toString(r)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xt.toString(r)})}get minValue(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r}get maxValue(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r}get isInt(){return!!this._def.checks.find(r=>r.kind==="int"||r.kind==="multipleOf"&&dr.isInteger(r.value))}get isFinite(){let r=null,s=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(s===null||n.value>s)&&(s=n.value):n.kind==="max"&&(r===null||n.value<r)&&(r=n.value)}return Number.isFinite(s)&&Number.isFinite(r)}}To.create=t=>new To({checks:[],typeName:Dt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...zt(t)});class Oo extends er{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(r){if(this._def.coerce)try{r.data=BigInt(r.data)}catch{return this._getInvalidInput(r)}if(this._getType(r)!==ot.bigint)return this._getInvalidInput(r);let n;const a=new hn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?r.data<i.value:r.data<=i.value)&&(n=this._getOrReturnCtx(r,n),st(n,{code:ze.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?r.data>i.value:r.data>=i.value)&&(n=this._getOrReturnCtx(r,n),st(n,{code:ze.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?r.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(r,n),st(n,{code:ze.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):dr.assertNever(i);return{status:a.value,value:r.data}}_getInvalidInput(r){const s=this._getOrReturnCtx(r);return st(s,{code:ze.invalid_type,expected:ot.bigint,received:s.parsedType}),_t}gte(r,s){return this.setLimit("min",r,!0,xt.toString(s))}gt(r,s){return this.setLimit("min",r,!1,xt.toString(s))}lte(r,s){return this.setLimit("max",r,!0,xt.toString(s))}lt(r,s){return this.setLimit("max",r,!1,xt.toString(s))}setLimit(r,s,n,a){return new Oo({...this._def,checks:[...this._def.checks,{kind:r,value:s,inclusive:n,message:xt.toString(a)}]})}_addCheck(r){return new Oo({...this._def,checks:[...this._def.checks,r]})}positive(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xt.toString(r)})}negative(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xt.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xt.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xt.toString(r)})}multipleOf(r,s){return this._addCheck({kind:"multipleOf",value:r,message:xt.toString(s)})}get minValue(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r}get maxValue(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r}}Oo.create=t=>new Oo({checks:[],typeName:Dt.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...zt(t)});class yp extends er{_parse(r){if(this._def.coerce&&(r.data=!!r.data),this._getType(r)!==ot.boolean){const n=this._getOrReturnCtx(r);return st(n,{code:ze.invalid_type,expected:ot.boolean,received:n.parsedType}),_t}return _n(r.data)}}yp.create=t=>new yp({typeName:Dt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...zt(t)});class Lc extends er{_parse(r){if(this._def.coerce&&(r.data=new Date(r.data)),this._getType(r)!==ot.date){const i=this._getOrReturnCtx(r);return st(i,{code:ze.invalid_type,expected:ot.date,received:i.parsedType}),_t}if(Number.isNaN(r.data.getTime())){const i=this._getOrReturnCtx(r);return st(i,{code:ze.invalid_date}),_t}const n=new hn;let a;for(const i of this._def.checks)i.kind==="min"?r.data.getTime()<i.value&&(a=this._getOrReturnCtx(r,a),st(a,{code:ze.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?r.data.getTime()>i.value&&(a=this._getOrReturnCtx(r,a),st(a,{code:ze.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):dr.assertNever(i);return{status:n.value,value:new Date(r.data.getTime())}}_addCheck(r){return new Lc({...this._def,checks:[...this._def.checks,r]})}min(r,s){return this._addCheck({kind:"min",value:r.getTime(),message:xt.toString(s)})}max(r,s){return this._addCheck({kind:"max",value:r.getTime(),message:xt.toString(s)})}get minDate(){let r=null;for(const s of this._def.checks)s.kind==="min"&&(r===null||s.value>r)&&(r=s.value);return r!=null?new Date(r):null}get maxDate(){let r=null;for(const s of this._def.checks)s.kind==="max"&&(r===null||s.value<r)&&(r=s.value);return r!=null?new Date(r):null}}Lc.create=t=>new Lc({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Dt.ZodDate,...zt(t)});class hv extends er{_parse(r){if(this._getType(r)!==ot.symbol){const n=this._getOrReturnCtx(r);return st(n,{code:ze.invalid_type,expected:ot.symbol,received:n.parsedType}),_t}return _n(r.data)}}hv.create=t=>new hv({typeName:Dt.ZodSymbol,...zt(t)});class jp extends er{_parse(r){if(this._getType(r)!==ot.undefined){const n=this._getOrReturnCtx(r);return st(n,{code:ze.invalid_type,expected:ot.undefined,received:n.parsedType}),_t}return _n(r.data)}}jp.create=t=>new jp({typeName:Dt.ZodUndefined,...zt(t)});class bp extends er{_parse(r){if(this._getType(r)!==ot.null){const n=this._getOrReturnCtx(r);return st(n,{code:ze.invalid_type,expected:ot.null,received:n.parsedType}),_t}return _n(r.data)}}bp.create=t=>new bp({typeName:Dt.ZodNull,...zt(t)});class Mu extends er{constructor(){super(...arguments),this._any=!0}_parse(r){return _n(r.data)}}Mu.create=t=>new Mu({typeName:Dt.ZodAny,...zt(t)});class Pc extends er{constructor(){super(...arguments),this._unknown=!0}_parse(r){return _n(r.data)}}Pc.create=t=>new Pc({typeName:Dt.ZodUnknown,...zt(t)});class kl extends er{_parse(r){const s=this._getOrReturnCtx(r);return st(s,{code:ze.invalid_type,expected:ot.never,received:s.parsedType}),_t}}kl.create=t=>new kl({typeName:Dt.ZodNever,...zt(t)});class pv extends er{_parse(r){if(this._getType(r)!==ot.undefined){const n=this._getOrReturnCtx(r);return st(n,{code:ze.invalid_type,expected:ot.void,received:n.parsedType}),_t}return _n(r.data)}}pv.create=t=>new pv({typeName:Dt.ZodVoid,...zt(t)});class li extends er{_parse(r){const{ctx:s,status:n}=this._processInputParams(r),a=this._def;if(s.parsedType!==ot.array)return st(s,{code:ze.invalid_type,expected:ot.array,received:s.parsedType}),_t;if(a.exactLength!==null){const l=s.data.length>a.exactLength.value,o=s.data.length<a.exactLength.value;(l||o)&&(st(s,{code:l?ze.too_big:ze.too_small,minimum:o?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&s.data.length<a.minLength.value&&(st(s,{code:ze.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&s.data.length>a.maxLength.value&&(st(s,{code:ze.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),s.common.async)return Promise.all([...s.data].map((l,o)=>a.type._parseAsync(new Vi(s,l,s.path,o)))).then(l=>hn.mergeArray(n,l));const i=[...s.data].map((l,o)=>a.type._parseSync(new Vi(s,l,s.path,o)));return hn.mergeArray(n,i)}get element(){return this._def.type}min(r,s){return new li({...this._def,minLength:{value:r,message:xt.toString(s)}})}max(r,s){return new li({...this._def,maxLength:{value:r,message:xt.toString(s)}})}length(r,s){return new li({...this._def,exactLength:{value:r,message:xt.toString(s)}})}nonempty(r){return this.min(1,r)}}li.create=(t,r)=>new li({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Dt.ZodArray,...zt(r)});function _d(t){if(t instanceof ts){const r={};for(const s in t.shape){const n=t.shape[s];r[s]=Fi.create(_d(n))}return new ts({...t._def,shape:()=>r})}else return t instanceof li?new li({...t._def,type:_d(t.element)}):t instanceof Fi?Fi.create(_d(t.unwrap())):t instanceof Do?Do.create(_d(t.unwrap())):t instanceof Ui?Ui.create(t.items.map(r=>_d(r))):t}class ts extends er{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const r=this._def.shape(),s=dr.objectKeys(r);return this._cached={shape:r,keys:s},this._cached}_parse(r){if(this._getType(r)!==ot.object){const d=this._getOrReturnCtx(r);return st(d,{code:ze.invalid_type,expected:ot.object,received:d.parsedType}),_t}const{status:n,ctx:a}=this._processInputParams(r),{shape:i,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof kl&&this._def.unknownKeys==="strip"))for(const d in a.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=i[d],m=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Vi(a,m,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof kl){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")o.length>0&&(st(a,{code:ze.unrecognized_keys,keys:o}),n.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const m=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Vi(a,m,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const m=await u.key,h=await u.value;d.push({key:m,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>hn.mergeObjectSync(n,d)):hn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(r){return xt.errToObj,new ts({...this._def,unknownKeys:"strict",...r!==void 0?{errorMap:(s,n)=>{var i,l;const a=((l=(i=this._def).errorMap)==null?void 0:l.call(i,s,n).message)??n.defaultError;return s.code==="unrecognized_keys"?{message:xt.errToObj(r).message??a}:{message:a}}}:{}})}strip(){return new ts({...this._def,unknownKeys:"strip"})}passthrough(){return new ts({...this._def,unknownKeys:"passthrough"})}extend(r){return new ts({...this._def,shape:()=>({...this._def.shape(),...r})})}merge(r){return new ts({unknownKeys:r._def.unknownKeys,catchall:r._def.catchall,shape:()=>({...this._def.shape(),...r._def.shape()}),typeName:Dt.ZodObject})}setKey(r,s){return this.augment({[r]:s})}catchall(r){return new ts({...this._def,catchall:r})}pick(r){const s={};for(const n of dr.objectKeys(r))r[n]&&this.shape[n]&&(s[n]=this.shape[n]);return new ts({...this._def,shape:()=>s})}omit(r){const s={};for(const n of dr.objectKeys(this.shape))r[n]||(s[n]=this.shape[n]);return new ts({...this._def,shape:()=>s})}deepPartial(){return _d(this)}partial(r){const s={};for(const n of dr.objectKeys(this.shape)){const a=this.shape[n];r&&!r[n]?s[n]=a:s[n]=a.optional()}return new ts({...this._def,shape:()=>s})}required(r){const s={};for(const n of dr.objectKeys(this.shape))if(r&&!r[n])s[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Fi;)i=i._def.innerType;s[n]=i}return new ts({...this._def,shape:()=>s})}keyof(){return lL(dr.objectKeys(this.shape))}}ts.create=(t,r)=>new ts({shape:()=>t,unknownKeys:"strip",catchall:kl.create(),typeName:Dt.ZodObject,...zt(r)});ts.strictCreate=(t,r)=>new ts({shape:()=>t,unknownKeys:"strict",catchall:kl.create(),typeName:Dt.ZodObject,...zt(r)});ts.lazycreate=(t,r)=>new ts({shape:t,unknownKeys:"strip",catchall:kl.create(),typeName:Dt.ZodObject,...zt(r)});class Np extends er{_parse(r){const{ctx:s}=this._processInputParams(r),n=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return s.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(o=>new ca(o.ctx.common.issues));return st(s,{code:ze.invalid_union,unionErrors:l}),_t}if(s.common.async)return Promise.all(n.map(async i=>{const l={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:l}),ctx:l}})).then(a);{let i;const l=[];for(const c of n){const d={...s,common:{...s.common,issues:[]},parent:null},u=c._parseSync({data:s.data,path:s.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const o=l.map(c=>new ca(c));return st(s,{code:ze.invalid_union,unionErrors:o}),_t}}get options(){return this._def.options}}Np.create=(t,r)=>new Np({options:t,typeName:Dt.ZodUnion,...zt(r)});const sl=t=>t instanceof Cp?sl(t.schema):t instanceof ui?sl(t.innerType()):t instanceof Pp?[t.value]:t instanceof Eo?t.options:t instanceof kp?dr.objectValues(t.enum):t instanceof Ap?sl(t._def.innerType):t instanceof jp?[void 0]:t instanceof bp?[null]:t instanceof Fi?[void 0,...sl(t.unwrap())]:t instanceof Do?[null,...sl(t.unwrap())]:t instanceof SC||t instanceof Tp?sl(t.unwrap()):t instanceof _p?sl(t._def.innerType):[];class dj extends er{_parse(r){const{ctx:s}=this._processInputParams(r);if(s.parsedType!==ot.object)return st(s,{code:ze.invalid_type,expected:ot.object,received:s.parsedType}),_t;const n=this.discriminator,a=s.data[n],i=this.optionsMap.get(a);return i?s.common.async?i._parseAsync({data:s.data,path:s.path,parent:s}):i._parseSync({data:s.data,path:s.path,parent:s}):(st(s,{code:ze.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_t)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(r,s,n){const a=new Map;for(const i of s){const l=sl(i.shape[r]);if(!l.length)throw new Error(`A discriminator value for key \`${r}\` could not be extracted from all schema options`);for(const o of l){if(a.has(o))throw new Error(`Discriminator property ${String(r)} has duplicate value ${String(o)}`);a.set(o,i)}}return new dj({typeName:Dt.ZodDiscriminatedUnion,discriminator:r,options:s,optionsMap:a,...zt(n)})}}function Jw(t,r){const s=ll(t),n=ll(r);if(t===r)return{valid:!0,data:t};if(s===ot.object&&n===ot.object){const a=dr.objectKeys(r),i=dr.objectKeys(t).filter(o=>a.indexOf(o)!==-1),l={...t,...r};for(const o of i){const c=Jw(t[o],r[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(s===ot.array&&n===ot.array){if(t.length!==r.length)return{valid:!1};const a=[];for(let i=0;i<t.length;i++){const l=t[i],o=r[i],c=Jw(l,o);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return s===ot.date&&n===ot.date&&+t==+r?{valid:!0,data:t}:{valid:!1}}class wp extends er{_parse(r){const{status:s,ctx:n}=this._processInputParams(r),a=(i,l)=>{if(Xw(i)||Xw(l))return _t;const o=Jw(i.value,l.value);return o.valid?((Zw(i)||Zw(l))&&s.dirty(),{status:s.value,value:o.data}):(st(n,{code:ze.invalid_intersection_types}),_t)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,l])=>a(i,l)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}wp.create=(t,r,s)=>new wp({left:t,right:r,typeName:Dt.ZodIntersection,...zt(s)});class Ui extends er{_parse(r){const{status:s,ctx:n}=this._processInputParams(r);if(n.parsedType!==ot.array)return st(n,{code:ze.invalid_type,expected:ot.array,received:n.parsedType}),_t;if(n.data.length<this._def.items.length)return st(n,{code:ze.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_t;!this._def.rest&&n.data.length>this._def.items.length&&(st(n,{code:ze.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...n.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Vi(n,l,n.path,o)):null}).filter(l=>!!l);return n.common.async?Promise.all(i).then(l=>hn.mergeArray(s,l)):hn.mergeArray(s,i)}get items(){return this._def.items}rest(r){return new Ui({...this._def,rest:r})}}Ui.create=(t,r)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ui({items:t,typeName:Dt.ZodTuple,rest:null,...zt(r)})};class Sp extends er{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:s,ctx:n}=this._processInputParams(r);if(n.parsedType!==ot.object)return st(n,{code:ze.invalid_type,expected:ot.object,received:n.parsedType}),_t;const a=[],i=this._def.keyType,l=this._def.valueType;for(const o in n.data)a.push({key:i._parse(new Vi(n,o,n.path,o)),value:l._parse(new Vi(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?hn.mergeObjectAsync(s,a):hn.mergeObjectSync(s,a)}get element(){return this._def.valueType}static create(r,s,n){return s instanceof er?new Sp({keyType:r,valueType:s,typeName:Dt.ZodRecord,...zt(n)}):new Sp({keyType:ti.create(),valueType:r,typeName:Dt.ZodRecord,...zt(s)})}}class fv extends er{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){const{status:s,ctx:n}=this._processInputParams(r);if(n.parsedType!==ot.map)return st(n,{code:ze.invalid_type,expected:ot.map,received:n.parsedType}),_t;const a=this._def.keyType,i=this._def.valueType,l=[...n.data.entries()].map(([o,c],d)=>({key:a._parse(new Vi(n,o,n.path,[d,"key"])),value:i._parse(new Vi(n,c,n.path,[d,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return _t;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),o.set(d.value,u.value)}return{status:s.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return _t;(d.status==="dirty"||u.status==="dirty")&&s.dirty(),o.set(d.value,u.value)}return{status:s.value,value:o}}}}fv.create=(t,r,s)=>new fv({valueType:r,keyType:t,typeName:Dt.ZodMap,...zt(s)});class Bc extends er{_parse(r){const{status:s,ctx:n}=this._processInputParams(r);if(n.parsedType!==ot.set)return st(n,{code:ze.invalid_type,expected:ot.set,received:n.parsedType}),_t;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(st(n,{code:ze.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),s.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(st(n,{code:ze.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),s.dirty());const i=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return _t;u.status==="dirty"&&s.dirty(),d.add(u.value)}return{status:s.value,value:d}}const o=[...n.data.values()].map((c,d)=>i._parse(new Vi(n,c,n.path,d)));return n.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(r,s){return new Bc({...this._def,minSize:{value:r,message:xt.toString(s)}})}max(r,s){return new Bc({...this._def,maxSize:{value:r,message:xt.toString(s)}})}size(r,s){return this.min(r,s).max(r,s)}nonempty(r){return this.min(1,r)}}Bc.create=(t,r)=>new Bc({valueType:t,minSize:null,maxSize:null,typeName:Dt.ZodSet,...zt(r)});class tu extends er{constructor(){super(...arguments),this.validate=this.implement}_parse(r){const{ctx:s}=this._processInputParams(r);if(s.parsedType!==ot.function)return st(s,{code:ze.invalid_type,expected:ot.function,received:s.parsedType}),_t;function n(o,c){return mv({data:o,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,uv(),Du].filter(d=>!!d),issueData:{code:ze.invalid_arguments,argumentsError:c}})}function a(o,c){return mv({data:o,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,uv(),Du].filter(d=>!!d),issueData:{code:ze.invalid_return_type,returnTypeError:c}})}const i={errorMap:s.common.contextualErrorMap},l=s.data;if(this._def.returns instanceof Iu){const o=this;return _n(async function(...c){const d=new ca([]),u=await o._def.args.parseAsync(c,i).catch(g=>{throw d.addIssue(n(c,g)),d}),m=await Reflect.apply(l,this,u);return await o._def.returns._def.type.parseAsync(m,i).catch(g=>{throw d.addIssue(a(m,g)),d})})}else{const o=this;return _n(function(...c){const d=o._def.args.safeParse(c,i);if(!d.success)throw new ca([n(c,d.error)]);const u=Reflect.apply(l,this,d.data),m=o._def.returns.safeParse(u,i);if(!m.success)throw new ca([a(u,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...r){return new tu({...this._def,args:Ui.create(r).rest(Pc.create())})}returns(r){return new tu({...this._def,returns:r})}implement(r){return this.parse(r)}strictImplement(r){return this.parse(r)}static create(r,s,n){return new tu({args:r||Ui.create([]).rest(Pc.create()),returns:s||Pc.create(),typeName:Dt.ZodFunction,...zt(n)})}}class Cp extends er{get schema(){return this._def.getter()}_parse(r){const{ctx:s}=this._processInputParams(r);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}Cp.create=(t,r)=>new Cp({getter:t,typeName:Dt.ZodLazy,...zt(r)});class Pp extends er{_parse(r){if(r.data!==this._def.value){const s=this._getOrReturnCtx(r);return st(s,{received:s.data,code:ze.invalid_literal,expected:this._def.value}),_t}return{status:"valid",value:r.data}}get value(){return this._def.value}}Pp.create=(t,r)=>new Pp({value:t,typeName:Dt.ZodLiteral,...zt(r)});function lL(t,r){return new Eo({values:t,typeName:Dt.ZodEnum,...zt(r)})}class Eo extends er{_parse(r){if(typeof r.data!="string"){const s=this._getOrReturnCtx(r),n=this._def.values;return st(s,{expected:dr.joinValues(n),received:s.parsedType,code:ze.invalid_type}),_t}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(r.data)){const s=this._getOrReturnCtx(r),n=this._def.values;return st(s,{received:s.data,code:ze.invalid_enum_value,options:n}),_t}return _n(r.data)}get options(){return this._def.values}get enum(){const r={};for(const s of this._def.values)r[s]=s;return r}get Values(){const r={};for(const s of this._def.values)r[s]=s;return r}get Enum(){const r={};for(const s of this._def.values)r[s]=s;return r}extract(r,s=this._def){return Eo.create(r,{...this._def,...s})}exclude(r,s=this._def){return Eo.create(this.options.filter(n=>!r.includes(n)),{...this._def,...s})}}Eo.create=lL;class kp extends er{_parse(r){const s=dr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(r);if(n.parsedType!==ot.string&&n.parsedType!==ot.number){const a=dr.objectValues(s);return st(n,{expected:dr.joinValues(a),received:n.parsedType,code:ze.invalid_type}),_t}if(this._cache||(this._cache=new Set(dr.getValidEnumValues(this._def.values))),!this._cache.has(r.data)){const a=dr.objectValues(s);return st(n,{received:n.data,code:ze.invalid_enum_value,options:a}),_t}return _n(r.data)}get enum(){return this._def.values}}kp.create=(t,r)=>new kp({values:t,typeName:Dt.ZodNativeEnum,...zt(r)});class Iu extends er{unwrap(){return this._def.type}_parse(r){const{ctx:s}=this._processInputParams(r);if(s.parsedType!==ot.promise&&s.common.async===!1)return st(s,{code:ze.invalid_type,expected:ot.promise,received:s.parsedType}),_t;const n=s.parsedType===ot.promise?s.data:Promise.resolve(s.data);return _n(n.then(a=>this._def.type.parseAsync(a,{path:s.path,errorMap:s.common.contextualErrorMap})))}}Iu.create=(t,r)=>new Iu({type:t,typeName:Dt.ZodPromise,...zt(r)});class ui extends er{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){const{status:s,ctx:n}=this._processInputParams(r),a=this._def.effect||null,i={addIssue:l=>{st(n,l),l.fatal?s.abort():s.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const l=a.transform(n.data,i);if(n.common.async)return Promise.resolve(l).then(async o=>{if(s.value==="aborted")return _t;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?_t:c.status==="dirty"||s.value==="dirty"?Ud(c.value):c});{if(s.value==="aborted")return _t;const o=this._def.schema._parseSync({data:l,path:n.path,parent:n});return o.status==="aborted"?_t:o.status==="dirty"||s.value==="dirty"?Ud(o.value):o}}if(a.type==="refinement"){const l=o=>{const c=a.refinement(o,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?_t:(o.status==="dirty"&&s.dirty(),l(o.value),{status:s.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?_t:(o.status==="dirty"&&s.dirty(),l(o.value).then(()=>({status:s.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$c(l))return _t;const o=a.transform(l.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>$c(l)?Promise.resolve(a.transform(l.value,i)).then(o=>({status:s.value,value:o})):_t);dr.assertNever(a)}}ui.create=(t,r,s)=>new ui({schema:t,typeName:Dt.ZodEffects,effect:r,...zt(s)});ui.createWithPreprocess=(t,r,s)=>new ui({schema:r,effect:{type:"preprocess",transform:t},typeName:Dt.ZodEffects,...zt(s)});class Fi extends er{_parse(r){return this._getType(r)===ot.undefined?_n(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}Fi.create=(t,r)=>new Fi({innerType:t,typeName:Dt.ZodOptional,...zt(r)});class Do extends er{_parse(r){return this._getType(r)===ot.null?_n(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}Do.create=(t,r)=>new Do({innerType:t,typeName:Dt.ZodNullable,...zt(r)});class Ap extends er{_parse(r){const{ctx:s}=this._processInputParams(r);let n=s.data;return s.parsedType===ot.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Ap.create=(t,r)=>new Ap({innerType:t,typeName:Dt.ZodDefault,defaultValue:typeof r.default=="function"?r.default:()=>r.default,...zt(r)});class _p extends er{_parse(r){const{ctx:s}=this._processInputParams(r),n={...s,common:{...s.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return vp(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ca(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ca(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}_p.create=(t,r)=>new _p({innerType:t,typeName:Dt.ZodCatch,catchValue:typeof r.catch=="function"?r.catch:()=>r.catch,...zt(r)});class xv extends er{_parse(r){if(this._getType(r)!==ot.nan){const n=this._getOrReturnCtx(r);return st(n,{code:ze.invalid_type,expected:ot.nan,received:n.parsedType}),_t}return{status:"valid",value:r.data}}}xv.create=t=>new xv({typeName:Dt.ZodNaN,...zt(t)});const eee=Symbol("zod_brand");class SC extends er{_parse(r){const{ctx:s}=this._processInputParams(r),n=s.data;return this._def.type._parse({data:n,path:s.path,parent:s})}unwrap(){return this._def.type}}class Ef extends er{_parse(r){const{status:s,ctx:n}=this._processInputParams(r);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_t:i.status==="dirty"?(s.dirty(),Ud(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?_t:a.status==="dirty"?(s.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(r,s){return new Ef({in:r,out:s,typeName:Dt.ZodPipeline})}}class Tp extends er{_parse(r){const s=this._def.innerType._parse(r),n=a=>($c(a)&&(a.value=Object.freeze(a.value)),a);return vp(s)?s.then(a=>n(a)):n(s)}unwrap(){return this._def.innerType}}Tp.create=(t,r)=>new Tp({innerType:t,typeName:Dt.ZodReadonly,...zt(r)});function G_(t,r){const s=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t;return typeof s=="string"?{message:s}:s}function CC(t,r={},s){return t?Mu.create().superRefine((n,a)=>{const i=t(n);if(i instanceof Promise)return i.then(l=>{if(!l){const o=G_(r,n),c=o.fatal??s??!0;a.addIssue({code:"custom",...o,fatal:c})}});if(!i){const l=G_(r,n),o=l.fatal??s??!0;a.addIssue({code:"custom",...l,fatal:o})}}):Mu.create()}const tee={object:ts.lazycreate};var Dt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Dt||(Dt={}));const ree=(t,r={message:`Input not instance of ${t.name}`})=>CC(s=>s instanceof t,r),R=ti.create,ct=To.create,see=xv.create,nee=Oo.create,tr=yp.create,ri=Lc.create,aee=hv.create,iee=jp.create,oL=bp.create,Kr=Mu.create,lee=Pc.create,oee=kl.create,cee=pv.create,uj=li.create,Kt=ts.create,dee=ts.strictCreate,PC=Np.create,uee=dj.create,mee=wp.create,hee=Ui.create,mj=Sp.create,pee=fv.create,fee=Bc.create,xee=tu.create,gee=Cp.create,gv=Pp.create,Yr=Eo.create,vee=kp.create,yee=Iu.create,Y_=ui.create,jee=Fi.create,bee=Do.create,Nee=ui.createWithPreprocess,wee=Ef.create,See=()=>R().optional(),Cee=()=>ct().optional(),Pee=()=>tr().optional(),Us={string:t=>ti.create({...t,coerce:!0}),number:t=>To.create({...t,coerce:!0}),boolean:t=>yp.create({...t,coerce:!0}),bigint:t=>Oo.create({...t,coerce:!0}),date:t=>Lc.create({...t,coerce:!0})},kee=_t,Aee=Object.freeze(Object.defineProperty({__proto__:null,BRAND:eee,DIRTY:Ud,EMPTY_PATH:EJ,INVALID:_t,NEVER:kee,OK:_n,ParseStatus:hn,Schema:er,ZodAny:Mu,ZodArray:li,ZodBigInt:Oo,ZodBoolean:yp,ZodBranded:SC,ZodCatch:_p,ZodDate:Lc,ZodDefault:Ap,ZodDiscriminatedUnion:dj,ZodEffects:ui,ZodEnum:Eo,ZodError:ca,get ZodFirstPartyTypeKind(){return Dt},ZodFunction:tu,ZodIntersection:wp,ZodIssueCode:ze,ZodLazy:Cp,ZodLiteral:Pp,ZodMap:fv,ZodNaN:xv,ZodNativeEnum:kp,ZodNever:kl,ZodNull:bp,ZodNullable:Do,ZodNumber:To,ZodObject:ts,ZodOptional:Fi,ZodParsedType:ot,ZodPipeline:Ef,ZodPromise:Iu,ZodReadonly:Tp,ZodRecord:Sp,ZodSchema:er,ZodSet:Bc,ZodString:ti,ZodSymbol:hv,ZodTransformer:ui,ZodTuple:Ui,ZodType:er,ZodUndefined:jp,ZodUnion:Np,ZodUnknown:Pc,ZodVoid:pv,addIssueToContext:st,any:Kr,array:uj,bigint:nee,boolean:tr,coerce:Us,custom:CC,date:ri,datetimeRegex:iL,defaultErrorMap:Du,discriminatedUnion:uee,effect:Y_,enum:Yr,function:xee,getErrorMap:uv,getParsedType:ll,instanceof:ree,intersection:mee,isAborted:Xw,isAsync:vp,isDirty:Zw,isValid:$c,late:tee,lazy:gee,literal:gv,makeIssue:mv,map:pee,nan:see,nativeEnum:vee,never:oee,null:oL,nullable:bee,number:ct,object:Kt,get objectUtil(){return Qw},oboolean:Pee,onumber:Cee,optional:jee,ostring:See,pipeline:wee,preprocess:Nee,promise:yee,quotelessJson:TJ,record:mj,set:fee,setErrorMap:OJ,strictObject:dee,string:R,symbol:aee,transformer:Y_,tuple:hee,undefined:iee,union:PC,unknown:lee,get util(){return dr},void:cee},Symbol.toStringTag,{value:"Module"}));function hj(){const{user:t}=dt(),{data:r}=fe({queryKey:["/api/provider/registration-status"],enabled:!!t&&t.userType==="service_provider"}),s=(r==null?void 0:r.status)==="approved",n=(r==null?void 0:r.status)==="pending",a=(r==null?void 0:r.providerType)||(r==null?void 0:r.provider_type);return{...(()=>{if(!a&&!n&&!s)return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:null,isApproved:!1,isPending:!1};if(n&&!s)return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:a,isApproved:!1,isPending:!0};switch(a){case"farmer":return{canAccessFarmerListings:!0,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:a,isApproved:!0};case"manufacturer":return{canAccessFarmerListings:!1,canAccessLocalProducts:!0,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:a,isApproved:!0};case"booking_agent":return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!0,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:a,isApproved:!0};case"rental":case"rental_provider":return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!0,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:a,isApproved:!0};case"taxi_service":return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!0,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:a,isApproved:!0};case"transport_service":return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!0,canAccessRecyclingServices:!1,providerType:a,isApproved:!0};case"recycling_agent":return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!0,providerType:a,isApproved:!0};default:return{canAccessFarmerListings:!1,canAccessLocalProducts:!1,canAccessBookingServices:!1,canAccessRentalServices:!1,canAccessTaxiServices:!1,canAccessTransportServices:!1,canAccessRecyclingServices:!1,providerType:null,isApproved:!1}}})(),providerRegistration:r,isLoading:t&&t.userType==="provider"&&r===void 0}}const Op=Nm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=j.forwardRef(({className:t,variant:r,size:s,asChild:n=!1,...a},i)=>{const l=n?WF:"button";return e.jsx(l,{className:De(Op({variant:r,size:s,className:t})),ref:i,...a})});_.displayName="Button";const $=j.forwardRef(({className:t,type:r,...s},n)=>e.jsx("input",{type:r,className:De("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));$.displayName="Input";const at=j.forwardRef(({className:t,...r},s)=>e.jsx("textarea",{className:De("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));at.displayName="Textarea";function e1(t,[r,s]){return Math.min(s,Math.max(r,t))}var _ee=j.createContext(void 0);function nd(t){const r=j.useContext(_ee);return t||r||"ltr"}var _0=0;function pj(){j.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Q_()),document.body.insertAdjacentElement("beforeend",t[1]??Q_()),_0++,()=>{_0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),_0--}},[])}function Q_(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var T0="focusScope.autoFocusOnMount",O0="focusScope.autoFocusOnUnmount",X_={bubbles:!1,cancelable:!0},Tee="FocusScope",Df=j.forwardRef((t,r)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=t,[o,c]=j.useState(null),d=ds(a),u=ds(i),m=j.useRef(null),h=$t(r,p=>c(p)),g=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let p=function(b){if(g.paused||!o)return;const N=b.target;o.contains(N)?m.current=N:Wl(m.current,{select:!0})},y=function(b){if(g.paused||!o)return;const N=b.relatedTarget;N!==null&&(o.contains(N)||Wl(m.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&Wl(o)};document.addEventListener("focusin",p),document.addEventListener("focusout",y);const f=new MutationObserver(v);return o&&f.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",y),f.disconnect()}}},[n,o,g.paused]),j.useEffect(()=>{if(o){J_.add(g);const p=document.activeElement;if(!o.contains(p)){const v=new CustomEvent(T0,X_);o.addEventListener(T0,d),o.dispatchEvent(v),v.defaultPrevented||(Oee(Ree(cL(o)),{select:!0}),document.activeElement===p&&Wl(o))}return()=>{o.removeEventListener(T0,d),setTimeout(()=>{const v=new CustomEvent(O0,X_);o.addEventListener(O0,u),o.dispatchEvent(v),v.defaultPrevented||Wl(p??document.body,{select:!0}),o.removeEventListener(O0,u),J_.remove(g)},0)}}},[o,d,u,g]);const x=j.useCallback(p=>{if(!s&&!n||g.paused)return;const y=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,v=document.activeElement;if(y&&v){const f=p.currentTarget,[b,N]=Eee(f);b&&N?!p.shiftKey&&v===N?(p.preventDefault(),s&&Wl(b,{select:!0})):p.shiftKey&&v===b&&(p.preventDefault(),s&&Wl(N,{select:!0})):v===f&&p.preventDefault()}},[s,n,g.paused]);return e.jsx(it.div,{tabIndex:-1,...l,ref:h,onKeyDown:x})});Df.displayName=Tee;function Oee(t,{select:r=!1}={}){const s=document.activeElement;for(const n of t)if(Wl(n,{select:r}),document.activeElement!==s)return}function Eee(t){const r=cL(t),s=Z_(r,t),n=Z_(r.reverse(),t);return[s,n]}function cL(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function Z_(t,r){for(const s of t)if(!Dee(s,{upTo:r}))return s}function Dee(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Mee(t){return t instanceof HTMLInputElement&&"select"in t}function Wl(t,{select:r=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&Mee(t)&&r&&t.select()}}var J_=Iee();function Iee(){let t=[];return{add(r){const s=t[0];r!==s&&(s==null||s.pause()),t=eT(t,r),t.unshift(r)},remove(r){var s;t=eT(t,r),(s=t[0])==null||s.resume()}}}function eT(t,r){const s=[...t],n=s.indexOf(r);return n!==-1&&s.splice(n,1),s}function Ree(t){return t.filter(r=>r.tagName!=="A")}var Fee=c2[" useId ".trim().toString()]||(()=>{}),$ee=0;function da(t){const[r,s]=j.useState(Fee());return ms(()=>{s(n=>n??String($ee++))},[t]),r?`radix-${r}`:""}const Lee=["top","right","bottom","left"],Mo=Math.min,ta=Math.max,vv=Math.round,Ax=Math.floor,$i=t=>({x:t,y:t}),Bee={left:"right",right:"left",bottom:"top",top:"bottom"},Vee={start:"end",end:"start"};function t1(t,r,s){return ta(t,Mo(r,s))}function Al(t,r){return typeof t=="function"?t(r):t}function _l(t){return t.split("-")[0]}function Sm(t){return t.split("-")[1]}function kC(t){return t==="x"?"y":"x"}function AC(t){return t==="y"?"height":"width"}const Uee=new Set(["top","bottom"]);function Ti(t){return Uee.has(_l(t))?"y":"x"}function _C(t){return kC(Ti(t))}function qee(t,r,s){s===void 0&&(s=!1);const n=Sm(t),a=_C(t),i=AC(a);let l=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[i]>r.floating[i]&&(l=yv(l)),[l,yv(l)]}function zee(t){const r=yv(t);return[r1(t),r,r1(r)]}function r1(t){return t.replace(/start|end/g,r=>Vee[r])}const tT=["left","right"],rT=["right","left"],Kee=["top","bottom"],Hee=["bottom","top"];function Wee(t,r,s){switch(t){case"top":case"bottom":return s?r?rT:tT:r?tT:rT;case"left":case"right":return r?Kee:Hee;default:return[]}}function Gee(t,r,s,n){const a=Sm(t);let i=Wee(_l(t),s==="start",n);return a&&(i=i.map(l=>l+"-"+a),r&&(i=i.concat(i.map(r1)))),i}function yv(t){return t.replace(/left|right|bottom|top/g,r=>Bee[r])}function Yee(t){return{top:0,right:0,bottom:0,left:0,...t}}function dL(t){return typeof t!="number"?Yee(t):{top:t,right:t,bottom:t,left:t}}function jv(t){const{x:r,y:s,width:n,height:a}=t;return{width:n,height:a,top:s,left:r,right:r+n,bottom:s+a,x:r,y:s}}function sT(t,r,s){let{reference:n,floating:a}=t;const i=Ti(r),l=_C(r),o=AC(l),c=_l(r),d=i==="y",u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let g;switch(c){case"top":g={x:u,y:n.y-a.height};break;case"bottom":g={x:u,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:m};break;case"left":g={x:n.x-a.width,y:m};break;default:g={x:n.x,y:n.y}}switch(Sm(r)){case"start":g[l]-=h*(s&&d?-1:1);break;case"end":g[l]+=h*(s&&d?-1:1);break}return g}const Qee=async(t,r,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:l}=s,o=i.filter(Boolean),c=await(l.isRTL==null?void 0:l.isRTL(r));let d=await l.getElementRects({reference:t,floating:r,strategy:a}),{x:u,y:m}=sT(d,n,c),h=n,g={},x=0;for(let p=0;p<o.length;p++){const{name:y,fn:v}=o[p],{x:f,y:b,data:N,reset:w}=await v({x:u,y:m,initialPlacement:n,placement:h,strategy:a,middlewareData:g,rects:d,platform:l,elements:{reference:t,floating:r}});u=f??u,m=b??m,g={...g,[y]:{...g[y],...N}},w&&x<=50&&(x++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(d=w.rects===!0?await l.getElementRects({reference:t,floating:r,strategy:a}):w.rects),{x:u,y:m}=sT(d,h,c)),p=-1)}return{x:u,y:m,placement:h,strategy:a,middlewareData:g}};async function Ep(t,r){var s;r===void 0&&(r={});const{x:n,y:a,platform:i,rects:l,elements:o,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:g=0}=Al(r,t),x=dL(g),y=o[h?m==="floating"?"reference":"floating":m],v=jv(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(y)))==null||s?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:u,strategy:c})),f=m==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),N=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},w=jv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:f,offsetParent:b,strategy:c}):f);return{top:(v.top-w.top+x.top)/N.y,bottom:(w.bottom-v.bottom+x.bottom)/N.y,left:(v.left-w.left+x.left)/N.x,right:(w.right-v.right+x.right)/N.x}}const Xee=t=>({name:"arrow",options:t,async fn(r){const{x:s,y:n,placement:a,rects:i,platform:l,elements:o,middlewareData:c}=r,{element:d,padding:u=0}=Al(t,r)||{};if(d==null)return{};const m=dL(u),h={x:s,y:n},g=_C(a),x=AC(g),p=await l.getDimensions(d),y=g==="y",v=y?"top":"left",f=y?"bottom":"right",b=y?"clientHeight":"clientWidth",N=i.reference[x]+i.reference[g]-h[g]-i.floating[x],w=h[g]-i.reference[g],C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let P=C?C[b]:0;(!P||!await(l.isElement==null?void 0:l.isElement(C)))&&(P=o.floating[b]||i.floating[x]);const S=N/2-w/2,A=P/2-p[x]/2-1,k=Mo(m[v],A),D=Mo(m[f],A),q=k,z=P-p[x]-D,I=P/2-p[x]/2+S,F=t1(q,I,z),W=!c.arrow&&Sm(a)!=null&&I!==F&&i.reference[x]/2-(I<q?k:D)-p[x]/2<0,X=W?I<q?I-q:I-z:0;return{[g]:h[g]+X,data:{[g]:F,centerOffset:I-F-X,...W&&{alignmentOffset:X}},reset:W}}}),Zee=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var s,n;const{placement:a,middlewareData:i,rects:l,initialPlacement:o,platform:c,elements:d}=r,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:p=!0,...y}=Al(t,r);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const v=_l(a),f=Ti(o),b=_l(o)===o,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),w=h||(b||!p?[yv(o)]:zee(o)),C=x!=="none";!h&&C&&w.push(...Gee(o,p,x,N));const P=[o,...w],S=await Ep(r,y),A=[];let k=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(S[v]),m){const I=qee(a,l,N);A.push(S[I[0]],S[I[1]])}if(k=[...k,{placement:a,overflows:A}],!A.every(I=>I<=0)){var D,q;const I=(((D=i.flip)==null?void 0:D.index)||0)+1,F=P[I];if(F&&(!(m==="alignment"?f!==Ti(F):!1)||k.every(K=>K.overflows[0]>0&&Ti(K.placement)===f)))return{data:{index:I,overflows:k},reset:{placement:F}};let W=(q=k.filter(X=>X.overflows[0]<=0).sort((X,K)=>X.overflows[1]-K.overflows[1])[0])==null?void 0:q.placement;if(!W)switch(g){case"bestFit":{var z;const X=(z=k.filter(K=>{if(C){const Z=Ti(K.placement);return Z===f||Z==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(Z=>Z>0).reduce((Z,ue)=>Z+ue,0)]).sort((K,Z)=>K[1]-Z[1])[0])==null?void 0:z[0];X&&(W=X);break}case"initialPlacement":W=o;break}if(a!==W)return{reset:{placement:W}}}return{}}}};function nT(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function aT(t){return Lee.some(r=>t[r]>=0)}const Jee=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:s}=r,{strategy:n="referenceHidden",...a}=Al(t,r);switch(n){case"referenceHidden":{const i=await Ep(r,{...a,elementContext:"reference"}),l=nT(i,s.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:aT(l)}}}case"escaped":{const i=await Ep(r,{...a,altBoundary:!0}),l=nT(i,s.floating);return{data:{escapedOffsets:l,escaped:aT(l)}}}default:return{}}}}},uL=new Set(["left","top"]);async function ete(t,r){const{placement:s,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=_l(s),o=Sm(s),c=Ti(s)==="y",d=uL.has(l)?-1:1,u=i&&c?-1:1,m=Al(r,t);let{mainAxis:h,crossAxis:g,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return o&&typeof x=="number"&&(g=o==="end"?x*-1:x),c?{x:g*u,y:h*d}:{x:h*d,y:g*u}}const tte=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var s,n;const{x:a,y:i,placement:l,middlewareData:o}=r,c=await ete(r,t);return l===((s=o.offset)==null?void 0:s.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:l}}}}},rte=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:s,y:n,placement:a}=r,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:y=>{let{x:v,y:f}=y;return{x:v,y:f}}},...c}=Al(t,r),d={x:s,y:n},u=await Ep(r,c),m=Ti(_l(a)),h=kC(m);let g=d[h],x=d[m];if(i){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",f=g+u[y],b=g-u[v];g=t1(f,g,b)}if(l){const y=m==="y"?"top":"left",v=m==="y"?"bottom":"right",f=x+u[y],b=x-u[v];x=t1(f,x,b)}const p=o.fn({...r,[h]:g,[m]:x});return{...p,data:{x:p.x-s,y:p.y-n,enabled:{[h]:i,[m]:l}}}}}},ste=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:s,y:n,placement:a,rects:i,middlewareData:l}=r,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=Al(t,r),u={x:s,y:n},m=Ti(a),h=kC(m);let g=u[h],x=u[m];const p=Al(o,r),y=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=h==="y"?"height":"width",N=i.reference[h]-i.floating[b]+y.mainAxis,w=i.reference[h]+i.reference[b]-y.mainAxis;g<N?g=N:g>w&&(g=w)}if(d){var v,f;const b=h==="y"?"width":"height",N=uL.has(_l(a)),w=i.reference[m]-i.floating[b]+(N&&((v=l.offset)==null?void 0:v[m])||0)+(N?0:y.crossAxis),C=i.reference[m]+i.reference[b]+(N?0:((f=l.offset)==null?void 0:f[m])||0)-(N?y.crossAxis:0);x<w?x=w:x>C&&(x=C)}return{[h]:g,[m]:x}}}},nte=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var s,n;const{placement:a,rects:i,platform:l,elements:o}=r,{apply:c=()=>{},...d}=Al(t,r),u=await Ep(r,d),m=_l(a),h=Sm(a),g=Ti(a)==="y",{width:x,height:p}=i.floating;let y,v;m==="top"||m==="bottom"?(y=m,v=h===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(v=m,y=h==="end"?"top":"bottom");const f=p-u.top-u.bottom,b=x-u.left-u.right,N=Mo(p-u[y],f),w=Mo(x-u[v],b),C=!r.middlewareData.shift;let P=N,S=w;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(S=b),(n=r.middlewareData.shift)!=null&&n.enabled.y&&(P=f),C&&!h){const k=ta(u.left,0),D=ta(u.right,0),q=ta(u.top,0),z=ta(u.bottom,0);g?S=x-2*(k!==0||D!==0?k+D:ta(u.left,u.right)):P=p-2*(q!==0||z!==0?q+z:ta(u.top,u.bottom))}await c({...r,availableWidth:S,availableHeight:P});const A=await l.getDimensions(o.floating);return x!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function fj(){return typeof window<"u"}function Cm(t){return mL(t)?(t.nodeName||"").toLowerCase():"#document"}function ua(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function Gi(t){var r;return(r=(mL(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function mL(t){return fj()?t instanceof Node||t instanceof ua(t).Node:!1}function mi(t){return fj()?t instanceof Element||t instanceof ua(t).Element:!1}function qi(t){return fj()?t instanceof HTMLElement||t instanceof ua(t).HTMLElement:!1}function iT(t){return!fj()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ua(t).ShadowRoot}const ate=new Set(["inline","contents"]);function Mf(t){const{overflow:r,overflowX:s,overflowY:n,display:a}=hi(t);return/auto|scroll|overlay|hidden|clip/.test(r+n+s)&&!ate.has(a)}const ite=new Set(["table","td","th"]);function lte(t){return ite.has(Cm(t))}const ote=[":popover-open",":modal"];function xj(t){return ote.some(r=>{try{return t.matches(r)}catch{return!1}})}const cte=["transform","translate","scale","rotate","perspective"],dte=["transform","translate","scale","rotate","perspective","filter"],ute=["paint","layout","strict","content"];function TC(t){const r=OC(),s=mi(t)?hi(t):t;return cte.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||dte.some(n=>(s.willChange||"").includes(n))||ute.some(n=>(s.contain||"").includes(n))}function mte(t){let r=Io(t);for(;qi(r)&&!Ru(r);){if(TC(r))return r;if(xj(r))return null;r=Io(r)}return null}function OC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const hte=new Set(["html","body","#document"]);function Ru(t){return hte.has(Cm(t))}function hi(t){return ua(t).getComputedStyle(t)}function gj(t){return mi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Io(t){if(Cm(t)==="html")return t;const r=t.assignedSlot||t.parentNode||iT(t)&&t.host||Gi(t);return iT(r)?r.host:r}function hL(t){const r=Io(t);return Ru(r)?t.ownerDocument?t.ownerDocument.body:t.body:qi(r)&&Mf(r)?r:hL(r)}function Dp(t,r,s){var n;r===void 0&&(r=[]),s===void 0&&(s=!0);const a=hL(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),l=ua(a);if(i){const o=s1(l);return r.concat(l,l.visualViewport||[],Mf(a)?a:[],o&&s?Dp(o):[])}return r.concat(a,Dp(a,[],s))}function s1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pL(t){const r=hi(t);let s=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const a=qi(t),i=a?t.offsetWidth:s,l=a?t.offsetHeight:n,o=vv(s)!==i||vv(n)!==l;return o&&(s=i,n=l),{width:s,height:n,$:o}}function EC(t){return mi(t)?t:t.contextElement}function ru(t){const r=EC(t);if(!qi(r))return $i(1);const s=r.getBoundingClientRect(),{width:n,height:a,$:i}=pL(r);let l=(i?vv(s.width):s.width)/n,o=(i?vv(s.height):s.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const pte=$i(0);function fL(t){const r=ua(t);return!OC()||!r.visualViewport?pte:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function fte(t,r,s){return r===void 0&&(r=!1),!s||r&&s!==ua(t)?!1:r}function Vc(t,r,s,n){r===void 0&&(r=!1),s===void 0&&(s=!1);const a=t.getBoundingClientRect(),i=EC(t);let l=$i(1);r&&(n?mi(n)&&(l=ru(n)):l=ru(t));const o=fte(i,s,n)?fL(i):$i(0);let c=(a.left+o.x)/l.x,d=(a.top+o.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){const h=ua(i),g=n&&mi(n)?ua(n):n;let x=h,p=s1(x);for(;p&&n&&g!==x;){const y=ru(p),v=p.getBoundingClientRect(),f=hi(p),b=v.left+(p.clientLeft+parseFloat(f.paddingLeft))*y.x,N=v.top+(p.clientTop+parseFloat(f.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,m*=y.y,c+=b,d+=N,x=ua(p),p=s1(x)}}return jv({width:u,height:m,x:c,y:d})}function DC(t,r){const s=gj(t).scrollLeft;return r?r.left+s:Vc(Gi(t)).left+s}function xL(t,r,s){s===void 0&&(s=!1);const n=t.getBoundingClientRect(),a=n.left+r.scrollLeft-(s?0:DC(t,n)),i=n.top+r.scrollTop;return{x:a,y:i}}function xte(t){let{elements:r,rect:s,offsetParent:n,strategy:a}=t;const i=a==="fixed",l=Gi(n),o=r?xj(r.floating):!1;if(n===l||o&&i)return s;let c={scrollLeft:0,scrollTop:0},d=$i(1);const u=$i(0),m=qi(n);if((m||!m&&!i)&&((Cm(n)!=="body"||Mf(l))&&(c=gj(n)),qi(n))){const g=Vc(n);d=ru(n),u.x=g.x+n.clientLeft,u.y=g.y+n.clientTop}const h=l&&!m&&!i?xL(l,c,!0):$i(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:s.y*d.y-c.scrollTop*d.y+u.y+h.y}}function gte(t){return Array.from(t.getClientRects())}function vte(t){const r=Gi(t),s=gj(t),n=t.ownerDocument.body,a=ta(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),i=ta(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let l=-s.scrollLeft+DC(t);const o=-s.scrollTop;return hi(n).direction==="rtl"&&(l+=ta(r.clientWidth,n.clientWidth)-a),{width:a,height:i,x:l,y:o}}function yte(t,r){const s=ua(t),n=Gi(t),a=s.visualViewport;let i=n.clientWidth,l=n.clientHeight,o=0,c=0;if(a){i=a.width,l=a.height;const d=OC();(!d||d&&r==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:l,x:o,y:c}}const jte=new Set(["absolute","fixed"]);function bte(t,r){const s=Vc(t,!0,r==="fixed"),n=s.top+t.clientTop,a=s.left+t.clientLeft,i=qi(t)?ru(t):$i(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,c=a*i.x,d=n*i.y;return{width:l,height:o,x:c,y:d}}function lT(t,r,s){let n;if(r==="viewport")n=yte(t,s);else if(r==="document")n=vte(Gi(t));else if(mi(r))n=bte(r,s);else{const a=fL(t);n={x:r.x-a.x,y:r.y-a.y,width:r.width,height:r.height}}return jv(n)}function gL(t,r){const s=Io(t);return s===r||!mi(s)||Ru(s)?!1:hi(s).position==="fixed"||gL(s,r)}function Nte(t,r){const s=r.get(t);if(s)return s;let n=Dp(t,[],!1).filter(o=>mi(o)&&Cm(o)!=="body"),a=null;const i=hi(t).position==="fixed";let l=i?Io(t):t;for(;mi(l)&&!Ru(l);){const o=hi(l),c=TC(l);!c&&o.position==="fixed"&&(a=null),(i?!c&&!a:!c&&o.position==="static"&&!!a&&jte.has(a.position)||Mf(l)&&!c&&gL(t,l))?n=n.filter(u=>u!==l):a=o,l=Io(l)}return r.set(t,n),n}function wte(t){let{element:r,boundary:s,rootBoundary:n,strategy:a}=t;const l=[...s==="clippingAncestors"?xj(r)?[]:Nte(r,this._c):[].concat(s),n],o=l[0],c=l.reduce((d,u)=>{const m=lT(r,u,a);return d.top=ta(m.top,d.top),d.right=Mo(m.right,d.right),d.bottom=Mo(m.bottom,d.bottom),d.left=ta(m.left,d.left),d},lT(r,o,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ste(t){const{width:r,height:s}=pL(t);return{width:r,height:s}}function Cte(t,r,s){const n=qi(r),a=Gi(r),i=s==="fixed",l=Vc(t,!0,i,r);let o={scrollLeft:0,scrollTop:0};const c=$i(0);function d(){c.x=DC(a)}if(n||!n&&!i)if((Cm(r)!=="body"||Mf(a))&&(o=gj(r)),n){const g=Vc(r,!0,i,r);c.x=g.x+r.clientLeft,c.y=g.y+r.clientTop}else a&&d();i&&!n&&a&&d();const u=a&&!n&&!i?xL(a,o):$i(0),m=l.left+o.scrollLeft-c.x-u.x,h=l.top+o.scrollTop-c.y-u.y;return{x:m,y:h,width:l.width,height:l.height}}function E0(t){return hi(t).position==="static"}function oT(t,r){if(!qi(t)||hi(t).position==="fixed")return null;if(r)return r(t);let s=t.offsetParent;return Gi(t)===s&&(s=s.ownerDocument.body),s}function vL(t,r){const s=ua(t);if(xj(t))return s;if(!qi(t)){let a=Io(t);for(;a&&!Ru(a);){if(mi(a)&&!E0(a))return a;a=Io(a)}return s}let n=oT(t,r);for(;n&&lte(n)&&E0(n);)n=oT(n,r);return n&&Ru(n)&&E0(n)&&!TC(n)?s:n||mte(t)||s}const Pte=async function(t){const r=this.getOffsetParent||vL,s=this.getDimensions,n=await s(t.floating);return{reference:Cte(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function kte(t){return hi(t).direction==="rtl"}const Ate={convertOffsetParentRelativeRectToViewportRelativeRect:xte,getDocumentElement:Gi,getClippingRect:wte,getOffsetParent:vL,getElementRects:Pte,getClientRects:gte,getDimensions:Ste,getScale:ru,isElement:mi,isRTL:kte};function yL(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function _te(t,r){let s=null,n;const a=Gi(t);function i(){var o;clearTimeout(n),(o=s)==null||o.disconnect(),s=null}function l(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:u,top:m,width:h,height:g}=d;if(o||r(),!h||!g)return;const x=Ax(m),p=Ax(a.clientWidth-(u+h)),y=Ax(a.clientHeight-(m+g)),v=Ax(u),b={rootMargin:-x+"px "+-p+"px "+-y+"px "+-v+"px",threshold:ta(0,Mo(1,c))||1};let N=!0;function w(C){const P=C[0].intersectionRatio;if(P!==c){if(!N)return l();P?l(!1,P):n=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!yL(d,t.getBoundingClientRect())&&l(),N=!1}try{s=new IntersectionObserver(w,{...b,root:a.ownerDocument})}catch{s=new IntersectionObserver(w,b)}s.observe(t)}return l(!0),i}function Tte(t,r,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=EC(t),u=a||i?[...d?Dp(d):[],...Dp(r)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",s,{passive:!0}),i&&v.addEventListener("resize",s)});const m=d&&o?_te(d,s):null;let h=-1,g=null;l&&(g=new ResizeObserver(v=>{let[f]=v;f&&f.target===d&&g&&(g.unobserve(r),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=g)==null||b.observe(r)})),s()}),d&&!c&&g.observe(d),g.observe(r));let x,p=c?Vc(t):null;c&&y();function y(){const v=Vc(t);p&&!yL(p,v)&&s(),p=v,x=requestAnimationFrame(y)}return s(),()=>{var v;u.forEach(f=>{a&&f.removeEventListener("scroll",s),i&&f.removeEventListener("resize",s)}),m==null||m(),(v=g)==null||v.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const Ote=tte,Ete=rte,Dte=Zee,Mte=nte,Ite=Jee,cT=Xee,Rte=ste,Fte=(t,r,s)=>{const n=new Map,a={platform:Ate,...s},i={...a.platform,_c:n};return Qee(t,r,{...a,platform:i})};var $te=typeof document<"u",Lte=function(){},jg=$te?j.useLayoutEffect:Lte;function bv(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let s,n,a;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==r.length)return!1;for(n=s;n--!==0;)if(!bv(t[n],r[n]))return!1;return!0}if(a=Object.keys(t),s=a.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(r,a[n]))return!1;for(n=s;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!bv(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}function jL(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function dT(t,r){const s=jL(t);return Math.round(r*s)/s}function D0(t){const r=j.useRef(t);return jg(()=>{r.current=t}),r}function Bte(t){t===void 0&&(t={});const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:c,open:d}=t,[u,m]=j.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[h,g]=j.useState(n);bv(h,n)||g(n);const[x,p]=j.useState(null),[y,v]=j.useState(null),f=j.useCallback(K=>{K!==C.current&&(C.current=K,p(K))},[]),b=j.useCallback(K=>{K!==P.current&&(P.current=K,v(K))},[]),N=i||x,w=l||y,C=j.useRef(null),P=j.useRef(null),S=j.useRef(u),A=c!=null,k=D0(c),D=D0(a),q=D0(d),z=j.useCallback(()=>{if(!C.current||!P.current)return;const K={placement:r,strategy:s,middleware:h};D.current&&(K.platform=D.current),Fte(C.current,P.current,K).then(Z=>{const ue={...Z,isPositioned:q.current!==!1};I.current&&!bv(S.current,ue)&&(S.current=ue,td.flushSync(()=>{m(ue)}))})},[h,r,s,D,q]);jg(()=>{d===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,m(K=>({...K,isPositioned:!1})))},[d]);const I=j.useRef(!1);jg(()=>(I.current=!0,()=>{I.current=!1}),[]),jg(()=>{if(N&&(C.current=N),w&&(P.current=w),N&&w){if(k.current)return k.current(N,w,z);z()}},[N,w,z,k,A]);const F=j.useMemo(()=>({reference:C,floating:P,setReference:f,setFloating:b}),[f,b]),W=j.useMemo(()=>({reference:N,floating:w}),[N,w]),X=j.useMemo(()=>{const K={position:s,left:0,top:0};if(!W.floating)return K;const Z=dT(W.floating,u.x),ue=dT(W.floating,u.y);return o?{...K,transform:"translate("+Z+"px, "+ue+"px)",...jL(W.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:Z,top:ue}},[s,o,W.floating,u.x,u.y]);return j.useMemo(()=>({...u,update:z,refs:F,elements:W,floatingStyles:X}),[u,z,F,W,X])}const Vte=t=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:n,padding:a}=typeof t=="function"?t(s):t;return n&&r(n)?n.current!=null?cT({element:n.current,padding:a}).fn(s):{}:n?cT({element:n,padding:a}).fn(s):{}}}},Ute=(t,r)=>({...Ote(t),options:[t,r]}),qte=(t,r)=>({...Ete(t),options:[t,r]}),zte=(t,r)=>({...Rte(t),options:[t,r]}),Kte=(t,r)=>({...Dte(t),options:[t,r]}),Hte=(t,r)=>({...Mte(t),options:[t,r]}),Wte=(t,r)=>({...Ite(t),options:[t,r]}),Gte=(t,r)=>({...Vte(t),options:[t,r]});var Yte="Arrow",bL=j.forwardRef((t,r)=>{const{children:s,width:n=10,height:a=5,...i}=t;return e.jsx(it.svg,{...i,ref:r,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});bL.displayName=Yte;var Qte=bL;function vj(t){const[r,s]=j.useState(void 0);return ms(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let l,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;l=d.inlineSize,o=d.blockSize}else l=t.offsetWidth,o=t.offsetHeight;s({width:l,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),r}var MC="Popper",[NL,Pm]=ws(MC),[Xte,wL]=NL(MC),SL=t=>{const{__scopePopper:r,children:s}=t,[n,a]=j.useState(null);return e.jsx(Xte,{scope:r,anchor:n,onAnchorChange:a,children:s})};SL.displayName=MC;var CL="PopperAnchor",PL=j.forwardRef((t,r)=>{const{__scopePopper:s,virtualRef:n,...a}=t,i=wL(CL,s),l=j.useRef(null),o=$t(r,l);return j.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||l.current)}),n?null:e.jsx(it.div,{...a,ref:o})});PL.displayName=CL;var IC="PopperContent",[Zte,Jte]=NL(IC),kL=j.forwardRef((t,r)=>{var ke,Be,Me,He,Xe,we;const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:g="optimized",onPlaced:x,...p}=t,y=wL(IC,s),[v,f]=j.useState(null),b=$t(r,Bt=>f(Bt)),[N,w]=j.useState(null),C=vj(N),P=(C==null?void 0:C.width)??0,S=(C==null?void 0:C.height)??0,A=n+(i!=="center"?"-"+i:""),k=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(d)?d:[d],q=D.length>0,z={padding:k,boundary:D.filter(tre),altBoundary:q},{refs:I,floatingStyles:F,placement:W,isPositioned:X,middlewareData:K}=Bte({strategy:"fixed",placement:A,whileElementsMounted:(...Bt)=>Tte(...Bt,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[Ute({mainAxis:a+S,alignmentAxis:l}),c&&qte({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?zte():void 0,...z}),c&&Kte({...z}),Hte({...z,apply:({elements:Bt,rects:jt,availableWidth:or,availableHeight:ir})=>{const{width:Nr,height:Jr}=jt.reference,Ge=Bt.floating.style;Ge.setProperty("--radix-popper-available-width",`${or}px`),Ge.setProperty("--radix-popper-available-height",`${ir}px`),Ge.setProperty("--radix-popper-anchor-width",`${Nr}px`),Ge.setProperty("--radix-popper-anchor-height",`${Jr}px`)}}),N&&Gte({element:N,padding:o}),rre({arrowWidth:P,arrowHeight:S}),h&&Wte({strategy:"referenceHidden",...z})]}),[Z,ue]=TL(W),Ne=ds(x);ms(()=>{X&&(Ne==null||Ne())},[X,Ne]);const J=(ke=K.arrow)==null?void 0:ke.x,Re=(Be=K.arrow)==null?void 0:Be.y,Ee=((Me=K.arrow)==null?void 0:Me.centerOffset)!==0,[ut,ce]=j.useState();return ms(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),e.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:X?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ut,"--radix-popper-transform-origin":[(He=K.transformOrigin)==null?void 0:He.x,(Xe=K.transformOrigin)==null?void 0:Xe.y].join(" "),...((we=K.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Zte,{scope:s,placedSide:Z,onArrowChange:w,arrowX:J,arrowY:Re,shouldHideArrow:Ee,children:e.jsx(it.div,{"data-side":Z,"data-align":ue,...p,ref:b,style:{...p.style,animation:X?void 0:"none"}})})})});kL.displayName=IC;var AL="PopperArrow",ere={top:"bottom",right:"left",bottom:"top",left:"right"},_L=j.forwardRef(function(r,s){const{__scopePopper:n,...a}=r,i=Jte(AL,n),l=ere[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(Qte,{...a,ref:s,style:{...a.style,display:"block"}})})});_L.displayName=AL;function tre(t){return t!==null}var rre=t=>({name:"transformOrigin",options:t,fn(r){var y,v,f;const{placement:s,rects:n,middlewareData:a}=r,l=((y=a.arrow)==null?void 0:y.centerOffset)!==0,o=l?0:t.arrowWidth,c=l?0:t.arrowHeight,[d,u]=TL(s),m={start:"0%",center:"50%",end:"100%"}[u],h=(((v=a.arrow)==null?void 0:v.x)??0)+o/2,g=(((f=a.arrow)==null?void 0:f.y)??0)+c/2;let x="",p="";return d==="bottom"?(x=l?m:`${h}px`,p=`${-c}px`):d==="top"?(x=l?m:`${h}px`,p=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,p=l?m:`${g}px`):d==="left"&&(x=`${n.floating.width+c}px`,p=l?m:`${g}px`),{data:{x,y:p}}}});function TL(t){const[r,s="center"]=t.split("-");return[r,s]}var RC=SL,yj=PL,FC=kL,$C=_L;function jj(t){const r=j.useRef({value:t,previous:t});return j.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var sre=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},jd=new WeakMap,_x=new WeakMap,Tx={},M0=0,OL=function(t){return t&&(t.host||OL(t.parentNode))},nre=function(t,r){return r.map(function(s){if(t.contains(s))return s;var n=OL(s);return n&&t.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},are=function(t,r,s,n){var a=nre(r,Array.isArray(t)?t:[t]);Tx[s]||(Tx[s]=new WeakMap);var i=Tx[s],l=[],o=new Set,c=new Set(a),d=function(m){!m||o.has(m)||(o.add(m),d(m.parentNode))};a.forEach(d);var u=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(h){if(o.has(h))u(h);else try{var g=h.getAttribute(n),x=g!==null&&g!=="false",p=(jd.get(h)||0)+1,y=(i.get(h)||0)+1;jd.set(h,p),i.set(h,y),l.push(h),p===1&&x&&_x.set(h,!0),y===1&&h.setAttribute(s,"true"),x||h.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(r),o.clear(),M0++,function(){l.forEach(function(m){var h=jd.get(m)-1,g=i.get(m)-1;jd.set(m,h),i.set(m,g),h||(_x.has(m)||m.removeAttribute(n),_x.delete(m)),g||m.removeAttribute(s)}),M0--,M0||(jd=new WeakMap,jd=new WeakMap,_x=new WeakMap,Tx={})}},bj=function(t,r,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=sre(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),are(n,a,s,"aria-hidden")):function(){return null}},Pi=function(){return Pi=Object.assign||function(r){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},Pi.apply(this,arguments)};function EL(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s}function ire(t,r,s){if(s||arguments.length===2)for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}var bg="right-scroll-bar-position",Ng="width-before-scroll-bar",lre="with-scroll-bars-hidden",ore="--removed-body-scroll-bar-size";function I0(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function cre(t,r){var s=j.useState(function(){return{value:t,callback:r,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=r,s.facade}var dre=typeof window<"u"?j.useLayoutEffect:j.useEffect,uT=new WeakMap;function ure(t,r){var s=cre(null,function(n){return t.forEach(function(a){return I0(a,n)})});return dre(function(){var n=uT.get(s);if(n){var a=new Set(n),i=new Set(t),l=s.current;a.forEach(function(o){i.has(o)||I0(o,null)}),i.forEach(function(o){a.has(o)||I0(o,l)})}uT.set(s,t)},[t]),s}function mre(t){return t}function hre(t,r){r===void 0&&(r=mre);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(i){var l=r(i,n);return s.push(l),function(){s=s.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(n=!0;s.length;){var l=s;s=[],l.forEach(i)}s={push:function(o){return i(o)},filter:function(){return s}}},assignMedium:function(i){n=!0;var l=[];if(s.length){var o=s;s=[],o.forEach(i),l=s}var c=function(){var u=l;l=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){l.push(u),d()},filter:function(u){return l=l.filter(u),s}}}};return a}function pre(t){t===void 0&&(t={});var r=hre(null);return r.options=Pi({async:!0,ssr:!1},t),r}var DL=function(t){var r=t.sideCar,s=EL(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=r.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,Pi({},s))};DL.isSideCarExport=!0;function fre(t,r){return t.useMedium(r),DL}var ML=pre(),R0=function(){},Nj=j.forwardRef(function(t,r){var s=j.useRef(null),n=j.useState({onScrollCapture:R0,onWheelCapture:R0,onTouchMoveCapture:R0}),a=n[0],i=n[1],l=t.forwardProps,o=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,m=t.shards,h=t.sideCar,g=t.noRelative,x=t.noIsolation,p=t.inert,y=t.allowPinchZoom,v=t.as,f=v===void 0?"div":v,b=t.gapMode,N=EL(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,C=ure([s,r]),P=Pi(Pi({},N),a);return j.createElement(j.Fragment,null,u&&j.createElement(w,{sideCar:ML,removeScrollBar:d,shards:m,noRelative:g,noIsolation:x,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:s,gapMode:b}),l?j.cloneElement(j.Children.only(o),Pi(Pi({},P),{ref:C})):j.createElement(f,Pi({},P,{className:c,ref:C}),o))});Nj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Nj.classNames={fullWidth:Ng,zeroRight:bg};var xre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gre(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=xre();return r&&t.setAttribute("nonce",r),t}function vre(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function yre(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var jre=function(){var t=0,r=null;return{add:function(s){t==0&&(r=gre())&&(vre(r,s),yre(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},bre=function(){var t=jre();return function(r,s){j.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&s])}},IL=function(){var t=bre(),r=function(s){var n=s.styles,a=s.dynamic;return t(n,a),null};return r},Nre={left:0,top:0,right:0,gap:0},F0=function(t){return parseInt(t||"",10)||0},wre=function(t){var r=window.getComputedStyle(document.body),s=r[t==="padding"?"paddingLeft":"marginLeft"],n=r[t==="padding"?"paddingTop":"marginTop"],a=r[t==="padding"?"paddingRight":"marginRight"];return[F0(s),F0(n),F0(a)]},Sre=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Nre;var r=wre(t),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,n-s+r[2]-r[0])}},Cre=IL(),su="data-scroll-locked",Pre=function(t,r,s,n){var a=t.left,i=t.top,l=t.right,o=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(lre,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(su,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bg,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Ng,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(bg," .").concat(bg,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ng," .").concat(Ng,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(su,`] {
    `).concat(ore,": ").concat(o,`px;
  }
`)},mT=function(){var t=parseInt(document.body.getAttribute(su)||"0",10);return isFinite(t)?t:0},kre=function(){j.useEffect(function(){return document.body.setAttribute(su,(mT()+1).toString()),function(){var t=mT()-1;t<=0?document.body.removeAttribute(su):document.body.setAttribute(su,t.toString())}},[])},Are=function(t){var r=t.noRelative,s=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;kre();var i=j.useMemo(function(){return Sre(a)},[a]);return j.createElement(Cre,{styles:Pre(i,!r,a,s?"":"!important")})},n1=!1;if(typeof window<"u")try{var Ox=Object.defineProperty({},"passive",{get:function(){return n1=!0,!0}});window.addEventListener("test",Ox,Ox),window.removeEventListener("test",Ox,Ox)}catch{n1=!1}var bd=n1?{passive:!1}:!1,_re=function(t){return t.tagName==="TEXTAREA"},RL=function(t,r){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[r]!=="hidden"&&!(s.overflowY===s.overflowX&&!_re(t)&&s[r]==="visible")},Tre=function(t){return RL(t,"overflowY")},Ore=function(t){return RL(t,"overflowX")},hT=function(t,r){var s=r.ownerDocument,n=r;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=FL(t,n);if(a){var i=$L(t,n),l=i[1],o=i[2];if(l>o)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},Ere=function(t){var r=t.scrollTop,s=t.scrollHeight,n=t.clientHeight;return[r,s,n]},Dre=function(t){var r=t.scrollLeft,s=t.scrollWidth,n=t.clientWidth;return[r,s,n]},FL=function(t,r){return t==="v"?Tre(r):Ore(r)},$L=function(t,r){return t==="v"?Ere(r):Dre(r)},Mre=function(t,r){return t==="h"&&r==="rtl"?-1:1},Ire=function(t,r,s,n,a){var i=Mre(t,window.getComputedStyle(r).direction),l=i*n,o=s.target,c=r.contains(o),d=!1,u=l>0,m=0,h=0;do{if(!o)break;var g=$L(t,o),x=g[0],p=g[1],y=g[2],v=p-y-i*x;(x||v)&&FL(t,o)&&(m+=v,h+=x);var f=o.parentNode;o=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!c&&o!==document.body||c&&(r.contains(o)||r===o));return(u&&Math.abs(m)<1||!u&&Math.abs(h)<1)&&(d=!0),d},Ex=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pT=function(t){return[t.deltaX,t.deltaY]},fT=function(t){return t&&"current"in t?t.current:t},Rre=function(t,r){return t[0]===r[0]&&t[1]===r[1]},Fre=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$re=0,Nd=[];function Lre(t){var r=j.useRef([]),s=j.useRef([0,0]),n=j.useRef(),a=j.useState($re++)[0],i=j.useState(IL)[0],l=j.useRef(t);j.useEffect(function(){l.current=t},[t]),j.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=ire([t.lockRef.current],(t.shards||[]).map(fT),!0).filter(Boolean);return p.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=j.useCallback(function(p,y){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!l.current.allowPinchZoom;var v=Ex(p),f=s.current,b="deltaX"in p?p.deltaX:f[0]-v[0],N="deltaY"in p?p.deltaY:f[1]-v[1],w,C=p.target,P=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in p&&P==="h"&&C.type==="range")return!1;var S=hT(P,C);if(!S)return!0;if(S?w=P:(w=P==="v"?"h":"v",S=hT(P,C)),!S)return!1;if(!n.current&&"changedTouches"in p&&(b||N)&&(n.current=w),!w)return!0;var A=n.current||w;return Ire(A,y,p,A==="h"?b:N)},[]),c=j.useCallback(function(p){var y=p;if(!(!Nd.length||Nd[Nd.length-1]!==i)){var v="deltaY"in y?pT(y):Ex(y),f=r.current.filter(function(w){return w.name===y.type&&(w.target===y.target||y.target===w.shadowParent)&&Rre(w.delta,v)})[0];if(f&&f.should){y.cancelable&&y.preventDefault();return}if(!f){var b=(l.current.shards||[]).map(fT).filter(Boolean).filter(function(w){return w.contains(y.target)}),N=b.length>0?o(y,b[0]):!l.current.noIsolation;N&&y.cancelable&&y.preventDefault()}}},[]),d=j.useCallback(function(p,y,v,f){var b={name:p,delta:y,target:v,should:f,shadowParent:Bre(v)};r.current.push(b),setTimeout(function(){r.current=r.current.filter(function(N){return N!==b})},1)},[]),u=j.useCallback(function(p){s.current=Ex(p),n.current=void 0},[]),m=j.useCallback(function(p){d(p.type,pT(p),p.target,o(p,t.lockRef.current))},[]),h=j.useCallback(function(p){d(p.type,Ex(p),p.target,o(p,t.lockRef.current))},[]);j.useEffect(function(){return Nd.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:h}),document.addEventListener("wheel",c,bd),document.addEventListener("touchmove",c,bd),document.addEventListener("touchstart",u,bd),function(){Nd=Nd.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,bd),document.removeEventListener("touchmove",c,bd),document.removeEventListener("touchstart",u,bd)}},[]);var g=t.removeScrollBar,x=t.inert;return j.createElement(j.Fragment,null,x?j.createElement(i,{styles:Fre(a)}):null,g?j.createElement(Are,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Bre(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const Vre=fre(ML,Lre);var If=j.forwardRef(function(t,r){return j.createElement(Nj,Pi({},t,{ref:r,sideCar:Vre}))});If.classNames=Nj.classNames;var Ure=[" ","Enter","ArrowUp","ArrowDown"],qre=[" ","Enter"],Uc="Select",[wj,Sj,zre]=Af(Uc),[km,HFe]=ws(Uc,[zre,Pm]),Cj=Pm(),[Kre,qo]=km(Uc),[Hre,Wre]=km(Uc),LL=t=>{const{__scopeSelect:r,children:s,open:n,defaultOpen:a,onOpenChange:i,value:l,defaultValue:o,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:h,required:g,form:x}=t,p=Cj(r),[y,v]=j.useState(null),[f,b]=j.useState(null),[N,w]=j.useState(!1),C=nd(d),[P,S]=Hn({prop:n,defaultProp:a??!1,onChange:i,caller:Uc}),[A,k]=Hn({prop:l,defaultProp:o,onChange:c,caller:Uc}),D=j.useRef(null),q=y?x||!!y.closest("form"):!0,[z,I]=j.useState(new Set),F=Array.from(z).map(W=>W.props.value).join(";");return e.jsx(RC,{...p,children:e.jsxs(Kre,{required:g,scope:r,trigger:y,onTriggerChange:v,valueNode:f,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:w,contentId:da(),value:A,onValueChange:k,open:P,onOpenChange:S,dir:C,triggerPointerDownPosRef:D,disabled:h,children:[e.jsx(wj.Provider,{scope:r,children:e.jsx(Hre,{scope:t.__scopeSelect,onNativeOptionAdd:j.useCallback(W=>{I(X=>new Set(X).add(W))},[]),onNativeOptionRemove:j.useCallback(W=>{I(X=>{const K=new Set(X);return K.delete(W),K})},[]),children:s})}),q?e.jsxs(c8,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:m,value:A,onChange:W=>k(W.target.value),disabled:h,form:x,children:[A===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},F):null]})})};LL.displayName=Uc;var BL="SelectTrigger",VL=j.forwardRef((t,r)=>{const{__scopeSelect:s,disabled:n=!1,...a}=t,i=Cj(s),l=qo(BL,s),o=l.disabled||n,c=$t(r,l.onTriggerChange),d=Sj(s),u=j.useRef("touch"),[m,h,g]=u8(p=>{const y=d().filter(b=>!b.disabled),v=y.find(b=>b.value===l.value),f=m8(y,p,v);f!==void 0&&l.onValueChange(f.value)}),x=p=>{o||(l.onOpenChange(!0),g()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(yj,{asChild:!0,...i,children:e.jsx(it.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":d8(l.value)?"":void 0,...a,ref:c,onClick:We(a.onClick,p=>{p.currentTarget.focus(),u.current!=="mouse"&&x(p)}),onPointerDown:We(a.onPointerDown,p=>{u.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:We(a.onKeyDown,p=>{const y=m.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&h(p.key),!(y&&p.key===" ")&&Ure.includes(p.key)&&(x(),p.preventDefault())})})})});VL.displayName=BL;var UL="SelectValue",qL=j.forwardRef((t,r)=>{const{__scopeSelect:s,className:n,style:a,children:i,placeholder:l="",...o}=t,c=qo(UL,s),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,m=$t(r,c.onValueNodeChange);return ms(()=>{d(u)},[d,u]),e.jsx(it.span,{...o,ref:m,style:{pointerEvents:"none"},children:d8(c.value)?e.jsx(e.Fragment,{children:l}):i})});qL.displayName=UL;var Gre="SelectIcon",zL=j.forwardRef((t,r)=>{const{__scopeSelect:s,children:n,...a}=t;return e.jsx(it.span,{"aria-hidden":!0,...a,ref:r,children:n||""})});zL.displayName=Gre;var Yre="SelectPortal",KL=t=>e.jsx(bm,{asChild:!0,...t});KL.displayName=Yre;var qc="SelectContent",HL=j.forwardRef((t,r)=>{const s=qo(qc,t.__scopeSelect),[n,a]=j.useState();if(ms(()=>{a(new DocumentFragment)},[]),!s.open){const i=n;return i?td.createPortal(e.jsx(WL,{scope:t.__scopeSelect,children:e.jsx(wj.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(GL,{...t,ref:r})});HL.displayName=qc;var Va=10,[WL,zo]=km(qc),Qre="SelectContentImpl",Xre=Ao("SelectContent.RemoveScroll"),GL=j.forwardRef((t,r)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:y,...v}=t,f=qo(qc,s),[b,N]=j.useState(null),[w,C]=j.useState(null),P=$t(r,ke=>N(ke)),[S,A]=j.useState(null),[k,D]=j.useState(null),q=Sj(s),[z,I]=j.useState(!1),F=j.useRef(!1);j.useEffect(()=>{if(b)return bj(b)},[b]),pj();const W=j.useCallback(ke=>{const[Be,...Me]=q().map(we=>we.ref.current),[He]=Me.slice(-1),Xe=document.activeElement;for(const we of ke)if(we===Xe||(we==null||we.scrollIntoView({block:"nearest"}),we===Be&&w&&(w.scrollTop=0),we===He&&w&&(w.scrollTop=w.scrollHeight),we==null||we.focus(),document.activeElement!==Xe))return},[q,w]),X=j.useCallback(()=>W([S,b]),[W,S,b]);j.useEffect(()=>{z&&X()},[z,X]);const{onOpenChange:K,triggerPointerDownPosRef:Z}=f;j.useEffect(()=>{if(b){let ke={x:0,y:0};const Be=He=>{var Xe,we;ke={x:Math.abs(Math.round(He.pageX)-(((Xe=Z.current)==null?void 0:Xe.x)??0)),y:Math.abs(Math.round(He.pageY)-(((we=Z.current)==null?void 0:we.y)??0))}},Me=He=>{ke.x<=10&&ke.y<=10?He.preventDefault():b.contains(He.target)||K(!1),document.removeEventListener("pointermove",Be),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",Be),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Be),document.removeEventListener("pointerup",Me,{capture:!0})}}},[b,K,Z]),j.useEffect(()=>{const ke=()=>K(!1);return window.addEventListener("blur",ke),window.addEventListener("resize",ke),()=>{window.removeEventListener("blur",ke),window.removeEventListener("resize",ke)}},[K]);const[ue,Ne]=u8(ke=>{const Be=q().filter(Xe=>!Xe.disabled),Me=Be.find(Xe=>Xe.ref.current===document.activeElement),He=m8(Be,ke,Me);He&&setTimeout(()=>He.ref.current.focus())}),J=j.useCallback((ke,Be,Me)=>{const He=!F.current&&!Me;(f.value!==void 0&&f.value===Be||He)&&(A(ke),He&&(F.current=!0))},[f.value]),Re=j.useCallback(()=>b==null?void 0:b.focus(),[b]),Ee=j.useCallback((ke,Be,Me)=>{const He=!F.current&&!Me;(f.value!==void 0&&f.value===Be||He)&&D(ke)},[f.value]),ut=n==="popper"?a1:YL,ce=ut===a1?{side:o,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:g,sticky:x,hideWhenDetached:p,avoidCollisions:y}:{};return e.jsx(WL,{scope:s,content:b,viewport:w,onViewportChange:C,itemRefCallback:J,selectedItem:S,onItemLeave:Re,itemTextRefCallback:Ee,focusSelectedItem:X,selectedItemText:k,position:n,isPositioned:z,searchRef:ue,children:e.jsx(If,{as:Xre,allowPinchZoom:!0,children:e.jsx(Df,{asChild:!0,trapped:f.open,onMountAutoFocus:ke=>{ke.preventDefault()},onUnmountAutoFocus:We(a,ke=>{var Be;(Be=f.trigger)==null||Be.focus({preventScroll:!0}),ke.preventDefault()}),children:e.jsx(jm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:ke=>ke.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(ut,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:ke=>ke.preventDefault(),...v,...ce,onPlaced:()=>I(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:We(v.onKeyDown,ke=>{const Be=ke.ctrlKey||ke.altKey||ke.metaKey;if(ke.key==="Tab"&&ke.preventDefault(),!Be&&ke.key.length===1&&Ne(ke.key),["ArrowUp","ArrowDown","Home","End"].includes(ke.key)){let He=q().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(ke.key)&&(He=He.slice().reverse()),["ArrowUp","ArrowDown"].includes(ke.key)){const Xe=ke.target,we=He.indexOf(Xe);He=He.slice(we+1)}setTimeout(()=>W(He)),ke.preventDefault()}})})})})})})});GL.displayName=Qre;var Zre="SelectItemAlignedPosition",YL=j.forwardRef((t,r)=>{const{__scopeSelect:s,onPlaced:n,...a}=t,i=qo(qc,s),l=zo(qc,s),[o,c]=j.useState(null),[d,u]=j.useState(null),m=$t(r,P=>u(P)),h=Sj(s),g=j.useRef(!1),x=j.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:v,focusSelectedItem:f}=l,b=j.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&p&&y&&v){const P=i.trigger.getBoundingClientRect(),S=d.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),k=v.getBoundingClientRect();if(i.dir!=="rtl"){const Xe=k.left-S.left,we=A.left-Xe,Bt=P.left-we,jt=P.width+Bt,or=Math.max(jt,S.width),ir=window.innerWidth-Va,Nr=e1(we,[Va,Math.max(Va,ir-or)]);o.style.minWidth=jt+"px",o.style.left=Nr+"px"}else{const Xe=S.right-k.right,we=window.innerWidth-A.right-Xe,Bt=window.innerWidth-P.right-we,jt=P.width+Bt,or=Math.max(jt,S.width),ir=window.innerWidth-Va,Nr=e1(we,[Va,Math.max(Va,ir-or)]);o.style.minWidth=jt+"px",o.style.right=Nr+"px"}const D=h(),q=window.innerHeight-Va*2,z=p.scrollHeight,I=window.getComputedStyle(d),F=parseInt(I.borderTopWidth,10),W=parseInt(I.paddingTop,10),X=parseInt(I.borderBottomWidth,10),K=parseInt(I.paddingBottom,10),Z=F+W+z+K+X,ue=Math.min(y.offsetHeight*5,Z),Ne=window.getComputedStyle(p),J=parseInt(Ne.paddingTop,10),Re=parseInt(Ne.paddingBottom,10),Ee=P.top+P.height/2-Va,ut=q-Ee,ce=y.offsetHeight/2,ke=y.offsetTop+ce,Be=F+W+ke,Me=Z-Be;if(Be<=Ee){const Xe=D.length>0&&y===D[D.length-1].ref.current;o.style.bottom="0px";const we=d.clientHeight-p.offsetTop-p.offsetHeight,Bt=Math.max(ut,ce+(Xe?Re:0)+we+X),jt=Be+Bt;o.style.height=jt+"px"}else{const Xe=D.length>0&&y===D[0].ref.current;o.style.top="0px";const Bt=Math.max(Ee,F+p.offsetTop+(Xe?J:0)+ce)+Me;o.style.height=Bt+"px",p.scrollTop=Be-Ee+p.offsetTop}o.style.margin=`${Va}px 0`,o.style.minHeight=ue+"px",o.style.maxHeight=q+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[h,i.trigger,i.valueNode,o,d,p,y,v,i.dir,n]);ms(()=>b(),[b]);const[N,w]=j.useState();ms(()=>{d&&w(window.getComputedStyle(d).zIndex)},[d]);const C=j.useCallback(P=>{P&&x.current===!0&&(b(),f==null||f(),x.current=!1)},[b,f]);return e.jsx(ese,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:C,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(it.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});YL.displayName=Zre;var Jre="SelectPopperPosition",a1=j.forwardRef((t,r)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=Va,...i}=t,l=Cj(s);return e.jsx(FC,{...l,...i,ref:r,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});a1.displayName=Jre;var[ese,LC]=km(qc,{}),i1="SelectViewport",QL=j.forwardRef((t,r)=>{const{__scopeSelect:s,nonce:n,...a}=t,i=zo(i1,s),l=LC(i1,s),o=$t(r,i.onViewportChange),c=j.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(wj.Slot,{scope:s,children:e.jsx(it.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:We(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=l;if(h!=null&&h.current&&m){const g=Math.abs(c.current-u.scrollTop);if(g>0){const x=window.innerHeight-Va*2,p=parseFloat(m.style.minHeight),y=parseFloat(m.style.height),v=Math.max(p,y);if(v<x){const f=v+g,b=Math.min(x,f),N=f-b;m.style.height=b+"px",m.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});QL.displayName=i1;var XL="SelectGroup",[tse,rse]=km(XL),sse=j.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,a=da();return e.jsx(tse,{scope:s,id:a,children:e.jsx(it.div,{role:"group","aria-labelledby":a,...n,ref:r})})});sse.displayName=XL;var ZL="SelectLabel",JL=j.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,a=rse(ZL,s);return e.jsx(it.div,{id:a.id,...n,ref:r})});JL.displayName=ZL;var Nv="SelectItem",[nse,e8]=km(Nv),t8=j.forwardRef((t,r)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:i,...l}=t,o=qo(Nv,s),c=zo(Nv,s),d=o.value===n,[u,m]=j.useState(i??""),[h,g]=j.useState(!1),x=$t(r,f=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,f,n,a)}),p=da(),y=j.useRef("touch"),v=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(nse,{scope:s,value:n,disabled:a,textId:p,isSelected:d,onItemTextChange:j.useCallback(f=>{m(b=>b||((f==null?void 0:f.textContent)??"").trim())},[]),children:e.jsx(wj.ItemSlot,{scope:s,value:n,disabled:a,textValue:u,children:e.jsx(it.div,{role:"option","aria-labelledby":p,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:x,onFocus:We(l.onFocus,()=>g(!0)),onBlur:We(l.onBlur,()=>g(!1)),onClick:We(l.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:We(l.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:We(l.onPointerDown,f=>{y.current=f.pointerType}),onPointerMove:We(l.onPointerMove,f=>{var b;y.current=f.pointerType,a?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:We(l.onPointerLeave,f=>{var b;f.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:We(l.onKeyDown,f=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&f.key===" "||(qre.includes(f.key)&&v(),f.key===" "&&f.preventDefault())})})})})});t8.displayName=Nv;var Ph="SelectItemText",r8=j.forwardRef((t,r)=>{const{__scopeSelect:s,className:n,style:a,...i}=t,l=qo(Ph,s),o=zo(Ph,s),c=e8(Ph,s),d=Wre(Ph,s),[u,m]=j.useState(null),h=$t(r,v=>m(v),c.onItemTextChange,v=>{var f;return(f=o.itemTextRefCallback)==null?void 0:f.call(o,v,c.value,c.disabled)}),g=u==null?void 0:u.textContent,x=j.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=d;return ms(()=>(p(x),()=>y(x)),[p,y,x]),e.jsxs(e.Fragment,{children:[e.jsx(it.span,{id:c.textId,...i,ref:h}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?td.createPortal(i.children,l.valueNode):null]})});r8.displayName=Ph;var s8="SelectItemIndicator",n8=j.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t;return e8(s8,s).isSelected?e.jsx(it.span,{"aria-hidden":!0,...n,ref:r}):null});n8.displayName=s8;var l1="SelectScrollUpButton",a8=j.forwardRef((t,r)=>{const s=zo(l1,t.__scopeSelect),n=LC(l1,t.__scopeSelect),[a,i]=j.useState(!1),l=$t(r,n.onScrollButtonChange);return ms(()=>{if(s.viewport&&s.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=s.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),a?e.jsx(l8,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=s;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});a8.displayName=l1;var o1="SelectScrollDownButton",i8=j.forwardRef((t,r)=>{const s=zo(o1,t.__scopeSelect),n=LC(o1,t.__scopeSelect),[a,i]=j.useState(!1),l=$t(r,n.onScrollButtonChange);return ms(()=>{if(s.viewport&&s.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=s.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),a?e.jsx(l8,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=s;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});i8.displayName=o1;var l8=j.forwardRef((t,r)=>{const{__scopeSelect:s,onAutoScroll:n,...a}=t,i=zo("SelectScrollButton",s),l=j.useRef(null),o=Sj(s),c=j.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),ms(()=>{var u;const d=o().find(m=>m.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),e.jsx(it.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:We(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:We(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:We(a.onPointerLeave,()=>{c()})})}),ase="SelectSeparator",o8=j.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t;return e.jsx(it.div,{"aria-hidden":!0,...n,ref:r})});o8.displayName=ase;var c1="SelectArrow",ise=j.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,a=Cj(s),i=qo(c1,s),l=zo(c1,s);return i.open&&l.position==="popper"?e.jsx($C,{...a,...n,ref:r}):null});ise.displayName=c1;var lse="SelectBubbleInput",c8=j.forwardRef(({__scopeSelect:t,value:r,...s},n)=>{const a=j.useRef(null),i=$t(n,a),l=jj(r);return j.useEffect(()=>{const o=a.current;if(!o)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==r&&u){const m=new Event("change",{bubbles:!0});u.call(o,r),o.dispatchEvent(m)}},[l,r]),e.jsx(it.select,{...s,style:{...ZF,...s.style},ref:i,defaultValue:r})});c8.displayName=lse;function d8(t){return t===""||t===void 0}function u8(t){const r=ds(t),s=j.useRef(""),n=j.useRef(0),a=j.useCallback(l=>{const o=s.current+l;r(o),function c(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(o)},[r]),i=j.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,i]}function m8(t,r,s){const a=r.length>1&&Array.from(r).every(d=>d===r[0])?r[0]:r,i=s?t.indexOf(s):-1;let l=ose(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==s));const c=l.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function ose(t,r){return t.map((s,n)=>t[(r+n)%t.length])}var cse=LL,h8=VL,dse=qL,use=zL,mse=KL,p8=HL,hse=QL,f8=JL,x8=t8,pse=r8,fse=n8,g8=a8,v8=i8,y8=o8;const je=cse,be=dse,ge=j.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(h8,{ref:n,className:De("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,e.jsx(use,{asChild:!0,children:e.jsx(ij,{className:"h-4 w-4 opacity-50"})})]}));ge.displayName=h8.displayName;const j8=j.forwardRef(({className:t,...r},s)=>e.jsx(g8,{ref:s,className:De("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(eZ,{className:"h-4 w-4"})}));j8.displayName=g8.displayName;const b8=j.forwardRef(({className:t,...r},s)=>e.jsx(v8,{ref:s,className:De("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(ij,{className:"h-4 w-4"})}));b8.displayName=v8.displayName;const ve=j.forwardRef(({className:t,children:r,position:s="popper",...n},a)=>e.jsx(mse,{children:e.jsxs(p8,{ref:a,className:De("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[e.jsx(j8,{}),e.jsx(hse,{className:De("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(b8,{})]})}));ve.displayName=p8.displayName;const xse=j.forwardRef(({className:t,...r},s)=>e.jsx(f8,{ref:s,className:De("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));xse.displayName=f8.displayName;const T=j.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(x8,{ref:n,className:De("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(fse,{children:e.jsx(Ks,{className:"h-4 w-4"})})}),e.jsx(pse,{children:r})]}));T.displayName=x8.displayName;const gse=j.forwardRef(({className:t,...r},s)=>e.jsx(y8,{ref:s,className:De("-mx-1 my-1 h-px bg-muted",t),...r}));gse.displayName=y8.displayName;const O=j.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:De("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r}));O.displayName="Card";const G=j.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:De("flex flex-col space-y-1.5 p-6",t),...r}));G.displayName="CardHeader";const Y=j.forwardRef(({className:t,...r},s)=>e.jsx("h3",{ref:s,className:De("text-2xl font-semibold leading-none tracking-tight",t),...r}));Y.displayName="CardTitle";const he=j.forwardRef(({className:t,...r},s)=>e.jsx("p",{ref:s,className:De("text-sm text-muted-foreground",t),...r}));he.displayName="CardDescription";const E=j.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:De("p-6 pt-0",t),...r}));E.displayName="CardContent";const pr=j.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:De("flex items-center p-6 pt-0",t),...r}));pr.displayName="CardFooter";var vse="Separator",xT="horizontal",yse=["horizontal","vertical"],N8=j.forwardRef((t,r)=>{const{decorative:s,orientation:n=xT,...a}=t,i=jse(n)?n:xT,o=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(it.div,{"data-orientation":i,...o,...a,ref:r})});N8.displayName=vse;function jse(t){return yse.includes(t)}var w8=N8;const Tr=j.forwardRef(({className:t,orientation:r="horizontal",decorative:s=!0,...n},a)=>e.jsx(w8,{ref:a,decorative:s,orientation:r,className:De("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Tr.displayName=w8.displayName;var bse="Label",S8=j.forwardRef((t,r)=>e.jsx(it.label,{...t,ref:r,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));S8.displayName=bse;var C8=S8;const Nse=Nm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),re=j.forwardRef(({className:t,...r},s)=>e.jsx(C8,{ref:s,className:De(Nse(),t),...r}));re.displayName=C8.displayName;const Qt=cJ,P8=j.createContext({}),U=({...t})=>e.jsx(P8.Provider,{value:{name:t.name},children:e.jsx(hJ,{...t})}),Pj=()=>{const t=j.useContext(P8),r=j.useContext(k8),{getFieldState:s,formState:n}=cj(),a=s(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=r;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},k8=j.createContext({}),L=j.forwardRef(({className:t,...r},s)=>{const n=j.useId();return e.jsx(k8.Provider,{value:{id:n},children:e.jsx("div",{ref:s,className:De("space-y-2",t),...r})})});L.displayName="FormItem";const B=j.forwardRef(({className:t,...r},s)=>{const{error:n,formItemId:a}=Pj();return e.jsx(re,{ref:s,className:De(n&&"text-destructive",t),htmlFor:a,...r})});B.displayName="FormLabel";const V=j.forwardRef(({...t},r)=>{const{error:s,formItemId:n,formDescriptionId:a,formMessageId:i}=Pj();return e.jsx(WF,{ref:r,id:n,"aria-describedby":s?`${a} ${i}`:`${a}`,"aria-invalid":!!s,...t})});V.displayName="FormControl";const qe=j.forwardRef(({className:t,...r},s)=>{const{formDescriptionId:n}=Pj();return e.jsx("p",{ref:s,id:n,className:De("text-sm text-muted-foreground",t),...r})});qe.displayName="FormDescription";const H=j.forwardRef(({className:t,children:r,...s},n)=>{const{error:a,formMessageId:i}=Pj(),l=a?String(a==null?void 0:a.message):r;return l?e.jsx("p",{ref:n,id:i,className:De("text-sm font-medium text-destructive",t),...s,children:l}):null});H.displayName="FormMessage";const wse=Kt({name:R().min(1,"Product name is required"),description:R().min(10,"Description must be at least 10 characters"),categoryId:R().min(1,"Category is required"),subcategoryId:R().optional(),price:R().min(1,"Price is required").transform(t=>parseFloat(t)),discountedPrice:R().optional().transform(t=>t?parseFloat(t):void 0),specifications:R().min(5,"Specifications are required"),stockQuantity:R().min(1,"Stock quantity is required").transform(t=>parseInt(t)),unit:R().min(1,"Unit is required"),district:R().min(1,"District is required"),availableAreas:R().min(1,"Available areas are required"),imageUrl:R().optional()});function gT(){const{user:t}=dt(),r=hj(),{toast:s}=Ue(),n=Ml(),[a,i]=j.useState(""),l=Gt({resolver:Yt(wse),defaultValues:{name:"",description:"",categoryId:"",subcategoryId:"",specifications:"",unit:"piece",district:(t==null?void 0:t.district)||"",availableAreas:"",imageUrl:""}}),{data:o=[]}=fe({queryKey:["/api/admin/local-product-categories"]}),{data:c=[]}=fe({queryKey:["/api/admin/local-product-subcategories"]}),d=c.filter(h=>h.parentCategoryId===parseInt(a)),u=Se({mutationFn:async h=>(await ie("POST","/api/provider/local-products",h)).json(),onSuccess:()=>{s({title:"Success!",description:"Local product added successfully and submitted for review."}),l.reset(),i(""),n.invalidateQueries({queryKey:["/api/provider/local-products"]})},onError:h=>{s({title:"Error",description:h.message||"Failed to add product",variant:"destructive"})}}),m=h=>{u.mutate(h)};return j.useEffect(()=>{const h=l.watch("categoryId");i(h),h!==a&&l.setValue("subcategoryId","")},[l.watch("categoryId")]),!t||t.userType!=="service_provider"||!r.canAccessLocalProducts?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Access Denied"}),e.jsx(he,{children:"Only registered manufacturers can add local products"})]}),e.jsx(E,{children:e.jsx("p",{children:"If you are a manufacturer, please ensure you are logged in with the correct account."})})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(ft,{className:"h-8 w-8 text-primary"}),"Add Local Product"]}),e.jsx("p",{className:"text-gray-600",children:"Add your local products to reach customers across Tamil Nadu. Products will be reviewed before going live."})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Product Information"}),e.jsx(he,{children:"Provide detailed information about your local product. All fields marked with * are required."})]}),e.jsx(E,{children:e.jsx(Qt,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(m),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:l.control,name:"name",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Name *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Handwoven Cotton Saree",...h})}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"unit",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Unit *"}),e.jsxs(je,{onValueChange:h.onChange,value:h.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select unit"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"piece",children:"Piece"}),e.jsx(T,{value:"set",children:"Set"}),e.jsx(T,{value:"kg",children:"Kilogram"}),e.jsx(T,{value:"gram",children:"Gram"}),e.jsx(T,{value:"liter",children:"Liter"}),e.jsx(T,{value:"meter",children:"Meter"}),e.jsx(T,{value:"pair",children:"Pair"}),e.jsx(T,{value:"dozen",children:"Dozen"})]})]}),e.jsx(H,{})]})})]}),e.jsx(U,{control:l.control,name:"description",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description *"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your product, its unique features, and what makes it special...",className:"min-h-[100px]",...h})}),e.jsx(qe,{children:"Provide a detailed description to help customers understand your product better."}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"specifications",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Specifications *"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Material, dimensions, weight, color options, care instructions, etc...",className:"min-h-[80px]",...h})}),e.jsx(qe,{children:"Include technical details, materials, dimensions, and other specifications."}),e.jsx(H,{})]})}),e.jsx(Tr,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:l.control,name:"categoryId",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category *"}),e.jsxs(je,{onValueChange:h.onChange,value:h.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select category"})})}),e.jsx(ve,{children:o.map(g=>e.jsx(T,{value:g.id.toString(),children:g.name},g.id))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"subcategoryId",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Subcategory"}),e.jsxs(je,{onValueChange:h.onChange,value:h.value,disabled:!a||d.length===0,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select subcategory (optional)"})})}),e.jsx(ve,{children:d.map(g=>e.jsx(T,{value:g.id.toString(),children:g.name},g.id))})]}),e.jsx(qe,{children:a?d.length===0?"No subcategories available":"Optional: Choose a more specific subcategory":"Select a category first"}),e.jsx(H,{})]})})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(U,{control:l.control,name:"price",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Price () *"}),e.jsx(V,{children:e.jsxs("div",{className:"relative",children:[e.jsx(rv,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-10",...h})]})}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"discountedPrice",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Discounted Price ()"}),e.jsx(V,{children:e.jsxs("div",{className:"relative",children:[e.jsx(rv,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-10",...h})]})}),e.jsx(qe,{children:"Optional: Offer a special price"}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"stockQuantity",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Stock Quantity *"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",placeholder:"0",...h})}),e.jsx(qe,{children:"Available quantity"}),e.jsx(H,{})]})})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:l.control,name:"district",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"District *"}),e.jsx(V,{children:e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"e.g., Chennai",className:"pl-10",...h})]})}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"availableAreas",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Available Areas *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Chennai, Kanchipuram, Tiruvallur",...h})}),e.jsx(qe,{children:"Areas where this product can be delivered (comma-separated)"}),e.jsx(H,{})]})})]}),e.jsx(U,{control:l.control,name:"imageUrl",render:({field:h})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Image URL"}),e.jsx(V,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Ri,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"https://example.com/product-image.jpg",className:"pl-10",...h})]})}),e.jsx(qe,{children:"Optional: Provide a direct URL to your product image"}),e.jsx(H,{})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qw,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Review Process"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Your product will be reviewed by our admin team before it goes live. You'll receive a notification once the review is complete. This usually takes 1-2 business days."})]})]})}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(_,{type:"submit",disabled:u.isPending,className:"flex-1 md:flex-none",children:u.isPending?"Adding Product...":e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Add Local Product"]})}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>{l.reset(),i("")},children:"Clear Form"})]})]})})})]})]})}const Sse=Nm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ae({className:t,variant:r,...s}){return e.jsx("div",{className:De(Sse({variant:r}),t),...s})}var $0="rovingFocusGroup.onEntryFocus",Cse={bubbles:!1,cancelable:!0},Rf="RovingFocusGroup",[d1,A8,Pse]=Af(Rf),[kse,Am]=ws(Rf,[Pse]),[Ase,_se]=kse(Rf),_8=j.forwardRef((t,r)=>e.jsx(d1.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(d1.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Tse,{...t,ref:r})})}));_8.displayName=Rf;var Tse=j.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:a=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=t,h=j.useRef(null),g=$t(r,h),x=nd(i),[p,y]=Hn({prop:l,defaultProp:o??null,onChange:c,caller:Rf}),[v,f]=j.useState(!1),b=ds(d),N=A8(s),w=j.useRef(!1),[C,P]=j.useState(0);return j.useEffect(()=>{const S=h.current;if(S)return S.addEventListener($0,b),()=>S.removeEventListener($0,b)},[b]),e.jsx(Ase,{scope:s,orientation:n,dir:x,loop:a,currentTabStopId:p,onItemFocus:j.useCallback(S=>y(S),[y]),onItemShiftTab:j.useCallback(()=>f(!0),[]),onFocusableItemAdd:j.useCallback(()=>P(S=>S+1),[]),onFocusableItemRemove:j.useCallback(()=>P(S=>S-1),[]),children:e.jsx(it.div,{tabIndex:v||C===0?-1:0,"data-orientation":n,...m,ref:g,style:{outline:"none",...t.style},onMouseDown:We(t.onMouseDown,()=>{w.current=!0}),onFocus:We(t.onFocus,S=>{const A=!w.current;if(S.target===S.currentTarget&&A&&!v){const k=new CustomEvent($0,Cse);if(S.currentTarget.dispatchEvent(k),!k.defaultPrevented){const D=N().filter(W=>W.focusable),q=D.find(W=>W.active),z=D.find(W=>W.id===p),F=[q,z,...D].filter(Boolean).map(W=>W.ref.current);E8(F,u)}}w.current=!1}),onBlur:We(t.onBlur,()=>f(!1))})})}),T8="RovingFocusGroupItem",O8=j.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:a=!1,tabStopId:i,children:l,...o}=t,c=da(),d=i||c,u=_se(T8,s),m=u.currentTabStopId===d,h=A8(s),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:p}=u;return j.useEffect(()=>{if(n)return g(),()=>x()},[n,g,x]),e.jsx(d1.ItemSlot,{scope:s,id:d,focusable:n,active:a,children:e.jsx(it.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...o,ref:r,onMouseDown:We(t.onMouseDown,y=>{n?u.onItemFocus(d):y.preventDefault()}),onFocus:We(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:We(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=Dse(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let b=h().filter(N=>N.focusable).map(N=>N.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const N=b.indexOf(y.currentTarget);b=u.loop?Mse(b,N+1):b.slice(N+1)}setTimeout(()=>E8(b))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:p!=null}):l})})});O8.displayName=T8;var Ose={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ese(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Dse(t,r,s){const n=Ese(t.key,s);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Ose[n]}function E8(t,r=!1){const s=document.activeElement;for(const n of t)if(n===s||(n.focus({preventScroll:r}),document.activeElement!==s))return}function Mse(t,r){return t.map((s,n)=>t[(r+n)%t.length])}var BC=_8,VC=O8,kj="Tabs",[Ise,WFe]=ws(kj,[Am]),D8=Am(),[Rse,UC]=Ise(kj),M8=j.forwardRef((t,r)=>{const{__scopeTabs:s,value:n,onValueChange:a,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:c="automatic",...d}=t,u=nd(o),[m,h]=Hn({prop:n,onChange:a,defaultProp:i??"",caller:kj});return e.jsx(Rse,{scope:s,baseId:da(),value:m,onValueChange:h,orientation:l,dir:u,activationMode:c,children:e.jsx(it.div,{dir:u,"data-orientation":l,...d,ref:r})})});M8.displayName=kj;var I8="TabsList",R8=j.forwardRef((t,r)=>{const{__scopeTabs:s,loop:n=!0,...a}=t,i=UC(I8,s),l=D8(s);return e.jsx(BC,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:n,children:e.jsx(it.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:r})})});R8.displayName=I8;var F8="TabsTrigger",$8=j.forwardRef((t,r)=>{const{__scopeTabs:s,value:n,disabled:a=!1,...i}=t,l=UC(F8,s),o=D8(s),c=V8(l.baseId,n),d=U8(l.baseId,n),u=n===l.value;return e.jsx(VC,{asChild:!0,...o,focusable:!a,active:u,children:e.jsx(it.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:r,onMouseDown:We(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?l.onValueChange(n):m.preventDefault()}),onKeyDown:We(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&l.onValueChange(n)}),onFocus:We(t.onFocus,()=>{const m=l.activationMode!=="manual";!u&&!a&&m&&l.onValueChange(n)})})})});$8.displayName=F8;var L8="TabsContent",B8=j.forwardRef((t,r)=>{const{__scopeTabs:s,value:n,forceMount:a,children:i,...l}=t,o=UC(L8,s),c=V8(o.baseId,n),d=U8(o.baseId,n),u=n===o.value,m=j.useRef(u);return j.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Rs,{present:a||u,children:({present:h})=>e.jsx(it.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...l,ref:r,style:{...t.style,animationDuration:m.current?"0s":void 0},children:h&&i})})});B8.displayName=L8;function V8(t,r){return`${t}-trigger-${r}`}function U8(t,r){return`${t}-content-${r}`}var Fse=M8,q8=R8,z8=$8,K8=B8;const nr=Fse,sr=j.forwardRef(({className:t,...r},s)=>e.jsx(q8,{ref:s,className:De("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));sr.displayName=q8.displayName;const Ae=j.forwardRef(({className:t,...r},s)=>e.jsx(z8,{ref:s,className:De("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));Ae.displayName=z8.displayName;const Ve=j.forwardRef(({className:t,...r},s)=>e.jsx(K8,{ref:s,className:De("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));Ve.displayName=K8.displayName;function $se(){const{toast:t}=Ue(),{user:r}=dt(),s=hj(),[,n]=br(),[a,i]=j.useState("all"),{data:l,isLoading:o,isError:c,error:d,refetch:u}=fe({queryKey:["/api/local-products/my-products"],queryFn:async()=>{const p=await ie("GET","/api/local-products/my-products");if(!p.ok)throw new Error("Failed to fetch your local products");return await p.json()}}),m=Se({mutationFn:async p=>{await ie("DELETE",`/api/local-products/${p}`)},onSuccess:()=>{t({title:"Local product deleted",description:"Your local product has been deleted successfully."}),u()},onError:p=>{t({title:"Delete failed",description:p.message||"Failed to delete local product. Please try again.",variant:"destructive"})}}),h=(l==null?void 0:l.filter(p=>a==="all"?!0:a==="pending"?p.status==="pending":a==="approved"?p.status==="approved":a==="rejected"?p.status==="rejected":!0))||[],g=p=>{switch(p){case"approved":return e.jsxs(ae,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Approved"]});case"pending":return e.jsxs(ae,{className:"bg-yellow-100 text-yellow-800 border-yellow-200",children:[e.jsx(yt,{className:"w-3 h-3 mr-1"}),"Pending"]});case"rejected":return e.jsxs(ae,{className:"bg-red-100 text-red-800 border-red-200",children:[e.jsx(Fr,{className:"w-3 h-3 mr-1"}),"Rejected"]});default:return e.jsx(ae,{variant:"secondary",children:p})}},x=p=>{window.confirm("Are you sure you want to delete this local product?")&&m.mutate(p)};return!r||r.userType!=="service_provider"||!s.canAccessLocalProducts?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Access Denied"}),e.jsx(he,{children:"Only registered manufacturers can view their local products"})]}),e.jsx(E,{children:e.jsx("p",{children:"If you are a manufacturer, please log in to view your local products."})}),e.jsx(pr,{children:e.jsx(_,{onClick:()=>n("/auth"),children:"Go to Login"})})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Local Products"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your local products and track their approval status"})]}),e.jsxs(_,{onClick:()=>n("/provider/add-local-product"),children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add New Product"]})]}),e.jsx(nr,{defaultValue:"all",value:a,onValueChange:i,className:"mb-6",children:e.jsxs(sr,{className:"grid grid-cols-4 w-full md:w-auto",children:[e.jsxs(Ae,{value:"all",className:"flex items-center gap-2",children:["All Products",l&&e.jsx(ae,{variant:"secondary",children:l.length})]}),e.jsxs(Ae,{value:"pending",className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"}),"Pending",l&&e.jsx(ae,{variant:"secondary",children:l.filter(p=>p.status==="pending").length})]}),e.jsxs(Ae,{value:"approved",className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Approved",l&&e.jsx(ae,{variant:"secondary",children:l.filter(p=>p.status==="approved").length})]}),e.jsxs(Ae,{value:"rejected",className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Rejected",l&&e.jsx(ae,{variant:"secondary",children:l.filter(p=>p.status==="rejected").length})]})]})}),o?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):c?e.jsx(O,{children:e.jsxs(E,{className:"py-8 text-center",children:[e.jsx(di,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Error loading products"}),e.jsx("p",{className:"text-gray-600 mb-4",children:d instanceof Error?d.message:"Failed to load your local products"}),e.jsx(_,{onClick:()=>u(),children:"Try Again"})]})}):h.length===0?e.jsx(O,{children:e.jsxs(E,{className:"py-12 text-center",children:[e.jsx(ft,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:a==="all"?"No local products yet":`No ${a} products`}),e.jsx("p",{className:"text-gray-600 mb-6",children:a==="all"?"Start selling by adding your first local product":`You don't have any ${a} products at the moment`}),a==="all"&&e.jsxs(_,{onClick:()=>n("/provider/add-local-product"),children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),"Add Your First Product"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(p=>e.jsxs(O,{className:"overflow-hidden",children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:p.name||"Product"}),e.jsx(he,{children:p.description||"No description available"})]}),g(p.status)]})}),e.jsxs(E,{className:"pb-4",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 rounded-md flex items-center justify-center mb-4",children:p.imageUrl?e.jsx("img",{src:p.imageUrl,alt:p.name||"Product",className:"object-cover w-full h-full rounded-md"}):e.jsx(ft,{className:"h-16 w-16 text-gray-300"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),e.jsxs("p",{className:"font-medium",children:["",p.price,p.discountedPrice&&p.discountedPrice<p.price&&e.jsxs("span",{className:"ml-2 text-sm text-green-600",children:["(",p.discountedPrice," after discount)"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Stock"}),e.jsxs("p",{className:"font-medium",children:[p.stockQuantity||0," ",p.unit]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-3",children:[p.status==="pending"&&e.jsxs("p",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(di,{className:"h-3 w-3"}),"Awaiting admin approval"]}),e.jsxs("p",{children:["Category: ",p.category]}),e.jsxs("p",{children:["District: ",p.district]}),e.jsxs("p",{children:["Added on: ",p.createdAt?new Date(p.createdAt).toLocaleDateString():"Unknown date"]})]})]}),e.jsxs(pr,{className:"flex justify-between",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>n(`/provider/edit-local-product/${p.id}`),children:[e.jsx(Zr,{className:"mr-1 h-3 w-3"}),"Edit"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>x(p.id),disabled:m.isPending,children:[e.jsx(Ir,{className:"mr-1 h-3 w-3"}),"Delete"]})]})]},p.id))})]})}var Aj="Dialog",[H8,W8]=ws(Aj),[Lse,xi]=H8(Aj),G8=t=>{const{__scopeDialog:r,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:l=!0}=t,o=j.useRef(null),c=j.useRef(null),[d,u]=Hn({prop:n,defaultProp:a??!1,onChange:i,caller:Aj});return e.jsx(Lse,{scope:r,triggerRef:o,contentRef:c,contentId:da(),titleId:da(),descriptionId:da(),open:d,onOpenChange:u,onOpenToggle:j.useCallback(()=>u(m=>!m),[u]),modal:l,children:s})};G8.displayName=Aj;var Y8="DialogTrigger",Q8=j.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,a=xi(Y8,s),i=$t(r,a.triggerRef);return e.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":KC(a.open),...n,ref:i,onClick:We(t.onClick,a.onOpenToggle)})});Q8.displayName=Y8;var qC="DialogPortal",[Bse,X8]=H8(qC,{forceMount:void 0}),Z8=t=>{const{__scopeDialog:r,forceMount:s,children:n,container:a}=t,i=xi(qC,r);return e.jsx(Bse,{scope:r,forceMount:s,children:j.Children.map(n,l=>e.jsx(Rs,{present:s||i.open,children:e.jsx(bm,{asChild:!0,container:a,children:l})}))})};Z8.displayName=qC;var wv="DialogOverlay",J8=j.forwardRef((t,r)=>{const s=X8(wv,t.__scopeDialog),{forceMount:n=s.forceMount,...a}=t,i=xi(wv,t.__scopeDialog);return i.modal?e.jsx(Rs,{present:n||i.open,children:e.jsx(Use,{...a,ref:r})}):null});J8.displayName=wv;var Vse=Ao("DialogOverlay.RemoveScroll"),Use=j.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,a=xi(wv,s);return e.jsx(If,{as:Vse,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(it.div,{"data-state":KC(a.open),...n,ref:r,style:{pointerEvents:"auto",...n.style}})})}),zc="DialogContent",eB=j.forwardRef((t,r)=>{const s=X8(zc,t.__scopeDialog),{forceMount:n=s.forceMount,...a}=t,i=xi(zc,t.__scopeDialog);return e.jsx(Rs,{present:n||i.open,children:i.modal?e.jsx(qse,{...a,ref:r}):e.jsx(zse,{...a,ref:r})})});eB.displayName=zc;var qse=j.forwardRef((t,r)=>{const s=xi(zc,t.__scopeDialog),n=j.useRef(null),a=$t(r,s.contentRef,n);return j.useEffect(()=>{const i=n.current;if(i)return bj(i)},[]),e.jsx(tB,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),(l=s.triggerRef.current)==null||l.focus()}),onPointerDownOutside:We(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,o=l.button===0&&l.ctrlKey===!0;(l.button===2||o)&&i.preventDefault()}),onFocusOutside:We(t.onFocusOutside,i=>i.preventDefault())})}),zse=j.forwardRef((t,r)=>{const s=xi(zc,t.__scopeDialog),n=j.useRef(!1),a=j.useRef(!1);return e.jsx(tB,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(o=s.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=s.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),tB=j.forwardRef((t,r)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=t,o=xi(zc,s),c=j.useRef(null),d=$t(r,c);return pj(),e.jsxs(e.Fragment,{children:[e.jsx(Df,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(jm,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":KC(o.open),...l,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Hse,{titleId:o.titleId}),e.jsx(Gse,{contentRef:c,descriptionId:o.descriptionId})]})]})}),zC="DialogTitle",rB=j.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,a=xi(zC,s);return e.jsx(it.h2,{id:a.titleId,...n,ref:r})});rB.displayName=zC;var sB="DialogDescription",nB=j.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,a=xi(sB,s);return e.jsx(it.p,{id:a.descriptionId,...n,ref:r})});nB.displayName=sB;var aB="DialogClose",iB=j.forwardRef((t,r)=>{const{__scopeDialog:s,...n}=t,a=xi(aB,s);return e.jsx(it.button,{type:"button",...n,ref:r,onClick:We(t.onClick,()=>a.onOpenChange(!1))})});iB.displayName=aB;function KC(t){return t?"open":"closed"}var lB="DialogTitleWarning",[Kse,oB]=ZQ(lB,{contentName:zc,titleName:zC,docsSlug:"dialog"}),Hse=({titleId:t})=>{const r=oB(lB),s=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return j.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},Wse="DialogDescriptionWarning",Gse=({contentRef:t,descriptionId:r})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oB(Wse).contentName}}.`;return j.useEffect(()=>{var i;const a=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(n))},[n,t,r]),null},HC=G8,WC=Q8,GC=Z8,Ff=J8,$f=eB,Lf=rB,Bf=nB,Vf=iB;const Tt=HC,hs=WC,Yse=GC,vT=Vf,cB=j.forwardRef(({className:t,...r},s)=>e.jsx(Ff,{ref:s,className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));cB.displayName=Ff.displayName;const Ct=j.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(Yse,{children:[e.jsx(cB,{}),e.jsxs($f,{ref:n,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[r,e.jsxs(Vf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ct.displayName=$f.displayName;const Pt=({className:t,...r})=>e.jsx("div",{className:De("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});Pt.displayName="DialogHeader";const zs=({className:t,...r})=>e.jsx("div",{className:De("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});zs.displayName="DialogFooter";const kt=j.forwardRef(({className:t,...r},s)=>e.jsx(Lf,{ref:s,className:De("text-lg font-semibold leading-none tracking-tight",t),...r}));kt.displayName=Lf.displayName;const Xt=j.forwardRef(({className:t,...r},s)=>e.jsx(Bf,{ref:s,className:De("text-sm text-muted-foreground",t),...r}));Xt.displayName=Bf.displayName;function Qse(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(!1),[a,i]=j.useState("category"),{data:l=[]}=fe({queryKey:["/api/local-product-categories"]}),{data:o=[],isLoading:c}=fe({queryKey:["/api/provider/category-requests"]}),d=Se({mutationFn:async m=>await(await ie("POST","/api/provider/category-requests",m)).json(),onSuccess:()=>{r({title:"Request Submitted",description:"Your category request has been submitted for admin review."}),pe.invalidateQueries({queryKey:["/api/provider/category-requests"]}),n(!1)},onError:m=>{r({title:"Request Failed",description:m.message,variant:"destructive"})}}),u=m=>{const h={categoryName:m.get("categoryName"),subcategoryName:a==="subcategory"?m.get("subcategoryName"):void 0,parentCategoryId:a==="subcategory"?parseInt(m.get("parentCategoryId")):void 0,description:m.get("description"),justification:m.get("justification")};d.mutate(h)};return!t||t.userType!=="service_provider"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Only service providers can access this page."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Request New Category"}),e.jsx("p",{className:"text-gray-600",children:"Can't find the right category for your products? Request a new category or subcategory."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"w-5 h-5"}),"New Category Request"]})}),e.jsxs(E,{children:[e.jsxs(Tt,{open:s,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{className:"w-full",children:[e.jsx(P$,{className:"w-4 h-4 mr-2"}),"Submit Category Request"]})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Request New Category"})}),e.jsxs("form",{onSubmit:m=>{m.preventDefault(),u(new FormData(m.currentTarget))},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{children:"Request Type"}),e.jsxs(je,{value:a,onValueChange:m=>i(m),children:[e.jsx(ge,{children:e.jsx(be,{})}),e.jsxs(ve,{children:[e.jsx(T,{value:"category",children:"New Category"}),e.jsx(T,{value:"subcategory",children:"New Subcategory"})]})]})]}),a==="subcategory"&&e.jsxs("div",{children:[e.jsx(re,{htmlFor:"parentCategoryId",children:"Parent Category"}),e.jsxs(je,{name:"parentCategoryId",required:!0,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select parent category"})}),e.jsx(ve,{children:l.filter(m=>m.isActive).map(m=>e.jsxs(T,{value:m.id.toString(),children:[m.icon," ",m.name]},m.id))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"categoryName",children:a==="category"?"Category Name":"Category Name (if new)"}),e.jsx($,{id:"categoryName",name:"categoryName",required:a==="category",placeholder:a==="subcategory"?"Leave empty if using existing category":""})]}),a==="subcategory"&&e.jsxs("div",{children:[e.jsx(re,{htmlFor:"subcategoryName",children:"Subcategory Name"}),e.jsx($,{id:"subcategoryName",name:"subcategoryName",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",name:"description",placeholder:"Describe what products would fall under this category",rows:3})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"justification",children:"Business Justification"}),e.jsx(at,{id:"justification",name:"justification",placeholder:"Explain why this category is needed for your business",rows:3,required:!0})]}),e.jsx(_,{type:"submit",disabled:d.isPending,className:"w-full",children:d.isPending?"Submitting...":"Submit Request"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Guidelines for Category Requests"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Be specific about the products that would fall under this category"}),e.jsx("li",{children:" Explain how this helps your business and customers"}),e.jsx("li",{children:" Check if a similar category already exists"}),e.jsx("li",{children:" Admin review typically takes 1-3 business days"})]})]})]})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"w-5 h-5"}),"Existing Categories"]})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:l.map(m=>e.jsxs("div",{className:"p-2 border rounded text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m.icon&&e.jsx("span",{children:m.icon}),e.jsx("span",{className:"font-medium",children:m.name})]}),m.description&&e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:m.description})]},m.id))})})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Your Requests (",o.length,")"]}),c?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:3}).map((m,h)=>e.jsx(O,{className:"animate-pulse",children:e.jsxs(E,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]})},h))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(m=>e.jsx(O,{children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:m.categoryName}),m.subcategoryName&&e.jsxs("p",{className:"text-gray-600 text-sm",children:["Subcategory: ",m.subcategoryName]})]}),e.jsxs(ae,{variant:m.status==="approved"?"default":m.status==="rejected"?"destructive":"secondary",className:"flex items-center gap-1",children:[m.status==="approved"&&e.jsx(Mt,{className:"w-3 h-3"}),m.status==="rejected"&&e.jsx(Fr,{className:"w-3 h-3"}),m.status==="pending"&&e.jsx(yt,{className:"w-3 h-3"}),m.status]})]}),m.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:m.description}),m.adminResponse&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[e.jsx(Tu,{className:"w-3 h-3"}),"Admin Response:"]}),e.jsx("p",{className:"text-sm text-gray-600",children:m.adminResponse})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Requested: ",new Date(m.createdAt).toLocaleDateString(),m.reviewedAt&&e.jsxs("span",{children:["  Reviewed: ",new Date(m.reviewedAt).toLocaleDateString()]})]})]})},m.id))}),o.length===0&&!c&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ft,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No requests yet"}),e.jsx("p",{className:"text-gray-500",children:"Your category requests will appear here once submitted"})]})]})]})}var _j="Checkbox",[Xse,GFe]=ws(_j),[Zse,YC]=Xse(_j);function Jse(t){const{__scopeCheckbox:r,checked:s,children:n,defaultChecked:a,disabled:i,form:l,name:o,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:m}=t,[h,g]=Hn({prop:s,defaultProp:a??!1,onChange:c,caller:_j}),[x,p]=j.useState(null),[y,v]=j.useState(null),f=j.useRef(!1),b=x?!!l||!!x.closest("form"):!0,N={checked:h,disabled:i,setChecked:g,control:x,setControl:p,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:f,required:d,defaultChecked:So(a)?!1:a,isFormControl:b,bubbleInput:y,setBubbleInput:v};return e.jsx(Zse,{scope:r,...N,children:ene(m)?m(N):n})}var dB="CheckboxTrigger",uB=j.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:s,...n},a)=>{const{control:i,value:l,disabled:o,checked:c,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:g,bubbleInput:x}=YC(dB,t),p=$t(a,u),y=j.useRef(c);return j.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const f=()=>m(y.current);return v.addEventListener("reset",f),()=>v.removeEventListener("reset",f)}},[i,m]),e.jsx(it.button,{type:"button",role:"checkbox","aria-checked":So(c)?"mixed":c,"aria-required":d,"data-state":xB(c),"data-disabled":o?"":void 0,disabled:o,value:l,...n,ref:p,onKeyDown:We(r,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:We(s,v=>{m(f=>So(f)?!0:!f),x&&g&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});uB.displayName=dB;var QC=j.forwardRef((t,r)=>{const{__scopeCheckbox:s,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=t;return e.jsx(Jse,{__scopeCheckbox:s,checked:a,defaultChecked:i,disabled:o,required:l,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(uB,{...m,ref:r,__scopeCheckbox:s}),h&&e.jsx(fB,{__scopeCheckbox:s})]})})});QC.displayName=_j;var mB="CheckboxIndicator",hB=j.forwardRef((t,r)=>{const{__scopeCheckbox:s,forceMount:n,...a}=t,i=YC(mB,s);return e.jsx(Rs,{present:n||So(i.checked)||i.checked===!0,children:e.jsx(it.span,{"data-state":xB(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...t.style}})})});hB.displayName=mB;var pB="CheckboxBubbleInput",fB=j.forwardRef(({__scopeCheckbox:t,...r},s)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:l,required:o,disabled:c,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:g}=YC(pB,t),x=$t(s,g),p=jj(i),y=vj(n);j.useEffect(()=>{const f=h;if(!f)return;const b=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(b,"checked").set,C=!a.current;if(p!==i&&w){const P=new Event("click",{bubbles:C});f.indeterminate=So(i),w.call(f,So(i)?!1:i),f.dispatchEvent(P)}},[h,p,i,a]);const v=j.useRef(So(i)?!1:i);return e.jsx(it.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??v.current,required:o,disabled:c,name:d,value:u,form:m,...r,tabIndex:-1,ref:x,style:{...r.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});fB.displayName=pB;function ene(t){return typeof t=="function"}function So(t){return t==="indeterminate"}function xB(t){return So(t)?"indeterminate":t?"checked":"unchecked"}const Pn=j.forwardRef(({className:t,...r},s)=>e.jsx(QC,{ref:s,className:De("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(hB,{className:De("flex items-center justify-center text-current"),children:e.jsx(Ks,{className:"h-4 w-4"})})}));Pn.displayName=QC.displayName;const Le=Symbol.for("drizzle:entityKind");function Xs(t,r){if(!t||typeof t!="object")return!1;if(t instanceof r)return!0;if(!Object.prototype.hasOwnProperty.call(r,Le))throw new Error(`Class "${r.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(t).constructor;if(s)for(;s;){if(Le in s&&s[Le]===r[Le])return!0;s=Object.getPrototypeOf(s)}return!1}var NM;NM=Le;class Fu{constructor(r,s){le(this,"name");le(this,"keyAsName");le(this,"primary");le(this,"notNull");le(this,"default");le(this,"defaultFn");le(this,"onUpdateFn");le(this,"hasDefault");le(this,"isUnique");le(this,"uniqueName");le(this,"uniqueType");le(this,"dataType");le(this,"columnType");le(this,"enumValues");le(this,"generated");le(this,"generatedIdentity");le(this,"config");this.table=r,this.config=s,this.name=s.name,this.keyAsName=s.keyAsName,this.notNull=s.notNull,this.default=s.default,this.defaultFn=s.defaultFn,this.onUpdateFn=s.onUpdateFn,this.hasDefault=s.hasDefault,this.primary=s.primaryKey,this.isUnique=s.isUnique,this.uniqueName=s.uniqueName,this.uniqueType=s.uniqueType,this.dataType=s.dataType,this.columnType=s.columnType,this.generated=s.generated,this.generatedIdentity=s.generatedIdentity}mapFromDriverValue(r){return r}mapToDriverValue(r){return r}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}le(Fu,NM,"Column");var wM;wM=Le;class gB{constructor(r,s,n){le(this,"config");le(this,"$default",this.$defaultFn);le(this,"$onUpdate",this.$onUpdateFn);this.config={name:r,keyAsName:r==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:s,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(r){return this.config.default=r,this.config.hasDefault=!0,this}$defaultFn(r){return this.config.defaultFn=r,this.config.hasDefault=!0,this}$onUpdateFn(r){return this.config.onUpdateFn=r,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(r){this.config.name===""&&(this.config.name=r)}}le(gB,wM,"ColumnBuilder");const nu=Symbol.for("drizzle:Name");var SM;SM=Le;class vB{constructor(r,s){le(this,"reference");le(this,"_onUpdate","no action");le(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:i}=r();return{name:n,columns:a,foreignTable:i[0].table,foreignColumns:i}},s&&(this._onUpdate=s.onUpdate,this._onDelete=s.onDelete)}onUpdate(r){return this._onUpdate=r===void 0?"no action":r,this}onDelete(r){return this._onDelete=r===void 0?"no action":r,this}build(r){return new yB(r,this)}}le(vB,SM,"PgForeignKeyBuilder");var CM;CM=Le;class yB{constructor(r,s){le(this,"reference");le(this,"onUpdate");le(this,"onDelete");this.table=r,this.reference=s.reference,this.onUpdate=s._onUpdate,this.onDelete=s._onDelete}getName(){const{name:r,columns:s,foreignColumns:n}=this.reference(),a=s.map(o=>o.name),i=n.map(o=>o.name),l=[this.table[nu],...a,n[0].table[nu],...i];return r??`${l.join("_")}_fk`}}le(yB,CM,"PgForeignKey");function tne(t,...r){return t(...r)}function jB(t){return new wB(t)}function bB(t,r){return`${t[nu]}_${r.join("_")}_unique`}var PM;PM=Le;class NB{constructor(r,s){le(this,"columns");le(this,"nullsNotDistinctConfig",!1);this.name=s,this.columns=r}nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(r){return new SB(r,this.columns,this.nullsNotDistinctConfig,this.name)}}le(NB,PM,"PgUniqueConstraintBuilder");var kM;kM=Le;class wB{constructor(r){le(this,"name");this.name=r}on(...r){return new NB(r,this.name)}}le(wB,kM,"PgUniqueOnConstraintBuilder");var AM;AM=Le;class SB{constructor(r,s,n,a){le(this,"columns");le(this,"name");le(this,"nullsNotDistinct",!1);this.table=r,this.columns=s,this.name=a??bB(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=n}getName(){return this.name}}le(SB,AM,"PgUniqueConstraint");function yT(t,r,s){for(let n=r;n<t.length;n++){const a=t[n];if(a==="\\"){n++;continue}if(a==='"')return[t.slice(r,n).replace(/\\/g,""),n+1];if(!s&&(a===","||a==="}"))return[t.slice(r,n).replace(/\\/g,""),n]}return[t.slice(r).replace(/\\/g,""),t.length]}function CB(t,r=0){const s=[];let n=r,a=!1;for(;n<t.length;){const i=t[n];if(i===","){(a||n===r)&&s.push(""),a=!0,n++;continue}if(a=!1,i==="\\"){n+=2;continue}if(i==='"'){const[c,d]=yT(t,n+1,!0);s.push(c),n=d;continue}if(i==="}")return[s,n+1];if(i==="{"){const[c,d]=CB(t,n+1);s.push(c),n=d;continue}const[l,o]=yT(t,n,!1);s.push(l),n=o}return[s,n]}function rne(t){const[r]=CB(t,1);return r}function PB(t){return`{${t.map(r=>Array.isArray(r)?PB(r):typeof r=="string"?`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${r}`).join(",")}}`}var _M,TM;class ur extends(TM=gB,_M=Le,TM){constructor(){super(...arguments);le(this,"foreignKeyConfigs",[])}array(s){return new AB(this.config.name,this,s)}references(s,n={}){return this.foreignKeyConfigs.push({ref:s,actions:n}),this}unique(s,n){return this.config.isUnique=!0,this.config.uniqueName=s,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(s){return this.config.generated={as:s,type:"always",mode:"stored"},this}buildForeignKeys(s,n){return this.foreignKeyConfigs.map(({ref:a,actions:i})=>tne((l,o)=>{const c=new vB(()=>{const d=l();return{columns:[s],foreignColumns:[d]}});return o.onUpdate&&c.onUpdate(o.onUpdate),o.onDelete&&c.onDelete(o.onDelete),c.build(n)},a,i))}buildExtraConfigColumn(s){return new kB(s,this.config)}}le(ur,_M,"PgColumnBuilder");var OM,EM;class Ht extends(EM=Fu,OM=Le,EM){constructor(r,s){s.uniqueName||(s.uniqueName=bB(r,[s.name])),super(r,s),this.table=r}}le(Ht,OM,"PgColumn");var DM,MM;class kB extends(MM=Ht,DM=Le,MM){constructor(){super(...arguments);le(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});le(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(s){return this.indexConfig.opClass=s,this}}le(kB,DM,"ExtraConfigColumn");var IM,RM;class AB extends(RM=ur,IM=Le,RM){constructor(r,s,n){super(r,"array","PgArray"),this.config.baseBuilder=s,this.config.size=n}build(r){const s=this.config.baseBuilder.build(r);return new u1(r,this.config,s)}}le(AB,IM,"PgArrayBuilder");var FM,$M;const By=class By extends($M=Ht,FM=Le,$M){constructor(s,n,a,i){super(s,n);le(this,"size");this.baseColumn=a,this.range=i,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(s){return typeof s=="string"&&(s=rne(s)),s.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(s,n=!1){const a=s.map(i=>i===null?null:Xs(this.baseColumn,By)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return n?a:PB(a)}};le(By,FM,"PgArray");let u1=By;const jT=Symbol.for("drizzle:isPgEnum");function sne(t){return!!t&&typeof t=="function"&&jT in t&&t[jT]===!0}var LM;LM=Le;class XC{constructor(r,s,n,a=!1){this._={brand:"Subquery",sql:r,selectedFields:s,alias:n,isWith:a}}}le(XC,LM,"Subquery");const nne={startActiveSpan(t,r){return r()}},au=Symbol.for("drizzle:ViewBaseConfig"),L0=Symbol.for("drizzle:Schema"),bT=Symbol.for("drizzle:Columns"),NT=Symbol.for("drizzle:ExtraConfigColumns"),B0=Symbol.for("drizzle:OriginalName"),V0=Symbol.for("drizzle:BaseName"),Sv=Symbol.for("drizzle:IsAlias"),wT=Symbol.for("drizzle:ExtraConfigBuilder"),_B=Symbol.for("drizzle:IsDrizzleTable");var BM,VM,UM,qM,zM,KM,HM,WM,GM,YM,tg;let ra=(YM=Le,GM=nu,WM=B0,HM=L0,KM=bT,zM=NT,qM=V0,UM=Sv,VM=_B,BM=wT,tg=class{constructor(r,s,n){le(this,GM);le(this,WM);le(this,HM);le(this,KM);le(this,zM);le(this,qM);le(this,UM,!1);le(this,VM,!0);le(this,BM);this[nu]=this[B0]=r,this[L0]=s,this[V0]=n}},le(tg,YM,"Table"),le(tg,"Symbol",{Name:nu,Schema:L0,OriginalName:B0,Columns:bT,ExtraConfigColumns:NT,BaseName:V0,IsAlias:Sv,ExtraConfigBuilder:wT}),tg);function TB(t){return typeof t=="object"&&t!==null&&_B in t}function ane(t){return t!=null&&typeof t.getSQL=="function"}function ine(t){var s;const r={sql:"",params:[]};for(const n of t)r.sql+=n.sql,r.params.push(...n.params),(s=n.typings)!=null&&s.length&&(r.typings||(r.typings=[]),r.typings.push(...n.typings));return r}var QM;QM=Le;class Sa{constructor(r){le(this,"value");this.value=Array.isArray(r)?r:[r]}getSQL(){return new Ds([this])}}le(Sa,QM,"StringChunk");var XM;XM=Le;const ic=class ic{constructor(r){le(this,"decoder",OB);le(this,"shouldInlineParams",!1);this.queryChunks=r}append(r){return this.queryChunks.push(...r.queryChunks),this}toQuery(r){return nne.startActiveSpan("drizzle.buildSQL",s=>{const n=this.buildQueryFromSourceParams(this.queryChunks,r);return s==null||s.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(r,s){const n=Object.assign({},s,{inlineParams:s.inlineParams||this.shouldInlineParams,paramStartIndex:s.paramStartIndex||{value:0}}),{casing:a,escapeName:i,escapeParam:l,prepareTyping:o,inlineParams:c,paramStartIndex:d}=n;return ine(r.map(u=>{var m;if(Xs(u,Sa))return{sql:u.value.join(""),params:[]};if(Xs(u,Cv))return{sql:i(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const h=[new Sa("(")];for(const[g,x]of u.entries())h.push(x),g<u.length-1&&h.push(new Sa(", "));return h.push(new Sa(")")),this.buildQueryFromSourceParams(h,n)}if(Xs(u,ic))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:c||u.shouldInlineParams});if(Xs(u,ra)){const h=u[ra.Symbol.Schema],g=u[ra.Symbol.Name];return{sql:h===void 0||u[Sv]?i(g):i(h)+"."+i(g),params:[]}}if(Xs(u,Fu)){const h=a.getColumnCasing(u);if(s.invokeSource==="indexes")return{sql:i(h),params:[]};const g=u.table[ra.Symbol.Schema];return{sql:u.table[Sv]||g===void 0?i(u.table[ra.Symbol.Name])+"."+i(h):i(g)+"."+i(u.table[ra.Symbol.Name])+"."+i(h),params:[]}}if(Xs(u,MB)){const h=u[au].schema,g=u[au].name;return{sql:h===void 0||u[au].isAlias?i(g):i(h)+"."+i(g),params:[]}}if(Xs(u,ZC)){if(Xs(u.value,kv))return{sql:l(d.value++,u),params:[u],typings:["none"]};const h=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(Xs(h,ic))return this.buildQueryFromSourceParams([h],n);if(c)return{sql:this.mapInlineParam(h,n),params:[]};let g=["none"];return o&&(g=[o(u.encoder)]),{sql:l(d.value++,h),params:[h],typings:g}}return Xs(u,kv)?{sql:l(d.value++,u),params:[u],typings:["none"]}:Xs(u,ic.Aliased)&&u.fieldAlias!==void 0?{sql:i(u.fieldAlias),params:[]}:Xs(u,XC)?u._.isWith?{sql:i(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Sa("("),u._.sql,new Sa(") "),new Cv(u._.alias)],n):sne(u)?u.schema?{sql:i(u.schema)+"."+i(u.enumName),params:[]}:{sql:i(u.enumName),params:[]}:ane(u)?(m=u.shouldOmitSQLParens)!=null&&m.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new Sa("("),u.getSQL(),new Sa(")")],n):c?{sql:this.mapInlineParam(u,n),params:[]}:{sql:l(d.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(r,{escapeString:s}){if(r===null)return"null";if(typeof r=="number"||typeof r=="boolean")return r.toString();if(typeof r=="string")return s(r);if(typeof r=="object"){const n=r.toString();return s(n==="[object Object]"?JSON.stringify(r):n)}throw new Error("Unexpected param value: "+r)}getSQL(){return this}as(r){return r===void 0?this:new ic.Aliased(this,r)}mapWith(r){return this.decoder=typeof r=="function"?{mapFromDriverValue:r}:r,this}inlineParams(){return this.shouldInlineParams=!0,this}if(r){return r?this:void 0}};le(ic,XM,"SQL");let Ds=ic;var ZM;ZM=Le;class Cv{constructor(r){le(this,"brand");this.value=r}getSQL(){return new Ds([this])}}le(Cv,ZM,"Name");const OB={mapFromDriverValue:t=>t},EB={mapToDriverValue:t=>t};({...OB,...EB});var JM;JM=Le;class ZC{constructor(r,s=EB){le(this,"brand");this.value=r,this.encoder=s}getSQL(){return new Ds([this])}}le(ZC,JM,"Param");function Pv(t,...r){const s=[];(r.length>0||t.length>0&&t[0]!=="")&&s.push(new Sa(t[0]));for(const[n,a]of r.entries())s.push(a,new Sa(t[n+1]));return new Ds(s)}(t=>{function r(){return new Ds([])}t.empty=r;function s(c){return new Ds(c)}t.fromList=s;function n(c){return new Ds([new Sa(c)])}t.raw=n;function a(c,d){const u=[];for(const[m,h]of c.entries())m>0&&d!==void 0&&u.push(d),u.push(h);return new Ds(u)}t.join=a;function i(c){return new Cv(c)}t.identifier=i;function l(c){return new kv(c)}t.placeholder=l;function o(c,d){return new ZC(c,d)}t.param=o})(Pv||(Pv={}));(t=>{var s;s=Le;const n=class n{constructor(i,l){le(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};le(n,s,"SQL.Aliased");let r=n;t.Aliased=r})(Ds||(Ds={}));var eI;eI=Le;class kv{constructor(r){this.name=r}getSQL(){return new Ds([this])}}le(kv,eI,"Placeholder");const DB=Symbol.for("drizzle:IsDrizzleView");var tI,rI,sI;sI=Le,rI=au,tI=DB;class MB{constructor({name:r,schema:s,selectedFields:n,query:a}){le(this,rI);le(this,tI,!0);this[au]={name:r,originalName:r,schema:s,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new Ds([this])}}le(MB,sI,"View");function lne(t){return typeof t=="object"&&t!==null&&DB in t}Fu.prototype.getSQL=function(){return new Ds([this])};ra.prototype.getSQL=function(){return new Ds([this])};XC.prototype.getSQL=function(){return new Ds([this])};function one(t){return t[ra.Symbol.Columns]}function cne(t){return t[au].selectedFields}function Hs(t,r){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:r}}var nI,aI;class Uf extends(aI=ur,nI=Le,aI){generatedAlwaysAsIdentity(r){if(r){const{name:s,...n}=r;this.config.generatedIdentity={type:"always",sequenceName:s,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(r){if(r){const{name:s,...n}=r;this.config.generatedIdentity={type:"byDefault",sequenceName:s,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}le(Uf,nI,"PgIntColumnBaseBuilder");var iI,lI;class IB extends(lI=Uf,iI=Le,lI){constructor(r){super(r,"number","PgBigInt53")}build(r){return new RB(r,this.config)}}le(IB,iI,"PgBigInt53Builder");var oI,cI;class RB extends(cI=Ht,oI=Le,cI){getSQLType(){return"bigint"}mapFromDriverValue(r){return typeof r=="number"?r:Number(r)}}le(RB,oI,"PgBigInt53");var dI,uI;class FB extends(uI=Uf,dI=Le,uI){constructor(r){super(r,"bigint","PgBigInt64")}build(r){return new $B(r,this.config)}}le(FB,dI,"PgBigInt64Builder");var mI,hI;class $B extends(hI=Ht,mI=Le,hI){getSQLType(){return"bigint"}mapFromDriverValue(r){return BigInt(r)}}le($B,mI,"PgBigInt64");function dne(t,r){const{name:s,config:n}=Hs(t,r);return n.mode==="number"?new IB(s):new FB(s)}var pI,fI;class LB extends(fI=ur,pI=Le,fI){constructor(r){super(r,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(r){return new BB(r,this.config)}}le(LB,pI,"PgBigSerial53Builder");var xI,gI;class BB extends(gI=Ht,xI=Le,gI){getSQLType(){return"bigserial"}mapFromDriverValue(r){return typeof r=="number"?r:Number(r)}}le(BB,xI,"PgBigSerial53");var vI,yI;class VB extends(yI=ur,vI=Le,yI){constructor(r){super(r,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(r){return new UB(r,this.config)}}le(VB,vI,"PgBigSerial64Builder");var jI,bI;class UB extends(bI=Ht,jI=Le,bI){getSQLType(){return"bigserial"}mapFromDriverValue(r){return BigInt(r)}}le(UB,jI,"PgBigSerial64");function une(t,r){const{name:s,config:n}=Hs(t,r);return n.mode==="number"?new LB(s):new VB(s)}var NI,wI;class qB extends(wI=ur,NI=Le,wI){constructor(r){super(r,"boolean","PgBoolean")}build(r){return new zB(r,this.config)}}le(qB,NI,"PgBooleanBuilder");var SI,CI;class zB extends(CI=Ht,SI=Le,CI){getSQLType(){return"boolean"}}le(zB,SI,"PgBoolean");function bt(t){return new qB(t??"")}var PI,kI;class KB extends(kI=ur,PI=Le,kI){constructor(r,s){super(r,"string","PgChar"),this.config.length=s.length,this.config.enumValues=s.enum}build(r){return new HB(r,this.config)}}le(KB,PI,"PgCharBuilder");var AI,_I;class HB extends(_I=Ht,AI=Le,_I){constructor(){super(...arguments);le(this,"length",this.config.length);le(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}le(HB,AI,"PgChar");function mne(t,r={}){const{name:s,config:n}=Hs(t,r);return new KB(s,n)}var TI,OI;class WB extends(OI=ur,TI=Le,OI){constructor(r){super(r,"string","PgCidr")}build(r){return new GB(r,this.config)}}le(WB,TI,"PgCidrBuilder");var EI,DI;class GB extends(DI=Ht,EI=Le,DI){getSQLType(){return"cidr"}}le(GB,EI,"PgCidr");function hne(t){return new WB(t??"")}var MI,II;class YB extends(II=ur,MI=Le,II){constructor(r,s,n){super(r,"custom","PgCustomColumn"),this.config.fieldConfig=s,this.config.customTypeParams=n}build(r){return new QB(r,this.config)}}le(YB,MI,"PgCustomColumnBuilder");var RI,FI;class QB extends(FI=Ht,RI=Le,FI){constructor(s,n){super(s,n);le(this,"sqlName");le(this,"mapTo");le(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}le(QB,RI,"PgCustomColumn");function pne(t){return(r,s)=>{const{name:n,config:a}=Hs(r,s);return new YB(n,a,t)}}var $I,LI;class _m extends(LI=ur,$I=Le,LI){defaultNow(){return this.default(Pv`now()`)}}le(_m,$I,"PgDateColumnBaseBuilder");var BI,VI;class XB extends(VI=_m,BI=Le,VI){constructor(r){super(r,"date","PgDate")}build(r){return new ZB(r,this.config)}}le(XB,BI,"PgDateBuilder");var UI,qI;class ZB extends(qI=Ht,UI=Le,qI){getSQLType(){return"date"}mapFromDriverValue(r){return new Date(r)}mapToDriverValue(r){return r.toISOString()}}le(ZB,UI,"PgDate");var zI,KI;class JB extends(KI=_m,zI=Le,KI){constructor(r){super(r,"string","PgDateString")}build(r){return new eV(r,this.config)}}le(JB,zI,"PgDateStringBuilder");var HI,WI;class eV extends(WI=Ht,HI=Le,WI){getSQLType(){return"date"}}le(eV,HI,"PgDateString");function Is(t,r){const{name:s,config:n}=Hs(t,r);return(n==null?void 0:n.mode)==="date"?new XB(s):new JB(s)}var GI,YI;class tV extends(YI=ur,GI=Le,YI){constructor(r){super(r,"number","PgDoublePrecision")}build(r){return new rV(r,this.config)}}le(tV,GI,"PgDoublePrecisionBuilder");var QI,XI;class rV extends(XI=Ht,QI=Le,XI){getSQLType(){return"double precision"}mapFromDriverValue(r){return typeof r=="string"?Number.parseFloat(r):r}}le(rV,QI,"PgDoublePrecision");function $e(t){return new tV(t??"")}var ZI,JI;class sV extends(JI=ur,ZI=Le,JI){constructor(r){super(r,"string","PgInet")}build(r){return new nV(r,this.config)}}le(sV,ZI,"PgInetBuilder");var eR,tR;class nV extends(tR=Ht,eR=Le,tR){getSQLType(){return"inet"}}le(nV,eR,"PgInet");function fne(t){return new sV(t??"")}var rR,sR;class aV extends(sR=Uf,rR=Le,sR){constructor(r){super(r,"number","PgInteger")}build(r){return new iV(r,this.config)}}le(aV,rR,"PgIntegerBuilder");var nR,aR;class iV extends(aR=Ht,nR=Le,aR){getSQLType(){return"integer"}mapFromDriverValue(r){return typeof r=="string"?Number.parseInt(r):r}}le(iV,nR,"PgInteger");function oe(t){return new aV(t??"")}var iR,lR;class lV extends(lR=ur,iR=Le,lR){constructor(r,s){super(r,"string","PgInterval"),this.config.intervalConfig=s}build(r){return new oV(r,this.config)}}le(lV,iR,"PgIntervalBuilder");var oR,cR;class oV extends(cR=Ht,oR=Le,cR){constructor(){super(...arguments);le(this,"fields",this.config.intervalConfig.fields);le(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const s=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${s}${n}`}}le(oV,oR,"PgInterval");function xne(t,r={}){const{name:s,config:n}=Hs(t,r);return new lV(s,n)}var dR,uR;class cV extends(uR=ur,dR=Le,uR){constructor(r){super(r,"json","PgJson")}build(r){return new dV(r,this.config)}}le(cV,dR,"PgJsonBuilder");var mR,hR;class dV extends(hR=Ht,mR=Le,hR){constructor(r,s){super(r,s)}getSQLType(){return"json"}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r}}le(dV,mR,"PgJson");function kn(t){return new cV(t??"")}var pR,fR;class uV extends(fR=ur,pR=Le,fR){constructor(r){super(r,"json","PgJsonb")}build(r){return new mV(r,this.config)}}le(uV,pR,"PgJsonbBuilder");var xR,gR;class mV extends(gR=Ht,xR=Le,gR){constructor(r,s){super(r,s)}getSQLType(){return"jsonb"}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r}}le(mV,xR,"PgJsonb");function Or(t){return new uV(t??"")}var vR,yR;class hV extends(yR=ur,vR=Le,yR){constructor(r){super(r,"array","PgLine")}build(r){return new pV(r,this.config)}}le(hV,vR,"PgLineBuilder");var jR,bR;class pV extends(bR=Ht,jR=Le,bR){getSQLType(){return"line"}mapFromDriverValue(r){const[s,n,a]=r.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(r){return`{${r[0]},${r[1]},${r[2]}}`}}le(pV,jR,"PgLine");var NR,wR;class fV extends(wR=ur,NR=Le,wR){constructor(r){super(r,"json","PgLineABC")}build(r){return new xV(r,this.config)}}le(fV,NR,"PgLineABCBuilder");var SR,CR;class xV extends(CR=Ht,SR=Le,CR){getSQLType(){return"line"}mapFromDriverValue(r){const[s,n,a]=r.slice(1,-1).split(",");return{a:Number.parseFloat(s),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(r){return`{${r.a},${r.b},${r.c}}`}}le(xV,SR,"PgLineABC");function gne(t,r){const{name:s,config:n}=Hs(t,r);return!(n!=null&&n.mode)||n.mode==="tuple"?new hV(s):new fV(s)}var PR,kR;class gV extends(kR=ur,PR=Le,kR){constructor(r){super(r,"string","PgMacaddr")}build(r){return new vV(r,this.config)}}le(gV,PR,"PgMacaddrBuilder");var AR,_R;class vV extends(_R=Ht,AR=Le,_R){getSQLType(){return"macaddr"}}le(vV,AR,"PgMacaddr");function vne(t){return new gV(t??"")}var TR,OR;class yV extends(OR=ur,TR=Le,OR){constructor(r){super(r,"string","PgMacaddr8")}build(r){return new jV(r,this.config)}}le(yV,TR,"PgMacaddr8Builder");var ER,DR;class jV extends(DR=Ht,ER=Le,DR){getSQLType(){return"macaddr8"}}le(jV,ER,"PgMacaddr8");function yne(t){return new yV(t??"")}var MR,IR;class bV extends(IR=ur,MR=Le,IR){constructor(r,s,n){super(r,"string","PgNumeric"),this.config.precision=s,this.config.scale=n}build(r){return new NV(r,this.config)}}le(bV,MR,"PgNumericBuilder");var RR,FR;class NV extends(FR=Ht,RR=Le,FR){constructor(s,n){super(s,n);le(this,"precision");le(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}le(NV,RR,"PgNumeric");function wV(t,r){const{name:s,config:n}=Hs(t,r);return new bV(s,n==null?void 0:n.precision,n==null?void 0:n.scale)}var $R,LR;class SV extends(LR=ur,$R=Le,LR){constructor(r){super(r,"array","PgPointTuple")}build(r){return new CV(r,this.config)}}le(SV,$R,"PgPointTupleBuilder");var BR,VR;class CV extends(VR=Ht,BR=Le,VR){getSQLType(){return"point"}mapFromDriverValue(r){if(typeof r=="string"){const[s,n]=r.slice(1,-1).split(",");return[Number.parseFloat(s),Number.parseFloat(n)]}return[r.x,r.y]}mapToDriverValue(r){return`(${r[0]},${r[1]})`}}le(CV,BR,"PgPointTuple");var UR,qR;class PV extends(qR=ur,UR=Le,qR){constructor(r){super(r,"json","PgPointObject")}build(r){return new kV(r,this.config)}}le(PV,UR,"PgPointObjectBuilder");var zR,KR;class kV extends(KR=Ht,zR=Le,KR){getSQLType(){return"point"}mapFromDriverValue(r){if(typeof r=="string"){const[s,n]=r.slice(1,-1).split(",");return{x:Number.parseFloat(s),y:Number.parseFloat(n)}}return r}mapToDriverValue(r){return`(${r.x},${r.y})`}}le(kV,zR,"PgPointObject");function jne(t,r){const{name:s,config:n}=Hs(t,r);return!(n!=null&&n.mode)||n.mode==="tuple"?new SV(s):new PV(s)}function bne(t){const r=[];for(let s=0;s<t.length;s+=2)r.push(Number.parseInt(t.slice(s,s+2),16));return new Uint8Array(r)}function ST(t,r){const s=new ArrayBuffer(8),n=new DataView(s);for(let a=0;a<8;a++)n.setUint8(a,t[r+a]);return n.getFloat64(0,!0)}function AV(t){const r=bne(t);let s=0;const n=r[s];s+=1;const a=new DataView(r.buffer),i=a.getUint32(s,n===1);if(s+=4,i&536870912&&(a.getUint32(s,n===1),s+=4),(i&65535)===1){const l=ST(r,s);s+=8;const o=ST(r,s);return s+=8,[l,o]}throw new Error("Unsupported geometry type")}var HR,WR;class _V extends(WR=ur,HR=Le,WR){constructor(r){super(r,"array","PgGeometry")}build(r){return new TV(r,this.config)}}le(_V,HR,"PgGeometryBuilder");var GR,YR;class TV extends(YR=Ht,GR=Le,YR){getSQLType(){return"geometry(point)"}mapFromDriverValue(r){return AV(r)}mapToDriverValue(r){return`point(${r[0]} ${r[1]})`}}le(TV,GR,"PgGeometry");var QR,XR;class OV extends(XR=ur,QR=Le,XR){constructor(r){super(r,"json","PgGeometryObject")}build(r){return new EV(r,this.config)}}le(OV,QR,"PgGeometryObjectBuilder");var ZR,JR;class EV extends(JR=Ht,ZR=Le,JR){getSQLType(){return"geometry(point)"}mapFromDriverValue(r){const s=AV(r);return{x:s[0],y:s[1]}}mapToDriverValue(r){return`point(${r.x} ${r.y})`}}le(EV,ZR,"PgGeometryObject");function Nne(t,r){const{name:s,config:n}=Hs(t,r);return!(n!=null&&n.mode)||n.mode==="tuple"?new _V(s):new OV(s)}var e3,t3;class DV extends(t3=ur,e3=Le,t3){constructor(r,s){super(r,"number","PgReal"),this.config.length=s}build(r){return new MV(r,this.config)}}le(DV,e3,"PgRealBuilder");var r3,s3;class MV extends(s3=Ht,r3=Le,s3){constructor(s,n){super(s,n);le(this,"mapFromDriverValue",s=>typeof s=="string"?Number.parseFloat(s):s)}getSQLType(){return"real"}}le(MV,r3,"PgReal");function wne(t){return new DV(t??"")}var n3,a3;class IV extends(a3=ur,n3=Le,a3){constructor(r){super(r,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(r){return new RV(r,this.config)}}le(IV,n3,"PgSerialBuilder");var i3,l3;class RV extends(l3=Ht,i3=Le,l3){getSQLType(){return"serial"}}le(RV,i3,"PgSerial");function Ze(t){return new IV(t??"")}var o3,c3;class FV extends(c3=Uf,o3=Le,c3){constructor(r){super(r,"number","PgSmallInt")}build(r){return new $V(r,this.config)}}le(FV,o3,"PgSmallIntBuilder");var d3,u3;class $V extends(u3=Ht,d3=Le,u3){constructor(){super(...arguments);le(this,"mapFromDriverValue",s=>typeof s=="string"?Number(s):s)}getSQLType(){return"smallint"}}le($V,d3,"PgSmallInt");function Sne(t){return new FV(t??"")}var m3,h3;class LV extends(h3=ur,m3=Le,h3){constructor(r){super(r,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(r){return new BV(r,this.config)}}le(LV,m3,"PgSmallSerialBuilder");var p3,f3;class BV extends(f3=Ht,p3=Le,f3){getSQLType(){return"smallserial"}}le(BV,p3,"PgSmallSerial");function Cne(t){return new LV(t??"")}var x3,g3;class VV extends(g3=ur,x3=Le,g3){constructor(r,s){super(r,"string","PgText"),this.config.enumValues=s.enum}build(r){return new UV(r,this.config)}}le(VV,x3,"PgTextBuilder");var v3,y3;class UV extends(y3=Ht,v3=Le,y3){constructor(){super(...arguments);le(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}le(UV,v3,"PgText");function M(t,r={}){const{name:s,config:n}=Hs(t,r);return new VV(s,n)}var j3,b3;class qV extends(b3=_m,j3=Le,b3){constructor(r,s,n){super(r,"string","PgTime"),this.withTimezone=s,this.precision=n,this.config.withTimezone=s,this.config.precision=n}build(r){return new zV(r,this.config)}}le(qV,j3,"PgTimeBuilder");var N3,w3;class zV extends(w3=Ht,N3=Le,w3){constructor(s,n){super(s,n);le(this,"withTimezone");le(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}le(zV,N3,"PgTime");function Pne(t,r={}){const{name:s,config:n}=Hs(t,r);return new qV(s,n.withTimezone??!1,n.precision)}var S3,C3;class KV extends(C3=_m,S3=Le,C3){constructor(r,s,n){super(r,"date","PgTimestamp"),this.config.withTimezone=s,this.config.precision=n}build(r){return new HV(r,this.config)}}le(KV,S3,"PgTimestampBuilder");var P3,k3;class HV extends(k3=Ht,P3=Le,k3){constructor(s,n){super(s,n);le(this,"withTimezone");le(this,"precision");le(this,"mapFromDriverValue",s=>new Date(this.withTimezone?s:s+"+0000"));le(this,"mapToDriverValue",s=>s.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}le(HV,P3,"PgTimestamp");var A3,_3;class WV extends(_3=_m,A3=Le,_3){constructor(r,s,n){super(r,"string","PgTimestampString"),this.config.withTimezone=s,this.config.precision=n}build(r){return new GV(r,this.config)}}le(WV,A3,"PgTimestampStringBuilder");var T3,O3;class GV extends(O3=Ht,T3=Le,O3){constructor(s,n){super(s,n);le(this,"withTimezone");le(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}le(GV,T3,"PgTimestampString");function ye(t,r={}){const{name:s,config:n}=Hs(t,r);return(n==null?void 0:n.mode)==="string"?new WV(s,n.withTimezone??!1,n.precision):new KV(s,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var E3,D3;class YV extends(D3=ur,E3=Le,D3){constructor(r){super(r,"string","PgUUID")}defaultRandom(){return this.default(Pv`gen_random_uuid()`)}build(r){return new QV(r,this.config)}}le(YV,E3,"PgUUIDBuilder");var M3,I3;class QV extends(I3=Ht,M3=Le,I3){getSQLType(){return"uuid"}}le(QV,M3,"PgUUID");function kne(t){return new YV(t??"")}var R3,F3;class XV extends(F3=ur,R3=Le,F3){constructor(r,s){super(r,"string","PgVarchar"),this.config.length=s.length,this.config.enumValues=s.enum}build(r){return new ZV(r,this.config)}}le(XV,R3,"PgVarcharBuilder");var $3,L3;class ZV extends(L3=Ht,$3=Le,L3){constructor(){super(...arguments);le(this,"length",this.config.length);le(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}le(ZV,$3,"PgVarchar");function Ane(t,r={}){const{name:s,config:n}=Hs(t,r);return new XV(s,n)}var B3,V3;class JV extends(V3=ur,B3=Le,V3){constructor(r,s){super(r,"string","PgBinaryVector"),this.config.dimensions=s.dimensions}build(r){return new eU(r,this.config)}}le(JV,B3,"PgBinaryVectorBuilder");var U3,q3;class eU extends(q3=Ht,U3=Le,q3){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}le(eU,U3,"PgBinaryVector");function _ne(t,r){const{name:s,config:n}=Hs(t,r);return new JV(s,n)}var z3,K3;class tU extends(K3=ur,z3=Le,K3){constructor(r,s){super(r,"array","PgHalfVector"),this.config.dimensions=s.dimensions}build(r){return new rU(r,this.config)}}le(tU,z3,"PgHalfVectorBuilder");var H3,W3;class rU extends(W3=Ht,H3=Le,W3){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}le(rU,H3,"PgHalfVector");function Tne(t,r){const{name:s,config:n}=Hs(t,r);return new tU(s,n)}var G3,Y3;class sU extends(Y3=ur,G3=Le,Y3){constructor(r,s){super(r,"string","PgSparseVector"),this.config.dimensions=s.dimensions}build(r){return new nU(r,this.config)}}le(sU,G3,"PgSparseVectorBuilder");var Q3,X3;class nU extends(X3=Ht,Q3=Le,X3){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}le(nU,Q3,"PgSparseVector");function One(t,r){const{name:s,config:n}=Hs(t,r);return new sU(s,n)}var Z3,J3;class aU extends(J3=ur,Z3=Le,J3){constructor(r,s){super(r,"array","PgVector"),this.config.dimensions=s.dimensions}build(r){return new iU(r,this.config)}}le(aU,Z3,"PgVectorBuilder");var e5,t5;class iU extends(t5=Ht,e5=Le,t5){constructor(){super(...arguments);le(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(s){return JSON.stringify(s)}mapFromDriverValue(s){return s.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}le(iU,e5,"PgVector");function Ene(t,r){const{name:s,config:n}=Hs(t,r);return new aU(s,n)}function Dne(){return{bigint:dne,bigserial:une,boolean:bt,char:mne,cidr:hne,customType:pne,date:Is,doublePrecision:$e,inet:fne,integer:oe,interval:xne,json:kn,jsonb:Or,line:gne,macaddr:vne,macaddr8:yne,numeric:wV,point:jne,geometry:Nne,real:wne,serial:Ze,smallint:Sne,smallserial:Cne,text:M,time:Pne,timestamp:ye,uuid:kne,varchar:Ane,bit:_ne,halfvec:Tne,sparsevec:One,vector:Ene}}const m1=Symbol.for("drizzle:PgInlineForeignKeys"),CT=Symbol.for("drizzle:EnableRLS");var r5,s5,n5,a5,i5;class zh extends(i5=ra,a5=Le,n5=m1,s5=CT,r5=ra.Symbol.ExtraConfigBuilder,i5){constructor(){super(...arguments);le(this,n5,[]);le(this,s5,!1);le(this,r5)}}le(zh,a5,"PgTable"),le(zh,"Symbol",Object.assign({},ra.Symbol,{InlineForeignKeys:m1,EnableRLS:CT}));function Mne(t,r,s,n,a=t){const i=new zh(t,n,a),l=typeof r=="function"?r(Dne()):r,o=Object.fromEntries(Object.entries(l).map(([u,m])=>{const h=m;h.setName(u);const g=h.build(i);return i[m1].push(...h.buildForeignKeys(g,i)),[u,g]})),c=Object.fromEntries(Object.entries(l).map(([u,m])=>{const h=m;h.setName(u);const g=h.buildExtraConfigColumn(i);return[u,g]})),d=Object.assign(i,o);return d[ra.Symbol.Columns]=o,d[ra.Symbol.ExtraConfigColumns]=c,s&&(d[zh.Symbol.ExtraConfigBuilder]=s),Object.assign(d,{enableRLS:()=>(d[zh.Symbol.EnableRLS]=!0,d)})}const Je=(t,r,s)=>Mne(t,r,s,void 0),es={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ps(t,r){return r.includes(t.columnType)}function Ine(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Rne=PC([R(),ct(),tr(),oL()]),Fne=PC([Rne,mj(Kr()),uj(Kr())]),$ne=CC(t=>t instanceof Buffer);function lU(t,r){const s=(r==null?void 0:r.zodInstance)??Aee,n=(r==null?void 0:r.coerce)??{};let a;return Ine(t)&&(a=t.enumValues.length?s.enum(t.enumValues):s.string()),a||(ps(t,["PgGeometry","PgPointTuple"])?a=s.tuple([s.number(),s.number()]):ps(t,["PgGeometryObject","PgPointObject"])?a=s.object({x:s.number(),y:s.number()}):ps(t,["PgHalfVector","PgVector"])?(a=s.array(s.number()),a=t.dimensions?a.length(t.dimensions):a):ps(t,["PgLine"])?a=s.tuple([s.number(),s.number(),s.number()]):ps(t,["PgLineABC"])?a=s.object({a:s.number(),b:s.number(),c:s.number()}):ps(t,["PgArray"])?(a=s.array(lU(t.baseColumn,s)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=s.array(s.any()):t.dataType==="number"?a=Lne(t,s,n):t.dataType==="bigint"?a=Bne(t,s,n):t.dataType==="boolean"?a=n===!0||n.boolean?s.coerce.boolean():s.boolean():t.dataType==="date"?a=n===!0||n.date?s.coerce.date():s.date():t.dataType==="string"?a=Vne(t,s,n):t.dataType==="json"?a=Fne:t.dataType==="custom"?a=s.any():t.dataType==="buffer"&&(a=$ne)),a||(a=s.any()),a}function Lne(t,r,s){let n=t.getSQLType().includes("unsigned"),a,i,l=!1;ps(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:es.INT8_MIN,i=n?es.INT8_UNSIGNED_MAX:es.INT8_MAX,l=!0):ps(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:es.INT16_MIN,i=n?es.INT16_UNSIGNED_MAX:es.INT16_MAX,l=!0):ps(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:es.INT24_MIN,i=n?es.INT24_UNSIGNED_MAX:es.INT24_MAX,l=ps(t,["MySqlMediumInt","SingleStoreMediumInt"])):ps(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:es.INT32_MIN,i=n?es.INT32_UNSIGNED_MAX:es.INT32_MAX,l=!0):ps(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:es.INT48_MIN,i=n?es.INT48_UNSIGNED_MAX:es.INT48_MAX):ps(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||ps(t,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,l=!0):ps(t,["MySqlYear","SingleStoreYear"])?(a=1901,i=2155,l=!0):(a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let o=s===!0||s!=null&&s.number?r.coerce.number():r.number();return o=o.min(a).max(i),l?o.int():o}function Bne(t,r,s){const n=t.getSQLType().includes("unsigned"),a=n?0n:es.INT64_MIN,i=n?es.INT64_UNSIGNED_MAX:es.INT64_MAX;return(s===!0||s!=null&&s.bigint?r.coerce.bigint():r.bigint()).min(a).max(i)}function Vne(t,r,s){if(ps(t,["PgUUID"]))return r.string().uuid();let n,a,i=!1;ps(t,["PgVarchar","SQLiteText"])?n=t.length:ps(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??es.INT16_UNSIGNED_MAX:ps(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=es.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=es.INT24_UNSIGNED_MAX:t.textType==="text"?n=es.INT16_UNSIGNED_MAX:n=es.INT8_UNSIGNED_MAX),ps(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,i=!0),ps(t,["PgBinaryVector"])&&(a=/^[01]+$/,n=t.dimensions);let l=s===!0||s!=null&&s.string?r.coerce.string():r.string();return l=a?l.regex(a):l,n&&i?l.length(n):n?l.max(n):l}function oU(t){return TB(t)?one(t):cne(t)}function cU(t,r,s,n){const a={};for(const[i,l]of Object.entries(t)){if(!Xs(l,Fu)&&!Xs(l,Ds)&&!Xs(l,Ds.Aliased)&&typeof l=="object"){const m=TB(l)||lne(l)?oU(l):l;a[i]=cU(m,r[i]??{},s,n);continue}const o=r[i];if(o!==void 0&&typeof o!="function"){a[i]=o;continue}const c=Xs(l,Fu)?l:void 0,d=c?lU(c,n):Kr(),u=typeof o=="function"?o(d):d;s.never(c)||(a[i]=u,c&&(s.nullable(c)&&(a[i]=a[i].nullable()),s.optional(c)&&(a[i]=a[i].optional())))}return Kt(a)}const Une={never:t=>{var r,s;return((r=t==null?void 0:t.generated)==null?void 0:r.type)==="always"||((s=t==null?void 0:t.generatedIdentity)==null?void 0:s.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},et=(t,r)=>{const s=oU(t);return cU(s,{},Une)},Tj=Je("users",{id:Ze("id").primaryKey(),username:M("username").notNull().unique(),password:M("password").notNull(),fullName:M("full_name").notNull(),email:M("email").notNull(),phone:M("phone"),userType:M("user_type").notNull(),parentId:oe("parent_id"),district:M("district"),taluk:M("taluk"),pincode:M("pincode"),profilePhoto:M("profile_photo"),walletBalance:$e("wallet_balance").default(0),createdAt:ye("created_at").defaultNow()});et(Tj).pick({username:!0,password:!0,fullName:!0,email:!0,phone:!0,userType:!0,parentId:!0,district:!0,taluk:!0,pincode:!0,profilePhoto:!0,walletBalance:!0});Je("transactions",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),amount:$e("amount").notNull(),type:M("type").notNull(),description:M("description").notNull(),serviceType:M("service_type"),createdAt:ye("created_at").defaultNow()});const qne=Je("bus_operators",{id:Ze("id").primaryKey(),operatorId:M("operator_id").notNull().unique(),operatorName:M("operator_name").notNull(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()}),zne=Je("bus_cities",{id:Ze("id").primaryKey(),cityCode:M("city_code").notNull().unique(),cityName:M("city_name").notNull(),state:M("state").default("Tamil Nadu"),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()}),Kne=Je("bus_routes",{id:Ze("id").primaryKey(),routeId:M("route_id").notNull().unique(),operatorId:oe("operator_id").notNull(),sourceCityId:oe("source_city_id").notNull(),destinationCityId:oe("destination_city_id").notNull(),busType:M("bus_type").notNull(),serviceName:M("service_name").notNull(),travelName:M("travel_name").notNull(),departureTime:M("departure_time").notNull(),arrivalTime:M("arrival_time").notNull(),basePrice:$e("base_price").notNull(),offeredPrice:$e("offered_price").notNull(),agentCommission:$e("agent_commission").notNull(),availableSeats:oe("available_seats").notNull(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()}),Hne=Je("bus_bookings",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),routeId:M("route_id").notNull(),traceId:M("trace_id").notNull(),resultIndex:oe("result_index").notNull(),passengerName:M("passenger_name").notNull(),passengerAge:oe("passenger_age").notNull(),passengerGender:M("passenger_gender").notNull(),passengerPhone:M("passenger_phone").notNull(),seatNumbers:kn("seat_numbers").notNull(),boardingPoint:kn("boarding_point").notNull(),droppingPoint:kn("dropping_point").notNull(),totalAmount:$e("total_amount").notNull(),commissionAmount:$e("commission_amount").notNull(),bookingStatus:M("booking_status").notNull().default("pending"),pnr:M("pnr"),ticketNumber:M("ticket_number"),journeyDate:Is("journey_date").notNull(),bookingDate:ye("booking_date").defaultNow(),cancellationDate:ye("cancellation_date"),cancellationCharge:$e("cancellation_charge").default(0),refundAmount:$e("refund_amount").default(0),paymentStatus:M("payment_status").notNull().default("pending"),razorpayOrderId:M("razorpay_order_id"),razorpayPaymentId:M("razorpay_payment_id")}),Wne=Je("flight_bookings",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),bookingReference:M("booking_reference").notNull(),pnr:M("pnr"),origin:M("origin").notNull(),destination:M("destination").notNull(),departureDate:Is("departure_date").notNull(),returnDate:Is("return_date"),tripType:M("trip_type").notNull().default("one_way"),airline:M("airline").notNull(),flightNumber:M("flight_number").notNull(),passengers:kn("passengers").notNull(),totalAmount:$e("total_amount").notNull(),commissionAmount:$e("commission_amount").notNull(),bookingStatus:M("booking_status").notNull().default("pending"),seatPreferences:kn("seat_preferences"),mealPreferences:kn("meal_preferences"),specialRequests:M("special_requests"),bookingDate:ye("booking_date").defaultNow(),cancellationDate:ye("cancellation_date"),cancellationCharge:$e("cancellation_charge").default(0),refundAmount:$e("refund_amount").default(0),paymentStatus:M("payment_status").notNull().default("pending"),razorpayOrderId:M("razorpay_order_id"),razorpayPaymentId:M("razorpay_payment_id")}),Gne=Je("hotel_bookings",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),bookingReference:M("booking_reference").notNull(),hotelName:M("hotel_name").notNull(),hotelId:M("hotel_id"),city:M("city").notNull(),state:M("state").notNull(),address:M("address").notNull(),checkInDate:Is("check_in_date").notNull(),checkOutDate:Is("check_out_date").notNull(),nights:oe("nights").notNull(),roomType:M("room_type").notNull(),roomsCount:oe("rooms_count").notNull().default(1),guestsCount:oe("guests_count").notNull().default(1),guestDetails:kn("guest_details").notNull(),totalAmount:$e("total_amount").notNull(),commissionAmount:$e("commission_amount").notNull(),bookingStatus:M("booking_status").notNull().default("pending"),amenities:kn("amenities"),specialRequests:M("special_requests"),bookingDate:ye("booking_date").defaultNow(),cancellationDate:ye("cancellation_date"),cancellationCharge:$e("cancellation_charge").default(0),refundAmount:$e("refund_amount").default(0),paymentStatus:M("payment_status").notNull().default("pending"),razorpayOrderId:M("razorpay_order_id"),razorpayPaymentId:M("razorpay_payment_id")}),Yne=Je("bus_commissions",{id:Ze("id").primaryKey(),bookingId:oe("booking_id").notNull(),userId:oe("user_id").notNull(),userType:M("user_type").notNull(),commissionAmount:$e("commission_amount").notNull(),commissionPercent:$e("commission_percent").notNull(),status:M("status").notNull().default("pending"),createdAt:ye("created_at").defaultNow(),paidAt:ye("paid_at")});et(qne).pick({operatorId:!0,operatorName:!0,isActive:!0});et(zne).pick({cityCode:!0,cityName:!0,state:!0,isActive:!0});et(Kne).pick({routeId:!0,operatorId:!0,sourceCityId:!0,destinationCityId:!0,busType:!0,serviceName:!0,travelName:!0,departureTime:!0,arrivalTime:!0,basePrice:!0,offeredPrice:!0,agentCommission:!0,availableSeats:!0,isActive:!0});et(Hne).pick({userId:!0,routeId:!0,traceId:!0,resultIndex:!0,passengerName:!0,passengerAge:!0,passengerGender:!0,passengerPhone:!0,seatNumbers:!0,boardingPoint:!0,droppingPoint:!0,totalAmount:!0,commissionAmount:!0,journeyDate:!0,pnr:!0,ticketNumber:!0,razorpayOrderId:!0,razorpayPaymentId:!0});et(Wne).pick({userId:!0,bookingReference:!0,origin:!0,destination:!0,departureDate:!0,returnDate:!0,tripType:!0,airline:!0,flightNumber:!0,passengers:!0,totalAmount:!0,commissionAmount:!0,seatPreferences:!0,mealPreferences:!0,specialRequests:!0,razorpayOrderId:!0,razorpayPaymentId:!0});et(Gne).pick({userId:!0,bookingReference:!0,hotelName:!0,hotelId:!0,city:!0,state:!0,address:!0,checkInDate:!0,checkOutDate:!0,nights:!0,roomType:!0,roomsCount:!0,guestsCount:!0,guestDetails:!0,totalAmount:!0,commissionAmount:!0,amenities:!0,specialRequests:!0,razorpayOrderId:!0,razorpayPaymentId:!0});et(Yne).pick({bookingId:!0,userId:!0,userType:!0,commissionAmount:!0,commissionPercent:!0,status:!0});const Qne=Je("feedback",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),serviceType:M("service_type").notNull(),rating:oe("rating").notNull(),comment:M("comment"),createdAt:ye("created_at").defaultNow()});et(Qne).pick({userId:!0,serviceType:!0,rating:!0,comment:!0});const Xne=Je("service_requests",{id:Ze("id").primaryKey(),srNumber:M("sr_number").notNull().unique(),userId:oe("user_id").notNull(),serviceType:M("service_type").notNull(),amount:wV("amount").notNull(),status:M("status").notNull().default("new"),paymentStatus:M("payment_status").default("pending"),paymentMethod:M("payment_method"),paymentId:M("payment_id"),razorpayPaymentId:M("razorpay_payment_id"),razorpayOrderId:M("razorpay_order_id"),razorpaySignature:M("razorpay_signature"),serviceData:Or("service_data"),assignedTo:oe("assigned_to"),processedBy:oe("processed_by"),pincodeAgentId:oe("pincode_agent_id"),talukManagerId:oe("taluk_manager_id"),branchManagerId:oe("branch_manager_id"),adminApprovedBy:oe("admin_approved_by"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow(),completedAt:ye("completed_at"),approvedAt:ye("approved_at")});et(Xne).pick({srNumber:!0,userId:!0,serviceType:!0,amount:!0,status:!0,paymentStatus:!0,paymentMethod:!0,serviceData:!0}).extend({userId:ct().min(1,"User ID is required"),amount:ct().min(0,"Amount must be positive")});const Zne=Je("service_request_status_updates",{id:Ze("id").primaryKey(),serviceRequestId:oe("service_request_id").notNull(),previousStatus:M("previous_status").notNull(),newStatus:M("new_status").notNull(),updatedBy:oe("updated_by").notNull(),reason:M("reason"),notes:M("notes"),attachments:Or("attachments").default([]),createdAt:ye("created_at").defaultNow()});et(Zne).pick({serviceRequestId:!0,previousStatus:!0,newStatus:!0,updatedBy:!0,reason:!0,notes:!0,attachments:!0});const Jne=Je("service_request_commission_transactions",{id:Ze("id").primaryKey(),serviceRequestId:oe("service_request_id").notNull(),userId:oe("user_id").notNull(),userType:M("user_type").notNull(),commissionType:M("commission_type").notNull(),commissionPercentage:$e("commission_percentage").notNull(),commissionAmount:$e("commission_amount").notNull(),baseAmount:$e("base_amount").notNull(),status:M("status").notNull().default("pending"),paidAt:ye("paid_at"),createdAt:ye("created_at").defaultNow()});et(Jne).pick({serviceRequestId:!0,userId:!0,userType:!0,commissionType:!0,commissionPercentage:!0,commissionAmount:!0,baseAmount:!0});const eae=Je("service_request_notifications",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),serviceRequestId:oe("service_request_id"),title:M("title").notNull(),message:M("message").notNull(),type:M("type").notNull(),category:M("category").notNull(),isRead:bt("is_read").default(!1),actionUrl:M("action_url"),createdAt:ye("created_at").defaultNow()});et(eae).pick({userId:!0,serviceRequestId:!0,title:!0,message:!0,type:!0,category:!0,actionUrl:!0});const tae=Je("commission_configs",{id:Ze("id").primaryKey(),serviceType:M("service_type").notNull(),provider:M("provider"),adminCommission:$e("admin_commission").notNull().default(.5),branchManagerCommission:$e("branch_manager_commission").notNull().default(.5),talukManagerCommission:$e("taluk_manager_commission").notNull().default(1),serviceAgentCommission:$e("service_agent_commission").notNull().default(3),registeredUserCommission:$e("registered_user_commission").notNull().default(1),totalCommission:$e("total_commission").notNull().default(6),startDate:Is("start_date"),endDate:Is("end_date"),isPeakRate:bt("is_peak_rate").default(!1),seasonName:M("season_name"),isActive:bt("is_active").notNull().default(!0),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),rae=et(tae).pick({serviceType:!0,provider:!0,adminCommission:!0,branchManagerCommission:!0,talukManagerCommission:!0,serviceAgentCommission:!0,registeredUserCommission:!0,totalCommission:!0,startDate:!0,endDate:!0,isPeakRate:!0,seasonName:!0,isActive:!0}),sae=Je("commissions",{id:Ze("id").primaryKey(),transactionId:oe("transaction_id").notNull(),userId:oe("user_id").notNull(),userType:M("user_type").notNull(),serviceType:M("service_type").notNull(),serviceId:oe("service_id").notNull(),originalAmount:$e("original_amount").notNull(),commissionPercentage:$e("commission_percentage").notNull(),commissionAmount:$e("commission_amount").notNull(),status:M("status").notNull().default("pending"),createdAt:ye("created_at").defaultNow()});et(sae).pick({transactionId:!0,userId:!0,userType:!0,serviceType:!0,serviceId:!0,originalAmount:!0,commissionPercentage:!0,commissionAmount:!0,status:!0});const nae=Je("recharges",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),mobileNumber:M("mobile_number").notNull(),amount:$e("amount").notNull(),provider:M("provider").notNull(),status:M("status").notNull(),serviceType:M("service_type").default("mobile"),processedBy:oe("processed_by"),totalCommissionPercent:$e("total_commission_percent"),totalCommissionAmount:$e("total_commission_amount"),commissionConfigId:oe("commission_config_id"),createdAt:ye("created_at").defaultNow(),completedAt:ye("completed_at")});et(nae).pick({userId:!0,mobileNumber:!0,amount:!0,provider:!0,status:!0,serviceType:!0,processedBy:!0,totalCommissionPercent:!0,totalCommissionAmount:!0,commissionConfigId:!0});const aae=Je("bookings",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),bookingType:M("booking_type").notNull(),provider:M("provider"),origin:M("origin"),destination:M("destination"),checkIn:Is("check_in"),checkOut:Is("check_out"),passengers:oe("passengers"),amount:$e("amount").notNull(),status:M("status").notNull(),processedBy:oe("processed_by"),totalCommissionPercent:$e("total_commission_percent"),totalCommissionAmount:$e("total_commission_amount"),commissionConfigId:oe("commission_config_id"),createdAt:ye("created_at").defaultNow(),completedAt:ye("completed_at")});et(aae).pick({userId:!0,bookingType:!0,provider:!0,origin:!0,destination:!0,checkIn:!0,checkOut:!0,passengers:!0,amount:!0,status:!0,processedBy:!0,totalCommissionPercent:!0,totalCommissionAmount:!0,commissionConfigId:!0,completedAt:!0});const iae=Je("rentals",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),itemName:M("item_name").notNull(),category:M("category").notNull(),startDate:Is("start_date").notNull(),endDate:Is("end_date").notNull(),amount:$e("amount").notNull(),status:M("status").notNull(),createdAt:ye("created_at").defaultNow()});et(iae).pick({userId:!0,itemName:!0,category:!0,startDate:!0,endDate:!0,amount:!0,status:!0});const lae=Je("taxi_rides",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),pickup:M("pickup").notNull(),dropoff:M("dropoff").notNull(),distance:$e("distance").notNull(),amount:$e("amount").notNull(),status:M("status").notNull(),vehicleType:M("vehicle_type").default("taxi"),createdAt:ye("created_at").defaultNow()});et(lae).pick({userId:!0,pickup:!0,dropoff:!0,distance:!0,amount:!0,status:!0,vehicleType:!0});const oae=Je("deliveries",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),pickupAddress:M("pickup_address").notNull(),deliveryAddress:M("delivery_address").notNull(),packageDetails:M("package_details").notNull(),amount:$e("amount").notNull(),status:M("status").notNull(),createdAt:ye("created_at").defaultNow()});et(oae).pick({userId:!0,pickupAddress:!0,deliveryAddress:!0,packageDetails:!0,amount:!0,status:!0});const cae=Je("grocery_categories",{id:Ze("id").primaryKey(),name:M("name").notNull().unique(),description:M("description"),icon:M("icon"),color:M("color"),imageUrl:M("image_url"),isActive:bt("is_active").default(!0),displayOrder:oe("display_order"),createdAt:ye("created_at").defaultNow()});et(cae).pick({name:!0,description:!0,icon:!0,color:!0,imageUrl:!0,isActive:!0,displayOrder:!0}).extend({imageUrl:R().optional()});const dae=Je("grocery_subcategories",{id:Ze("id").primaryKey(),name:M("name").notNull(),description:M("description"),parentCategoryId:oe("parent_category_id").notNull(),imageUrl:M("image_url"),isActive:bt("is_active").default(!0),displayOrder:oe("display_order"),createdAt:ye("created_at").defaultNow()});et(dae).pick({name:!0,description:!0,parentCategoryId:!0,imageUrl:!0,isActive:!0,displayOrder:!0}).extend({imageUrl:R().optional()});const uae=Je("grocery_products",{id:Ze("id").primaryKey(),name:M("name").notNull(),description:M("description").notNull(),categoryId:oe("category_id").notNull(),subcategoryId:oe("subcategory_id"),providerId:oe("provider_id").notNull(),price:$e("price").notNull(),discountedPrice:$e("discounted_price"),stock:oe("stock").notNull(),unit:M("unit").notNull(),isOrganic:bt("is_organic").default(!1),district:M("district").notNull(),imageUrl:M("image_url"),deliveryOption:M("delivery_option").default("both"),availableAreas:M("available_areas"),adminApproved:bt("admin_approved").default(!1),status:M("status").default("pending"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),mae=et(uae).pick({name:!0,description:!0,categoryId:!0,subcategoryId:!0,providerId:!0,price:!0,discountedPrice:!0,stock:!0,unit:!0,isOrganic:!0,district:!0,imageUrl:!0,deliveryOption:!0,availableAreas:!0,status:!0}).extend({imageUrl:R().optional(),deliveryOption:Yr(["direct","service","both"]).default("both"),availableAreas:R().optional(),status:Yr(["pending","active","inactive"]).default("pending"),subcategoryId:ct().optional(),discountedPrice:ct().optional(),isOrganic:tr().default(!1)}),dU=Je("local_product_base",{id:Ze("id").primaryKey(),name:M("name").notNull(),category:M("category").notNull(),subcategory:M("subcategory"),manufacturerId:oe("manufacturer_id"),adminApproved:bt("admin_approved").default(!1),providerId:oe("provider_id"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),hae=Je("local_product_details",{id:Ze("id").primaryKey(),productId:oe("product_id").references(()=>dU.id,{onDelete:"cascade"}).notNull(),subcategoryId:oe("subcategory_id").references(()=>uU.id),description:M("description").notNull(),specifications:Or("specifications").default({}).notNull(),price:$e("price").notNull(),discountedPrice:$e("discounted_price"),stock:oe("stock").notNull(),district:M("district").notNull(),imageUrl:M("image_url"),deliveryOption:M("delivery_option").default("both"),availableAreas:M("available_areas"),isDraft:bt("is_draft").default(!0),status:M("status").default("pending"),updatedAt:ye("updated_at").defaultNow()});et(dU).pick({name:!0,category:!0,manufacturerId:!0}).extend({});et(hae).pick({productId:!0,description:!0,price:!0,discountedPrice:!0,stock:!0,district:!0,imageUrl:!0,deliveryOption:!0,availableAreas:!0,isDraft:!0,status:!0}).extend({specifications:mj(R(),Kr()).default({}),imageUrl:R().optional(),deliveryOption:Yr(["direct","service","both"]).default("both"),availableAreas:R().optional(),isDraft:tr().default(!0),status:Yr(["active","inactive","pending"]).default("pending"),productId:ct().optional()});Kt({id:ct(),name:R(),category:R(),manufacturerId:ct().optional(),description:R(),specifications:mj(R(),Kr()).default({}),price:ct(),discountedPrice:ct().optional(),stock:ct(),district:R(),imageUrl:R().optional(),deliveryOption:R(),availableAreas:R().optional(),isDraft:tr(),adminApproved:tr(),status:R(),createdAt:R(),updatedAt:R()});const pae=Je("rental_categories",{id:Ze("id").primaryKey(),name:M("name").notNull(),description:M("description"),imageUrl:M("image_url"),isActive:bt("is_active").default(!0),displayOrder:oe("display_order").default(0),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),fae=Je("rental_subcategories",{id:Ze("id").primaryKey(),name:M("name").notNull(),description:M("description"),categoryId:oe("category_id").notNull(),isActive:bt("is_active").default(!0),imageUrl:M("image_url"),displayOrder:oe("display_order").default(0),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),xae=Je("rental_equipment",{id:Ze("id").primaryKey(),name:M("name").notNull(),categoryId:oe("category_id").notNull(),subcategoryId:oe("subcategory_id"),providerId:oe("provider_id").notNull(),description:M("description"),specifications:Or("specifications").default({}),dailyRate:$e("daily_rate").notNull(),weeklyRate:$e("weekly_rate"),monthlyRate:$e("monthly_rate"),securityDeposit:$e("security_deposit").notNull(),availableQuantity:oe("available_quantity").default(1),totalQuantity:oe("total_quantity").default(1),condition:M("condition").default("excellent"),location:M("location").notNull(),district:M("district").notNull(),pincode:M("pincode"),imageUrl:M("image_url"),additionalImages:kn("additional_images").default([]),deliveryAvailable:bt("delivery_available").default(!1),deliveryCharge:$e("delivery_charge").default(0),minimumRentalDays:oe("minimum_rental_days").default(1),maximumRentalDays:oe("maximum_rental_days").default(30),isActive:bt("is_active").default(!0),adminApproved:bt("admin_approved").default(!1),status:M("status").default("pending"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),gae=Je("rental_orders",{id:Ze("id").primaryKey(),orderNumber:M("order_number").notNull().unique(),customerId:oe("customer_id").notNull(),providerId:oe("provider_id").notNull(),totalAmount:$e("total_amount").notNull(),securityDeposit:$e("security_deposit").notNull(),startDate:Is("start_date").notNull(),endDate:Is("end_date").notNull(),totalDays:oe("total_days").notNull(),deliveryAddress:M("delivery_address").notNull(),deliveryPincode:M("delivery_pincode").notNull(),deliveryCharge:$e("delivery_charge").default(0),specialInstructions:M("special_instructions"),status:M("status").default("pending"),paymentStatus:M("payment_status").default("pending"),agentId:oe("agent_id"),talukManagerId:oe("taluk_manager_id"),branchManagerId:oe("branch_manager_id"),confirmedAt:ye("confirmed_at"),deliveredAt:ye("delivered_at"),returnedAt:ye("returned_at"),completedAt:ye("completed_at"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});Je("rental_order_items",{id:Ze("id").primaryKey(),orderId:oe("order_id").notNull(),equipmentId:oe("equipment_id").notNull(),quantity:oe("quantity").notNull(),dailyRate:$e("daily_rate").notNull(),totalDays:oe("total_days").notNull(),itemTotal:$e("item_total").notNull(),securityDepositPerItem:$e("security_deposit_per_item").notNull(),equipmentConditionBefore:M("equipment_condition_before"),equipmentConditionAfter:M("equipment_condition_after"),damageNotes:M("damage_notes"),createdAt:ye("created_at").defaultNow()});const vae=Je("rental_cart",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),equipmentId:oe("equipment_id").notNull(),quantity:oe("quantity").notNull(),startDate:Is("start_date").notNull(),endDate:Is("end_date").notNull(),totalDays:oe("total_days").notNull(),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(pae).pick({name:!0,description:!0,imageUrl:!0,isActive:!0,displayOrder:!0});et(fae).pick({name:!0,description:!0,categoryId:!0,imageUrl:!0,isActive:!0,displayOrder:!0});et(xae).pick({name:!0,categoryId:!0,subcategoryId:!0,providerId:!0,description:!0,specifications:!0,dailyRate:!0,weeklyRate:!0,monthlyRate:!0,securityDeposit:!0,availableQuantity:!0,totalQuantity:!0,condition:!0,location:!0,district:!0,pincode:!0,imageUrl:!0,additionalImages:!0,deliveryAvailable:!0,deliveryCharge:!0,minimumRentalDays:!0,maximumRentalDays:!0,isActive:!0,status:!0});et(gae).pick({customerId:!0,providerId:!0,totalAmount:!0,securityDeposit:!0,startDate:!0,endDate:!0,totalDays:!0,deliveryAddress:!0,deliveryPincode:!0,deliveryCharge:!0,specialInstructions:!0,status:!0,paymentStatus:!0});et(vae).pick({userId:!0,equipmentId:!0,quantity:!0,startDate:!0,endDate:!0,totalDays:!0});const yae=Je("delivery_categories",{id:Ze("id").primaryKey(),name:M("name").notNull().unique(),description:M("description"),basePrice:$e("base_price").notNull(),pricePerKm:$e("price_per_km").notNull().default(0),pricePerKg:$e("price_per_kg").notNull().default(0),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),jae=Je("delivery_agents",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),name:M("name").notNull(),mobileNumber:M("mobile_number").notNull(),email:M("email"),address:M("address").notNull(),district:M("district").notNull(),taluk:M("taluk").notNull(),pincode:M("pincode").notNull(),categoryId:oe("category_id").notNull(),availableStartTime:M("available_start_time"),availableEndTime:M("available_end_time"),operationAreas:kn("operation_areas").default([]),isOnline:bt("is_online").default(!1),isAvailable:bt("is_available").default(!0),adminApproved:bt("admin_approved").default(!1),verificationStatus:M("verification_status").default("pending"),documents:kn("documents").default([]),rating:$e("rating").default(0),totalDeliveries:oe("total_deliveries").default(0),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),bae=Je("delivery_orders",{id:Ze("id").primaryKey(),orderNumber:M("order_number").notNull().unique(),customerId:oe("customer_id").notNull(),agentId:oe("agent_id"),categoryId:oe("category_id").notNull(),pickupAddress:M("pickup_address").notNull(),pickupDistrict:M("pickup_district").notNull(),pickupTaluk:M("pickup_taluk").notNull(),pickupPincode:M("pickup_pincode").notNull(),pickupContactName:M("pickup_contact_name"),pickupContactPhone:M("pickup_contact_phone"),deliveryAddress:M("delivery_address").notNull(),deliveryDistrict:M("delivery_district").notNull(),deliveryTaluk:M("delivery_taluk").notNull(),deliveryPincode:M("delivery_pincode").notNull(),deliveryContactName:M("delivery_contact_name"),deliveryContactPhone:M("delivery_contact_phone"),packageDetails:M("package_details"),packageWeight:$e("package_weight"),packageValue:$e("package_value"),specialInstructions:M("special_instructions"),scheduledPickupTime:ye("scheduled_pickup_time"),estimatedDeliveryTime:ye("estimated_delivery_time"),actualPickupTime:ye("actual_pickup_time"),actualDeliveryTime:ye("actual_delivery_time"),totalAmount:$e("total_amount").notNull(),paymentMode:M("payment_mode").default("cash"),paymentStatus:M("payment_status").default("pending"),status:M("status").default("pending"),cancellationReason:M("cancellation_reason"),customerRating:oe("customer_rating"),customerFeedback:M("customer_feedback"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),Nae=Je("taxi_categories",{id:Ze("id").primaryKey(),name:M("name").notNull().unique(),description:M("description").notNull(),basePrice:$e("base_price").notNull(),pricePerKm:$e("price_per_km").notNull(),waitingChargePerMinute:$e("waiting_charge_per_minute").notNull(),maxPassengers:oe("max_passengers").notNull(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),wae=Je("taxi_vehicles",{id:Ze("id").primaryKey(),providerId:oe("provider_id").notNull(),vehicleNumber:M("vehicle_number").notNull().unique(),vehicleType:M("vehicle_type").notNull(),brand:M("brand").notNull(),model:M("model").notNull(),year:oe("year").notNull(),color:M("color").notNull(),seatingCapacity:oe("seating_capacity").notNull(),fuelType:M("fuel_type").notNull(),acAvailable:bt("ac_available").default(!1),gpsEnabled:bt("gps_enabled").default(!1),insuranceValid:bt("insurance_valid").default(!0),pucValid:bt("puc_valid").default(!0),rcNumber:M("rc_number").notNull(),insuranceNumber:M("insurance_number").notNull(),driverLicenseNumber:M("driver_license_number").notNull(),baseFarePerKm:$e("base_fare_per_km").notNull(),baseWaitingCharge:$e("base_waiting_charge").default(0),nightChargeMultiplier:$e("night_charge_multiplier").default(1.2),tollChargesApplicable:bt("toll_charges_applicable").default(!0),availableAreas:M("available_areas"),currentLocation:M("current_location"),district:M("district").notNull(),pincode:M("pincode"),imageUrl:M("image_url"),additionalImages:kn("additional_images").default([]),isActive:bt("is_active").default(!0),adminApproved:bt("admin_approved").default(!1),status:M("status").default("available"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),Sae=Je("taxi_bookings",{id:Ze("id").primaryKey(),bookingNumber:M("booking_number").notNull().unique(),customerId:oe("customer_id").notNull(),providerId:oe("provider_id").notNull(),vehicleId:oe("vehicle_id").notNull(),bookingType:M("booking_type").notNull(),pickupLocation:M("pickup_location").notNull(),pickupPincode:M("pickup_pincode").notNull(),dropoffLocation:M("dropoff_location").notNull(),dropoffPincode:M("dropoff_pincode").notNull(),scheduledDateTime:ye("scheduled_date_time"),estimatedDistance:$e("estimated_distance"),estimatedDuration:oe("estimated_duration"),estimatedFare:$e("estimated_fare"),actualDistance:$e("actual_distance"),actualDuration:oe("actual_duration"),baseFare:$e("base_fare"),waitingCharges:$e("waiting_charges").default(0),tollCharges:$e("toll_charges").default(0),nightCharges:$e("night_charges").default(0),totalAmount:$e("total_amount").notNull(),paymentMode:M("payment_mode").default("cash"),paymentStatus:M("payment_status").default("pending"),specialInstructions:M("special_instructions"),passengerCount:oe("passenger_count").default(1),status:M("status").default("pending"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),Cae=Je("taxi_routes",{id:Ze("id").primaryKey(),routeName:M("route_name").notNull(),fromLocation:M("from_location").notNull(),toLocation:M("to_location").notNull(),distance:$e("distance").notNull(),estimatedDuration:oe("estimated_duration").notNull(),basePrice:$e("base_price").notNull(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()}),Pae=Je("recycling_requests",{id:Ze("id").primaryKey(),requestNumber:M("request_number").notNull(),userId:oe("user_id").notNull(),address:M("address").notNull(),pincode:M("pincode").notNull(),date:Is("date").notNull(),timeSlot:M("time_slot").notNull(),materials:M("materials").notNull(),additionalNotes:M("additional_notes"),status:M("status").default("new").notNull(),agentId:oe("agent_id"),talukManagerId:oe("taluk_manager_id"),branchManagerId:oe("branch_manager_id"),assignedAt:ye("assigned_at"),collectedAt:ye("collected_at"),verifiedAt:ye("verified_at"),closedAt:ye("closed_at"),totalWeight:$e("total_weight"),amount:$e("amount"),createdAt:ye("created_at").defaultNow()}),kae=Je("video_uploads",{id:Ze("id").primaryKey(),uploaderId:oe("uploader_id").notNull(),title:M("title").notNull(),description:M("description"),filePath:M("file_path").notNull(),fileName:M("file_name").notNull(),fileSize:oe("file_size").notNull(),duration:oe("duration"),thumbnailUrl:M("thumbnail_url"),category:M("category").default("advertisement"),targetArea:M("target_area"),status:M("status").default("pending").notNull(),adminApprovalBy:oe("admin_approval_by"),approvalNotes:M("approval_notes"),youtubeVideoId:M("youtube_video_id"),youtubeUrl:M("youtube_url"),uploadedToYoutubeAt:ye("uploaded_to_youtube_at"),rejectedAt:ye("rejected_at"),approvedAt:ye("approved_at"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),Aae=Je("video_view_analytics",{id:Ze("id").primaryKey(),videoId:M("video_id").notNull(),viewerId:oe("viewer_id"),sessionId:M("session_id").notNull(),watchStartTime:ye("watch_start_time").defaultNow(),watchEndTime:ye("watch_end_time"),totalWatchTime:oe("total_watch_time").default(0),videoDuration:oe("video_duration"),completionPercentage:$e("completion_percentage").default(0),pauseCount:oe("pause_count").default(0),seekCount:oe("seek_count").default(0),volumeChanges:oe("volume_changes").default(0),playbackSpeed:$e("playback_speed").default(1),deviceType:M("device_type"),browserType:M("browser_type"),ipAddress:M("ip_address"),location:M("location"),referrer:M("referrer"),isCompleted:bt("is_completed").default(!1),createdAt:ye("created_at").defaultNow()});Je("daily_video_stats",{id:Ze("id").primaryKey(),videoId:M("video_id").notNull(),date:Is("date").notNull(),totalViews:oe("total_views").default(0),uniqueViewers:oe("unique_viewers").default(0),totalWatchTime:oe("total_watch_time").default(0),averageWatchTime:$e("average_watch_time").default(0),completionRate:$e("completion_rate").default(0),topLocations:Or("top_locations").default([]),deviceBreakdown:Or("device_breakdown").default({}),createdAt:ye("created_at").defaultNow()},t=>({uniqueVideoDate:jB().on(t.videoId,t.date)}));et(yae).pick({name:!0,description:!0,basePrice:!0,pricePerKm:!0,pricePerKg:!0,isActive:!0});et(jae).pick({userId:!0,name:!0,mobileNumber:!0,email:!0,address:!0,district:!0,taluk:!0,pincode:!0,categoryId:!0,availableStartTime:!0,availableEndTime:!0,operationAreas:!0,documents:!0});et(bae).pick({customerId:!0,categoryId:!0,pickupAddress:!0,pickupDistrict:!0,pickupTaluk:!0,pickupPincode:!0,pickupContactName:!0,pickupContactPhone:!0,deliveryAddress:!0,deliveryDistrict:!0,deliveryTaluk:!0,deliveryPincode:!0,deliveryContactName:!0,deliveryContactPhone:!0,packageDetails:!0,packageWeight:!0,packageValue:!0,specialInstructions:!0,scheduledPickupTime:!0,totalAmount:!0,paymentMode:!0});et(Nae).pick({name:!0,description:!0,basePrice:!0,pricePerKm:!0,waitingChargePerMinute:!0,maxPassengers:!0,isActive:!0});et(wae).pick({providerId:!0,vehicleNumber:!0,vehicleType:!0,brand:!0,model:!0,year:!0,color:!0,seatingCapacity:!0,fuelType:!0,acAvailable:!0,gpsEnabled:!0,insuranceValid:!0,pucValid:!0,rcNumber:!0,insuranceNumber:!0,driverLicenseNumber:!0,baseFarePerKm:!0,baseWaitingCharge:!0,nightChargeMultiplier:!0,tollChargesApplicable:!0,availableAreas:!0,currentLocation:!0,district:!0,pincode:!0,imageUrl:!0,additionalImages:!0,isActive:!0,status:!0});et(Sae).pick({bookingNumber:!0,customerId:!0,providerId:!0,vehicleId:!0,bookingType:!0,pickupLocation:!0,pickupPincode:!0,dropoffLocation:!0,dropoffPincode:!0,scheduledDateTime:!0,estimatedDistance:!0,estimatedDuration:!0,estimatedFare:!0,totalAmount:!0,paymentMode:!0,paymentStatus:!0,specialInstructions:!0,passengerCount:!0,status:!0});et(Cae).pick({routeName:!0,fromLocation:!0,toLocation:!0,distance:!0,estimatedDuration:!0,basePrice:!0,isActive:!0});et(Pae).pick({userId:!0,requestNumber:!0,address:!0,pincode:!0,date:!0,timeSlot:!0,materials:!0,additionalNotes:!0,status:!0,agentId:!0,talukManagerId:!0,branchManagerId:!0,assignedAt:!0,collectedAt:!0,verifiedAt:!0,closedAt:!0,totalWeight:!0,amount:!0}).extend({requestNumber:R().optional(),status:Yr(["new","assigned","collected","verified","closed","cancelled"]).default("new"),assignedAt:ri().optional(),collectedAt:ri().optional(),verifiedAt:ri().optional(),closedAt:ri().optional(),talukManagerId:ct().optional(),branchManagerId:ct().optional()});Kt({id:ct().optional(),amount:ct(),description:R(),createdAt:ri().optional()});const _ae=Je("local_product_categories",{id:Ze("id").primaryKey(),name:M("name").notNull().unique(),description:M("description"),icon:M("icon"),color:M("color"),imageUrl:M("image_url"),isActive:bt("is_active").default(!0),displayOrder:oe("display_order"),createdAt:ye("created_at").defaultNow()});et(_ae).pick({name:!0,description:!0,icon:!0,color:!0,imageUrl:!0,isActive:!0,displayOrder:!0}).extend({imageUrl:R().optional()});const uU=Je("local_product_subcategories",{id:Ze("id").primaryKey(),name:M("name").notNull(),description:M("description"),parentCategoryId:oe("parent_category_id").notNull(),imageUrl:M("image_url"),isActive:bt("is_active").default(!0),displayOrder:oe("display_order"),createdAt:ye("created_at").defaultNow()});et(uU).pick({name:!0,description:!0,parentCategoryId:!0,imageUrl:!0,isActive:!0,displayOrder:!0}).extend({imageUrl:R().optional(),parentCategoryId:ct()});const Tae=Je("local_product_category_requests",{id:Ze("id").primaryKey(),requesterId:oe("requester_id").notNull(),categoryName:M("category_name").notNull(),subcategoryName:M("subcategory_name"),parentCategoryId:oe("parent_category_id"),description:M("description"),justification:M("justification"),status:M("status").default("pending"),adminResponse:M("admin_response"),createdAt:ye("created_at").defaultNow(),reviewedAt:ye("reviewed_at"),reviewedBy:oe("reviewed_by")});et(Tae).pick({categoryName:!0,subcategoryName:!0,parentCategoryId:!0,description:!0,justification:!0}).extend({requesterId:ct().optional(),subcategoryName:R().optional(),parentCategoryId:ct().optional(),description:R().optional(),justification:R().optional()});const Oae=Je("nominations",{id:Ze("id").primaryKey(),name:M("name").notNull(),phoneNumber:M("phone_number").notNull(),otpVerified:bt("otp_verified").default(!1),roleAppliedFor:M("role_applied_for").notNull(),district:M("district").notNull(),taluk:M("taluk").notNull(),pincode:M("pincode").notNull(),servicesProvided:M("services_provided"),status:M("status").default("pending"),adminResponse:M("admin_response"),profilePhoto:M("profile_photo"),userId:oe("user_id"),submittedAt:ye("submitted_at").defaultNow(),reviewedAt:ye("reviewed_at"),reviewedBy:oe("reviewed_by")});et(Oae).pick({name:!0,phoneNumber:!0,roleAppliedFor:!0,district:!0,taluk:!0,pincode:!0,servicesProvided:!0}).extend({phoneNumber:R().min(10,"Phone number must be at least 10 digits"),roleAppliedFor:R().min(1,"Role is required"),district:R().min(1,"District is required"),taluk:R().min(1,"Taluk is required"),pincode:R().min(6,"Pincode must be at least 6 digits"),servicesProvided:R().min(10,"Service description must be at least 10 characters")});const Eae=Je("otp_verifications",{id:Ze("id").primaryKey(),phoneNumber:M("phone_number").notNull(),otp:M("otp").notNull(),purpose:M("purpose").notNull(),verified:bt("verified").default(!1),expiresAt:ye("expires_at").notNull(),createdAt:ye("created_at").defaultNow()});et(Eae).pick({phoneNumber:!0,otp:!0,purpose:!0,expiresAt:!0});const Dae=Je("public_messages",{id:Ze("id").primaryKey(),nominationId:oe("nomination_id").notNull(),senderId:oe("sender_id"),senderName:M("sender_name").notNull(),message:M("message").notNull(),messageType:M("message_type").default("public"),isAdminMessage:bt("is_admin_message").default(!1),createdAt:ye("created_at").defaultNow()});et(Dae).pick({nominationId:!0,senderName:!0,message:!0,messageType:!0}).extend({nominationId:ct(),senderName:R().min(1,"Name is required"),message:R().min(1,"Message is required"),messageType:Yr(["public","inquiry","support"]).optional()});const Mae=Je("applications",{id:Ze("id").primaryKey(),applicantName:M("applicant_name").notNull(),mobileNumber:M("mobile_number").notNull(),email:M("email"),address:M("address").notNull(),district:M("district").notNull(),taluk:M("taluk"),pincode:M("pincode"),degree:M("degree"),experience:M("experience"),roleType:M("role_type").notNull(),specificRole:M("specific_role"),additionalInfo:M("additional_info"),status:M("status").default("pending"),appliedAt:ye("applied_at").defaultNow(),reviewedAt:ye("reviewed_at"),reviewedBy:oe("reviewed_by"),adminNotes:M("admin_notes"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Mae).pick({applicantName:!0,mobileNumber:!0,email:!0,address:!0,district:!0,taluk:!0,pincode:!0,degree:!0,experience:!0,roleType:!0,specificRole:!0,additionalInfo:!0}).extend({email:R().email().optional(),taluk:R().optional(),pincode:R().optional(),degree:R().optional(),experience:R().optional(),specificRole:R().optional(),additionalInfo:R().optional()});const Iae=Je("farmer_product_listings",{id:Ze("id").primaryKey(),farmerId:oe("farmer_id").notNull(),groceryProductId:oe("grocery_product_id").notNull(),quantity:oe("quantity").notNull(),price:$e("price").notNull(),unit:M("unit").notNull(),imageUrl:M("image_url"),transportAgentRequired:bt("transport_agent_required").default(!0),selfDelivery:bt("self_delivery").default(!1),isOrganic:bt("is_organic").default(!1),status:M("status").default("pending"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Iae).pick({groceryProductId:!0,quantity:!0,price:!0,unit:!0,imageUrl:!0,transportAgentRequired:!0,selfDelivery:!0,isOrganic:!0,status:!0}).extend({farmerId:ct().optional(),imageUrl:R().optional(),transportAgentRequired:tr().default(!0),selfDelivery:tr().default(!1),isOrganic:tr().default(!1),status:Yr(["pending","approved","rejected"]).default("pending")});const Rae=Je("delivery_areas",{id:Ze("id").primaryKey(),listingId:oe("listing_id").notNull(),district:M("district").notNull(),taluk:M("taluk").notNull(),pincode:M("pincode").notNull(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()});et(Rae).pick({listingId:!0,district:!0,taluk:!0,pincode:!0,isActive:!0});const Fae=Je("product_requests",{id:Ze("id").primaryKey(),farmerId:oe("farmer_id").notNull(),requestedProductName:M("requested_product_name").notNull(),description:M("description").notNull(),category:M("category").notNull(),unit:M("unit").notNull(),imageUrl:M("image_url"),status:M("status").default("pending"),adminNotes:M("admin_notes"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),$ae=et(Fae).pick({farmerId:!0,requestedProductName:!0,description:!0,category:!0,unit:!0,imageUrl:!0,status:!0,adminNotes:!0}).extend({imageUrl:R().optional(),status:Yr(["pending","approved","rejected"]).default("pending"),adminNotes:R().optional()}),Lae=Je("grocery_orders",{id:Ze("id").primaryKey(),customerId:oe("customer_id").notNull(),totalAmount:$e("total_amount").notNull(),shippingAddress:M("shipping_address").notNull(),district:M("district").notNull(),taluk:M("taluk").notNull(),pincode:M("pincode").notNull(),status:M("status").default("pending"),pincodeAgentId:oe("pincode_agent_id"),transportAgentId:oe("transport_agent_id"),deliveryFee:$e("delivery_fee").default(0),paymentMethod:M("payment_method").default("cash"),paymentStatus:M("payment_status").default("pending"),notes:M("notes"),createdAt:ye("created_at").defaultNow(),completedAt:ye("completed_at")});et(Lae).pick({customerId:!0,totalAmount:!0,shippingAddress:!0,district:!0,taluk:!0,pincode:!0,status:!0,pincodeAgentId:!0,transportAgentId:!0,deliveryFee:!0,paymentMethod:!0,paymentStatus:!0,notes:!0,completedAt:!0}).extend({status:Yr(["pending","pincode_agent_approved","in_progress","delivered","cancelled"]).default("pending"),paymentMethod:Yr(["cash","wallet","online"]).default("cash"),paymentStatus:Yr(["pending","completed"]).default("pending"),notes:R().optional(),transportAgentId:ct().optional(),pincodeAgentId:ct().optional(),completedAt:ri().optional()});const Bae=Je("grocery_order_items",{id:Ze("id").primaryKey(),orderId:oe("order_id").notNull(),farmerProductListingId:oe("farmer_product_listing_id").notNull(),quantity:oe("quantity").notNull(),unitPrice:$e("unit_price").notNull(),subtotal:$e("subtotal").notNull(),status:M("status").default("pending"),farmerId:oe("farmer_id").notNull(),productName:M("product_name").notNull(),createdAt:ye("created_at").defaultNow()});et(Bae).pick({orderId:!0,farmerProductListingId:!0,quantity:!0,unitPrice:!0,subtotal:!0,status:!0,farmerId:!0,productName:!0}).extend({status:Yr(["pending","confirmed","shipped","delivered","cancelled"]).default("pending")});const Vae=Je("local_product_cart",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),productId:oe("product_id").notNull(),quantity:oe("quantity").notNull(),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Vae).pick({userId:!0,productId:!0,quantity:!0});const Uae=Je("local_product_orders",{id:Ze("id").primaryKey(),customerId:oe("customer_id").notNull(),totalAmount:$e("total_amount").notNull(),shippingAddress:M("shipping_address").notNull(),district:M("district").notNull(),taluk:M("taluk"),pincode:M("pincode").notNull(),status:M("status").default("pending"),paymentMethod:M("payment_method").default("cash"),paymentStatus:M("payment_status").default("pending"),notes:M("notes"),deliveryFee:$e("delivery_fee").default(0),createdAt:ye("created_at").defaultNow(),completedAt:ye("completed_at")});et(Uae).pick({customerId:!0,totalAmount:!0,shippingAddress:!0,district:!0,taluk:!0,pincode:!0,status:!0,paymentMethod:!0,paymentStatus:!0,notes:!0,deliveryFee:!0,completedAt:!0}).extend({status:Yr(["pending","confirmed","shipped","delivered","cancelled"]).default("pending"),paymentMethod:Yr(["cash","wallet","online"]).default("cash"),paymentStatus:Yr(["pending","completed"]).default("pending"),notes:R().optional(),taluk:R().optional(),completedAt:ri().optional()});const qae=Je("local_product_order_items",{id:Ze("id").primaryKey(),orderId:oe("order_id").notNull(),productId:oe("product_id").notNull(),quantity:oe("quantity").notNull(),unitPrice:$e("unit_price").notNull(),subtotal:$e("subtotal").notNull(),productName:M("product_name").notNull(),manufacturerId:oe("manufacturer_id").notNull(),createdAt:ye("created_at").defaultNow()});et(qae).pick({orderId:!0,productId:!0,quantity:!0,unitPrice:!0,subtotal:!0,productName:!0,manufacturerId:!0});et(kae).pick({uploaderId:!0,title:!0,description:!0,filePath:!0,fileName:!0,fileSize:!0,duration:!0,thumbnailUrl:!0,category:!0,targetArea:!0,status:!0}).extend({category:Yr(["advertisement","tutorial","announcement"]).default("advertisement"),status:Yr(["pending","approved","uploaded","published","rejected"]).default("pending"),description:R().optional(),duration:ct().optional(),thumbnailUrl:R().optional(),targetArea:R().optional()});et(Aae).pick({videoId:!0,viewerId:!0,sessionId:!0,totalWatchTime:!0,videoDuration:!0,completionPercentage:!0,pauseCount:!0,seekCount:!0,volumeChanges:!0,playbackSpeed:!0,deviceType:!0,browserType:!0,ipAddress:!0,location:!0,referrer:!0,isCompleted:!0}).extend({viewerId:ct().optional(),videoDuration:ct().optional(),deviceType:R().optional(),browserType:R().optional(),ipAddress:R().optional(),location:R().optional(),referrer:R().optional()});const zae=Je("manager_applications",{id:Ze("id").primaryKey(),fullName:M("full_name").notNull(),email:M("email").notNull(),phone:M("phone"),username:M("username").notNull(),password:M("password").notNull(),managerType:M("manager_type").notNull(),district:M("district"),taluk:M("taluk"),pincode:M("pincode"),status:M("status").notNull().default("pending"),notes:M("notes"),approvedBy:oe("approved_by"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(zae).pick({fullName:!0,email:!0,phone:!0,username:!0,password:!0,managerType:!0,district:!0,taluk:!0,pincode:!0});const mU=Je("service_providers",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull().unique(),providerType:M("provider_type").notNull(),businessName:M("business_name"),address:M("address").notNull(),district:M("district").notNull(),taluk:M("taluk").notNull(),pincode:M("pincode").notNull(),operatingAreas:Or("operating_areas"),phone:M("phone").notNull(),email:M("email"),website:M("website"),description:M("description"),status:M("status").notNull().default("pending"),verificationStatus:M("verification_status").notNull().default("pending"),verifiedBy:oe("verified_by"),documents:Or("documents"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(mU).pick({userId:!0,providerType:!0,businessName:!0,address:!0,district:!0,taluk:!0,pincode:!0,operatingAreas:!0,phone:!0,email:!0,website:!0,description:!0,status:!0,verificationStatus:!0,verifiedBy:!0,documents:!0}).extend({businessName:R().optional(),email:R().optional(),website:R().optional(),description:R().optional(),operatingAreas:Kr().optional(),taluk:R().optional().default(""),verifiedBy:ct().optional().nullable(),documents:Kr().optional(),status:R().default("pending"),verificationStatus:R().default("pending")});const Kae=Je("farmer_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),farmSize:M("farm_size"),farmType:M("farm_type"),primaryProducts:M("primary_products").notNull(),cultivationSeason:M("cultivation_season"),operatingHours:M("operating_hours"),supportsDelivery:bt("supports_delivery"),bankDetails:Or("bank_details"),createdAt:ye("created_at"),updatedAt:ye("updated_at")});et(Kae).pick({serviceProviderId:!0,farmSize:!0,farmType:!0,primaryProducts:!0,cultivationSeason:!0,operatingHours:!0,supportsDelivery:!0,bankDetails:!0}).extend({farmSize:R().optional(),farmType:R().optional(),primaryProducts:R().or(uj(R())).transform(t=>typeof t=="string"?t:JSON.stringify(t)),cultivationSeason:R().optional(),operatingHours:R().optional(),supportsDelivery:tr().default(!1),bankDetails:Kr().optional()});const Hae=Je("manufacturer_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),businessType:M("business_type"),productCategories:M("product_categories"),establishmentYear:M("establishment_year"),operatingHours:M("operating_hours"),supportsDelivery:bt("supports_delivery"),bankDetails:Or("bank_details"),createdAt:ye("created_at"),updatedAt:ye("updated_at")});et(Hae).pick({serviceProviderId:!0,businessType:!0,productCategories:!0,establishmentYear:!0,supportsDelivery:!0,operatingHours:!0,bankDetails:!0}).extend({businessType:R().optional(),productCategories:R().optional(),establishmentYear:R().optional(),operatingHours:R().optional(),supportsDelivery:tr().default(!1),bankDetails:Kr().optional()});const Wae=Je("booking_agent_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),serviceTypes:Or("service_types"),operatingHours:M("operating_hours"),yearsOfExperience:oe("years_of_experience"),preferredProviders:Or("preferred_providers"),commissionRates:Or("commission_rates"),bankDetails:Or("bank_details"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Wae).pick({serviceProviderId:!0,serviceTypes:!0,operatingHours:!0,yearsOfExperience:!0,preferredProviders:!0,commissionRates:!0,bankDetails:!0}).extend({serviceTypes:Kr().optional(),operatingHours:R().optional(),yearsOfExperience:ct().optional(),preferredProviders:Kr().optional(),commissionRates:Kr().optional(),bankDetails:Kr().optional()});const Gae=Je("taxi_provider_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),vehicleTypes:M("vehicle_types"),operatingHours:M("operating_hours"),bankDetails:Or("bank_details"),licenseNumber:M("license_number"),dateOfBirth:M("date_of_birth"),photoUrl:M("photo_url"),aadharVerified:bt("aadhar_verified").default(!1),panCardNumber:M("pan_card_number"),vehicleRegistrationNumber:M("vehicle_registration_number"),vehicleInsuranceDetails:M("vehicle_insurance_details"),vehiclePermitDetails:M("vehicle_permit_details"),documents:Or("documents"),approvalStatus:M("approval_status").default("pending"),approvalNotes:M("approval_notes"),approvedBy:oe("approved_by"),createdAt:ye("created_at"),updatedAt:ye("updated_at")});et(Gae).pick({serviceProviderId:!0,vehicleTypes:!0,operatingHours:!0,bankDetails:!0,licenseNumber:!0,dateOfBirth:!0,photoUrl:!0,aadharVerified:!0,panCardNumber:!0,vehicleRegistrationNumber:!0,vehicleInsuranceDetails:!0,vehiclePermitDetails:!0,documents:!0,approvalStatus:!0,approvalNotes:!0,approvedBy:!0}).extend({vehicleTypes:R().optional(),operatingHours:R().optional(),bankDetails:Kr().optional(),licenseNumber:R().optional(),dateOfBirth:R().optional(),photoUrl:R().optional(),aadharVerified:tr().default(!1),panCardNumber:R().optional(),vehicleRegistrationNumber:R().optional(),vehicleInsuranceDetails:R().optional(),vehiclePermitDetails:R().optional(),documents:Kr().optional(),approvalStatus:R().default("pending"),approvalNotes:R().optional(),approvedBy:ct().optional().nullable()});const Yae=Je("transportation_agent_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),vehicleTypes:Or("vehicle_types"),vehicleCount:oe("vehicle_count"),operatingHours:M("operating_hours"),serviceAreas:Or("service_areas"),maxDistance:oe("max_distance"),maxWeight:$e("max_weight"),pricePerKg:$e("price_per_kg"),pricePerKm:$e("price_per_km"),bankDetails:Or("bank_details"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Yae).pick({serviceProviderId:!0,vehicleTypes:!0,vehicleCount:!0,operatingHours:!0,serviceAreas:!0,maxDistance:!0,maxWeight:!0,pricePerKg:!0,pricePerKm:!0,bankDetails:!0}).extend({vehicleTypes:Kr().optional(),vehicleCount:ct().optional(),operatingHours:R().optional(),serviceAreas:Kr().optional(),maxDistance:ct().optional(),maxWeight:ct().optional(),pricePerKg:ct().optional(),pricePerKm:ct().optional(),bankDetails:Kr().optional()});const Qae=Je("rental_provider_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),itemCategories:Or("item_categories"),itemDetails:Or("item_details"),depositRequired:bt("deposit_required").default(!0),operatingHours:M("operating_hours"),deliveryAvailable:bt("delivery_available").default(!1),deliveryCharge:$e("delivery_charge"),bankDetails:Or("bank_details"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Qae).pick({serviceProviderId:!0,itemCategories:!0,itemDetails:!0,depositRequired:!0,operatingHours:!0,deliveryAvailable:!0,deliveryCharge:!0,bankDetails:!0}).extend({itemCategories:Kr().optional(),itemDetails:Kr().optional(),depositRequired:tr().default(!0),operatingHours:R().optional(),deliveryAvailable:tr().default(!1),deliveryCharge:ct().optional(),bankDetails:Kr().optional()});const Xae=Je("recycling_material_rates",{id:Ze("id").primaryKey(),materialType:M("material_type").notNull().unique(),ratePerKg:$e("rate_per_kg").notNull(),description:M("description"),isActive:bt("is_active").default(!0),updatedBy:oe("updated_by"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Xae).pick({materialType:!0,ratePerKg:!0,description:!0,isActive:!0,updatedBy:!0});const Zae=Je("recycling_agent_details",{id:Ze("id").primaryKey(),serviceProviderId:oe("service_provider_id").notNull().unique(),materialTypes:Or("material_types"),pricePerKg:Or("price_per_kg"),minQuantity:$e("min_quantity"),providesPickup:bt("provides_pickup").default(!0),operatingHours:M("operating_hours"),purchaseProcess:M("purchase_process"),bankDetails:Or("bank_details"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Zae).pick({serviceProviderId:!0,materialTypes:!0,pricePerKg:!0,minQuantity:!0,providesPickup:!0,operatingHours:!0,purchaseProcess:!0,bankDetails:!0}).extend({materialTypes:Kr().optional(),pricePerKg:Kr().optional(),minQuantity:ct().optional(),providesPickup:tr().default(!0),operatingHours:R().optional(),purchaseProcess:R().optional(),bankDetails:Kr().optional()});const Jae=Je("provider_product_categories",{id:Ze("id").primaryKey(),providerType:M("provider_type").notNull(),categoryName:M("category_name").notNull(),subcategories:M("subcategories").array(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()}),eie=Je("provider_products",{id:Ze("id").primaryKey(),providerId:oe("provider_id").references(()=>mU.id).notNull(),categoryName:M("category_name").notNull(),subcategoryName:M("subcategory_name"),productName:M("product_name").notNull(),description:M("description").notNull(),specifications:M("specifications"),price:$e("price").notNull(),discountedPrice:$e("discounted_price"),unit:M("unit").notNull(),stockQuantity:oe("stock_quantity").default(0),availableAreas:M("available_areas").array(),imageUrl:M("image_url"),isOrganic:bt("is_organic").default(!1),seasonality:M("seasonality"),minimumOrder:oe("minimum_order").default(1),deliveryTime:M("delivery_time"),status:M("status").default("active"),adminApproved:bt("admin_approved").default(!1),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(Jae).omit({id:!0,createdAt:!0});et(eie).omit({id:!0,createdAt:!0,updatedAt:!0});const tie=Je("commission_transactions",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),amount:$e("amount").notNull(),commissionAmount:$e("commission_amount").notNull(),commissionRate:$e("commission_rate").notNull(),transactionAmount:$e("transaction_amount").notNull(),serviceType:M("service_type").notNull(),transactionId:oe("transaction_id").notNull(),provider:M("provider"),description:M("description"),status:M("status").notNull().default("pending"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()});et(tie).pick({userId:!0,amount:!0,commissionAmount:!0,commissionRate:!0,transactionAmount:!0,serviceType:!0,transactionId:!0,provider:!0,description:!0,status:!0});const JC=Je("chat_conversations",{id:Ze("id").primaryKey(),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow(),isGroup:bt("is_group").default(!1),name:M("name")}),rie=Je("chat_conversation_members",{id:Ze("id").primaryKey(),conversationId:oe("conversation_id").notNull().references(()=>JC.id),userId:oe("user_id").notNull().references(()=>Tj.id),joinedAt:ye("joined_at").defaultNow(),leftAt:ye("left_at"),role:M("role").default("member").notNull()},t=>({uniqueConversationUser:jB("unique_conversation_user").on(t.conversationId,t.userId)})),sie=Je("chat_messages",{id:Ze("id").primaryKey(),conversationId:oe("conversation_id").notNull().references(()=>JC.id),senderId:oe("sender_id").notNull().references(()=>Tj.id),content:M("content").notNull(),createdAt:ye("created_at").defaultNow(),readBy:Or("read_by").default([]).notNull(),status:M("status").default("sent").notNull()});et(JC).pick({isGroup:!0,name:!0});et(rie).pick({conversationId:!0,userId:!0,role:!0});et(sie).pick({conversationId:!0,senderId:!0,content:!0});const nie=Je("notifications",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),title:M("title").notNull(),content:M("content").notNull(),type:M("type").notNull(),isRead:bt("is_read").default(!1),actionUrl:M("action_url"),relatedEntityType:M("related_entity_type"),relatedEntityId:oe("related_entity_id"),createdAt:ye("created_at").defaultNow(),expiresAt:ye("expires_at")}),aie=Je("user_devices",{id:Ze("id").primaryKey(),userId:oe("user_id").notNull(),deviceToken:M("device_token").notNull().unique(),deviceType:M("device_type").notNull(),lastSeen:ye("last_seen").defaultNow(),isActive:bt("is_active").default(!0),createdAt:ye("created_at").defaultNow()}),iie=Je("analytics_daily",{id:Ze("id").primaryKey(),date:Is("date").notNull(),metric:M("metric").notNull(),category:M("category").notNull(),district:M("district"),taluk:M("taluk"),value:$e("value").notNull(),createdAt:ye("created_at").defaultNow()}),lie=Je("reports",{id:Ze("id").primaryKey(),name:M("name").notNull(),description:M("description"),createdBy:oe("created_by").notNull(),isPublic:bt("is_public").default(!1),config:kn("config").notNull(),schedule:M("schedule"),lastRun:ye("last_run"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),oie=Je("analytics_events",{id:Ze("id").primaryKey(),userId:oe("user_id"),eventType:M("event_type").notNull(),eventSource:M("event_source").notNull(),properties:kn("properties"),timestamp:ye("timestamp").defaultNow()});et(nie).pick({userId:!0,title:!0,content:!0,type:!0,actionUrl:!0,relatedEntityType:!0,relatedEntityId:!0,expiresAt:!0});et(aie).pick({userId:!0,deviceToken:!0,deviceType:!0});et(iie).pick({date:!0,metric:!0,category:!0,district:!0,taluk:!0,value:!0});et(lie).pick({name:!0,description:!0,createdBy:!0,isPublic:!0,config:!0,schedule:!0});et(oie).pick({userId:!0,eventType:!0,eventSource:!0,properties:!0});const hU=Je("videos",{id:Ze("id").primaryKey(),title:M("title").notNull(),description:M("description"),fileName:M("file_name").notNull(),fileUrl:M("file_url").notNull(),fileSize:oe("file_size"),duration:oe("duration"),thumbnailUrl:M("thumbnail_url"),uploadedBy:oe("uploaded_by").notNull(),category:M("category").default("general"),isPublic:bt("is_public").default(!1),tags:M("tags").array(),viewCount:oe("view_count").default(0),status:M("status").default("active"),createdAt:ye("created_at").defaultNow(),updatedAt:ye("updated_at").defaultNow()}),cie=Je("video_views",{id:Ze("id").primaryKey(),videoId:oe("video_id").notNull().references(()=>hU.id),userId:oe("user_id").references(()=>Tj.id),ipAddress:M("ip_address"),watchDuration:oe("watch_time").default(0),completionPercentage:oe("completion_percentage").default(0),viewedAt:ye("viewed_at").defaultNow()});et(hU).pick({title:!0,description:!0,fileName:!0,fileUrl:!0,fileSize:!0,duration:!0,thumbnailUrl:!0,uploadedBy:!0,category:!0,isPublic:!0,tags:!0,status:!0});et(cie).pick({videoId:!0,userId:!0,ipAddress:!0,watchDuration:!0,completionPercentage:!0});function die(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=br(),[a,i]=j.useState(null);if(!t||t.userType!=="service_provider"&&t.userType!=="farmer")return e.jsxs("div",{className:"container mx-auto p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),e.jsx("p",{children:"Only service providers and farmers can add grocery products."})]});const{data:l=[],isLoading:o}=fe({queryKey:["/api/grocery/categories"]}),{data:c=[],isLoading:d}=fe({queryKey:["/api/grocery/subcategories"]}),u=a?c.filter(p=>p.parentCategoryId===a&&p.isActive):[],m=Gt({resolver:Yt(mae),defaultValues:{name:"",description:"",categoryId:0,subcategoryId:void 0,providerId:t.id,price:0,discountedPrice:void 0,stock:0,unit:"kg",isOrganic:!1,district:"",imageUrl:"",deliveryOption:"both",availableAreas:"",status:"pending"}}),h=Se({mutationFn:async p=>(await ie("POST","/api/provider/grocery/products",p)).json(),onSuccess:()=>{r({title:"Success",description:"Grocery product created successfully and submitted for admin approval."}),pe.invalidateQueries({queryKey:["/api/provider/grocery/products"]}),n("/provider/dashboard")},onError:p=>{r({title:"Error",description:p.message||"Failed to create grocery product.",variant:"destructive"})}}),g=p=>{p.providerId=t.id,h.mutate(p)},x=p=>{const y=parseInt(p);i(y),m.setValue("categoryId",y),m.setValue("subcategoryId",void 0)};return o||d?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{children:"Loading categories and subcategories..."})})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>n("/provider/dashboard"),children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ft,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Add Grocery Product"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new grocery product for customers to purchase. Your product will need admin approval before it becomes visible to customers."}),e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Product Information"})}),e.jsx(E,{children:e.jsx(Qt,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:m.control,name:"name",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Name *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Organic Basmati Rice",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"categoryId",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category *"}),e.jsxs(je,{onValueChange:x,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a category"})})}),e.jsx(ve,{children:l.map(y=>e.jsx(T,{value:y.id.toString(),children:y.name},y.id))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"subcategoryId",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Subcategory"}),e.jsxs(je,{onValueChange:y=>p.onChange(parseInt(y)),disabled:!a||u.length===0,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a subcategory"})})}),e.jsx(ve,{children:u.map(y=>e.jsx(T,{value:y.id.toString(),children:y.name},y.id))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"price",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Price () *"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0.00",...p,onChange:y=>p.onChange(parseFloat(y.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"discountedPrice",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Discounted Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0.00",...p,onChange:y=>p.onChange(y.target.value?parseFloat(y.target.value):void 0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"stock",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Stock Quantity *"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0",...p,onChange:y=>p.onChange(parseInt(y.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"unit",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Unit *"}),e.jsxs(je,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"kg",children:"Kilogram (kg)"}),e.jsx(T,{value:"gram",children:"Gram (g)"}),e.jsx(T,{value:"liter",children:"Liter (l)"}),e.jsx(T,{value:"ml",children:"Milliliter (ml)"}),e.jsx(T,{value:"piece",children:"Piece"}),e.jsx(T,{value:"dozen",children:"Dozen"}),e.jsx(T,{value:"packet",children:"Packet"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"district",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"District *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Chennai",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"deliveryOption",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Delivery Option *"}),e.jsxs(je,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"pickup",children:"Pickup Only"}),e.jsx(T,{value:"delivery",children:"Delivery Only"}),e.jsx(T,{value:"both",children:"Both Pickup & Delivery"})]})]}),e.jsx(H,{})]})})]}),e.jsx(U,{control:m.control,name:"description",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your product, its quality, origin, etc.",className:"min-h-[100px]",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"availableAreas",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Available Areas"}),e.jsx(V,{children:e.jsx(at,{placeholder:"List areas where you can deliver or customers can pickup",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"imageUrl",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Image URL"}),e.jsx(V,{children:e.jsx($,{placeholder:"https://example.com/product-image.jpg",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"isOrganic",render:({field:p})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(V,{children:e.jsx(Pn,{checked:p.value,onCheckedChange:p.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Organic Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check this if your product is organically grown/produced"})]})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>n("/provider/dashboard"),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:h.isPending,children:h.isPending?"Creating...":"Create Product"})]})]})})})]})]})}function PT(){var w;const{toast:t}=Ue(),[r,s]=j.useState("all"),[n,a]=j.useState("all"),[i,l]=j.useState(""),[o,c]=j.useState("name"),{data:d=[],isLoading:u}=fe({queryKey:["/api/grocery/categories"]}),{data:m=[],isLoading:h}=fe({queryKey:["/api/grocery/subcategories"]}),{data:g=[],isLoading:x}=fe({queryKey:["/api/grocery/products"]}),p=C=>{t({title:"Added to Cart",description:`${C.name} has been added to your cart`})},y=Array.isArray(g)?g.filter(C=>C.adminApproved===!0&&C.status==="active"):[],f=[...y.filter(C=>{var k,D;const P=r==="all"||C.categoryId===parseInt(r),S=n==="all"||C.subcategoryId===parseInt(n),A=i===""||((k=C.name)==null?void 0:k.toLowerCase().includes(i.toLowerCase()))||((D=C.description)==null?void 0:D.toLowerCase().includes(i.toLowerCase()));return P&&S&&A})].sort((C,P)=>{var S;switch(o){case"price":return C.price-P.price;case"name":return((S=C.name)==null?void 0:S.localeCompare(P.name))||0;case"rating":return(P.rating||0)-(C.rating||0);default:return 0}}),b=r==="all"?m:m.filter(C=>C.parentCategoryId===parseInt(r));return u||h||x?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading grocery products..."})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 border",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Fresh Grocery Marketplace"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Discover fresh, quality products from local farmers and trusted providers"})]}),e.jsx(O,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search products...",value:i,onChange:C=>l(C.target.value),className:"pl-10"})]}),e.jsxs(je,{value:r,onValueChange:C=>{s(C),a("all")},children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Categories"}),d.map(C=>e.jsx(T,{value:C.id.toString(),children:C.name},C.id))]})]}),e.jsxs(je,{value:n,onValueChange:a,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Subcategories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Subcategories"}),b.map(C=>e.jsx(T,{value:C.id.toString(),children:C.name},C.id))]})]}),e.jsxs(je,{value:o,onValueChange:c,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Sort by"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"name",children:"Name A-Z"}),e.jsx(T,{value:"price",children:"Price Low-High"}),e.jsx(T,{value:"rating",children:"Highest Rated"})]})]})]})}),d.length>0&&e.jsxs(O,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(ft,{className:"h-5 w-5"}),"Product Categories"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:d.map(C=>e.jsxs("button",{onClick:()=>{s(C.id.toString()),a("all")},className:`p-3 rounded-lg border text-center transition-colors ${r===C.id.toString()?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-muted border-border"}`,children:[e.jsx("div",{className:"text-sm font-medium",children:C.name}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[y.filter(P=>P.categoryId===C.id).length," items"]})]},C.id))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",f.length," of ",y.length," products",r!=="all"&&` in ${(w=d.find(C=>C.id.toString()===r))==null?void 0:w.name}`]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:[i&&e.jsxs(ae,{variant:"secondary",children:["Search: ",i]}),r!=="all"&&e.jsx(ae,{variant:"outline",children:"Category"}),n!=="all"&&e.jsx(ae,{variant:"outline",children:"Subcategory"})]})]})]}),f.length===0?e.jsx(O,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ft,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:i?`No products match "${i}"`:"No approved products available with the selected filters."}),e.jsx(_,{variant:"outline",onClick:()=>{l(""),s("all"),a("all")},children:"Clear Filters"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:f.map(C=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow overflow-hidden",children:[e.jsx("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:C.imageUrl?e.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-full h-full object-cover"}):e.jsx(ft,{className:"h-16 w-16 text-gray-400"})}),e.jsxs(G,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(Y,{className:"text-lg font-semibold line-clamp-2",children:C.name}),C.isOrganic&&e.jsxs(ae,{variant:"secondary",className:"bg-green-100 text-green-800 ml-2",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),"Organic"]})]}),C.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:C.description})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:["",C.price]}),C.discountedPrice&&C.discountedPrice<C.price&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["",C.discountedPrice]})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["per ",C.unit||"unit"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:`font-medium ${C.stock>10?"text-green-600":C.stock>0?"text-yellow-600":"text-red-600"}`,children:C.stock>0?`${C.stock} in stock`:"Out of stock"}),C.district&&e.jsx("span",{className:"text-muted-foreground",children:C.district})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground border-t pt-2",children:["Sold by Provider #",C.providerId]}),C.deliveryOption&&e.jsx("div",{className:"flex items-center gap-1 text-xs",children:e.jsx(ae,{variant:"outline",className:"text-xs",children:C.deliveryOption==="both"?"Pickup & Delivery":C.deliveryOption==="direct"?"Direct Pickup":"Service Delivery"})}),e.jsxs(_,{onClick:()=>p(C),disabled:C.stock===0,className:"w-full",size:"sm",children:[e.jsx(_r,{className:"h-4 w-4 mr-2"}),C.stock===0?"Out of Stock":"Add to Cart"]})]})]},C.id))})]})}var uie=Array.isArray,Gn=uie,mie=typeof ix=="object"&&ix&&ix.Object===Object&&ix,pU=mie,hie=pU,pie=typeof self=="object"&&self&&self.Object===Object&&self,fie=hie||pie||Function("return this")(),Yi=fie,xie=Yi,gie=xie.Symbol,qf=gie,kT=qf,fU=Object.prototype,vie=fU.hasOwnProperty,yie=fU.toString,nh=kT?kT.toStringTag:void 0;function jie(t){var r=vie.call(t,nh),s=t[nh];try{t[nh]=void 0;var n=!0}catch{}var a=yie.call(t);return n&&(r?t[nh]=s:delete t[nh]),a}var bie=jie,Nie=Object.prototype,wie=Nie.toString;function Sie(t){return wie.call(t)}var Cie=Sie,AT=qf,Pie=bie,kie=Cie,Aie="[object Null]",_ie="[object Undefined]",_T=AT?AT.toStringTag:void 0;function Tie(t){return t==null?t===void 0?_ie:Aie:_T&&_T in Object(t)?Pie(t):kie(t)}var Il=Tie;function Oie(t){return t!=null&&typeof t=="object"}var Rl=Oie,Eie=Il,Die=Rl,Mie="[object Symbol]";function Iie(t){return typeof t=="symbol"||Die(t)&&Eie(t)==Mie}var Tm=Iie,Rie=Gn,Fie=Tm,$ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lie=/^\w*$/;function Bie(t,r){if(Rie(t))return!1;var s=typeof t;return s=="number"||s=="symbol"||s=="boolean"||t==null||Fie(t)?!0:Lie.test(t)||!$ie.test(t)||r!=null&&t in Object(r)}var eP=Bie;function Vie(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}var Ko=Vie;const Om=jr(Ko);var Uie=Il,qie=Ko,zie="[object AsyncFunction]",Kie="[object Function]",Hie="[object GeneratorFunction]",Wie="[object Proxy]";function Gie(t){if(!qie(t))return!1;var r=Uie(t);return r==Kie||r==Hie||r==zie||r==Wie}var tP=Gie;const Lt=jr(tP);var Yie=Yi,Qie=Yie["__core-js_shared__"],Xie=Qie,U0=Xie,TT=function(){var t=/[^.]+$/.exec(U0&&U0.keys&&U0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Zie(t){return!!TT&&TT in t}var Jie=Zie,ele=Function.prototype,tle=ele.toString;function rle(t){if(t!=null){try{return tle.call(t)}catch{}try{return t+""}catch{}}return""}var xU=rle,sle=tP,nle=Jie,ale=Ko,ile=xU,lle=/[\\^$.*+?()[\]{}|]/g,ole=/^\[object .+?Constructor\]$/,cle=Function.prototype,dle=Object.prototype,ule=cle.toString,mle=dle.hasOwnProperty,hle=RegExp("^"+ule.call(mle).replace(lle,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ple(t){if(!ale(t)||nle(t))return!1;var r=sle(t)?hle:ole;return r.test(ile(t))}var fle=ple;function xle(t,r){return t==null?void 0:t[r]}var gle=xle,vle=fle,yle=gle;function jle(t,r){var s=yle(t,r);return vle(s)?s:void 0}var ad=jle,ble=ad,Nle=ble(Object,"create"),Oj=Nle,OT=Oj;function wle(){this.__data__=OT?OT(null):{},this.size=0}var Sle=wle;function Cle(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}var Ple=Cle,kle=Oj,Ale="__lodash_hash_undefined__",_le=Object.prototype,Tle=_le.hasOwnProperty;function Ole(t){var r=this.__data__;if(kle){var s=r[t];return s===Ale?void 0:s}return Tle.call(r,t)?r[t]:void 0}var Ele=Ole,Dle=Oj,Mle=Object.prototype,Ile=Mle.hasOwnProperty;function Rle(t){var r=this.__data__;return Dle?r[t]!==void 0:Ile.call(r,t)}var Fle=Rle,$le=Oj,Lle="__lodash_hash_undefined__";function Ble(t,r){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=$le&&r===void 0?Lle:r,this}var Vle=Ble,Ule=Sle,qle=Ple,zle=Ele,Kle=Fle,Hle=Vle;function Em(t){var r=-1,s=t==null?0:t.length;for(this.clear();++r<s;){var n=t[r];this.set(n[0],n[1])}}Em.prototype.clear=Ule;Em.prototype.delete=qle;Em.prototype.get=zle;Em.prototype.has=Kle;Em.prototype.set=Hle;var Wle=Em;function Gle(){this.__data__=[],this.size=0}var Yle=Gle;function Qle(t,r){return t===r||t!==t&&r!==r}var rP=Qle,Xle=rP;function Zle(t,r){for(var s=t.length;s--;)if(Xle(t[s][0],r))return s;return-1}var Ej=Zle,Jle=Ej,eoe=Array.prototype,toe=eoe.splice;function roe(t){var r=this.__data__,s=Jle(r,t);if(s<0)return!1;var n=r.length-1;return s==n?r.pop():toe.call(r,s,1),--this.size,!0}var soe=roe,noe=Ej;function aoe(t){var r=this.__data__,s=noe(r,t);return s<0?void 0:r[s][1]}var ioe=aoe,loe=Ej;function ooe(t){return loe(this.__data__,t)>-1}var coe=ooe,doe=Ej;function uoe(t,r){var s=this.__data__,n=doe(s,t);return n<0?(++this.size,s.push([t,r])):s[n][1]=r,this}var moe=uoe,hoe=Yle,poe=soe,foe=ioe,xoe=coe,goe=moe;function Dm(t){var r=-1,s=t==null?0:t.length;for(this.clear();++r<s;){var n=t[r];this.set(n[0],n[1])}}Dm.prototype.clear=hoe;Dm.prototype.delete=poe;Dm.prototype.get=foe;Dm.prototype.has=xoe;Dm.prototype.set=goe;var Dj=Dm,voe=ad,yoe=Yi,joe=voe(yoe,"Map"),sP=joe,ET=Wle,boe=Dj,Noe=sP;function woe(){this.size=0,this.__data__={hash:new ET,map:new(Noe||boe),string:new ET}}var Soe=woe;function Coe(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}var Poe=Coe,koe=Poe;function Aoe(t,r){var s=t.__data__;return koe(r)?s[typeof r=="string"?"string":"hash"]:s.map}var Mj=Aoe,_oe=Mj;function Toe(t){var r=_oe(this,t).delete(t);return this.size-=r?1:0,r}var Ooe=Toe,Eoe=Mj;function Doe(t){return Eoe(this,t).get(t)}var Moe=Doe,Ioe=Mj;function Roe(t){return Ioe(this,t).has(t)}var Foe=Roe,$oe=Mj;function Loe(t,r){var s=$oe(this,t),n=s.size;return s.set(t,r),this.size+=s.size==n?0:1,this}var Boe=Loe,Voe=Soe,Uoe=Ooe,qoe=Moe,zoe=Foe,Koe=Boe;function Mm(t){var r=-1,s=t==null?0:t.length;for(this.clear();++r<s;){var n=t[r];this.set(n[0],n[1])}}Mm.prototype.clear=Voe;Mm.prototype.delete=Uoe;Mm.prototype.get=qoe;Mm.prototype.has=zoe;Mm.prototype.set=Koe;var nP=Mm,gU=nP,Hoe="Expected a function";function aP(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError(Hoe);var s=function(){var n=arguments,a=r?r.apply(this,n):n[0],i=s.cache;if(i.has(a))return i.get(a);var l=t.apply(this,n);return s.cache=i.set(a,l)||i,l};return s.cache=new(aP.Cache||gU),s}aP.Cache=gU;var vU=aP;const Woe=jr(vU);var Goe=vU,Yoe=500;function Qoe(t){var r=Goe(t,function(n){return s.size===Yoe&&s.clear(),n}),s=r.cache;return r}var Xoe=Qoe,Zoe=Xoe,Joe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ece=/\\(\\)?/g,tce=Zoe(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(Joe,function(s,n,a,i){r.push(a?i.replace(ece,"$1"):n||s)}),r}),rce=tce;function sce(t,r){for(var s=-1,n=t==null?0:t.length,a=Array(n);++s<n;)a[s]=r(t[s],s,t);return a}var iP=sce,DT=qf,nce=iP,ace=Gn,ice=Tm,MT=DT?DT.prototype:void 0,IT=MT?MT.toString:void 0;function yU(t){if(typeof t=="string")return t;if(ace(t))return nce(t,yU)+"";if(ice(t))return IT?IT.call(t):"";var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var lce=yU,oce=lce;function cce(t){return t==null?"":oce(t)}var jU=cce,dce=Gn,uce=eP,mce=rce,hce=jU;function pce(t,r){return dce(t)?t:uce(t,r)?[t]:mce(hce(t))}var bU=pce,fce=Tm;function xce(t){if(typeof t=="string"||fce(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}var Ij=xce,gce=bU,vce=Ij;function yce(t,r){r=gce(r,t);for(var s=0,n=r.length;t!=null&&s<n;)t=t[vce(r[s++])];return s&&s==n?t:void 0}var lP=yce,jce=lP;function bce(t,r,s){var n=t==null?void 0:jce(t,r);return n===void 0?s:n}var NU=bce;const ma=jr(NU);function Nce(t){return t==null}var wce=Nce;const Vt=jr(wce);var Sce=Il,Cce=Gn,Pce=Rl,kce="[object String]";function Ace(t){return typeof t=="string"||!Cce(t)&&Pce(t)&&Sce(t)==kce}var _ce=Ace;const Kc=jr(_ce);var wU={exports:{}},kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oP=Symbol.for("react.element"),cP=Symbol.for("react.portal"),Rj=Symbol.for("react.fragment"),Fj=Symbol.for("react.strict_mode"),$j=Symbol.for("react.profiler"),Lj=Symbol.for("react.provider"),Bj=Symbol.for("react.context"),Tce=Symbol.for("react.server_context"),Vj=Symbol.for("react.forward_ref"),Uj=Symbol.for("react.suspense"),qj=Symbol.for("react.suspense_list"),zj=Symbol.for("react.memo"),Kj=Symbol.for("react.lazy"),Oce=Symbol.for("react.offscreen"),SU;SU=Symbol.for("react.module.reference");function Ra(t){if(typeof t=="object"&&t!==null){var r=t.$$typeof;switch(r){case oP:switch(t=t.type,t){case Rj:case $j:case Fj:case Uj:case qj:return t;default:switch(t=t&&t.$$typeof,t){case Tce:case Bj:case Vj:case Kj:case zj:case Lj:return t;default:return r}}case cP:return r}}}kr.ContextConsumer=Bj;kr.ContextProvider=Lj;kr.Element=oP;kr.ForwardRef=Vj;kr.Fragment=Rj;kr.Lazy=Kj;kr.Memo=zj;kr.Portal=cP;kr.Profiler=$j;kr.StrictMode=Fj;kr.Suspense=Uj;kr.SuspenseList=qj;kr.isAsyncMode=function(){return!1};kr.isConcurrentMode=function(){return!1};kr.isContextConsumer=function(t){return Ra(t)===Bj};kr.isContextProvider=function(t){return Ra(t)===Lj};kr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===oP};kr.isForwardRef=function(t){return Ra(t)===Vj};kr.isFragment=function(t){return Ra(t)===Rj};kr.isLazy=function(t){return Ra(t)===Kj};kr.isMemo=function(t){return Ra(t)===zj};kr.isPortal=function(t){return Ra(t)===cP};kr.isProfiler=function(t){return Ra(t)===$j};kr.isStrictMode=function(t){return Ra(t)===Fj};kr.isSuspense=function(t){return Ra(t)===Uj};kr.isSuspenseList=function(t){return Ra(t)===qj};kr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Rj||t===$j||t===Fj||t===Uj||t===qj||t===Oce||typeof t=="object"&&t!==null&&(t.$$typeof===Kj||t.$$typeof===zj||t.$$typeof===Lj||t.$$typeof===Bj||t.$$typeof===Vj||t.$$typeof===SU||t.getModuleId!==void 0)};kr.typeOf=Ra;wU.exports=kr;var Ece=wU.exports,Dce=Il,Mce=Rl,Ice="[object Number]";function Rce(t){return typeof t=="number"||Mce(t)&&Dce(t)==Ice}var CU=Rce;const Fce=jr(CU);var $ce=CU;function Lce(t){return $ce(t)&&t!=+t}var Bce=Lce;const zf=jr(Bce);var jn=function(r){return r===0?0:r>0?1:-1},uc=function(r){return Kc(r)&&r.indexOf("%")===r.length-1},Ye=function(r){return Fce(r)&&!zf(r)},Vce=function(r){return Vt(r)},Ms=function(r){return Ye(r)||Kc(r)},Uce=0,Im=function(r){var s=++Uce;return"".concat(r||"").concat(s)},bn=function(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ye(r)&&!Kc(r))return n;var i;if(uc(r)){var l=r.indexOf("%");i=s*parseFloat(r.slice(0,l))/100}else i=+r;return zf(i)&&(i=n),a&&i>s&&(i=s),i},eo=function(r){if(!r)return null;var s=Object.keys(r);return s&&s.length?r[s[0]]:null},qce=function(r){if(!Array.isArray(r))return!1;for(var s=r.length,n={},a=0;a<s;a++)if(!n[r[a]])n[r[a]]=!0;else return!0;return!1},sa=function(r,s){return Ye(r)&&Ye(s)?function(n){return r+n*(s-r)}:function(){return s}};function Av(t,r,s){return!t||!t.length?null:t.find(function(n){return n&&(typeof r=="function"?r(n):ma(n,r))===s})}var zce=function(r,s){return Ye(r)&&Ye(s)?r-s:Kc(r)&&Kc(s)?r.localeCompare(s):r instanceof Date&&s instanceof Date?r.getTime()-s.getTime():String(r).localeCompare(String(s))};function iu(t,r){for(var s in t)if({}.hasOwnProperty.call(t,s)&&(!{}.hasOwnProperty.call(r,s)||t[s]!==r[s]))return!1;for(var n in r)if({}.hasOwnProperty.call(r,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function h1(t){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},h1(t)}var Kce=["viewBox","children"],Hce=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],RT=["points","pathLength"],q0={svg:Kce,polygon:RT,polyline:RT},dP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_v=function(r,s){if(!r||typeof r=="function"||typeof r=="boolean")return null;var n=r;if(j.isValidElement(r)&&(n=r.props),!Om(n))return null;var a={};return Object.keys(n).forEach(function(i){dP.includes(i)&&(a[i]=s||function(l){return n[i](n,l)})}),a},Wce=function(r,s,n){return function(a){return r(s,n,a),null}},Hc=function(r,s,n){if(!Om(r)||h1(r)!=="object")return null;var a=null;return Object.keys(r).forEach(function(i){var l=r[i];dP.includes(i)&&typeof l=="function"&&(a||(a={}),a[i]=Wce(l,s,n))}),a},Gce=["children"],Yce=["children"];function FT(t,r){if(t==null)return{};var s=Qce(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Qce(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function p1(t){"@babel/helpers - typeof";return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p1(t)}var $T={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},gl=function(r){return typeof r=="string"?r:r?r.displayName||r.name||"Component":""},LT=null,z0=null,uP=function t(r){if(r===LT&&Array.isArray(z0))return z0;var s=[];return j.Children.forEach(r,function(n){Vt(n)||(Ece.isFragment(n)?s=s.concat(t(n.props.children)):s.push(n))}),z0=s,LT=r,s};function ha(t,r){var s=[],n=[];return Array.isArray(r)?n=r.map(function(a){return gl(a)}):n=[gl(r)],uP(t).forEach(function(a){var i=ma(a,"type.displayName")||ma(a,"type.name");n.indexOf(i)!==-1&&s.push(a)}),s}function Zn(t,r){var s=ha(t,r);return s&&s[0]}var BT=function(r){if(!r||!r.props)return!1;var s=r.props,n=s.width,a=s.height;return!(!Ye(n)||n<=0||!Ye(a)||a<=0)},Xce=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Zce=function(r){return r&&r.type&&Kc(r.type)&&Xce.indexOf(r.type)>=0},Jce=function(r){return r&&p1(r)==="object"&&"clipDot"in r},ede=function(r,s,n,a){var i,l=(i=q0==null?void 0:q0[a])!==null&&i!==void 0?i:[];return s.startsWith("data-")||!Lt(r)&&(a&&l.includes(s)||Hce.includes(s))||n&&dP.includes(s)},St=function(r,s,n){if(!r||typeof r=="function"||typeof r=="boolean")return null;var a=r;if(j.isValidElement(r)&&(a=r.props),!Om(a))return null;var i={};return Object.keys(a).forEach(function(l){var o;ede((o=a)===null||o===void 0?void 0:o[l],l,s,n)&&(i[l]=a[l])}),i},f1=function t(r,s){if(r===s)return!0;var n=j.Children.count(r);if(n!==j.Children.count(s))return!1;if(n===0)return!0;if(n===1)return VT(Array.isArray(r)?r[0]:r,Array.isArray(s)?s[0]:s);for(var a=0;a<n;a++){var i=r[a],l=s[a];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!VT(i,l))return!1}return!0},VT=function(r,s){if(Vt(r)&&Vt(s))return!0;if(!Vt(r)&&!Vt(s)){var n=r.props||{},a=n.children,i=FT(n,Gce),l=s.props||{},o=l.children,c=FT(l,Yce);return a&&o?iu(i,c)&&f1(a,o):!a&&!o?iu(i,c):!1}return!1},UT=function(r,s){var n=[],a={};return uP(r).forEach(function(i,l){if(Zce(i))n.push(i);else if(i){var o=gl(i.type),c=s[o]||{},d=c.handler,u=c.once;if(d&&(!u||!a[o])){var m=d(i,o,l);n.push(m),a[o]=!0}}}),n},tde=function(r){var s=r&&r.type;return s&&$T[s]?$T[s]:null},rde=function(r,s){return uP(s).indexOf(r)},sde=["children","width","height","viewBox","className","style","title","desc"];function x1(){return x1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},x1.apply(this,arguments)}function nde(t,r){if(t==null)return{};var s=ade(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ade(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function g1(t){var r=t.children,s=t.width,n=t.height,a=t.viewBox,i=t.className,l=t.style,o=t.title,c=t.desc,d=nde(t,sde),u=a||{width:s,height:n,x:0,y:0},m=Ut("recharts-surface",i);return Q.createElement("svg",x1({},St(d,!0,"svg"),{className:m,width:s,height:n,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Q.createElement("title",null,o),Q.createElement("desc",null,c),r)}var ide=["children","className"];function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},v1.apply(this,arguments)}function lde(t,r){if(t==null)return{};var s=ode(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ode(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}var hr=Q.forwardRef(function(t,r){var s=t.children,n=t.className,a=lde(t,ide),i=Ut("recharts-layer",n);return Q.createElement("g",v1({className:i},St(a,!0),{ref:r}),s)}),oi=function(r,s){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function cde(t,r,s){var n=-1,a=t.length;r<0&&(r=-r>a?0:a+r),s=s>a?a:s,s<0&&(s+=a),a=r>s?0:s-r>>>0,r>>>=0;for(var i=Array(a);++n<a;)i[n]=t[n+r];return i}var dde=cde,ude=dde;function mde(t,r,s){var n=t.length;return s=s===void 0?n:s,!r&&s>=n?t:ude(t,r,s)}var hde=mde,pde="\\ud800-\\udfff",fde="\\u0300-\\u036f",xde="\\ufe20-\\ufe2f",gde="\\u20d0-\\u20ff",vde=fde+xde+gde,yde="\\ufe0e\\ufe0f",jde="\\u200d",bde=RegExp("["+jde+pde+vde+yde+"]");function Nde(t){return bde.test(t)}var PU=Nde;function wde(t){return t.split("")}var Sde=wde,kU="\\ud800-\\udfff",Cde="\\u0300-\\u036f",Pde="\\ufe20-\\ufe2f",kde="\\u20d0-\\u20ff",Ade=Cde+Pde+kde,_de="\\ufe0e\\ufe0f",Tde="["+kU+"]",y1="["+Ade+"]",j1="\\ud83c[\\udffb-\\udfff]",Ode="(?:"+y1+"|"+j1+")",AU="[^"+kU+"]",_U="(?:\\ud83c[\\udde6-\\uddff]){2}",TU="[\\ud800-\\udbff][\\udc00-\\udfff]",Ede="\\u200d",OU=Ode+"?",EU="["+_de+"]?",Dde="(?:"+Ede+"(?:"+[AU,_U,TU].join("|")+")"+EU+OU+")*",Mde=EU+OU+Dde,Ide="(?:"+[AU+y1+"?",y1,_U,TU,Tde].join("|")+")",Rde=RegExp(j1+"(?="+j1+")|"+Ide+Mde,"g");function Fde(t){return t.match(Rde)||[]}var $de=Fde,Lde=Sde,Bde=PU,Vde=$de;function Ude(t){return Bde(t)?Vde(t):Lde(t)}var qde=Ude,zde=hde,Kde=PU,Hde=qde,Wde=jU;function Gde(t){return function(r){r=Wde(r);var s=Kde(r)?Hde(r):void 0,n=s?s[0]:r.charAt(0),a=s?zde(s,1).join(""):r.slice(1);return n[t]()+a}}var Yde=Gde,Qde=Yde,Xde=Qde("toUpperCase"),Zde=Xde;const Hj=jr(Zde);function Mr(t){return function(){return t}}const DU=Math.cos,Tv=Math.sin,gi=Math.sqrt,Ov=Math.PI,Wj=2*Ov,b1=Math.PI,N1=2*b1,tc=1e-6,Jde=N1-tc;function MU(t){this._+=t[0];for(let r=1,s=t.length;r<s;++r)this._+=arguments[r]+t[r]}function eue(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return MU;const s=10**r;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*s)/s+n[a]}}class tue{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?MU:eue(r)}moveTo(r,s){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+s}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,s){this._append`L${this._x1=+r},${this._y1=+s}`}quadraticCurveTo(r,s,n,a){this._append`Q${+r},${+s},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(r,s,n,a,i,l){this._append`C${+r},${+s},${+n},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(r,s,n,a,i){if(r=+r,s=+s,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=n-r,d=a-s,u=l-r,m=o-s,h=u*u+m*m;if(this._x1===null)this._append`M${this._x1=r},${this._y1=s}`;else if(h>tc)if(!(Math.abs(m*c-d*u)>tc)||!i)this._append`L${this._x1=r},${this._y1=s}`;else{let g=n-l,x=a-o,p=c*c+d*d,y=g*g+x*x,v=Math.sqrt(p),f=Math.sqrt(h),b=i*Math.tan((b1-Math.acos((p+h-y)/(2*v*f)))/2),N=b/f,w=b/v;Math.abs(N-1)>tc&&this._append`L${r+N*u},${s+N*m}`,this._append`A${i},${i},0,0,${+(m*g>u*x)},${this._x1=r+w*c},${this._y1=s+w*d}`}}arc(r,s,n,a,i,l){if(r=+r,s=+s,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),d=r+o,u=s+c,m=1^l,h=l?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>tc||Math.abs(this._y1-u)>tc)&&this._append`L${d},${u}`,n&&(h<0&&(h=h%N1+N1),h>Jde?this._append`A${n},${n},0,1,${m},${r-o},${s-c}A${n},${n},0,1,${m},${this._x1=d},${this._y1=u}`:h>tc&&this._append`A${n},${n},0,${+(h>=b1)},${m},${this._x1=r+n*Math.cos(i)},${this._y1=s+n*Math.sin(i)}`)}rect(r,s,n,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+s}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function mP(t){let r=3;return t.digits=function(s){if(!arguments.length)return r;if(s==null)r=null;else{const n=Math.floor(s);if(!(n>=0))throw new RangeError(`invalid digits: ${s}`);r=n}return t},()=>new tue(r)}function hP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function IU(t){this._context=t}IU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function Gj(t){return new IU(t)}function RU(t){return t[0]}function FU(t){return t[1]}function $U(t,r){var s=Mr(!0),n=null,a=Gj,i=null,l=mP(o);t=typeof t=="function"?t:t===void 0?RU:Mr(t),r=typeof r=="function"?r:r===void 0?FU:Mr(r);function o(c){var d,u=(c=hP(c)).length,m,h=!1,g;for(n==null&&(i=a(g=l())),d=0;d<=u;++d)!(d<u&&s(m=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(m,d,c),+r(m,d,c));if(g)return i=null,g+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Mr(+c),o):t},o.y=function(c){return arguments.length?(r=typeof c=="function"?c:Mr(+c),o):r},o.defined=function(c){return arguments.length?(s=typeof c=="function"?c:Mr(!!c),o):s},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function Dx(t,r,s){var n=null,a=Mr(!0),i=null,l=Gj,o=null,c=mP(d);t=typeof t=="function"?t:t===void 0?RU:Mr(+t),r=typeof r=="function"?r:Mr(r===void 0?0:+r),s=typeof s=="function"?s:s===void 0?FU:Mr(+s);function d(m){var h,g,x,p=(m=hP(m)).length,y,v=!1,f,b=new Array(p),N=new Array(p);for(i==null&&(o=l(f=c())),h=0;h<=p;++h){if(!(h<p&&a(y=m[h],h,m))===v)if(v=!v)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=h-1;x>=g;--x)o.point(b[x],N[x]);o.lineEnd(),o.areaEnd()}v&&(b[h]=+t(y,h,m),N[h]=+r(y,h,m),o.point(n?+n(y,h,m):b[h],s?+s(y,h,m):N[h]))}if(f)return o=null,f+""||null}function u(){return $U().defined(a).curve(l).context(i)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:Mr(+m),n=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Mr(+m),d):t},d.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Mr(+m),d):n},d.y=function(m){return arguments.length?(r=typeof m=="function"?m:Mr(+m),s=null,d):r},d.y0=function(m){return arguments.length?(r=typeof m=="function"?m:Mr(+m),d):r},d.y1=function(m){return arguments.length?(s=m==null?null:typeof m=="function"?m:Mr(+m),d):s},d.lineX0=d.lineY0=function(){return u().x(t).y(r)},d.lineY1=function(){return u().x(t).y(s)},d.lineX1=function(){return u().x(n).y(r)},d.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Mr(!!m),d):a},d.curve=function(m){return arguments.length?(l=m,i!=null&&(o=l(i)),d):l},d.context=function(m){return arguments.length?(m==null?i=o=null:o=l(i=m),d):i},d}class LU{constructor(r,s){this._context=r,this._x=s}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,s){switch(r=+r,s=+s,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,s,r,s):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+s)/2,r,this._y0,r,s);break}}this._x0=r,this._y0=s}}function rue(t){return new LU(t,!0)}function sue(t){return new LU(t,!1)}const pP={draw(t,r){const s=gi(r/Ov);t.moveTo(s,0),t.arc(0,0,s,0,Wj)}},nue={draw(t,r){const s=gi(r/5)/2;t.moveTo(-3*s,-s),t.lineTo(-s,-s),t.lineTo(-s,-3*s),t.lineTo(s,-3*s),t.lineTo(s,-s),t.lineTo(3*s,-s),t.lineTo(3*s,s),t.lineTo(s,s),t.lineTo(s,3*s),t.lineTo(-s,3*s),t.lineTo(-s,s),t.lineTo(-3*s,s),t.closePath()}},BU=gi(1/3),aue=BU*2,iue={draw(t,r){const s=gi(r/aue),n=s*BU;t.moveTo(0,-s),t.lineTo(n,0),t.lineTo(0,s),t.lineTo(-n,0),t.closePath()}},lue={draw(t,r){const s=gi(r),n=-s/2;t.rect(n,n,s,s)}},oue=.8908130915292852,VU=Tv(Ov/10)/Tv(7*Ov/10),cue=Tv(Wj/10)*VU,due=-DU(Wj/10)*VU,uue={draw(t,r){const s=gi(r*oue),n=cue*s,a=due*s;t.moveTo(0,-s),t.lineTo(n,a);for(let i=1;i<5;++i){const l=Wj*i/5,o=DU(l),c=Tv(l);t.lineTo(c*s,-o*s),t.lineTo(o*n-c*a,c*n+o*a)}t.closePath()}},K0=gi(3),mue={draw(t,r){const s=-gi(r/(K0*3));t.moveTo(0,s*2),t.lineTo(-K0*s,-s),t.lineTo(K0*s,-s),t.closePath()}},ja=-.5,ba=gi(3)/2,w1=1/gi(12),hue=(w1/2+1)*3,pue={draw(t,r){const s=gi(r/hue),n=s/2,a=s*w1,i=n,l=s*w1+s,o=-i,c=l;t.moveTo(n,a),t.lineTo(i,l),t.lineTo(o,c),t.lineTo(ja*n-ba*a,ba*n+ja*a),t.lineTo(ja*i-ba*l,ba*i+ja*l),t.lineTo(ja*o-ba*c,ba*o+ja*c),t.lineTo(ja*n+ba*a,ja*a-ba*n),t.lineTo(ja*i+ba*l,ja*l-ba*i),t.lineTo(ja*o+ba*c,ja*c-ba*o),t.closePath()}};function fue(t,r){let s=null,n=mP(a);t=typeof t=="function"?t:Mr(t||pP),r=typeof r=="function"?r:Mr(r===void 0?64:+r);function a(){let i;if(s||(s=i=n()),t.apply(this,arguments).draw(s,+r.apply(this,arguments)),i)return s=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Mr(i),a):t},a.size=function(i){return arguments.length?(r=typeof i=="function"?i:Mr(+i),a):r},a.context=function(i){return arguments.length?(s=i??null,a):s},a}function Ev(){}function Dv(t,r,s){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+s)/6)}function UU(t){this._context=t}UU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dv(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function xue(t){return new UU(t)}function qU(t){this._context=t}qU.prototype={areaStart:Ev,areaEnd:Ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:Dv(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function gue(t){return new qU(t)}function zU(t){this._context=t}zU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var s=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(s,n):this._context.moveTo(s,n);break;case 3:this._point=4;default:Dv(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function vue(t){return new zU(t)}function KU(t){this._context=t}KU.prototype={areaStart:Ev,areaEnd:Ev,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function yue(t){return new KU(t)}function qT(t){return t<0?-1:1}function zT(t,r,s){var n=t._x1-t._x0,a=r-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),l=(s-t._y1)/(a||n<0&&-0),o=(i*a+l*n)/(n+a);return(qT(i)+qT(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function KT(t,r){var s=t._x1-t._x0;return s?(3*(t._y1-t._y0)/s-r)/2:r}function H0(t,r,s){var n=t._x0,a=t._y0,i=t._x1,l=t._y1,o=(i-n)/3;t._context.bezierCurveTo(n+o,a+o*r,i-o,l-o*s,i,l)}function Mv(t){this._context=t}Mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H0(this,this._t0,KT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var s=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,H0(this,KT(this,s=zT(this,t,r)),s);break;default:H0(this,this._t0,s=zT(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=s}}};function HU(t){this._context=new WU(t)}(HU.prototype=Object.create(Mv.prototype)).point=function(t,r){Mv.prototype.point.call(this,r,t)};function WU(t){this._context=t}WU.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,s,n,a,i){this._context.bezierCurveTo(r,t,n,s,i,a)}};function jue(t){return new Mv(t)}function bue(t){return new HU(t)}function GU(t){this._context=t}GU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,s=t.length;if(s)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),s===2)this._context.lineTo(t[1],r[1]);else for(var n=HT(t),a=HT(r),i=0,l=1;l<s;++i,++l)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[l],r[l]);(this._line||this._line!==0&&s===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function HT(t){var r,s=t.length-1,n,a=new Array(s),i=new Array(s),l=new Array(s);for(a[0]=0,i[0]=2,l[0]=t[0]+2*t[1],r=1;r<s-1;++r)a[r]=1,i[r]=4,l[r]=4*t[r]+2*t[r+1];for(a[s-1]=2,i[s-1]=7,l[s-1]=8*t[s-1]+t[s],r=1;r<s;++r)n=a[r]/i[r-1],i[r]-=n,l[r]-=n*l[r-1];for(a[s-1]=l[s-1]/i[s-1],r=s-2;r>=0;--r)a[r]=(l[r]-a[r+1])/i[r];for(i[s-1]=(t[s]+a[s-1])/2,r=0;r<s-1;++r)i[r]=2*t[r+1]-a[r+1];return[a,i]}function Nue(t){return new GU(t)}function Yj(t,r){this._context=t,this._t=r}Yj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var s=this._x*(1-this._t)+t*this._t;this._context.lineTo(s,this._y),this._context.lineTo(s,r)}break}}this._x=t,this._y=r}};function wue(t){return new Yj(t,.5)}function Sue(t){return new Yj(t,0)}function Cue(t){return new Yj(t,1)}function $u(t,r){if((l=t.length)>1)for(var s=1,n,a,i=t[r[0]],l,o=i.length;s<l;++s)for(a=i,i=t[r[s]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function S1(t){for(var r=t.length,s=new Array(r);--r>=0;)s[r]=r;return s}function Pue(t,r){return t[r]}function kue(t){const r=[];return r.key=t,r}function Aue(){var t=Mr([]),r=S1,s=$u,n=Pue;function a(i){var l=Array.from(t.apply(this,arguments),kue),o,c=l.length,d=-1,u;for(const m of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+n(m,l[o].key,d,i)]).data=m;for(o=0,u=hP(r(l));o<c;++o)l[u[o]].index=o;return s(l,u),l}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Mr(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Mr(+i),a):n},a.order=function(i){return arguments.length?(r=i==null?S1:typeof i=="function"?i:Mr(Array.from(i)),a):r},a.offset=function(i){return arguments.length?(s=i??$u,a):s},a}function _ue(t,r){if((n=t.length)>0){for(var s,n,a=0,i=t[0].length,l;a<i;++a){for(l=s=0;s<n;++s)l+=t[s][a][1]||0;if(l)for(s=0;s<n;++s)t[s][a][1]/=l}$u(t,r)}}function Tue(t,r){if((a=t.length)>0){for(var s=0,n=t[r[0]],a,i=n.length;s<i;++s){for(var l=0,o=0;l<a;++l)o+=t[l][s][1]||0;n[s][1]+=n[s][0]=-o/2}$u(t,r)}}function Oue(t,r){if(!(!((l=t.length)>0)||!((i=(a=t[r[0]]).length)>0))){for(var s=0,n=1,a,i,l;n<i;++n){for(var o=0,c=0,d=0;o<l;++o){for(var u=t[r[o]],m=u[n][1]||0,h=u[n-1][1]||0,g=(m-h)/2,x=0;x<o;++x){var p=t[r[x]],y=p[n][1]||0,v=p[n-1][1]||0;g+=y-v}c+=m,d+=g*m}a[n-1][1]+=a[n-1][0]=s,c&&(s-=d/c)}a[n-1][1]+=a[n-1][0]=s,$u(t,r)}}function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mp(t)}var Eue=["type","size","sizeType"];function C1(){return C1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},C1.apply(this,arguments)}function WT(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function GT(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?WT(Object(s),!0).forEach(function(n){Due(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):WT(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Due(t,r,s){return r=Mue(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Mue(t){var r=Iue(t,"string");return Mp(r)=="symbol"?r:r+""}function Iue(t,r){if(Mp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Rue(t,r){if(t==null)return{};var s=Fue(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Fue(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}var YU={symbolCircle:pP,symbolCross:nue,symbolDiamond:iue,symbolSquare:lue,symbolStar:uue,symbolTriangle:mue,symbolWye:pue},$ue=Math.PI/180,Lue=function(r){var s="symbol".concat(Hj(r));return YU[s]||pP},Bue=function(r,s,n){if(s==="area")return r;switch(n){case"cross":return 5*r*r/9;case"diamond":return .5*r*r/Math.sqrt(3);case"square":return r*r;case"star":{var a=18*$ue;return 1.25*r*r*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*r*r/4;case"wye":return(21-10*Math.sqrt(3))*r*r/8;default:return Math.PI*r*r/4}},Vue=function(r,s){YU["symbol".concat(Hj(r))]=s},fP=function(r){var s=r.type,n=s===void 0?"circle":s,a=r.size,i=a===void 0?64:a,l=r.sizeType,o=l===void 0?"area":l,c=Rue(r,Eue),d=GT(GT({},c),{},{type:n,size:i,sizeType:o}),u=function(){var y=Lue(n),v=fue().type(y).size(Bue(i,o,n));return v()},m=d.className,h=d.cx,g=d.cy,x=St(d,!0);return h===+h&&g===+g&&i===+i?Q.createElement("path",C1({},x,{className:Ut("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(g,")"),d:u()})):null};fP.registerSymbol=Vue;function Lu(t){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lu(t)}function P1(){return P1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},P1.apply(this,arguments)}function YT(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Uue(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?YT(Object(s),!0).forEach(function(n){Ip(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):YT(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function que(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function zue(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XU(n.key),n)}}function Kue(t,r,s){return r&&zue(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hue(t,r,s){return r=Iv(r),Wue(t,QU()?Reflect.construct(r,s||[],Iv(t).constructor):r.apply(t,s))}function Wue(t,r){if(r&&(Lu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gue(t)}function Gue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QU=function(){return!!t})()}function Iv(t){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Iv(t)}function Yue(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&k1(t,r)}function k1(t,r){return k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},k1(t,r)}function Ip(t,r,s){return r=XU(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function XU(t){var r=Que(t,"string");return Lu(r)=="symbol"?r:r+""}function Que(t,r){if(Lu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Na=32,xP=function(t){function r(){return que(this,r),Hue(this,r,arguments)}return Yue(r,t),Kue(r,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Na/2,l=Na/6,o=Na/3,c=n.inactive?a:n.color;if(n.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Na,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Na,"M").concat(2*o,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Na/8,"h").concat(Na,"v").concat(Na*3/4,"h").concat(-Na,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(n.legendIcon)){var d=Uue({},n);return delete d.legendIcon,Q.cloneElement(n.legendIcon,d)}return Q.createElement(fP,{fill:c,cx:i,cy:i,size:Na,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,l=a.iconSize,o=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:Na,height:Na},m={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,x){var p=g.formatter||c,y=Ut(Ip(Ip({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",g.inactive));if(g.type==="none")return null;var v=Lt(g.value)?null:g.value;oi(!Lt(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var f=g.inactive?d:g.color;return Q.createElement("li",P1({className:y,style:m,key:"legend-item-".concat(x)},Hc(n.props,g,x)),Q.createElement(g1,{width:l,height:l,viewBox:u,style:h},n.renderIcon(g)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},p?p(v,g,x):v))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,l=n.align;if(!a||!a.length)return null;var o={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(j.PureComponent);Ip(xP,"displayName","Legend");Ip(xP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Xue=Dj;function Zue(){this.__data__=new Xue,this.size=0}var Jue=Zue;function eme(t){var r=this.__data__,s=r.delete(t);return this.size=r.size,s}var tme=eme;function rme(t){return this.__data__.get(t)}var sme=rme;function nme(t){return this.__data__.has(t)}var ame=nme,ime=Dj,lme=sP,ome=nP,cme=200;function dme(t,r){var s=this.__data__;if(s instanceof ime){var n=s.__data__;if(!lme||n.length<cme-1)return n.push([t,r]),this.size=++s.size,this;s=this.__data__=new ome(n)}return s.set(t,r),this.size=s.size,this}var ume=dme,mme=Dj,hme=Jue,pme=tme,fme=sme,xme=ame,gme=ume;function Rm(t){var r=this.__data__=new mme(t);this.size=r.size}Rm.prototype.clear=hme;Rm.prototype.delete=pme;Rm.prototype.get=fme;Rm.prototype.has=xme;Rm.prototype.set=gme;var ZU=Rm,vme="__lodash_hash_undefined__";function yme(t){return this.__data__.set(t,vme),this}var jme=yme;function bme(t){return this.__data__.has(t)}var Nme=bme,wme=nP,Sme=jme,Cme=Nme;function Rv(t){var r=-1,s=t==null?0:t.length;for(this.__data__=new wme;++r<s;)this.add(t[r])}Rv.prototype.add=Rv.prototype.push=Sme;Rv.prototype.has=Cme;var JU=Rv;function Pme(t,r){for(var s=-1,n=t==null?0:t.length;++s<n;)if(r(t[s],s,t))return!0;return!1}var eq=Pme;function kme(t,r){return t.has(r)}var tq=kme,Ame=JU,_me=eq,Tme=tq,Ome=1,Eme=2;function Dme(t,r,s,n,a,i){var l=s&Ome,o=t.length,c=r.length;if(o!=c&&!(l&&c>o))return!1;var d=i.get(t),u=i.get(r);if(d&&u)return d==r&&u==t;var m=-1,h=!0,g=s&Eme?new Ame:void 0;for(i.set(t,r),i.set(r,t);++m<o;){var x=t[m],p=r[m];if(n)var y=l?n(p,x,m,r,t,i):n(x,p,m,t,r,i);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!_me(r,function(v,f){if(!Tme(g,f)&&(x===v||a(x,v,s,n,i)))return g.push(f)})){h=!1;break}}else if(!(x===p||a(x,p,s,n,i))){h=!1;break}}return i.delete(t),i.delete(r),h}var rq=Dme,Mme=Yi,Ime=Mme.Uint8Array,Rme=Ime;function Fme(t){var r=-1,s=Array(t.size);return t.forEach(function(n,a){s[++r]=[a,n]}),s}var $me=Fme;function Lme(t){var r=-1,s=Array(t.size);return t.forEach(function(n){s[++r]=n}),s}var gP=Lme,QT=qf,XT=Rme,Bme=rP,Vme=rq,Ume=$me,qme=gP,zme=1,Kme=2,Hme="[object Boolean]",Wme="[object Date]",Gme="[object Error]",Yme="[object Map]",Qme="[object Number]",Xme="[object RegExp]",Zme="[object Set]",Jme="[object String]",ehe="[object Symbol]",the="[object ArrayBuffer]",rhe="[object DataView]",ZT=QT?QT.prototype:void 0,W0=ZT?ZT.valueOf:void 0;function she(t,r,s,n,a,i,l){switch(s){case rhe:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case the:return!(t.byteLength!=r.byteLength||!i(new XT(t),new XT(r)));case Hme:case Wme:case Qme:return Bme(+t,+r);case Gme:return t.name==r.name&&t.message==r.message;case Xme:case Jme:return t==r+"";case Yme:var o=Ume;case Zme:var c=n&zme;if(o||(o=qme),t.size!=r.size&&!c)return!1;var d=l.get(t);if(d)return d==r;n|=Kme,l.set(t,r);var u=Vme(o(t),o(r),n,a,i,l);return l.delete(t),u;case ehe:if(W0)return W0.call(t)==W0.call(r)}return!1}var nhe=she;function ahe(t,r){for(var s=-1,n=r.length,a=t.length;++s<n;)t[a+s]=r[s];return t}var sq=ahe,ihe=sq,lhe=Gn;function ohe(t,r,s){var n=r(t);return lhe(t)?n:ihe(n,s(t))}var che=ohe;function dhe(t,r){for(var s=-1,n=t==null?0:t.length,a=0,i=[];++s<n;){var l=t[s];r(l,s,t)&&(i[a++]=l)}return i}var uhe=dhe;function mhe(){return[]}var hhe=mhe,phe=uhe,fhe=hhe,xhe=Object.prototype,ghe=xhe.propertyIsEnumerable,JT=Object.getOwnPropertySymbols,vhe=JT?function(t){return t==null?[]:(t=Object(t),phe(JT(t),function(r){return ghe.call(t,r)}))}:fhe,yhe=vhe;function jhe(t,r){for(var s=-1,n=Array(t);++s<t;)n[s]=r(s);return n}var bhe=jhe,Nhe=Il,whe=Rl,She="[object Arguments]";function Che(t){return whe(t)&&Nhe(t)==She}var Phe=Che,e4=Phe,khe=Rl,nq=Object.prototype,Ahe=nq.hasOwnProperty,_he=nq.propertyIsEnumerable,The=e4(function(){return arguments}())?e4:function(t){return khe(t)&&Ahe.call(t,"callee")&&!_he.call(t,"callee")},vP=The,Fv={exports:{}};function Ohe(){return!1}var Ehe=Ohe;Fv.exports;(function(t,r){var s=Yi,n=Ehe,a=r&&!r.nodeType&&r,i=a&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===a,o=l?s.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||n;t.exports=d})(Fv,Fv.exports);var aq=Fv.exports,Dhe=9007199254740991,Mhe=/^(?:0|[1-9]\d*)$/;function Ihe(t,r){var s=typeof t;return r=r??Dhe,!!r&&(s=="number"||s!="symbol"&&Mhe.test(t))&&t>-1&&t%1==0&&t<r}var yP=Ihe,Rhe=9007199254740991;function Fhe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Rhe}var jP=Fhe,$he=Il,Lhe=jP,Bhe=Rl,Vhe="[object Arguments]",Uhe="[object Array]",qhe="[object Boolean]",zhe="[object Date]",Khe="[object Error]",Hhe="[object Function]",Whe="[object Map]",Ghe="[object Number]",Yhe="[object Object]",Qhe="[object RegExp]",Xhe="[object Set]",Zhe="[object String]",Jhe="[object WeakMap]",epe="[object ArrayBuffer]",tpe="[object DataView]",rpe="[object Float32Array]",spe="[object Float64Array]",npe="[object Int8Array]",ape="[object Int16Array]",ipe="[object Int32Array]",lpe="[object Uint8Array]",ope="[object Uint8ClampedArray]",cpe="[object Uint16Array]",dpe="[object Uint32Array]",Ur={};Ur[rpe]=Ur[spe]=Ur[npe]=Ur[ape]=Ur[ipe]=Ur[lpe]=Ur[ope]=Ur[cpe]=Ur[dpe]=!0;Ur[Vhe]=Ur[Uhe]=Ur[epe]=Ur[qhe]=Ur[tpe]=Ur[zhe]=Ur[Khe]=Ur[Hhe]=Ur[Whe]=Ur[Ghe]=Ur[Yhe]=Ur[Qhe]=Ur[Xhe]=Ur[Zhe]=Ur[Jhe]=!1;function upe(t){return Bhe(t)&&Lhe(t.length)&&!!Ur[$he(t)]}var mpe=upe;function hpe(t){return function(r){return t(r)}}var iq=hpe,$v={exports:{}};$v.exports;(function(t,r){var s=pU,n=r&&!r.nodeType&&r,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,l=i&&s.process,o=function(){try{var c=a&&a.require&&a.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();t.exports=o})($v,$v.exports);var ppe=$v.exports,fpe=mpe,xpe=iq,t4=ppe,r4=t4&&t4.isTypedArray,gpe=r4?xpe(r4):fpe,lq=gpe,vpe=bhe,ype=vP,jpe=Gn,bpe=aq,Npe=yP,wpe=lq,Spe=Object.prototype,Cpe=Spe.hasOwnProperty;function Ppe(t,r){var s=jpe(t),n=!s&&ype(t),a=!s&&!n&&bpe(t),i=!s&&!n&&!a&&wpe(t),l=s||n||a||i,o=l?vpe(t.length,String):[],c=o.length;for(var d in t)(r||Cpe.call(t,d))&&!(l&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Npe(d,c)))&&o.push(d);return o}var kpe=Ppe,Ape=Object.prototype;function _pe(t){var r=t&&t.constructor,s=typeof r=="function"&&r.prototype||Ape;return t===s}var Tpe=_pe;function Ope(t,r){return function(s){return t(r(s))}}var oq=Ope,Epe=oq,Dpe=Epe(Object.keys,Object),Mpe=Dpe,Ipe=Tpe,Rpe=Mpe,Fpe=Object.prototype,$pe=Fpe.hasOwnProperty;function Lpe(t){if(!Ipe(t))return Rpe(t);var r=[];for(var s in Object(t))$pe.call(t,s)&&s!="constructor"&&r.push(s);return r}var Bpe=Lpe,Vpe=tP,Upe=jP;function qpe(t){return t!=null&&Upe(t.length)&&!Vpe(t)}var Kf=qpe,zpe=kpe,Kpe=Bpe,Hpe=Kf;function Wpe(t){return Hpe(t)?zpe(t):Kpe(t)}var Qj=Wpe,Gpe=che,Ype=yhe,Qpe=Qj;function Xpe(t){return Gpe(t,Qpe,Ype)}var Zpe=Xpe,s4=Zpe,Jpe=1,efe=Object.prototype,tfe=efe.hasOwnProperty;function rfe(t,r,s,n,a,i){var l=s&Jpe,o=s4(t),c=o.length,d=s4(r),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var h=o[m];if(!(l?h in r:tfe.call(r,h)))return!1}var g=i.get(t),x=i.get(r);if(g&&x)return g==r&&x==t;var p=!0;i.set(t,r),i.set(r,t);for(var y=l;++m<c;){h=o[m];var v=t[h],f=r[h];if(n)var b=l?n(f,v,h,r,t,i):n(v,f,h,t,r,i);if(!(b===void 0?v===f||a(v,f,s,n,i):b)){p=!1;break}y||(y=h=="constructor")}if(p&&!y){var N=t.constructor,w=r.constructor;N!=w&&"constructor"in t&&"constructor"in r&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(p=!1)}return i.delete(t),i.delete(r),p}var sfe=rfe,nfe=ad,afe=Yi,ife=nfe(afe,"DataView"),lfe=ife,ofe=ad,cfe=Yi,dfe=ofe(cfe,"Promise"),ufe=dfe,mfe=ad,hfe=Yi,pfe=mfe(hfe,"Set"),cq=pfe,ffe=ad,xfe=Yi,gfe=ffe(xfe,"WeakMap"),vfe=gfe,A1=lfe,_1=sP,T1=ufe,O1=cq,E1=vfe,dq=Il,Fm=xU,n4="[object Map]",yfe="[object Object]",a4="[object Promise]",i4="[object Set]",l4="[object WeakMap]",o4="[object DataView]",jfe=Fm(A1),bfe=Fm(_1),Nfe=Fm(T1),wfe=Fm(O1),Sfe=Fm(E1),rc=dq;(A1&&rc(new A1(new ArrayBuffer(1)))!=o4||_1&&rc(new _1)!=n4||T1&&rc(T1.resolve())!=a4||O1&&rc(new O1)!=i4||E1&&rc(new E1)!=l4)&&(rc=function(t){var r=dq(t),s=r==yfe?t.constructor:void 0,n=s?Fm(s):"";if(n)switch(n){case jfe:return o4;case bfe:return n4;case Nfe:return a4;case wfe:return i4;case Sfe:return l4}return r});var Cfe=rc,G0=ZU,Pfe=rq,kfe=nhe,Afe=sfe,c4=Cfe,d4=Gn,u4=aq,_fe=lq,Tfe=1,m4="[object Arguments]",h4="[object Array]",Mx="[object Object]",Ofe=Object.prototype,p4=Ofe.hasOwnProperty;function Efe(t,r,s,n,a,i){var l=d4(t),o=d4(r),c=l?h4:c4(t),d=o?h4:c4(r);c=c==m4?Mx:c,d=d==m4?Mx:d;var u=c==Mx,m=d==Mx,h=c==d;if(h&&u4(t)){if(!u4(r))return!1;l=!0,u=!1}if(h&&!u)return i||(i=new G0),l||_fe(t)?Pfe(t,r,s,n,a,i):kfe(t,r,c,s,n,a,i);if(!(s&Tfe)){var g=u&&p4.call(t,"__wrapped__"),x=m&&p4.call(r,"__wrapped__");if(g||x){var p=g?t.value():t,y=x?r.value():r;return i||(i=new G0),a(p,y,s,n,i)}}return h?(i||(i=new G0),Afe(t,r,s,n,a,i)):!1}var Dfe=Efe,Mfe=Dfe,f4=Rl;function uq(t,r,s,n,a){return t===r?!0:t==null||r==null||!f4(t)&&!f4(r)?t!==t&&r!==r:Mfe(t,r,s,n,uq,a)}var bP=uq,Ife=ZU,Rfe=bP,Ffe=1,$fe=2;function Lfe(t,r,s,n){var a=s.length,i=a,l=!n;if(t==null)return!i;for(t=Object(t);a--;){var o=s[a];if(l&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++a<i;){o=s[a];var c=o[0],d=t[c],u=o[1];if(l&&o[2]){if(d===void 0&&!(c in t))return!1}else{var m=new Ife;if(n)var h=n(d,u,c,t,r,m);if(!(h===void 0?Rfe(u,d,Ffe|$fe,n,m):h))return!1}}return!0}var Bfe=Lfe,Vfe=Ko;function Ufe(t){return t===t&&!Vfe(t)}var mq=Ufe,qfe=mq,zfe=Qj;function Kfe(t){for(var r=zfe(t),s=r.length;s--;){var n=r[s],a=t[n];r[s]=[n,a,qfe(a)]}return r}var Hfe=Kfe;function Wfe(t,r){return function(s){return s==null?!1:s[t]===r&&(r!==void 0||t in Object(s))}}var hq=Wfe,Gfe=Bfe,Yfe=Hfe,Qfe=hq;function Xfe(t){var r=Yfe(t);return r.length==1&&r[0][2]?Qfe(r[0][0],r[0][1]):function(s){return s===t||Gfe(s,t,r)}}var Zfe=Xfe;function Jfe(t,r){return t!=null&&r in Object(t)}var exe=Jfe,txe=bU,rxe=vP,sxe=Gn,nxe=yP,axe=jP,ixe=Ij;function lxe(t,r,s){r=txe(r,t);for(var n=-1,a=r.length,i=!1;++n<a;){var l=ixe(r[n]);if(!(i=t!=null&&s(t,l)))break;t=t[l]}return i||++n!=a?i:(a=t==null?0:t.length,!!a&&axe(a)&&nxe(l,a)&&(sxe(t)||rxe(t)))}var oxe=lxe,cxe=exe,dxe=oxe;function uxe(t,r){return t!=null&&dxe(t,r,cxe)}var mxe=uxe,hxe=bP,pxe=NU,fxe=mxe,xxe=eP,gxe=mq,vxe=hq,yxe=Ij,jxe=1,bxe=2;function Nxe(t,r){return xxe(t)&&gxe(r)?vxe(yxe(t),r):function(s){var n=pxe(s,t);return n===void 0&&n===r?fxe(s,t):hxe(r,n,jxe|bxe)}}var wxe=Nxe;function Sxe(t){return t}var $m=Sxe;function Cxe(t){return function(r){return r==null?void 0:r[t]}}var Pxe=Cxe,kxe=lP;function Axe(t){return function(r){return kxe(r,t)}}var _xe=Axe,Txe=Pxe,Oxe=_xe,Exe=eP,Dxe=Ij;function Mxe(t){return Exe(t)?Txe(Dxe(t)):Oxe(t)}var Ixe=Mxe,Rxe=Zfe,Fxe=wxe,$xe=$m,Lxe=Gn,Bxe=Ixe;function Vxe(t){return typeof t=="function"?t:t==null?$xe:typeof t=="object"?Lxe(t)?Fxe(t[0],t[1]):Rxe(t):Bxe(t)}var Qi=Vxe;function Uxe(t,r,s,n){for(var a=t.length,i=s+(n?1:-1);n?i--:++i<a;)if(r(t[i],i,t))return i;return-1}var pq=Uxe;function qxe(t){return t!==t}var zxe=qxe;function Kxe(t,r,s){for(var n=s-1,a=t.length;++n<a;)if(t[n]===r)return n;return-1}var Hxe=Kxe,Wxe=pq,Gxe=zxe,Yxe=Hxe;function Qxe(t,r,s){return r===r?Yxe(t,r,s):Wxe(t,Gxe,s)}var Xxe=Qxe,Zxe=Xxe;function Jxe(t,r){var s=t==null?0:t.length;return!!s&&Zxe(t,r,0)>-1}var ege=Jxe;function tge(t,r,s){for(var n=-1,a=t==null?0:t.length;++n<a;)if(s(r,t[n]))return!0;return!1}var rge=tge;function sge(){}var nge=sge,Y0=cq,age=nge,ige=gP,lge=1/0,oge=Y0&&1/ige(new Y0([,-0]))[1]==lge?function(t){return new Y0(t)}:age,cge=oge,dge=JU,uge=ege,mge=rge,hge=tq,pge=cge,fge=gP,xge=200;function gge(t,r,s){var n=-1,a=uge,i=t.length,l=!0,o=[],c=o;if(s)l=!1,a=mge;else if(i>=xge){var d=r?null:pge(t);if(d)return fge(d);l=!1,a=hge,c=new dge}else c=r?[]:o;e:for(;++n<i;){var u=t[n],m=r?r(u):u;if(u=s||u!==0?u:0,l&&m===m){for(var h=c.length;h--;)if(c[h]===m)continue e;r&&c.push(m),o.push(u)}else a(c,m,s)||(c!==o&&c.push(m),o.push(u))}return o}var vge=gge,yge=Qi,jge=vge;function bge(t,r){return t&&t.length?jge(t,yge(r)):[]}var Nge=bge;const x4=jr(Nge);function fq(t,r,s){return r===!0?x4(t,s):Lt(r)?x4(t,r):t}function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bu(t)}var wge=["ref"];function g4(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function el(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?g4(Object(s),!0).forEach(function(n){Xj(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g4(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Sge(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function v4(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gq(n.key),n)}}function Cge(t,r,s){return r&&v4(t.prototype,r),s&&v4(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pge(t,r,s){return r=Lv(r),kge(t,xq()?Reflect.construct(r,s||[],Lv(t).constructor):r.apply(t,s))}function kge(t,r){if(r&&(Bu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Age(t)}function Age(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xq=function(){return!!t})()}function Lv(t){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Lv(t)}function _ge(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&D1(t,r)}function D1(t,r){return D1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},D1(t,r)}function Xj(t,r,s){return r=gq(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function gq(t){var r=Tge(t,"string");return Bu(r)=="symbol"?r:r+""}function Tge(t,r){if(Bu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Oge(t,r){if(t==null)return{};var s=Ege(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Ege(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function Dge(t){return t.value}function Mge(t,r){if(Q.isValidElement(t))return Q.cloneElement(t,r);if(typeof t=="function")return Q.createElement(t,r);r.ref;var s=Oge(r,wge);return Q.createElement(xP,s)}var y4=1,vl=function(t){function r(){var s;Sge(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=Pge(this,r,[].concat(a)),Xj(s,"lastBoundingBox",{width:-1,height:-1}),s}return _ge(r,t),Cge(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>y4||Math.abs(a.height-this.lastBoundingBox.height)>y4)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?el({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,l=a.align,o=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,m,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(l==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();m={left:((d||0)-g.width)/2}}else m=l==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var x=this.getBBoxSnapshot();h={top:((u||0)-x.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return el(el({},m),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,l=a.width,o=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,m=el(el({position:"absolute",width:l||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(g){n.wrapperNode=g}},Mge(i,el(el({},this.props),{},{payload:fq(u,d,Dge)})))}}],[{key:"getWithHeight",value:function(n,a){var i=el(el({},this.defaultProps),n.props),l=i.layout;return l==="vertical"&&Ye(n.props.height)?{height:n.props.height}:l==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);Xj(vl,"displayName","Legend");Xj(vl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var j4=qf,Ige=vP,Rge=Gn,b4=j4?j4.isConcatSpreadable:void 0;function Fge(t){return Rge(t)||Ige(t)||!!(b4&&t&&t[b4])}var $ge=Fge,Lge=sq,Bge=$ge;function vq(t,r,s,n,a){var i=-1,l=t.length;for(s||(s=Bge),a||(a=[]);++i<l;){var o=t[i];r>0&&s(o)?r>1?vq(o,r-1,s,n,a):Lge(a,o):n||(a[a.length]=o)}return a}var yq=vq;function Vge(t){return function(r,s,n){for(var a=-1,i=Object(r),l=n(r),o=l.length;o--;){var c=l[t?o:++a];if(s(i[c],c,i)===!1)break}return r}}var Uge=Vge,qge=Uge,zge=qge(),Kge=zge,Hge=Kge,Wge=Qj;function Gge(t,r){return t&&Hge(t,r,Wge)}var jq=Gge,Yge=Kf;function Qge(t,r){return function(s,n){if(s==null)return s;if(!Yge(s))return t(s,n);for(var a=s.length,i=r?a:-1,l=Object(s);(r?i--:++i<a)&&n(l[i],i,l)!==!1;);return s}}var Xge=Qge,Zge=jq,Jge=Xge,eve=Jge(Zge),NP=eve,tve=NP,rve=Kf;function sve(t,r){var s=-1,n=rve(t)?Array(t.length):[];return tve(t,function(a,i,l){n[++s]=r(a,i,l)}),n}var bq=sve;function nve(t,r){var s=t.length;for(t.sort(r);s--;)t[s]=t[s].value;return t}var ave=nve,N4=Tm;function ive(t,r){if(t!==r){var s=t!==void 0,n=t===null,a=t===t,i=N4(t),l=r!==void 0,o=r===null,c=r===r,d=N4(r);if(!o&&!d&&!i&&t>r||i&&l&&c&&!o&&!d||n&&l&&c||!s&&c||!a)return 1;if(!n&&!i&&!d&&t<r||d&&s&&a&&!n&&!i||o&&s&&a||!l&&a||!c)return-1}return 0}var lve=ive,ove=lve;function cve(t,r,s){for(var n=-1,a=t.criteria,i=r.criteria,l=a.length,o=s.length;++n<l;){var c=ove(a[n],i[n]);if(c){if(n>=o)return c;var d=s[n];return c*(d=="desc"?-1:1)}}return t.index-r.index}var dve=cve,Q0=iP,uve=lP,mve=Qi,hve=bq,pve=ave,fve=iq,xve=dve,gve=$m,vve=Gn;function yve(t,r,s){r.length?r=Q0(r,function(i){return vve(i)?function(l){return uve(l,i.length===1?i[0]:i)}:i}):r=[gve];var n=-1;r=Q0(r,fve(mve));var a=hve(t,function(i,l,o){var c=Q0(r,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return pve(a,function(i,l){return xve(i,l,s)})}var jve=yve;function bve(t,r,s){switch(s.length){case 0:return t.call(r);case 1:return t.call(r,s[0]);case 2:return t.call(r,s[0],s[1]);case 3:return t.call(r,s[0],s[1],s[2])}return t.apply(r,s)}var Nve=bve,wve=Nve,w4=Math.max;function Sve(t,r,s){return r=w4(r===void 0?t.length-1:r,0),function(){for(var n=arguments,a=-1,i=w4(n.length-r,0),l=Array(i);++a<i;)l[a]=n[r+a];a=-1;for(var o=Array(r+1);++a<r;)o[a]=n[a];return o[r]=s(l),wve(t,this,o)}}var Cve=Sve;function Pve(t){return function(){return t}}var kve=Pve,Ave=ad,_ve=function(){try{var t=Ave(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Nq=_ve,Tve=kve,S4=Nq,Ove=$m,Eve=S4?function(t,r){return S4(t,"toString",{configurable:!0,enumerable:!1,value:Tve(r),writable:!0})}:Ove,Dve=Eve,Mve=800,Ive=16,Rve=Date.now;function Fve(t){var r=0,s=0;return function(){var n=Rve(),a=Ive-(n-s);if(s=n,a>0){if(++r>=Mve)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}var $ve=Fve,Lve=Dve,Bve=$ve,Vve=Bve(Lve),Uve=Vve,qve=$m,zve=Cve,Kve=Uve;function Hve(t,r){return Kve(zve(t,r,qve),t+"")}var Wve=Hve,Gve=rP,Yve=Kf,Qve=yP,Xve=Ko;function Zve(t,r,s){if(!Xve(s))return!1;var n=typeof r;return(n=="number"?Yve(s)&&Qve(r,s.length):n=="string"&&r in s)?Gve(s[r],t):!1}var Zj=Zve,Jve=yq,eye=jve,tye=Wve,C4=Zj,rye=tye(function(t,r){if(t==null)return[];var s=r.length;return s>1&&C4(t,r[0],r[1])?r=[]:s>2&&C4(r[0],r[1],r[2])&&(r=[r[0]]),eye(t,Jve(r,1),[])}),sye=rye;const wP=jr(sye);function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rp(t)}function M1(){return M1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},M1.apply(this,arguments)}function nye(t,r){return oye(t)||lye(t,r)||iye(t,r)||aye()}function aye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(t,r){if(t){if(typeof t=="string")return P4(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return P4(t,r)}}function P4(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function lye(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function oye(t){if(Array.isArray(t))return t}function k4(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function X0(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?k4(Object(s),!0).forEach(function(n){cye(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):k4(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function cye(t,r,s){return r=dye(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function dye(t){var r=uye(t,"string");return Rp(r)=="symbol"?r:r+""}function uye(t,r){if(Rp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function mye(t){return Array.isArray(t)&&Ms(t[0])&&Ms(t[1])?t.join(" ~ "):t}var hye=function(r){var s=r.separator,n=s===void 0?" : ":s,a=r.contentStyle,i=a===void 0?{}:a,l=r.itemStyle,o=l===void 0?{}:l,c=r.labelStyle,d=c===void 0?{}:c,u=r.payload,m=r.formatter,h=r.itemSorter,g=r.wrapperClassName,x=r.labelClassName,p=r.label,y=r.labelFormatter,v=r.accessibilityLayer,f=v===void 0?!1:v,b=function(){if(u&&u.length){var q={padding:0,margin:0},z=(h?wP(u,h):u).map(function(I,F){if(I.type==="none")return null;var W=X0({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},o),X=I.formatter||m||mye,K=I.value,Z=I.name,ue=K,Ne=Z;if(X&&ue!=null&&Ne!=null){var J=X(K,Z,I,F,u);if(Array.isArray(J)){var Re=nye(J,2);ue=Re[0],Ne=Re[1]}else ue=J}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:W},Ms(Ne)?Q.createElement("span",{className:"recharts-tooltip-item-name"},Ne):null,Ms(Ne)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},ue),Q.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:q},z)}return null},N=X0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=X0({margin:0},d),C=!Vt(p),P=C?p:"",S=Ut("recharts-default-tooltip",g),A=Ut("recharts-tooltip-label",x);C&&y&&u!==void 0&&u!==null&&(P=y(p,u));var k=f?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",M1({className:S,style:N},k),Q.createElement("p",{className:A,style:w},Q.isValidElement(P)?P:"".concat(P)),b())};function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fp(t)}function Ix(t,r,s){return r=pye(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function pye(t){var r=fye(t,"string");return Fp(r)=="symbol"?r:r+""}function fye(t,r){if(Fp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var ah="recharts-tooltip-wrapper",xye={visibility:"hidden"};function gye(t){var r=t.coordinate,s=t.translateX,n=t.translateY;return Ut(ah,Ix(Ix(Ix(Ix({},"".concat(ah,"-right"),Ye(s)&&r&&Ye(r.x)&&s>=r.x),"".concat(ah,"-left"),Ye(s)&&r&&Ye(r.x)&&s<r.x),"".concat(ah,"-bottom"),Ye(n)&&r&&Ye(r.y)&&n>=r.y),"".concat(ah,"-top"),Ye(n)&&r&&Ye(r.y)&&n<r.y))}function A4(t){var r=t.allowEscapeViewBox,s=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,l=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(i&&Ye(i[n]))return i[n];var u=s[n]-o-a,m=s[n]+a;if(r[n])return l[n]?u:m;if(l[n]){var h=u,g=c[n];return h<g?Math.max(m,c[n]):Math.max(u,c[n])}var x=m+o,p=c[n]+d;return x>p?Math.max(u,c[n]):Math.max(m,c[n])}function vye(t){var r=t.translateX,s=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(r,"px, ").concat(s,"px, 0)"):"translate(".concat(r,"px, ").concat(s,"px)")}}function yye(t){var r=t.allowEscapeViewBox,s=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,l=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,d,u,m;return l.height>0&&l.width>0&&s?(u=A4({allowEscapeViewBox:r,coordinate:s,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),m=A4({allowEscapeViewBox:r,coordinate:s,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=vye({translateX:u,translateY:m,useTranslate3d:o})):d=xye,{cssProperties:d,cssClasses:gye({translateX:u,translateY:m,coordinate:s})}}function Vu(t){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vu(t)}function _4(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function T4(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?_4(Object(s),!0).forEach(function(n){R1(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_4(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function jye(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function bye(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sq(n.key),n)}}function Nye(t,r,s){return r&&bye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wye(t,r,s){return r=Bv(r),Sye(t,wq()?Reflect.construct(r,s||[],Bv(t).constructor):r.apply(t,s))}function Sye(t,r){if(r&&(Vu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cye(t)}function Cye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wq=function(){return!!t})()}function Bv(t){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Bv(t)}function Pye(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&I1(t,r)}function I1(t,r){return I1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I1(t,r)}function R1(t,r,s){return r=Sq(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Sq(t){var r=kye(t,"string");return Vu(r)=="symbol"?r:r+""}function kye(t,r){if(Vu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var O4=1,Aye=function(t){function r(){var s;jye(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=wye(this,r,[].concat(a)),R1(s,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),R1(s,"handleKeyDown",function(l){if(l.key==="Escape"){var o,c,d,u;s.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=s.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(d=(u=s.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),s}return Pye(r,t),Nye(r,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>O4||Math.abs(n.height-this.state.lastBoundingBox.height)>O4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,m=a.hasPayload,h=a.isAnimationActive,g=a.offset,x=a.position,p=a.reverseDirection,y=a.useTranslate3d,v=a.viewBox,f=a.wrapperStyle,b=yye({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:g,position:x,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),N=b.cssClasses,w=b.cssProperties,C=T4(T4({transition:h&&i?"transform ".concat(o,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},f);return Q.createElement("div",{tabIndex:-1,className:N,style:C,ref:function(S){n.wrapperNode=S}},d)}}])}(j.PureComponent),_ye=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},id={isSsr:_ye()};function Uu(t){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Uu(t)}function E4(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function D4(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?E4(Object(s),!0).forEach(function(n){SP(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):E4(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Tye(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Oye(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pq(n.key),n)}}function Eye(t,r,s){return r&&Oye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dye(t,r,s){return r=Vv(r),Mye(t,Cq()?Reflect.construct(r,s||[],Vv(t).constructor):r.apply(t,s))}function Mye(t,r){if(r&&(Uu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iye(t)}function Iye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cq=function(){return!!t})()}function Vv(t){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Vv(t)}function Rye(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&F1(t,r)}function F1(t,r){return F1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},F1(t,r)}function SP(t,r,s){return r=Pq(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Pq(t){var r=Fye(t,"string");return Uu(r)=="symbol"?r:r+""}function Fye(t,r){if(Uu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $ye(t){return t.dataKey}function Lye(t,r){return Q.isValidElement(t)?Q.cloneElement(t,r):typeof t=="function"?Q.createElement(t,r):Q.createElement(hye,r)}var ea=function(t){function r(){return Tye(this,r),Dye(this,r,arguments)}return Rye(r,t),Eye(r,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,l=a.allowEscapeViewBox,o=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,m=a.filterNull,h=a.isAnimationActive,g=a.offset,x=a.payload,p=a.payloadUniqBy,y=a.position,v=a.reverseDirection,f=a.useTranslate3d,b=a.viewBox,N=a.wrapperStyle,w=x??[];m&&w.length&&(w=fq(x.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),p,$ye));var C=w.length>0;return Q.createElement(Aye,{allowEscapeViewBox:l,animationDuration:o,animationEasing:c,isAnimationActive:h,active:i,coordinate:u,hasPayload:C,offset:g,position:y,reverseDirection:v,useTranslate3d:f,viewBox:b,wrapperStyle:N},Lye(d,D4(D4({},this.props),{},{payload:w})))}}])}(j.PureComponent);SP(ea,"displayName","Tooltip");SP(ea,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!id.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Bye=Yi,Vye=function(){return Bye.Date.now()},Uye=Vye,qye=/\s/;function zye(t){for(var r=t.length;r--&&qye.test(t.charAt(r)););return r}var Kye=zye,Hye=Kye,Wye=/^\s+/;function Gye(t){return t&&t.slice(0,Hye(t)+1).replace(Wye,"")}var Yye=Gye,Qye=Yye,M4=Ko,Xye=Tm,I4=NaN,Zye=/^[-+]0x[0-9a-f]+$/i,Jye=/^0b[01]+$/i,eje=/^0o[0-7]+$/i,tje=parseInt;function rje(t){if(typeof t=="number")return t;if(Xye(t))return I4;if(M4(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=M4(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Qye(t);var s=Jye.test(t);return s||eje.test(t)?tje(t.slice(2),s?2:8):Zye.test(t)?I4:+t}var kq=rje,sje=Ko,Z0=Uye,R4=kq,nje="Expected a function",aje=Math.max,ije=Math.min;function lje(t,r,s){var n,a,i,l,o,c,d=0,u=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError(nje);r=R4(r)||0,sje(s)&&(u=!!s.leading,m="maxWait"in s,i=m?aje(R4(s.maxWait)||0,r):i,h="trailing"in s?!!s.trailing:h);function g(C){var P=n,S=a;return n=a=void 0,d=C,l=t.apply(S,P),l}function x(C){return d=C,o=setTimeout(v,r),u?g(C):l}function p(C){var P=C-c,S=C-d,A=r-P;return m?ije(A,i-S):A}function y(C){var P=C-c,S=C-d;return c===void 0||P>=r||P<0||m&&S>=i}function v(){var C=Z0();if(y(C))return f(C);o=setTimeout(v,p(C))}function f(C){return o=void 0,h&&n?g(C):(n=a=void 0,l)}function b(){o!==void 0&&clearTimeout(o),d=0,n=c=a=o=void 0}function N(){return o===void 0?l:f(Z0())}function w(){var C=Z0(),P=y(C);if(n=arguments,a=this,c=C,P){if(o===void 0)return x(c);if(m)return clearTimeout(o),o=setTimeout(v,r),g(c)}return o===void 0&&(o=setTimeout(v,r)),l}return w.cancel=b,w.flush=N,w}var oje=lje,cje=oje,dje=Ko,uje="Expected a function";function mje(t,r,s){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(uje);return dje(s)&&(n="leading"in s?!!s.leading:n,a="trailing"in s?!!s.trailing:a),cje(t,r,{leading:n,maxWait:r,trailing:a})}var hje=mje;const Aq=jr(hje);function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$p(t)}function F4(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Rx(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?F4(Object(s),!0).forEach(function(n){pje(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):F4(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function pje(t,r,s){return r=fje(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function fje(t){var r=xje(t,"string");return $p(r)=="symbol"?r:r+""}function xje(t,r){if($p(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function gje(t,r){return bje(t)||jje(t,r)||yje(t,r)||vje()}function vje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yje(t,r){if(t){if(typeof t=="string")return $4(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return $4(t,r)}}function $4(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function jje(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function bje(t){if(Array.isArray(t))return t}var Uv=j.forwardRef(function(t,r){var s=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,l=i===void 0?"100%":i,o=t.height,c=o===void 0?"100%":o,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,h=t.maxHeight,g=t.children,x=t.debounce,p=x===void 0?0:x,y=t.id,v=t.className,f=t.onResize,b=t.style,N=b===void 0?{}:b,w=j.useRef(null),C=j.useRef();C.current=f,j.useImperativeHandle(r,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var P=j.useState({containerWidth:a.width,containerHeight:a.height}),S=gje(P,2),A=S[0],k=S[1],D=j.useCallback(function(z,I){k(function(F){var W=Math.round(z),X=Math.round(I);return F.containerWidth===W&&F.containerHeight===X?F:{containerWidth:W,containerHeight:X}})},[]);j.useEffect(function(){var z=function(Z){var ue,Ne=Z[0].contentRect,J=Ne.width,Re=Ne.height;D(J,Re),(ue=C.current)===null||ue===void 0||ue.call(C,J,Re)};p>0&&(z=Aq(z,p,{trailing:!0,leading:!1}));var I=new ResizeObserver(z),F=w.current.getBoundingClientRect(),W=F.width,X=F.height;return D(W,X),I.observe(w.current),function(){I.disconnect()}},[D,p]);var q=j.useMemo(function(){var z=A.containerWidth,I=A.containerHeight;if(z<0||I<0)return null;oi(uc(l)||uc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,c),oi(!s||s>0,"The aspect(%s) must be greater than zero.",s);var F=uc(l)?z:l,W=uc(c)?I:c;s&&s>0&&(F?W=F/s:W&&(F=W*s),h&&W>h&&(W=h)),oi(F>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,W,l,c,u,m,s);var X=!Array.isArray(g)&&gl(g.type).endsWith("Chart");return Q.Children.map(g,function(K){return Q.isValidElement(K)?j.cloneElement(K,Rx({width:F,height:W},X?{style:Rx({height:"100%",width:"100%",maxHeight:W,maxWidth:F},K.props.style)}:{})):K})},[s,g,c,h,m,u,A,l]);return Q.createElement("div",{id:y?"".concat(y):void 0,className:Ut("recharts-responsive-container",v),style:Rx(Rx({},N),{},{width:l,height:c,minWidth:u,minHeight:m,maxHeight:h}),ref:w},q)}),Jj=function(r){return null};Jj.displayName="Cell";function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lp(t)}function L4(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function $1(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?L4(Object(s),!0).forEach(function(n){Nje(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):L4(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Nje(t,r,s){return r=wje(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function wje(t){var r=Sje(t,"string");return Lp(r)=="symbol"?r:r+""}function Sje(t,r){if(Lp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var wd={widthCache:{},cacheCount:0},Cje=2e3,Pje={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},B4="recharts_measurement_span";function kje(t){var r=$1({},t);return Object.keys(r).forEach(function(s){r[s]||delete r[s]}),r}var Kh=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||id.isSsr)return{width:0,height:0};var n=kje(s),a=JSON.stringify({text:r,copyStyle:n});if(wd.widthCache[a])return wd.widthCache[a];try{var i=document.getElementById(B4);i||(i=document.createElement("span"),i.setAttribute("id",B4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=$1($1({},Pje),n);Object.assign(i.style,l),i.textContent="".concat(r);var o=i.getBoundingClientRect(),c={width:o.width,height:o.height};return wd.widthCache[a]=c,++wd.cacheCount>Cje&&(wd.cacheCount=0,wd.widthCache={}),c}catch{return{width:0,height:0}}},Aje=function(r){return{top:r.top+window.scrollY-document.documentElement.clientTop,left:r.left+window.scrollX-document.documentElement.clientLeft}};function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bp(t)}function qv(t,r){return Eje(t)||Oje(t,r)||Tje(t,r)||_je()}function _je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tje(t,r){if(t){if(typeof t=="string")return V4(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return V4(t,r)}}function V4(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function Oje(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Eje(t){if(Array.isArray(t))return t}function Dje(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function U4(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ije(n.key),n)}}function Mje(t,r,s){return r&&U4(t.prototype,r),s&&U4(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ije(t){var r=Rje(t,"string");return Bp(r)=="symbol"?r:r+""}function Rje(t,r){if(Bp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var q4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,z4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Fje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$je=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_q={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Lje=Object.keys(_q),qd="NaN";function Bje(t,r){return t*_q[r]}var Fx=function(){function t(r,s){Dje(this,t),this.num=r,this.unit=s,this.num=r,this.unit=s,Number.isNaN(r)&&(this.unit=""),s!==""&&!Fje.test(s)&&(this.num=NaN,this.unit=""),Lje.includes(s)&&(this.num=Bje(r,s),this.unit="px")}return Mje(t,[{key:"add",value:function(s){return this.unit!==s.unit?new t(NaN,""):new t(this.num+s.num,this.unit)}},{key:"subtract",value:function(s){return this.unit!==s.unit?new t(NaN,""):new t(this.num-s.num,this.unit)}},{key:"multiply",value:function(s){return this.unit!==""&&s.unit!==""&&this.unit!==s.unit?new t(NaN,""):new t(this.num*s.num,this.unit||s.unit)}},{key:"divide",value:function(s){return this.unit!==""&&s.unit!==""&&this.unit!==s.unit?new t(NaN,""):new t(this.num/s.num,this.unit||s.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(s){var n,a=(n=$je.exec(s))!==null&&n!==void 0?n:[],i=qv(a,3),l=i[1],o=i[2];return new t(parseFloat(l),o??"")}}])}();function Tq(t){if(t.includes(qd))return qd;for(var r=t;r.includes("*")||r.includes("/");){var s,n=(s=q4.exec(r))!==null&&s!==void 0?s:[],a=qv(n,4),i=a[1],l=a[2],o=a[3],c=Fx.parse(i??""),d=Fx.parse(o??""),u=l==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return qd;r=r.replace(q4,u.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var m,h=(m=z4.exec(r))!==null&&m!==void 0?m:[],g=qv(h,4),x=g[1],p=g[2],y=g[3],v=Fx.parse(x??""),f=Fx.parse(y??""),b=p==="+"?v.add(f):v.subtract(f);if(b.isNaN())return qd;r=r.replace(z4,b.toString())}return r}var K4=/\(([^()]*)\)/;function Vje(t){for(var r=t;r.includes("(");){var s=K4.exec(r),n=qv(s,2),a=n[1];r=r.replace(K4,Tq(a))}return r}function Uje(t){var r=t.replace(/\s+/g,"");return r=Vje(r),r=Tq(r),r}function qje(t){try{return Uje(t)}catch{return qd}}function J0(t){var r=qje(t.slice(5,-1));return r===qd?"":r}var zje=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Kje=["dx","dy","angle","className","breakAll"];function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},L1.apply(this,arguments)}function H4(t,r){if(t==null)return{};var s=Hje(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Hje(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function W4(t,r){return Qje(t)||Yje(t,r)||Gje(t,r)||Wje()}function Wje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gje(t,r){if(t){if(typeof t=="string")return G4(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return G4(t,r)}}function G4(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function Yje(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Qje(t){if(Array.isArray(t))return t}var Oq=/[ \f\n\r\t\v\u2028\u2029]+/,Eq=function(r){var s=r.children,n=r.breakAll,a=r.style;try{var i=[];Vt(s)||(n?i=s.toString().split(""):i=s.toString().split(Oq));var l=i.map(function(c){return{word:c,width:Kh(c,a).width}}),o=n?0:Kh("",a).width;return{wordsWithComputedWidth:l,spaceWidth:o}}catch{return null}},Xje=function(r,s,n,a,i){var l=r.maxLines,o=r.children,c=r.style,d=r.breakAll,u=Ye(l),m=o,h=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(W,X){var K=X.word,Z=X.width,ue=W[W.length-1];if(ue&&(a==null||i||ue.width+Z+n<Number(a)))ue.words.push(K),ue.width+=Z+n;else{var Ne={words:[K],width:Z};W.push(Ne)}return W},[])},g=h(s),x=function(F){return F.reduce(function(W,X){return W.width>X.width?W:X})};if(!u)return g;for(var p="",y=function(F){var W=m.slice(0,F),X=Eq({breakAll:d,style:c,children:W+p}).wordsWithComputedWidth,K=h(X),Z=K.length>l||x(K).width>Number(a);return[Z,K]},v=0,f=m.length-1,b=0,N;v<=f&&b<=m.length-1;){var w=Math.floor((v+f)/2),C=w-1,P=y(C),S=W4(P,2),A=S[0],k=S[1],D=y(w),q=W4(D,1),z=q[0];if(!A&&!z&&(v=w+1),A&&z&&(f=w-1),!A&&z){N=k;break}b++}return N||g},Y4=function(r){var s=Vt(r)?[]:r.toString().split(Oq);return[{words:s}]},Zje=function(r){var s=r.width,n=r.scaleToFit,a=r.children,i=r.style,l=r.breakAll,o=r.maxLines;if((s||n)&&!id.isSsr){var c,d,u=Eq({breakAll:l,children:a,style:i});if(u){var m=u.wordsWithComputedWidth,h=u.spaceWidth;c=m,d=h}else return Y4(a);return Xje({breakAll:l,children:a,maxLines:o,style:i},c,d,s,n)}return Y4(a)},Q4="#808080",Wc=function(r){var s=r.x,n=s===void 0?0:s,a=r.y,i=a===void 0?0:a,l=r.lineHeight,o=l===void 0?"1em":l,c=r.capHeight,d=c===void 0?"0.71em":c,u=r.scaleToFit,m=u===void 0?!1:u,h=r.textAnchor,g=h===void 0?"start":h,x=r.verticalAnchor,p=x===void 0?"end":x,y=r.fill,v=y===void 0?Q4:y,f=H4(r,zje),b=j.useMemo(function(){return Zje({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:m,style:f.style,width:f.width})},[f.breakAll,f.children,f.maxLines,m,f.style,f.width]),N=f.dx,w=f.dy,C=f.angle,P=f.className,S=f.breakAll,A=H4(f,Kje);if(!Ms(n)||!Ms(i))return null;var k=n+(Ye(N)?N:0),D=i+(Ye(w)?w:0),q;switch(p){case"start":q=J0("calc(".concat(d,")"));break;case"middle":q=J0("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:q=J0("calc(".concat(b.length-1," * -").concat(o,")"));break}var z=[];if(m){var I=b[0].width,F=f.width;z.push("scale(".concat((Ye(F)?F/I:1)/I,")"))}return C&&z.push("rotate(".concat(C,", ").concat(k,", ").concat(D,")")),z.length&&(A.transform=z.join(" ")),Q.createElement("text",L1({},St(A,!0),{x:k,y:D,className:Ut("recharts-text",P),textAnchor:g,fill:v.includes("url")?Q4:v}),b.map(function(W,X){var K=W.words.join(S?"":" ");return Q.createElement("tspan",{x:k,dy:X===0?q:o,key:"".concat(K,"-").concat(X)},K)}))};function Co(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function Jje(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function CP(t){let r,s,n;t.length!==2?(r=Co,s=(o,c)=>Co(t(o),c),n=(o,c)=>t(o)-c):(r=t===Co||t===Jje?t:ebe,s=t,n=t);function a(o,c,d=0,u=o.length){if(d<u){if(r(c,c)!==0)return u;do{const m=d+u>>>1;s(o[m],c)<0?d=m+1:u=m}while(d<u)}return d}function i(o,c,d=0,u=o.length){if(d<u){if(r(c,c)!==0)return u;do{const m=d+u>>>1;s(o[m],c)<=0?d=m+1:u=m}while(d<u)}return d}function l(o,c,d=0,u=o.length){const m=a(o,c,d,u-1);return m>d&&n(o[m-1],c)>-n(o[m],c)?m-1:m}return{left:a,center:l,right:i}}function ebe(){return 0}function Dq(t){return t===null?NaN:+t}function*tbe(t,r){for(let s of t)s!=null&&(s=+s)>=s&&(yield s)}const rbe=CP(Co),Hf=rbe.right;CP(Dq).center;class X4 extends Map{constructor(r,s=abe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:s}}),r!=null)for(const[n,a]of r)this.set(n,a)}get(r){return super.get(Z4(this,r))}has(r){return super.has(Z4(this,r))}set(r,s){return super.set(sbe(this,r),s)}delete(r){return super.delete(nbe(this,r))}}function Z4({_intern:t,_key:r},s){const n=r(s);return t.has(n)?t.get(n):s}function sbe({_intern:t,_key:r},s){const n=r(s);return t.has(n)?t.get(n):(t.set(n,s),s)}function nbe({_intern:t,_key:r},s){const n=r(s);return t.has(n)&&(s=t.get(n),t.delete(n)),s}function abe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ibe(t=Co){if(t===Co)return Mq;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,s)=>{const n=t(r,s);return n||n===0?n:(t(s,s)===0)-(t(r,r)===0)}}function Mq(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const lbe=Math.sqrt(50),obe=Math.sqrt(10),cbe=Math.sqrt(2);function zv(t,r,s){const n=(r-t)/Math.max(0,s),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),l=i>=lbe?10:i>=obe?5:i>=cbe?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(t*d),c=Math.round(r*d),o/d<t&&++o,c/d>r&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(t/d),c=Math.round(r/d),o*d<t&&++o,c*d>r&&--c),c<o&&.5<=s&&s<2?zv(t,r,s*2):[o,c,d]}function B1(t,r,s){if(r=+r,t=+t,s=+s,!(s>0))return[];if(t===r)return[t];const n=r<t,[a,i,l]=n?zv(r,t,s):zv(t,r,s);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function V1(t,r,s){return r=+r,t=+t,s=+s,zv(t,r,s)[2]}function U1(t,r,s){r=+r,t=+t,s=+s;const n=r<t,a=n?V1(r,t,s):V1(t,r,s);return(n?-1:1)*(a<0?1/-a:a)}function J4(t,r){let s;for(const n of t)n!=null&&(s<n||s===void 0&&n>=n)&&(s=n);return s}function eO(t,r){let s;for(const n of t)n!=null&&(s>n||s===void 0&&n>=n)&&(s=n);return s}function Iq(t,r,s=0,n=1/0,a){if(r=Math.floor(r),s=Math.floor(Math.max(0,s)),n=Math.floor(Math.min(t.length-1,n)),!(s<=r&&r<=n))return t;for(a=a===void 0?Mq:ibe(a);n>s;){if(n-s>600){const c=n-s+1,d=r-s+1,u=Math.log(c),m=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*m*(c-m)/c)*(d-c/2<0?-1:1),g=Math.max(s,Math.floor(r-d*m/c+h)),x=Math.min(n,Math.floor(r+(c-d)*m/c+h));Iq(t,r,g,x,a)}const i=t[r];let l=s,o=n;for(ih(t,s,r),a(t[n],i)>0&&ih(t,s,n);l<o;){for(ih(t,l,o),++l,--o;a(t[l],i)<0;)++l;for(;a(t[o],i)>0;)--o}a(t[s],i)===0?ih(t,s,o):(++o,ih(t,o,n)),o<=r&&(s=o+1),r<=o&&(n=o-1)}return t}function ih(t,r,s){const n=t[r];t[r]=t[s],t[s]=n}function dbe(t,r,s){if(t=Float64Array.from(tbe(t)),!(!(n=t.length)||isNaN(r=+r))){if(r<=0||n<2)return eO(t);if(r>=1)return J4(t);var n,a=(n-1)*r,i=Math.floor(a),l=J4(Iq(t,i).subarray(0,i+1)),o=eO(t.subarray(i+1));return l+(o-l)*(a-i)}}function ube(t,r,s=Dq){if(!(!(n=t.length)||isNaN(r=+r))){if(r<=0||n<2)return+s(t[0],0,t);if(r>=1)return+s(t[n-1],n-1,t);var n,a=(n-1)*r,i=Math.floor(a),l=+s(t[i],i,t),o=+s(t[i+1],i+1,t);return l+(o-l)*(a-i)}}function mbe(t,r,s){t=+t,r=+r,s=(a=arguments.length)<2?(r=t,t=0,1):a<3?1:+s;for(var n=-1,a=Math.max(0,Math.ceil((r-t)/s))|0,i=new Array(a);++n<a;)i[n]=t+n*s;return i}function Fa(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Fl(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const q1=Symbol("implicit");function PP(){var t=new X4,r=[],s=[],n=q1;function a(i){let l=t.get(i);if(l===void 0){if(n!==q1)return n;t.set(i,l=r.push(i)-1)}return s[l%s.length]}return a.domain=function(i){if(!arguments.length)return r.slice();r=[],t=new X4;for(const l of i)t.has(l)||t.set(l,r.push(l)-1);return a},a.range=function(i){return arguments.length?(s=Array.from(i),a):s.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return PP(r,s).unknown(n)},Fa.apply(a,arguments),a}function Vp(){var t=PP().unknown(void 0),r=t.domain,s=t.range,n=0,a=1,i,l,o=!1,c=0,d=0,u=.5;delete t.unknown;function m(){var h=r().length,g=a<n,x=g?a:n,p=g?n:a;i=(p-x)/Math.max(1,h-c+d*2),o&&(i=Math.floor(i)),x+=(p-x-i*(h-c))*u,l=i*(1-c),o&&(x=Math.round(x),l=Math.round(l));var y=mbe(h).map(function(v){return x+i*v});return s(g?y.reverse():y)}return t.domain=function(h){return arguments.length?(r(h),m()):r()},t.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,m()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(o=!!h,m()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),m()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),m()):c},t.paddingOuter=function(h){return arguments.length?(d=+h,m()):d},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),m()):u},t.copy=function(){return Vp(r(),[n,a]).round(o).paddingInner(c).paddingOuter(d).align(u)},Fa.apply(m(),arguments)}function Rq(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Rq(r())},t}function Hh(){return Rq(Vp.apply(null,arguments).paddingInner(1))}function kP(t,r,s){t.prototype=r.prototype=s,s.constructor=t}function Fq(t,r){var s=Object.create(t.prototype);for(var n in r)s[n]=r[n];return s}function Wf(){}var Up=.7,Kv=1/Up,lu="\\s*([+-]?\\d+)\\s*",qp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hbe=/^#([0-9a-f]{3,8})$/,pbe=new RegExp(`^rgb\\(${lu},${lu},${lu}\\)$`),fbe=new RegExp(`^rgb\\(${Li},${Li},${Li}\\)$`),xbe=new RegExp(`^rgba\\(${lu},${lu},${lu},${qp}\\)$`),gbe=new RegExp(`^rgba\\(${Li},${Li},${Li},${qp}\\)$`),vbe=new RegExp(`^hsl\\(${qp},${Li},${Li}\\)$`),ybe=new RegExp(`^hsla\\(${qp},${Li},${Li},${qp}\\)$`),tO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kP(Wf,zp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rO,formatHex:rO,formatHex8:jbe,formatHsl:bbe,formatRgb:sO,toString:sO});function rO(){return this.rgb().formatHex()}function jbe(){return this.rgb().formatHex8()}function bbe(){return $q(this).formatHsl()}function sO(){return this.rgb().formatRgb()}function zp(t){var r,s;return t=(t+"").trim().toLowerCase(),(r=hbe.exec(t))?(s=r[1].length,r=parseInt(r[1],16),s===6?nO(r):s===3?new Ln(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):s===8?$x(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):s===4?$x(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=pbe.exec(t))?new Ln(r[1],r[2],r[3],1):(r=fbe.exec(t))?new Ln(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=xbe.exec(t))?$x(r[1],r[2],r[3],r[4]):(r=gbe.exec(t))?$x(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=vbe.exec(t))?lO(r[1],r[2]/100,r[3]/100,1):(r=ybe.exec(t))?lO(r[1],r[2]/100,r[3]/100,r[4]):tO.hasOwnProperty(t)?nO(tO[t]):t==="transparent"?new Ln(NaN,NaN,NaN,0):null}function nO(t){return new Ln(t>>16&255,t>>8&255,t&255,1)}function $x(t,r,s,n){return n<=0&&(t=r=s=NaN),new Ln(t,r,s,n)}function Nbe(t){return t instanceof Wf||(t=zp(t)),t?(t=t.rgb(),new Ln(t.r,t.g,t.b,t.opacity)):new Ln}function z1(t,r,s,n){return arguments.length===1?Nbe(t):new Ln(t,r,s,n??1)}function Ln(t,r,s,n){this.r=+t,this.g=+r,this.b=+s,this.opacity=+n}kP(Ln,z1,Fq(Wf,{brighter(t){return t=t==null?Kv:Math.pow(Kv,t),new Ln(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Up:Math.pow(Up,t),new Ln(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ln(kc(this.r),kc(this.g),kc(this.b),Hv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aO,formatHex:aO,formatHex8:wbe,formatRgb:iO,toString:iO}));function aO(){return`#${mc(this.r)}${mc(this.g)}${mc(this.b)}`}function wbe(){return`#${mc(this.r)}${mc(this.g)}${mc(this.b)}${mc((isNaN(this.opacity)?1:this.opacity)*255)}`}function iO(){const t=Hv(this.opacity);return`${t===1?"rgb(":"rgba("}${kc(this.r)}, ${kc(this.g)}, ${kc(this.b)}${t===1?")":`, ${t})`}`}function Hv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mc(t){return t=kc(t),(t<16?"0":"")+t.toString(16)}function lO(t,r,s,n){return n<=0?t=r=s=NaN:s<=0||s>=1?t=r=NaN:r<=0&&(t=NaN),new Ja(t,r,s,n)}function $q(t){if(t instanceof Ja)return new Ja(t.h,t.s,t.l,t.opacity);if(t instanceof Wf||(t=zp(t)),!t)return new Ja;if(t instanceof Ja)return t;t=t.rgb();var r=t.r/255,s=t.g/255,n=t.b/255,a=Math.min(r,s,n),i=Math.max(r,s,n),l=NaN,o=i-a,c=(i+a)/2;return o?(r===i?l=(s-n)/o+(s<n)*6:s===i?l=(n-r)/o+2:l=(r-s)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new Ja(l,o,c,t.opacity)}function Sbe(t,r,s,n){return arguments.length===1?$q(t):new Ja(t,r,s,n??1)}function Ja(t,r,s,n){this.h=+t,this.s=+r,this.l=+s,this.opacity=+n}kP(Ja,Sbe,Fq(Wf,{brighter(t){return t=t==null?Kv:Math.pow(Kv,t),new Ja(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Up:Math.pow(Up,t),new Ja(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,s=this.l,n=s+(s<.5?s:1-s)*r,a=2*s-n;return new Ln(eN(t>=240?t-240:t+120,a,n),eN(t,a,n),eN(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ja(oO(this.h),Lx(this.s),Lx(this.l),Hv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hv(this.opacity);return`${t===1?"hsl(":"hsla("}${oO(this.h)}, ${Lx(this.s)*100}%, ${Lx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oO(t){return t=(t||0)%360,t<0?t+360:t}function Lx(t){return Math.max(0,Math.min(1,t||0))}function eN(t,r,s){return(t<60?r+(s-r)*t/60:t<180?s:t<240?r+(s-r)*(240-t)/60:r)*255}const AP=t=>()=>t;function Cbe(t,r){return function(s){return t+s*r}}function Pbe(t,r,s){return t=Math.pow(t,s),r=Math.pow(r,s)-t,s=1/s,function(n){return Math.pow(t+n*r,s)}}function kbe(t){return(t=+t)==1?Lq:function(r,s){return s-r?Pbe(r,s,t):AP(isNaN(r)?s:r)}}function Lq(t,r){var s=r-t;return s?Cbe(t,s):AP(isNaN(t)?r:t)}const cO=function t(r){var s=kbe(r);function n(a,i){var l=s((a=z1(a)).r,(i=z1(i)).r),o=s(a.g,i.g),c=s(a.b,i.b),d=Lq(a.opacity,i.opacity);return function(u){return a.r=l(u),a.g=o(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=t,n}(1);function Abe(t,r){r||(r=[]);var s=t?Math.min(r.length,t.length):0,n=r.slice(),a;return function(i){for(a=0;a<s;++a)n[a]=t[a]*(1-i)+r[a]*i;return n}}function _be(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tbe(t,r){var s=r?r.length:0,n=t?Math.min(s,t.length):0,a=new Array(n),i=new Array(s),l;for(l=0;l<n;++l)a[l]=Lm(t[l],r[l]);for(;l<s;++l)i[l]=r[l];return function(o){for(l=0;l<n;++l)i[l]=a[l](o);return i}}function Obe(t,r){var s=new Date;return t=+t,r=+r,function(n){return s.setTime(t*(1-n)+r*n),s}}function Wv(t,r){return t=+t,r=+r,function(s){return t*(1-s)+r*s}}function Ebe(t,r){var s={},n={},a;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in t?s[a]=Lm(t[a],r[a]):n[a]=r[a];return function(i){for(a in s)n[a]=s[a](i);return n}}var K1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tN=new RegExp(K1.source,"g");function Dbe(t){return function(){return t}}function Mbe(t){return function(r){return t(r)+""}}function Ibe(t,r){var s=K1.lastIndex=tN.lastIndex=0,n,a,i,l=-1,o=[],c=[];for(t=t+"",r=r+"";(n=K1.exec(t))&&(a=tN.exec(r));)(i=a.index)>s&&(i=r.slice(s,i),o[l]?o[l]+=i:o[++l]=i),(n=n[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:Wv(n,a)})),s=tN.lastIndex;return s<r.length&&(i=r.slice(s),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?Mbe(c[0].x):Dbe(r):(r=c.length,function(d){for(var u=0,m;u<r;++u)o[(m=c[u]).i]=m.x(d);return o.join("")})}function Lm(t,r){var s=typeof r,n;return r==null||s==="boolean"?AP(r):(s==="number"?Wv:s==="string"?(n=zp(r))?(r=n,cO):Ibe:r instanceof zp?cO:r instanceof Date?Obe:_be(r)?Abe:Array.isArray(r)?Tbe:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Ebe:Wv)(t,r)}function _P(t,r){return t=+t,r=+r,function(s){return Math.round(t*(1-s)+r*s)}}function Rbe(t,r){r===void 0&&(r=t,t=Lm);for(var s=0,n=r.length-1,a=r[0],i=new Array(n<0?0:n);s<n;)i[s]=t(a,a=r[++s]);return function(l){var o=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[o](l-o)}}function Fbe(t){return function(){return t}}function Gv(t){return+t}var dO=[0,1];function Nn(t){return t}function H1(t,r){return(r-=t=+t)?function(s){return(s-t)/r}:Fbe(isNaN(r)?NaN:.5)}function $be(t,r){var s;return t>r&&(s=t,t=r,r=s),function(n){return Math.max(t,Math.min(r,n))}}function Lbe(t,r,s){var n=t[0],a=t[1],i=r[0],l=r[1];return a<n?(n=H1(a,n),i=s(l,i)):(n=H1(n,a),i=s(i,l)),function(o){return i(n(o))}}function Bbe(t,r,s){var n=Math.min(t.length,r.length)-1,a=new Array(n),i=new Array(n),l=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++l<n;)a[l]=H1(t[l],t[l+1]),i[l]=s(r[l],r[l+1]);return function(o){var c=Hf(t,o,1,n)-1;return i[c](a[c](o))}}function Gf(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function eb(){var t=dO,r=dO,s=Lm,n,a,i,l=Nn,o,c,d;function u(){var h=Math.min(t.length,r.length);return l!==Nn&&(l=$be(t[0],t[h-1])),o=h>2?Bbe:Lbe,c=d=null,m}function m(h){return h==null||isNaN(h=+h)?i:(c||(c=o(t.map(n),r,s)))(n(l(h)))}return m.invert=function(h){return l(a((d||(d=o(r,t.map(n),Wv)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,Gv),u()):t.slice()},m.range=function(h){return arguments.length?(r=Array.from(h),u()):r.slice()},m.rangeRound=function(h){return r=Array.from(h),s=_P,u()},m.clamp=function(h){return arguments.length?(l=h?!0:Nn,u()):l!==Nn},m.interpolate=function(h){return arguments.length?(s=h,u()):s},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,g){return n=h,a=g,u()}}function TP(){return eb()(Nn,Nn)}function Vbe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Yv(t,r){if((s=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var s,n=t.slice(0,s);return[n.length>1?n[0]+n.slice(2):n,+t.slice(s+1)]}function qu(t){return t=Yv(Math.abs(t)),t?t[1]:NaN}function Ube(t,r){return function(s,n){for(var a=s.length,i=[],l=0,o=t[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(s.substring(a-=o,a+o)),!((c+=o+1)>n));)o=t[l=(l+1)%t.length];return i.reverse().join(r)}}function qbe(t){return function(r){return r.replace(/[0-9]/g,function(s){return t[+s]})}}var zbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kp(t){if(!(r=zbe.exec(t)))throw new Error("invalid format: "+t);var r;return new OP({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Kp.prototype=OP.prototype;function OP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}OP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kbe(t){e:for(var r=t.length,s=1,n=-1,a;s<r;++s)switch(t[s]){case".":n=a=s;break;case"0":n===0&&(n=s),a=s;break;default:if(!+t[s])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Bq;function Hbe(t,r){var s=Yv(t,r);if(!s)return t+"";var n=s[0],a=s[1],i=a-(Bq=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Yv(t,Math.max(0,r+i-1))[0]}function uO(t,r){var s=Yv(t,r);if(!s)return t+"";var n=s[0],a=s[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const mO={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Vbe,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>uO(t*100,r),r:uO,s:Hbe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function hO(t){return t}var pO=Array.prototype.map,fO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Wbe(t){var r=t.grouping===void 0||t.thousands===void 0?hO:Ube(pO.call(t.grouping,Number),t.thousands+""),s=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?hO:qbe(pO.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(m){m=Kp(m);var h=m.fill,g=m.align,x=m.sign,p=m.symbol,y=m.zero,v=m.width,f=m.comma,b=m.precision,N=m.trim,w=m.type;w==="n"?(f=!0,w="g"):mO[w]||(b===void 0&&(b=12),N=!0,w="g"),(y||h==="0"&&g==="=")&&(y=!0,h="0",g="=");var C=p==="$"?s:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",P=p==="$"?n:/[%p]/.test(w)?l:"",S=mO[w],A=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(D){var q=C,z=P,I,F,W;if(w==="c")z=S(D)+z,D="";else{D=+D;var X=D<0||1/D<0;if(D=isNaN(D)?c:S(Math.abs(D),b),N&&(D=Kbe(D)),X&&+D==0&&x!=="+"&&(X=!1),q=(X?x==="("?x:o:x==="-"||x==="("?"":x)+q,z=(w==="s"?fO[8+Bq/3]:"")+z+(X&&x==="("?")":""),A){for(I=-1,F=D.length;++I<F;)if(W=D.charCodeAt(I),48>W||W>57){z=(W===46?a+D.slice(I+1):D.slice(I))+z,D=D.slice(0,I);break}}}f&&!y&&(D=r(D,1/0));var K=q.length+D.length+z.length,Z=K<v?new Array(v-K+1).join(h):"";switch(f&&y&&(D=r(Z+D,Z.length?v-z.length:1/0),Z=""),g){case"<":D=q+D+z+Z;break;case"=":D=q+Z+D+z;break;case"^":D=Z.slice(0,K=Z.length>>1)+q+D+z+Z.slice(K);break;default:D=Z+q+D+z;break}return i(D)}return k.toString=function(){return m+""},k}function u(m,h){var g=d((m=Kp(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(qu(h)/3)))*3,p=Math.pow(10,-x),y=fO[8+x/3];return function(v){return g(p*v)+y}}return{format:d,formatPrefix:u}}var Bx,EP,Vq;Gbe({thousands:",",grouping:[3],currency:["$",""]});function Gbe(t){return Bx=Wbe(t),EP=Bx.format,Vq=Bx.formatPrefix,Bx}function Ybe(t){return Math.max(0,-qu(Math.abs(t)))}function Qbe(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qu(r)/3)))*3-qu(Math.abs(t)))}function Xbe(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,qu(r)-qu(t))+1}function Uq(t,r,s,n){var a=U1(t,r,s),i;switch(n=Kp(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(r));return n.precision==null&&!isNaN(i=Qbe(a,l))&&(n.precision=i),Vq(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Xbe(a,Math.max(Math.abs(t),Math.abs(r))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Ybe(a))&&(n.precision=i-(n.type==="%")*2);break}}return EP(n)}function Ho(t){var r=t.domain;return t.ticks=function(s){var n=r();return B1(n[0],n[n.length-1],s??10)},t.tickFormat=function(s,n){var a=r();return Uq(a[0],a[a.length-1],s??10,n)},t.nice=function(s){s==null&&(s=10);var n=r(),a=0,i=n.length-1,l=n[a],o=n[i],c,d,u=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);u-- >0;){if(d=V1(l,o,s),d===c)return n[a]=l,n[i]=o,r(n);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return t},t}function Qv(){var t=TP();return t.copy=function(){return Gf(t,Qv())},Fa.apply(t,arguments),Ho(t)}function qq(t){var r;function s(n){return n==null||isNaN(n=+n)?r:n}return s.invert=s,s.domain=s.range=function(n){return arguments.length?(t=Array.from(n,Gv),s):t.slice()},s.unknown=function(n){return arguments.length?(r=n,s):r},s.copy=function(){return qq(t).unknown(r)},t=arguments.length?Array.from(t,Gv):[0,1],Ho(s)}function zq(t,r){t=t.slice();var s=0,n=t.length-1,a=t[s],i=t[n],l;return i<a&&(l=s,s=n,n=l,l=a,a=i,i=l),t[s]=r.floor(a),t[n]=r.ceil(i),t}function xO(t){return Math.log(t)}function gO(t){return Math.exp(t)}function Zbe(t){return-Math.log(-t)}function Jbe(t){return-Math.exp(-t)}function e0e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t0e(t){return t===10?e0e:t===Math.E?Math.exp:r=>Math.pow(t,r)}function r0e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function vO(t){return(r,s)=>-t(-r,s)}function DP(t){const r=t(xO,gO),s=r.domain;let n=10,a,i;function l(){return a=r0e(n),i=t0e(n),s()[0]<0?(a=vO(a),i=vO(i),t(Zbe,Jbe)):t(xO,gO),r}return r.base=function(o){return arguments.length?(n=+o,l()):n},r.domain=function(o){return arguments.length?(s(o),l()):s()},r.ticks=o=>{const c=s();let d=c[0],u=c[c.length-1];const m=u<d;m&&([d,u]=[u,d]);let h=a(d),g=a(u),x,p;const y=o==null?10:+o;let v=[];if(!(n%1)&&g-h<y){if(h=Math.floor(h),g=Math.ceil(g),d>0){for(;h<=g;++h)for(x=1;x<n;++x)if(p=h<0?x/i(-h):x*i(h),!(p<d)){if(p>u)break;v.push(p)}}else for(;h<=g;++h)for(x=n-1;x>=1;--x)if(p=h>0?x/i(-h):x*i(h),!(p<d)){if(p>u)break;v.push(p)}v.length*2<y&&(v=B1(d,u,y))}else v=B1(h,g,Math.min(g-h,y)).map(i);return m?v.reverse():v},r.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Kp(c)).precision==null&&(c.trim=!0),c=EP(c)),o===1/0)return c;const d=Math.max(1,n*o/r.ticks().length);return u=>{let m=u/i(Math.round(a(u)));return m*n<n-.5&&(m*=n),m<=d?c(u):""}},r.nice=()=>s(zq(s(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),r}function Kq(){const t=DP(eb()).domain([1,10]);return t.copy=()=>Gf(t,Kq()).base(t.base()),Fa.apply(t,arguments),t}function yO(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function jO(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function MP(t){var r=1,s=t(yO(r),jO(r));return s.constant=function(n){return arguments.length?t(yO(r=+n),jO(r)):r},Ho(s)}function Hq(){var t=MP(eb());return t.copy=function(){return Gf(t,Hq()).constant(t.constant())},Fa.apply(t,arguments)}function bO(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function s0e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function n0e(t){return t<0?-t*t:t*t}function IP(t){var r=t(Nn,Nn),s=1;function n(){return s===1?t(Nn,Nn):s===.5?t(s0e,n0e):t(bO(s),bO(1/s))}return r.exponent=function(a){return arguments.length?(s=+a,n()):s},Ho(r)}function RP(){var t=IP(eb());return t.copy=function(){return Gf(t,RP()).exponent(t.exponent())},Fa.apply(t,arguments),t}function a0e(){return RP.apply(null,arguments).exponent(.5)}function NO(t){return Math.sign(t)*t*t}function i0e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Wq(){var t=TP(),r=[0,1],s=!1,n;function a(i){var l=i0e(t(i));return isNaN(l)?n:s?Math.round(l):l}return a.invert=function(i){return t.invert(NO(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((r=Array.from(i,Gv)).map(NO)),a):r.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(s=!!i,a):s},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Wq(t.domain(),r).round(s).clamp(t.clamp()).unknown(n)},Fa.apply(a,arguments),Ho(a)}function Gq(){var t=[],r=[],s=[],n;function a(){var l=0,o=Math.max(1,r.length);for(s=new Array(o-1);++l<o;)s[l-1]=ube(t,l/o);return i}function i(l){return l==null||isNaN(l=+l)?n:r[Hf(s,l)]}return i.invertExtent=function(l){var o=r.indexOf(l);return o<0?[NaN,NaN]:[o>0?s[o-1]:t[0],o<s.length?s[o]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let o of l)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Co),a()},i.range=function(l){return arguments.length?(r=Array.from(l),a()):r.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return s.slice()},i.copy=function(){return Gq().domain(t).range(r).unknown(n)},Fa.apply(i,arguments)}function Yq(){var t=0,r=1,s=1,n=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[Hf(n,c,0,s)]:i}function o(){var c=-1;for(n=new Array(s);++c<s;)n[c]=((c+1)*r-(c-s)*t)/(s+1);return l}return l.domain=function(c){return arguments.length?([t,r]=c,t=+t,r=+r,o()):[t,r]},l.range=function(c){return arguments.length?(s=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=s?[n[s-1],r]:[n[d-1],n[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return n.slice()},l.copy=function(){return Yq().domain([t,r]).range(a).unknown(i)},Fa.apply(Ho(l),arguments)}function Qq(){var t=[.5],r=[0,1],s,n=1;function a(i){return i!=null&&i<=i?r[Hf(t,i,0,n)]:s}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(i){return arguments.length?(r=Array.from(i),n=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(i){var l=r.indexOf(i);return[t[l-1],t[l]]},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return Qq().domain(t).range(r).unknown(s)},Fa.apply(a,arguments)}const rN=new Date,sN=new Date;function Fs(t,r,s,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),r(i,1),t(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(r(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),r(i,o),t(i);while(d<i&&i<l);return c},a.filter=i=>Fs(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;r(l,-1),!i(l););else for(;--o>=0;)for(;r(l,1),!i(l););}),s&&(a.count=(i,l)=>(rN.setTime(+i),sN.setTime(+l),t(rN),t(sN),Math.floor(s(rN,sN))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?l=>n(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const Xv=Fs(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);Xv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Fs(r=>{r.setTime(Math.floor(r/t)*t)},(r,s)=>{r.setTime(+r+s*t)},(r,s)=>(s-r)/t):Xv);Xv.range;const hl=1e3,Ta=hl*60,pl=Ta*60,Tl=pl*24,FP=Tl*7,wO=Tl*30,nN=Tl*365,hc=Fs(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*hl)},(t,r)=>(r-t)/hl,t=>t.getUTCSeconds());hc.range;const $P=Fs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hl)},(t,r)=>{t.setTime(+t+r*Ta)},(t,r)=>(r-t)/Ta,t=>t.getMinutes());$P.range;const LP=Fs(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*Ta)},(t,r)=>(r-t)/Ta,t=>t.getUTCMinutes());LP.range;const BP=Fs(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*hl-t.getMinutes()*Ta)},(t,r)=>{t.setTime(+t+r*pl)},(t,r)=>(r-t)/pl,t=>t.getHours());BP.range;const VP=Fs(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*pl)},(t,r)=>(r-t)/pl,t=>t.getUTCHours());VP.range;const Yf=Fs(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ta)/Tl,t=>t.getDate()-1);Yf.range;const tb=Fs(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Tl,t=>t.getUTCDate()-1);tb.range;const Xq=Fs(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/Tl,t=>Math.floor(t/Tl));Xq.range;function ld(t){return Fs(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,s)=>{r.setDate(r.getDate()+s*7)},(r,s)=>(s-r-(s.getTimezoneOffset()-r.getTimezoneOffset())*Ta)/FP)}const rb=ld(0),Zv=ld(1),l0e=ld(2),o0e=ld(3),zu=ld(4),c0e=ld(5),d0e=ld(6);rb.range;Zv.range;l0e.range;o0e.range;zu.range;c0e.range;d0e.range;function od(t){return Fs(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,s)=>{r.setUTCDate(r.getUTCDate()+s*7)},(r,s)=>(s-r)/FP)}const sb=od(0),Jv=od(1),u0e=od(2),m0e=od(3),Ku=od(4),h0e=od(5),p0e=od(6);sb.range;Jv.range;u0e.range;m0e.range;Ku.range;h0e.range;p0e.range;const UP=Fs(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());UP.range;const qP=Fs(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());qP.range;const Ol=Fs(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ol.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fs(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,s)=>{r.setFullYear(r.getFullYear()+s*t)});Ol.range;const El=Fs(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());El.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fs(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,s)=>{r.setUTCFullYear(r.getUTCFullYear()+s*t)});El.range;function Zq(t,r,s,n,a,i){const l=[[hc,1,hl],[hc,5,5*hl],[hc,15,15*hl],[hc,30,30*hl],[i,1,Ta],[i,5,5*Ta],[i,15,15*Ta],[i,30,30*Ta],[a,1,pl],[a,3,3*pl],[a,6,6*pl],[a,12,12*pl],[n,1,Tl],[n,2,2*Tl],[s,1,FP],[r,1,wO],[r,3,3*wO],[t,1,nN]];function o(d,u,m){const h=u<d;h&&([d,u]=[u,d]);const g=m&&typeof m.range=="function"?m:c(d,u,m),x=g?g.range(d,+u+1):[];return h?x.reverse():x}function c(d,u,m){const h=Math.abs(u-d)/m,g=CP(([,,y])=>y).right(l,h);if(g===l.length)return t.every(U1(d/nN,u/nN,m));if(g===0)return Xv.every(Math.max(U1(d,u,m),1));const[x,p]=l[h/l[g-1][2]<l[g][2]/h?g-1:g];return x.every(p)}return[o,c]}const[f0e,x0e]=Zq(El,qP,sb,Xq,VP,LP),[g0e,v0e]=Zq(Ol,UP,rb,Yf,BP,$P);function aN(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function iN(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lh(t,r,s){return{y:t,m:r,d:s,H:0,M:0,S:0,L:0}}function y0e(t){var r=t.dateTime,s=t.date,n=t.time,a=t.periods,i=t.days,l=t.shortDays,o=t.months,c=t.shortMonths,d=oh(a),u=ch(a),m=oh(i),h=ch(i),g=oh(l),x=ch(l),p=oh(o),y=ch(o),v=oh(c),f=ch(c),b={a:X,A:K,b:Z,B:ue,c:null,d:_O,e:_O,f:U0e,g:Z0e,G:eNe,H:L0e,I:B0e,j:V0e,L:Jq,m:q0e,M:z0e,p:Ne,q:J,Q:EO,s:DO,S:K0e,u:H0e,U:W0e,V:G0e,w:Y0e,W:Q0e,x:null,X:null,y:X0e,Y:J0e,Z:tNe,"%":OO},N={a:Re,A:Ee,b:ut,B:ce,c:null,d:TO,e:TO,f:aNe,g:fNe,G:gNe,H:rNe,I:sNe,j:nNe,L:tz,m:iNe,M:lNe,p:ke,q:Be,Q:EO,s:DO,S:oNe,u:cNe,U:dNe,V:uNe,w:mNe,W:hNe,x:null,X:null,y:pNe,Y:xNe,Z:vNe,"%":OO},w={a:k,A:D,b:q,B:z,c:I,d:kO,e:kO,f:I0e,g:PO,G:CO,H:AO,I:AO,j:O0e,L:M0e,m:T0e,M:E0e,p:A,q:_0e,Q:F0e,s:$0e,S:D0e,u:S0e,U:C0e,V:P0e,w:w0e,W:k0e,x:F,X:W,y:PO,Y:CO,Z:A0e,"%":R0e};b.x=C(s,b),b.X=C(n,b),b.c=C(r,b),N.x=C(s,N),N.X=C(n,N),N.c=C(r,N);function C(Me,He){return function(Xe){var we=[],Bt=-1,jt=0,or=Me.length,ir,Nr,Jr;for(Xe instanceof Date||(Xe=new Date(+Xe));++Bt<or;)Me.charCodeAt(Bt)===37&&(we.push(Me.slice(jt,Bt)),(Nr=SO[ir=Me.charAt(++Bt)])!=null?ir=Me.charAt(++Bt):Nr=ir==="e"?" ":"0",(Jr=He[ir])&&(ir=Jr(Xe,Nr)),we.push(ir),jt=Bt+1);return we.push(Me.slice(jt,Bt)),we.join("")}}function P(Me,He){return function(Xe){var we=lh(1900,void 0,1),Bt=S(we,Me,Xe+="",0),jt,or;if(Bt!=Xe.length)return null;if("Q"in we)return new Date(we.Q);if("s"in we)return new Date(we.s*1e3+("L"in we?we.L:0));if(He&&!("Z"in we)&&(we.Z=0),"p"in we&&(we.H=we.H%12+we.p*12),we.m===void 0&&(we.m="q"in we?we.q:0),"V"in we){if(we.V<1||we.V>53)return null;"w"in we||(we.w=1),"Z"in we?(jt=iN(lh(we.y,0,1)),or=jt.getUTCDay(),jt=or>4||or===0?Jv.ceil(jt):Jv(jt),jt=tb.offset(jt,(we.V-1)*7),we.y=jt.getUTCFullYear(),we.m=jt.getUTCMonth(),we.d=jt.getUTCDate()+(we.w+6)%7):(jt=aN(lh(we.y,0,1)),or=jt.getDay(),jt=or>4||or===0?Zv.ceil(jt):Zv(jt),jt=Yf.offset(jt,(we.V-1)*7),we.y=jt.getFullYear(),we.m=jt.getMonth(),we.d=jt.getDate()+(we.w+6)%7)}else("W"in we||"U"in we)&&("w"in we||(we.w="u"in we?we.u%7:"W"in we?1:0),or="Z"in we?iN(lh(we.y,0,1)).getUTCDay():aN(lh(we.y,0,1)).getDay(),we.m=0,we.d="W"in we?(we.w+6)%7+we.W*7-(or+5)%7:we.w+we.U*7-(or+6)%7);return"Z"in we?(we.H+=we.Z/100|0,we.M+=we.Z%100,iN(we)):aN(we)}}function S(Me,He,Xe,we){for(var Bt=0,jt=He.length,or=Xe.length,ir,Nr;Bt<jt;){if(we>=or)return-1;if(ir=He.charCodeAt(Bt++),ir===37){if(ir=He.charAt(Bt++),Nr=w[ir in SO?He.charAt(Bt++):ir],!Nr||(we=Nr(Me,Xe,we))<0)return-1}else if(ir!=Xe.charCodeAt(we++))return-1}return we}function A(Me,He,Xe){var we=d.exec(He.slice(Xe));return we?(Me.p=u.get(we[0].toLowerCase()),Xe+we[0].length):-1}function k(Me,He,Xe){var we=g.exec(He.slice(Xe));return we?(Me.w=x.get(we[0].toLowerCase()),Xe+we[0].length):-1}function D(Me,He,Xe){var we=m.exec(He.slice(Xe));return we?(Me.w=h.get(we[0].toLowerCase()),Xe+we[0].length):-1}function q(Me,He,Xe){var we=v.exec(He.slice(Xe));return we?(Me.m=f.get(we[0].toLowerCase()),Xe+we[0].length):-1}function z(Me,He,Xe){var we=p.exec(He.slice(Xe));return we?(Me.m=y.get(we[0].toLowerCase()),Xe+we[0].length):-1}function I(Me,He,Xe){return S(Me,r,He,Xe)}function F(Me,He,Xe){return S(Me,s,He,Xe)}function W(Me,He,Xe){return S(Me,n,He,Xe)}function X(Me){return l[Me.getDay()]}function K(Me){return i[Me.getDay()]}function Z(Me){return c[Me.getMonth()]}function ue(Me){return o[Me.getMonth()]}function Ne(Me){return a[+(Me.getHours()>=12)]}function J(Me){return 1+~~(Me.getMonth()/3)}function Re(Me){return l[Me.getUTCDay()]}function Ee(Me){return i[Me.getUTCDay()]}function ut(Me){return c[Me.getUTCMonth()]}function ce(Me){return o[Me.getUTCMonth()]}function ke(Me){return a[+(Me.getUTCHours()>=12)]}function Be(Me){return 1+~~(Me.getUTCMonth()/3)}return{format:function(Me){var He=C(Me+="",b);return He.toString=function(){return Me},He},parse:function(Me){var He=P(Me+="",!1);return He.toString=function(){return Me},He},utcFormat:function(Me){var He=C(Me+="",N);return He.toString=function(){return Me},He},utcParse:function(Me){var He=P(Me+="",!0);return He.toString=function(){return Me},He}}}var SO={"-":"",_:" ",0:"0"},Ws=/^\s*\d+/,j0e=/^%/,b0e=/[\\^$*+?|[\]().{}]/g;function fr(t,r,s){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<s?new Array(s-i+1).join(r)+a:a)}function N0e(t){return t.replace(b0e,"\\$&")}function oh(t){return new RegExp("^(?:"+t.map(N0e).join("|")+")","i")}function ch(t){return new Map(t.map((r,s)=>[r.toLowerCase(),s]))}function w0e(t,r,s){var n=Ws.exec(r.slice(s,s+1));return n?(t.w=+n[0],s+n[0].length):-1}function S0e(t,r,s){var n=Ws.exec(r.slice(s,s+1));return n?(t.u=+n[0],s+n[0].length):-1}function C0e(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.U=+n[0],s+n[0].length):-1}function P0e(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.V=+n[0],s+n[0].length):-1}function k0e(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.W=+n[0],s+n[0].length):-1}function CO(t,r,s){var n=Ws.exec(r.slice(s,s+4));return n?(t.y=+n[0],s+n[0].length):-1}function PO(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),s+n[0].length):-1}function A0e(t,r,s){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(s,s+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),s+n[0].length):-1}function _0e(t,r,s){var n=Ws.exec(r.slice(s,s+1));return n?(t.q=n[0]*3-3,s+n[0].length):-1}function T0e(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.m=n[0]-1,s+n[0].length):-1}function kO(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.d=+n[0],s+n[0].length):-1}function O0e(t,r,s){var n=Ws.exec(r.slice(s,s+3));return n?(t.m=0,t.d=+n[0],s+n[0].length):-1}function AO(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.H=+n[0],s+n[0].length):-1}function E0e(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.M=+n[0],s+n[0].length):-1}function D0e(t,r,s){var n=Ws.exec(r.slice(s,s+2));return n?(t.S=+n[0],s+n[0].length):-1}function M0e(t,r,s){var n=Ws.exec(r.slice(s,s+3));return n?(t.L=+n[0],s+n[0].length):-1}function I0e(t,r,s){var n=Ws.exec(r.slice(s,s+6));return n?(t.L=Math.floor(n[0]/1e3),s+n[0].length):-1}function R0e(t,r,s){var n=j0e.exec(r.slice(s,s+1));return n?s+n[0].length:-1}function F0e(t,r,s){var n=Ws.exec(r.slice(s));return n?(t.Q=+n[0],s+n[0].length):-1}function $0e(t,r,s){var n=Ws.exec(r.slice(s));return n?(t.s=+n[0],s+n[0].length):-1}function _O(t,r){return fr(t.getDate(),r,2)}function L0e(t,r){return fr(t.getHours(),r,2)}function B0e(t,r){return fr(t.getHours()%12||12,r,2)}function V0e(t,r){return fr(1+Yf.count(Ol(t),t),r,3)}function Jq(t,r){return fr(t.getMilliseconds(),r,3)}function U0e(t,r){return Jq(t,r)+"000"}function q0e(t,r){return fr(t.getMonth()+1,r,2)}function z0e(t,r){return fr(t.getMinutes(),r,2)}function K0e(t,r){return fr(t.getSeconds(),r,2)}function H0e(t){var r=t.getDay();return r===0?7:r}function W0e(t,r){return fr(rb.count(Ol(t)-1,t),r,2)}function ez(t){var r=t.getDay();return r>=4||r===0?zu(t):zu.ceil(t)}function G0e(t,r){return t=ez(t),fr(zu.count(Ol(t),t)+(Ol(t).getDay()===4),r,2)}function Y0e(t){return t.getDay()}function Q0e(t,r){return fr(Zv.count(Ol(t)-1,t),r,2)}function X0e(t,r){return fr(t.getFullYear()%100,r,2)}function Z0e(t,r){return t=ez(t),fr(t.getFullYear()%100,r,2)}function J0e(t,r){return fr(t.getFullYear()%1e4,r,4)}function eNe(t,r){var s=t.getDay();return t=s>=4||s===0?zu(t):zu.ceil(t),fr(t.getFullYear()%1e4,r,4)}function tNe(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+fr(r/60|0,"0",2)+fr(r%60,"0",2)}function TO(t,r){return fr(t.getUTCDate(),r,2)}function rNe(t,r){return fr(t.getUTCHours(),r,2)}function sNe(t,r){return fr(t.getUTCHours()%12||12,r,2)}function nNe(t,r){return fr(1+tb.count(El(t),t),r,3)}function tz(t,r){return fr(t.getUTCMilliseconds(),r,3)}function aNe(t,r){return tz(t,r)+"000"}function iNe(t,r){return fr(t.getUTCMonth()+1,r,2)}function lNe(t,r){return fr(t.getUTCMinutes(),r,2)}function oNe(t,r){return fr(t.getUTCSeconds(),r,2)}function cNe(t){var r=t.getUTCDay();return r===0?7:r}function dNe(t,r){return fr(sb.count(El(t)-1,t),r,2)}function rz(t){var r=t.getUTCDay();return r>=4||r===0?Ku(t):Ku.ceil(t)}function uNe(t,r){return t=rz(t),fr(Ku.count(El(t),t)+(El(t).getUTCDay()===4),r,2)}function mNe(t){return t.getUTCDay()}function hNe(t,r){return fr(Jv.count(El(t)-1,t),r,2)}function pNe(t,r){return fr(t.getUTCFullYear()%100,r,2)}function fNe(t,r){return t=rz(t),fr(t.getUTCFullYear()%100,r,2)}function xNe(t,r){return fr(t.getUTCFullYear()%1e4,r,4)}function gNe(t,r){var s=t.getUTCDay();return t=s>=4||s===0?Ku(t):Ku.ceil(t),fr(t.getUTCFullYear()%1e4,r,4)}function vNe(){return"+0000"}function OO(){return"%"}function EO(t){return+t}function DO(t){return Math.floor(+t/1e3)}var Sd,sz,nz;yNe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yNe(t){return Sd=y0e(t),sz=Sd.format,Sd.parse,nz=Sd.utcFormat,Sd.utcParse,Sd}function jNe(t){return new Date(t)}function bNe(t){return t instanceof Date?+t:+new Date(+t)}function zP(t,r,s,n,a,i,l,o,c,d){var u=TP(),m=u.invert,h=u.domain,g=d(".%L"),x=d(":%S"),p=d("%I:%M"),y=d("%I %p"),v=d("%a %d"),f=d("%b %d"),b=d("%B"),N=d("%Y");function w(C){return(c(C)<C?g:o(C)<C?x:l(C)<C?p:i(C)<C?y:n(C)<C?a(C)<C?v:f:s(C)<C?b:N)(C)}return u.invert=function(C){return new Date(m(C))},u.domain=function(C){return arguments.length?h(Array.from(C,bNe)):h().map(jNe)},u.ticks=function(C){var P=h();return t(P[0],P[P.length-1],C??10)},u.tickFormat=function(C,P){return P==null?w:d(P)},u.nice=function(C){var P=h();return(!C||typeof C.range!="function")&&(C=r(P[0],P[P.length-1],C??10)),C?h(zq(P,C)):u},u.copy=function(){return Gf(u,zP(t,r,s,n,a,i,l,o,c,d))},u}function NNe(){return Fa.apply(zP(g0e,v0e,Ol,UP,rb,Yf,BP,$P,hc,sz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wNe(){return Fa.apply(zP(f0e,x0e,El,qP,sb,tb,VP,LP,hc,nz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nb(){var t=0,r=1,s,n,a,i,l=Nn,o=!1,c;function d(m){return m==null||isNaN(m=+m)?c:l(a===0?.5:(m=(i(m)-s)*a,o?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,r]=m,s=i(t=+t),n=i(r=+r),a=s===n?0:1/(n-s),d):[t,r]},d.clamp=function(m){return arguments.length?(o=!!m,d):o},d.interpolator=function(m){return arguments.length?(l=m,d):l};function u(m){return function(h){var g,x;return arguments.length?([g,x]=h,l=m(g,x),d):[l(0),l(1)]}}return d.range=u(Lm),d.rangeRound=u(_P),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return i=m,s=m(t),n=m(r),a=s===n?0:1/(n-s),d}}function Wo(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function az(){var t=Ho(nb()(Nn));return t.copy=function(){return Wo(t,az())},Fl.apply(t,arguments)}function iz(){var t=DP(nb()).domain([1,10]);return t.copy=function(){return Wo(t,iz()).base(t.base())},Fl.apply(t,arguments)}function lz(){var t=MP(nb());return t.copy=function(){return Wo(t,lz()).constant(t.constant())},Fl.apply(t,arguments)}function KP(){var t=IP(nb());return t.copy=function(){return Wo(t,KP()).exponent(t.exponent())},Fl.apply(t,arguments)}function SNe(){return KP.apply(null,arguments).exponent(.5)}function oz(){var t=[],r=Nn;function s(n){if(n!=null&&!isNaN(n=+n))return r((Hf(t,n,1)-1)/(t.length-1))}return s.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Co),s},s.interpolator=function(n){return arguments.length?(r=n,s):r},s.range=function(){return t.map((n,a)=>r(a/(t.length-1)))},s.quantiles=function(n){return Array.from({length:n+1},(a,i)=>dbe(t,i/n))},s.copy=function(){return oz(r).domain(t)},Fl.apply(s,arguments)}function ab(){var t=0,r=.5,s=1,n=1,a,i,l,o,c,d=Nn,u,m=!1,h;function g(p){return isNaN(p=+p)?h:(p=.5+((p=+u(p))-i)*(n*p<n*i?o:c),d(m?Math.max(0,Math.min(1,p)):p))}g.domain=function(p){return arguments.length?([t,r,s]=p,a=u(t=+t),i=u(r=+r),l=u(s=+s),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,g):[t,r,s]},g.clamp=function(p){return arguments.length?(m=!!p,g):m},g.interpolator=function(p){return arguments.length?(d=p,g):d};function x(p){return function(y){var v,f,b;return arguments.length?([v,f,b]=y,d=Rbe(p,[v,f,b]),g):[d(0),d(.5),d(1)]}}return g.range=x(Lm),g.rangeRound=x(_P),g.unknown=function(p){return arguments.length?(h=p,g):h},function(p){return u=p,a=p(t),i=p(r),l=p(s),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,g}}function cz(){var t=Ho(ab()(Nn));return t.copy=function(){return Wo(t,cz())},Fl.apply(t,arguments)}function dz(){var t=DP(ab()).domain([.1,1,10]);return t.copy=function(){return Wo(t,dz()).base(t.base())},Fl.apply(t,arguments)}function uz(){var t=MP(ab());return t.copy=function(){return Wo(t,uz()).constant(t.constant())},Fl.apply(t,arguments)}function HP(){var t=IP(ab());return t.copy=function(){return Wo(t,HP()).exponent(t.exponent())},Fl.apply(t,arguments)}function CNe(){return HP.apply(null,arguments).exponent(.5)}const MO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Vp,scaleDiverging:cz,scaleDivergingLog:dz,scaleDivergingPow:HP,scaleDivergingSqrt:CNe,scaleDivergingSymlog:uz,scaleIdentity:qq,scaleImplicit:q1,scaleLinear:Qv,scaleLog:Kq,scaleOrdinal:PP,scalePoint:Hh,scalePow:RP,scaleQuantile:Gq,scaleQuantize:Yq,scaleRadial:Wq,scaleSequential:az,scaleSequentialLog:iz,scaleSequentialPow:KP,scaleSequentialQuantile:oz,scaleSequentialSqrt:SNe,scaleSequentialSymlog:lz,scaleSqrt:a0e,scaleSymlog:Hq,scaleThreshold:Qq,scaleTime:NNe,scaleUtc:wNe,tickFormat:Uq},Symbol.toStringTag,{value:"Module"}));var PNe=Tm;function kNe(t,r,s){for(var n=-1,a=t.length;++n<a;){var i=t[n],l=r(i);if(l!=null&&(o===void 0?l===l&&!PNe(l):s(l,o)))var o=l,c=i}return c}var ib=kNe;function ANe(t,r){return t>r}var mz=ANe,_Ne=ib,TNe=mz,ONe=$m;function ENe(t){return t&&t.length?_Ne(t,ONe,TNe):void 0}var DNe=ENe;const lb=jr(DNe);function MNe(t,r){return t<r}var hz=MNe,INe=ib,RNe=hz,FNe=$m;function $Ne(t){return t&&t.length?INe(t,FNe,RNe):void 0}var LNe=$Ne;const ob=jr(LNe);var BNe=iP,VNe=Qi,UNe=bq,qNe=Gn;function zNe(t,r){var s=qNe(t)?BNe:UNe;return s(t,VNe(r))}var KNe=zNe,HNe=yq,WNe=KNe;function GNe(t,r){return HNe(WNe(t,r),1)}var YNe=GNe;const QNe=jr(YNe);var XNe=bP;function ZNe(t,r){return XNe(t,r)}var JNe=ZNe;const Qf=jr(JNe);var Bm=1e9,ewe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},GP,Xr=!0,Ia="[DecimalError] ",Ac=Ia+"Invalid argument: ",WP=Ia+"Exponent out of range: ",Vm=Math.floor,sc=Math.pow,twe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,na,$s=1e7,qr=7,pz=9007199254740991,ey=Vm(pz/qr),pt={};pt.absoluteValue=pt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};pt.comparedTo=pt.cmp=function(t){var r,s,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,r=0,s=n<a?n:a;r<s;++r)if(i.d[r]!==t.d[r])return i.d[r]>t.d[r]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};pt.decimalPlaces=pt.dp=function(){var t=this,r=t.d.length-1,s=(r-t.e)*qr;if(r=t.d[r],r)for(;r%10==0;r/=10)s--;return s<0?0:s};pt.dividedBy=pt.div=function(t){return yl(this,new this.constructor(t))};pt.dividedToIntegerBy=pt.idiv=function(t){var r=this,s=r.constructor;return Er(yl(r,new s(t),0,1),s.precision)};pt.equals=pt.eq=function(t){return!this.cmp(t)};pt.exponent=function(){return Ns(this)};pt.greaterThan=pt.gt=function(t){return this.cmp(t)>0};pt.greaterThanOrEqualTo=pt.gte=function(t){return this.cmp(t)>=0};pt.isInteger=pt.isint=function(){return this.e>this.d.length-2};pt.isNegative=pt.isneg=function(){return this.s<0};pt.isPositive=pt.ispos=function(){return this.s>0};pt.isZero=function(){return this.s===0};pt.lessThan=pt.lt=function(t){return this.cmp(t)<0};pt.lessThanOrEqualTo=pt.lte=function(t){return this.cmp(t)<1};pt.logarithm=pt.log=function(t){var r,s=this,n=s.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(na))throw Error(Ia+"NaN");if(s.s<1)throw Error(Ia+(s.s?"NaN":"-Infinity"));return s.eq(na)?new n(0):(Xr=!1,r=yl(Hp(s,i),Hp(t,i),i),Xr=!0,Er(r,a))};pt.minus=pt.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?gz(r,t):fz(r,(t.s=-t.s,t))};pt.modulo=pt.mod=function(t){var r,s=this,n=s.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Ia+"NaN");return s.s?(Xr=!1,r=yl(s,t,0,1).times(t),Xr=!0,s.minus(r)):Er(new n(s),a)};pt.naturalExponential=pt.exp=function(){return xz(this)};pt.naturalLogarithm=pt.ln=function(){return Hp(this)};pt.negated=pt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};pt.plus=pt.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?fz(r,t):gz(r,(t.s=-t.s,t))};pt.precision=pt.sd=function(t){var r,s,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ac+t);if(r=Ns(a)+1,n=a.d.length-1,s=n*qr+1,n=a.d[n],n){for(;n%10==0;n/=10)s--;for(n=a.d[0];n>=10;n/=10)s++}return t&&r>s?r:s};pt.squareRoot=pt.sqrt=function(){var t,r,s,n,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Ia+"NaN")}for(t=Ns(o),Xr=!1,a=Math.sqrt(+o),a==0||a==1/0?(r=Oi(o.d),(r.length+t)%2==0&&(r+="0"),a=Math.sqrt(r),t=Vm((t+1)/2)-(t<0||t%2),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new c(r)):n=new c(a.toString()),s=c.precision,a=l=s+3;;)if(i=n,n=i.plus(yl(o,i,l+2)).times(.5),Oi(i.d).slice(0,l)===(r=Oi(n.d)).slice(0,l)){if(r=r.slice(l-3,l+1),a==l&&r=="4999"){if(Er(i,s+1,0),i.times(i).eq(o)){n=i;break}}else if(r!="9999")break;l+=4}return Xr=!0,Er(n,s)};pt.times=pt.mul=function(t){var r,s,n,a,i,l,o,c,d,u=this,m=u.constructor,h=u.d,g=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,s=u.e+t.e,c=h.length,d=g.length,c<d&&(i=h,h=g,g=i,l=c,c=d,d=l),i=[],l=c+d,n=l;n--;)i.push(0);for(n=d;--n>=0;){for(r=0,a=c+n;a>n;)o=i[a]+g[n]*h[a-n-1]+r,i[a--]=o%$s|0,r=o/$s|0;i[a]=(i[a]+r)%$s|0}for(;!i[--l];)i.pop();return r?++s:i.shift(),t.d=i,t.e=s,Xr?Er(t,m.precision):t};pt.toDecimalPlaces=pt.todp=function(t,r){var s=this,n=s.constructor;return s=new n(s),t===void 0?s:(zi(t,0,Bm),r===void 0?r=n.rounding:zi(r,0,8),Er(s,t+Ns(s)+1,r))};pt.toExponential=function(t,r){var s,n=this,a=n.constructor;return t===void 0?s=Gc(n,!0):(zi(t,0,Bm),r===void 0?r=a.rounding:zi(r,0,8),n=Er(new a(n),t+1,r),s=Gc(n,!0,t+1)),s};pt.toFixed=function(t,r){var s,n,a=this,i=a.constructor;return t===void 0?Gc(a):(zi(t,0,Bm),r===void 0?r=i.rounding:zi(r,0,8),n=Er(new i(a),t+Ns(a)+1,r),s=Gc(n.abs(),!1,t+Ns(n)+1),a.isneg()&&!a.isZero()?"-"+s:s)};pt.toInteger=pt.toint=function(){var t=this,r=t.constructor;return Er(new r(t),Ns(t)+1,r.rounding)};pt.toNumber=function(){return+this};pt.toPower=pt.pow=function(t){var r,s,n,a,i,l,o=this,c=o.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(na);if(o=new c(o),!o.s){if(t.s<1)throw Error(Ia+"Infinity");return o}if(o.eq(na))return o;if(n=c.precision,t.eq(na))return Er(o,n);if(r=t.e,s=t.d.length-1,l=r>=s,i=o.s,l){if((s=u<0?-u:u)<=pz){for(a=new c(na),r=Math.ceil(n/qr+4),Xr=!1;s%2&&(a=a.times(o),RO(a.d,r)),s=Vm(s/2),s!==0;)o=o.times(o),RO(o.d,r);return Xr=!0,t.s<0?new c(na).div(a):Er(a,n)}}else if(i<0)throw Error(Ia+"NaN");return i=i<0&&t.d[Math.max(r,s)]&1?-1:1,o.s=1,Xr=!1,a=t.times(Hp(o,n+d)),Xr=!0,a=xz(a),a.s=i,a};pt.toPrecision=function(t,r){var s,n,a=this,i=a.constructor;return t===void 0?(s=Ns(a),n=Gc(a,s<=i.toExpNeg||s>=i.toExpPos)):(zi(t,1,Bm),r===void 0?r=i.rounding:zi(r,0,8),a=Er(new i(a),t,r),s=Ns(a),n=Gc(a,t<=s||s<=i.toExpNeg,t)),n};pt.toSignificantDigits=pt.tosd=function(t,r){var s=this,n=s.constructor;return t===void 0?(t=n.precision,r=n.rounding):(zi(t,1,Bm),r===void 0?r=n.rounding:zi(r,0,8)),Er(new n(s),t,r)};pt.toString=pt.valueOf=pt.val=pt.toJSON=pt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=Ns(t),s=t.constructor;return Gc(t,r<=s.toExpNeg||r>=s.toExpPos)};function fz(t,r){var s,n,a,i,l,o,c,d,u=t.constructor,m=u.precision;if(!t.s||!r.s)return r.s||(r=new u(t)),Xr?Er(r,m):r;if(c=t.d,d=r.d,l=t.e,a=r.e,c=c.slice(),i=l-a,i){for(i<0?(n=c,i=-i,o=d.length):(n=d,a=l,o=c.length),l=Math.ceil(m/qr),o=l>o?l+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,n=d,d=c,c=n),s=0;i;)s=(c[--i]=c[i]+d[i]+s)/$s|0,c[i]%=$s;for(s&&(c.unshift(s),++a),o=c.length;c[--o]==0;)c.pop();return r.d=c,r.e=a,Xr?Er(r,m):r}function zi(t,r,s){if(t!==~~t||t<r||t>s)throw Error(Ac+t)}function Oi(t){var r,s,n,a=t.length-1,i="",l=t[0];if(a>0){for(i+=l,r=1;r<a;r++)n=t[r]+"",s=qr-n.length,s&&(i+=Ql(s)),i+=n;l=t[r],n=l+"",s=qr-n.length,s&&(i+=Ql(s))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var yl=function(){function t(n,a){var i,l=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+l,n[o]=i%$s|0,l=i/$s|0;return l&&n.unshift(l),n}function r(n,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function s(n,a,i){for(var l=0;i--;)n[i]-=l,l=n[i]<a[i]?1:0,n[i]=l*$s+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,l){var o,c,d,u,m,h,g,x,p,y,v,f,b,N,w,C,P,S,A=n.constructor,k=n.s==a.s?1:-1,D=n.d,q=a.d;if(!n.s)return new A(n);if(!a.s)throw Error(Ia+"Division by zero");for(c=n.e-a.e,P=q.length,w=D.length,g=new A(k),x=g.d=[],d=0;q[d]==(D[d]||0);)++d;if(q[d]>(D[d]||0)&&--c,i==null?f=i=A.precision:l?f=i+(Ns(n)-Ns(a))+1:f=i,f<0)return new A(0);if(f=f/qr+2|0,d=0,P==1)for(u=0,q=q[0],f++;(d<w||u)&&f--;d++)b=u*$s+(D[d]||0),x[d]=b/q|0,u=b%q|0;else{for(u=$s/(q[0]+1)|0,u>1&&(q=t(q,u),D=t(D,u),P=q.length,w=D.length),N=P,p=D.slice(0,P),y=p.length;y<P;)p[y++]=0;S=q.slice(),S.unshift(0),C=q[0],q[1]>=$s/2&&++C;do u=0,o=r(q,p,P,y),o<0?(v=p[0],P!=y&&(v=v*$s+(p[1]||0)),u=v/C|0,u>1?(u>=$s&&(u=$s-1),m=t(q,u),h=m.length,y=p.length,o=r(m,p,h,y),o==1&&(u--,s(m,P<h?S:q,h))):(u==0&&(o=u=1),m=q.slice()),h=m.length,h<y&&m.unshift(0),s(p,m,y),o==-1&&(y=p.length,o=r(q,p,P,y),o<1&&(u++,s(p,P<y?S:q,y))),y=p.length):o===0&&(u++,p=[0]),x[d++]=u,o&&p[0]?p[y++]=D[N]||0:(p=[D[N]],y=1);while((N++<w||p[0]!==void 0)&&f--)}return x[0]||x.shift(),g.e=c,Er(g,l?i+Ns(g)+1:i)}}();function xz(t,r){var s,n,a,i,l,o,c=0,d=0,u=t.constructor,m=u.precision;if(Ns(t)>16)throw Error(WP+Ns(t));if(!t.s)return new u(na);for(Xr=!1,o=m,l=new u(.03125);t.abs().gte(.1);)t=t.times(l),d+=5;for(n=Math.log(sc(2,d))/Math.LN10*2+5|0,o+=n,s=a=i=new u(na),u.precision=o;;){if(a=Er(a.times(t),o),s=s.times(++c),l=i.plus(yl(a,s,o)),Oi(l.d).slice(0,o)===Oi(i.d).slice(0,o)){for(;d--;)i=Er(i.times(i),o);return u.precision=m,r==null?(Xr=!0,Er(i,m)):i}i=l}}function Ns(t){for(var r=t.e*qr,s=t.d[0];s>=10;s/=10)r++;return r}function lN(t,r,s){if(r>t.LN10.sd())throw Xr=!0,s&&(t.precision=s),Error(Ia+"LN10 precision limit exceeded");return Er(new t(t.LN10),r)}function Ql(t){for(var r="";t--;)r+="0";return r}function Hp(t,r){var s,n,a,i,l,o,c,d,u,m=1,h=10,g=t,x=g.d,p=g.constructor,y=p.precision;if(g.s<1)throw Error(Ia+(g.s?"NaN":"-Infinity"));if(g.eq(na))return new p(0);if(r==null?(Xr=!1,d=y):d=r,g.eq(10))return r==null&&(Xr=!0),lN(p,d);if(d+=h,p.precision=d,s=Oi(x),n=s.charAt(0),i=Ns(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&s.charAt(1)>3;)g=g.times(t),s=Oi(g.d),n=s.charAt(0),m++;i=Ns(g),n>1?(g=new p("0."+s),i++):g=new p(n+"."+s.slice(1))}else return c=lN(p,d+2,y).times(i+""),g=Hp(new p(n+"."+s.slice(1)),d-h).plus(c),p.precision=y,r==null?(Xr=!0,Er(g,y)):g;for(o=l=g=yl(g.minus(na),g.plus(na),d),u=Er(g.times(g),d),a=3;;){if(l=Er(l.times(u),d),c=o.plus(yl(l,new p(a),d)),Oi(c.d).slice(0,d)===Oi(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(lN(p,d+2,y).times(i+""))),o=yl(o,new p(m),d),p.precision=y,r==null?(Xr=!0,Er(o,y)):o;o=c,a+=2}}function IO(t,r){var s,n,a;for((s=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(s<0&&(s=n),s+=+r.slice(n+1),r=r.substring(0,n)):s<0&&(s=r.length),n=0;r.charCodeAt(n)===48;)++n;for(a=r.length;r.charCodeAt(a-1)===48;)--a;if(r=r.slice(n,a),r){if(a-=n,s=s-n-1,t.e=Vm(s/qr),t.d=[],n=(s+1)%qr,s<0&&(n+=qr),n<a){for(n&&t.d.push(+r.slice(0,n)),a-=qr;n<a;)t.d.push(+r.slice(n,n+=qr));r=r.slice(n),n=qr-r.length}else n-=a;for(;n--;)r+="0";if(t.d.push(+r),Xr&&(t.e>ey||t.e<-ey))throw Error(WP+s)}else t.s=0,t.e=0,t.d=[0];return t}function Er(t,r,s){var n,a,i,l,o,c,d,u,m=t.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(n=r-l,n<0)n+=qr,a=r,d=m[u=0];else{if(u=Math.ceil((n+1)/qr),i=m.length,u>=i)return t;for(d=i=m[u],l=1;i>=10;i/=10)l++;n%=qr,a=n-qr+l}if(s!==void 0&&(i=sc(10,l-a-1),o=d/i%10|0,c=r<0||m[u+1]!==void 0||d%i,c=s<4?(o||c)&&(s==0||s==(t.s<0?3:2)):o>5||o==5&&(s==4||c||s==6&&(n>0?a>0?d/sc(10,l-a):0:m[u-1])%10&1||s==(t.s<0?8:7))),r<1||!m[0])return c?(i=Ns(t),m.length=1,r=r-i-1,m[0]=sc(10,(qr-r%qr)%qr),t.e=Vm(-r/qr)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=u,i=1,u--):(m.length=u+1,i=sc(10,qr-n),m[u]=a>0?(d/sc(10,l-a)%sc(10,a)|0)*i:0),c)for(;;)if(u==0){(m[0]+=i)==$s&&(m[0]=1,++t.e);break}else{if(m[u]+=i,m[u]!=$s)break;m[u--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Xr&&(t.e>ey||t.e<-ey))throw Error(WP+Ns(t));return t}function gz(t,r){var s,n,a,i,l,o,c,d,u,m,h=t.constructor,g=h.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new h(t),Xr?Er(r,g):r;if(c=t.d,m=r.d,n=r.e,d=t.e,c=c.slice(),l=d-n,l){for(u=l<0,u?(s=c,l=-l,o=m.length):(s=m,n=d,o=c.length),a=Math.max(Math.ceil(g/qr),o)+2,l>a&&(l=a,s.length=1),s.reverse(),a=l;a--;)s.push(0);s.reverse()}else{for(a=c.length,o=m.length,u=a<o,u&&(o=a),a=0;a<o;a++)if(c[a]!=m[a]){u=c[a]<m[a];break}l=0}for(u&&(s=c,c=m,m=s,r.s=-r.s),o=c.length,a=m.length-o;a>0;--a)c[o++]=0;for(a=m.length;a>l;){if(c[--a]<m[a]){for(i=a;i&&c[--i]===0;)c[i]=$s-1;--c[i],c[a]+=$s}c[a]-=m[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(r.d=c,r.e=n,Xr?Er(r,g):r):new h(0)}function Gc(t,r,s){var n,a=Ns(t),i=Oi(t.d),l=i.length;return r?(s&&(n=s-l)>0?i=i.charAt(0)+"."+i.slice(1)+Ql(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ql(-a-1)+i,s&&(n=s-l)>0&&(i+=Ql(n))):a>=l?(i+=Ql(a+1-l),s&&(n=s-a-1)>0&&(i=i+"."+Ql(n))):((n=a+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),s&&(n=s-l)>0&&(a+1===l&&(i+="."),i+=Ql(n))),t.s<0?"-"+i:i}function RO(t,r){if(t.length>r)return t.length=r,!0}function vz(t){var r,s,n;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ac+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return IO(l,i.toString())}else if(typeof i!="string")throw Error(Ac+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,twe.test(i))IO(l,i);else throw Error(Ac+i)}if(a.prototype=pt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=vz,a.config=a.set=rwe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<n.length;)t.hasOwnProperty(s=n[r++])||(t[s]=this[s]);return a.config(t),a}function rwe(t){if(!t||typeof t!="object")throw Error(Ia+"Object expected");var r,s,n,a=["precision",1,Bm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<a.length;r+=3)if((n=t[s=a[r]])!==void 0)if(Vm(n)===n&&n>=a[r+1]&&n<=a[r+2])this[s]=n;else throw Error(Ac+s+": "+n);if((n=t[s="LN10"])!==void 0)if(n==Math.LN10)this[s]=new this(n);else throw Error(Ac+s+": "+n);return this}var GP=vz(ewe);na=new GP(1);const Ar=GP;function swe(t){return lwe(t)||iwe(t)||awe(t)||nwe()}function nwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function awe(t,r){if(t){if(typeof t=="string")return W1(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return W1(t,r)}}function iwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function lwe(t){if(Array.isArray(t))return W1(t)}function W1(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}var owe=function(r){return r},yz={},jz=function(r){return r===yz},FO=function(r){return function s(){return arguments.length===0||arguments.length===1&&jz(arguments.length<=0?void 0:arguments[0])?s:r.apply(void 0,arguments)}},cwe=function t(r,s){return r===1?s:FO(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var l=a.filter(function(o){return o!==yz}).length;return l>=r?s.apply(void 0,a):t(r-l,FO(function(){for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];var u=a.map(function(m){return jz(m)?c.shift():m});return s.apply(void 0,swe(u).concat(c))}))})},cb=function(r){return cwe(r.length,r)},G1=function(r,s){for(var n=[],a=r;a<s;++a)n[a-r]=a;return n},dwe=cb(function(t,r){return Array.isArray(r)?r.map(t):Object.keys(r).map(function(s){return r[s]}).map(t)}),uwe=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];if(!s.length)return owe;var a=s.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce(function(o,c){return c(o)},i.apply(void 0,arguments))}},Y1=function(r){return Array.isArray(r)?r.reverse():r.split("").reverse.join("")},bz=function(r){var s=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return s&&i.every(function(o,c){return o===s[c]})||(s=i,n=r.apply(void 0,i)),n}};function mwe(t){var r;return t===0?r=1:r=Math.floor(new Ar(t).abs().log(10).toNumber())+1,r}function hwe(t,r,s){for(var n=new Ar(t),a=0,i=[];n.lt(r)&&a<1e5;)i.push(n.toNumber()),n=n.add(s),a++;return i}var pwe=cb(function(t,r,s){var n=+t,a=+r;return n+s*(a-n)}),fwe=cb(function(t,r,s){var n=r-+t;return n=n||1/0,(s-t)/n}),xwe=cb(function(t,r,s){var n=r-+t;return n=n||1/0,Math.max(0,Math.min(1,(s-t)/n))});const db={rangeStep:hwe,getDigitCount:mwe,interpolateNumber:pwe,uninterpolateNumber:fwe,uninterpolateTruncation:xwe};function Q1(t){return ywe(t)||vwe(t)||Nz(t)||gwe()}function gwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vwe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ywe(t){if(Array.isArray(t))return X1(t)}function Wp(t,r){return Nwe(t)||bwe(t,r)||Nz(t,r)||jwe()}function jwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nz(t,r){if(t){if(typeof t=="string")return X1(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return X1(t,r)}}function X1(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function bwe(t,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var s=[],n=!0,a=!1,i=void 0;try{for(var l=t[Symbol.iterator](),o;!(n=(o=l.next()).done)&&(s.push(o.value),!(r&&s.length===r));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&l.return!=null&&l.return()}finally{if(a)throw i}}return s}}function Nwe(t){if(Array.isArray(t))return t}function wz(t){var r=Wp(t,2),s=r[0],n=r[1],a=s,i=n;return s>n&&(a=n,i=s),[a,i]}function Sz(t,r,s){if(t.lte(0))return new Ar(0);var n=db.getDigitCount(t.toNumber()),a=new Ar(10).pow(n),i=t.div(a),l=n!==1?.05:.1,o=new Ar(Math.ceil(i.div(l).toNumber())).add(s).mul(l),c=o.mul(a);return r?c:new Ar(Math.ceil(c))}function wwe(t,r,s){var n=1,a=new Ar(t);if(!a.isint()&&s){var i=Math.abs(t);i<1?(n=new Ar(10).pow(db.getDigitCount(t)-1),a=new Ar(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ar(Math.floor(t)))}else t===0?a=new Ar(Math.floor((r-1)/2)):s||(a=new Ar(Math.floor(t)));var l=Math.floor((r-1)/2),o=uwe(dwe(function(c){return a.add(new Ar(c-l).mul(n)).toNumber()}),G1);return o(0,r)}function Cz(t,r,s,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(s-1)))return{step:new Ar(0),tickMin:new Ar(0),tickMax:new Ar(0)};var i=Sz(new Ar(r).sub(t).div(s-1),n,a),l;t<=0&&r>=0?l=new Ar(0):(l=new Ar(t).add(r).div(2),l=l.sub(new Ar(l).mod(i)));var o=Math.ceil(l.sub(t).div(i).toNumber()),c=Math.ceil(new Ar(r).sub(l).div(i).toNumber()),d=o+c+1;return d>s?Cz(t,r,s,n,a+1):(d<s&&(c=r>0?c+(s-d):c,o=r>0?o:o+(s-d)),{step:i,tickMin:l.sub(new Ar(o).mul(i)),tickMax:l.add(new Ar(c).mul(i))})}function Swe(t){var r=Wp(t,2),s=r[0],n=r[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(a,2),o=wz([s,n]),c=Wp(o,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(Q1(G1(0,a-1).map(function(){return 1/0}))):[].concat(Q1(G1(0,a-1).map(function(){return-1/0})),[u]);return s>n?Y1(m):m}if(d===u)return wwe(d,a,i);var h=Cz(d,u,l,i),g=h.step,x=h.tickMin,p=h.tickMax,y=db.rangeStep(x,p.add(new Ar(.1).mul(g)),g);return s>n?Y1(y):y}function Cwe(t,r){var s=Wp(t,2),n=s[0],a=s[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=wz([n,a]),o=Wp(l,2),c=o[0],d=o[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var u=Math.max(r,2),m=Sz(new Ar(d).sub(c).div(u-1),i,0),h=[].concat(Q1(db.rangeStep(new Ar(c),new Ar(d).sub(new Ar(.99).mul(m)),m)),[d]);return n>a?Y1(h):h}var Pwe=bz(Swe),kwe=bz(Cwe),Awe="Invariant failed";function Yc(t,r){throw new Error(Awe)}var _we=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hu(t)}function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ty.apply(this,arguments)}function Twe(t,r){return Mwe(t)||Dwe(t,r)||Ewe(t,r)||Owe()}function Owe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ewe(t,r){if(t){if(typeof t=="string")return $O(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return $O(t,r)}}function $O(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function Dwe(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function Mwe(t){if(Array.isArray(t))return t}function Iwe(t,r){if(t==null)return{};var s=Rwe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Rwe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function Fwe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $we(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Az(n.key),n)}}function Lwe(t,r,s){return r&&$we(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bwe(t,r,s){return r=ry(r),Vwe(t,Pz()?Reflect.construct(r,s||[],ry(t).constructor):r.apply(t,s))}function Vwe(t,r){if(r&&(Hu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uwe(t)}function Uwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pz=function(){return!!t})()}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},ry(t)}function qwe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Z1(t,r)}function Z1(t,r){return Z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z1(t,r)}function kz(t,r,s){return r=Az(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Az(t){var r=zwe(t,"string");return Hu(r)=="symbol"?r:r+""}function zwe(t,r){if(Hu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Xf=function(t){function r(){return Fwe(this,r),Bwe(this,r,arguments)}return qwe(r,t),Lwe(r,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,l=n.width,o=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,m=n.yAxis,h=Iwe(n,_we),g=St(h,!1);this.props.direction==="x"&&u.type!=="number"&&Yc();var x=c.map(function(p){var y=d(p,o),v=y.x,f=y.y,b=y.value,N=y.errorVal;if(!N)return null;var w=[],C,P;if(Array.isArray(N)){var S=Twe(N,2);C=S[0],P=S[1]}else C=P=N;if(i==="vertical"){var A=u.scale,k=f+a,D=k+l,q=k-l,z=A(b-C),I=A(b+P);w.push({x1:I,y1:D,x2:I,y2:q}),w.push({x1:z,y1:k,x2:I,y2:k}),w.push({x1:z,y1:D,x2:z,y2:q})}else if(i==="horizontal"){var F=m.scale,W=v+a,X=W-l,K=W+l,Z=F(b-C),ue=F(b+P);w.push({x1:X,y1:ue,x2:K,y2:ue}),w.push({x1:W,y1:Z,x2:W,y2:ue}),w.push({x1:X,y1:Z,x2:K,y2:Z})}return Q.createElement(hr,ty({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Ne){return"".concat(Ne.x1,"-").concat(Ne.x2,"-").concat(Ne.y1,"-").concat(Ne.y2)}))},g),w.map(function(Ne){return Q.createElement("line",ty({},Ne,{key:"line-".concat(Ne.x1,"-").concat(Ne.x2,"-").concat(Ne.y1,"-").concat(Ne.y2)}))}))});return Q.createElement(hr,{className:"recharts-errorBars"},x)}}])}(Q.Component);kz(Xf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});kz(Xf,"displayName","ErrorBar");function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gp(t)}function LO(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Qo(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?LO(Object(s),!0).forEach(function(n){Kwe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):LO(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Kwe(t,r,s){return r=Hwe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Hwe(t){var r=Wwe(t,"string");return Gp(r)=="symbol"?r:r+""}function Wwe(t,r){if(Gp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var _z=function(r){var s=r.children,n=r.formattedGraphicalItems,a=r.legendWidth,i=r.legendContent,l=Zn(s,vl);if(!l)return null;var o=vl.defaultProps,c=o!==void 0?Qo(Qo({},o),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(n||[]).reduce(function(u,m){var h=m.item,g=m.props,x=g.sectors||g.data||[];return u.concat(x.map(function(p){return{type:l.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(n||[]).map(function(u){var m=u.item,h=m.type.defaultProps,g=h!==void 0?Qo(Qo({},h),m.props):{},x=g.dataKey,p=g.name,y=g.legendType,v=g.hide;return{inactive:v,dataKey:x,type:c.iconType||y||"square",color:YP(m),value:p||x,payload:g}}),Qo(Qo(Qo({},c),vl.getWithHeight(l,a)),{},{payload:d,item:l})};function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yp(t)}function BO(t){return Xwe(t)||Qwe(t)||Ywe(t)||Gwe()}function Gwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ywe(t,r){if(t){if(typeof t=="string")return J1(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return J1(t,r)}}function Qwe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xwe(t){if(Array.isArray(t))return J1(t)}function J1(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function VO(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function cs(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?VO(Object(s),!0).forEach(function(n){ou(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):VO(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function ou(t,r,s){return r=Zwe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Zwe(t){var r=Jwe(t,"string");return Yp(r)=="symbol"?r:r+""}function Jwe(t,r){if(Yp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function _s(t,r,s){return Vt(t)||Vt(r)?s:Ms(r)?ma(t,r,s):Lt(r)?r(t):s}function Wh(t,r,s,n){var a=QNe(t,function(o){return _s(o,r)});if(s==="number"){var i=a.filter(function(o){return Ye(o)||parseFloat(o)});return i.length?[ob(i),lb(i)]:[1/0,-1/0]}var l=n?a.filter(function(o){return!Vt(o)}):a;return l.map(function(o){return Ms(o)||o instanceof Date?o:""})}var e1e=function(r){var s,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,o=(s=n==null?void 0:n.length)!==null&&s!==void 0?s:0;if(o<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<o;d++){var u=d>0?a[d-1].coordinate:a[o-1].coordinate,m=a[d].coordinate,h=d>=o-1?a[0].coordinate:a[d+1].coordinate,g=void 0;if(jn(m-u)!==jn(h-m)){var x=[];if(jn(h-m)===jn(c[1]-c[0])){g=h;var p=m+c[1]-c[0];x[0]=Math.min(p,(p+u)/2),x[1]=Math.max(p,(p+u)/2)}else{g=u;var y=h+c[1]-c[0];x[0]=Math.min(m,(y+m)/2),x[1]=Math.max(m,(y+m)/2)}var v=[Math.min(m,(g+m)/2),Math.max(m,(g+m)/2)];if(r>v[0]&&r<=v[1]||r>=x[0]&&r<=x[1]){l=a[d].index;break}}else{var f=Math.min(u,h),b=Math.max(u,h);if(r>(f+m)/2&&r<=(b+m)/2){l=a[d].index;break}}}else for(var N=0;N<o;N++)if(N===0&&r<=(n[N].coordinate+n[N+1].coordinate)/2||N>0&&N<o-1&&r>(n[N].coordinate+n[N-1].coordinate)/2&&r<=(n[N].coordinate+n[N+1].coordinate)/2||N===o-1&&r>(n[N].coordinate+n[N-1].coordinate)/2){l=n[N].index;break}return l},YP=function(r){var s,n=r,a=n.type.displayName,i=(s=r.type)!==null&&s!==void 0&&s.defaultProps?cs(cs({},r.type.defaultProps),r.props):r.props,l=i.stroke,o=i.fill,c;switch(a){case"Line":c=l;break;case"Area":case"Radar":c=l&&l!=="none"?l:o;break;default:c=o;break}return c},t1e=function(r){var s=r.barSize,n=r.totalSize,a=r.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var l={},o=Object.keys(i),c=0,d=o.length;c<d;c++)for(var u=i[o[c]].stackGroups,m=Object.keys(u),h=0,g=m.length;h<g;h++){var x=u[m[h]],p=x.items,y=x.cateAxisId,v=p.filter(function(P){return gl(P.type).indexOf("Bar")>=0});if(v&&v.length){var f=v[0].type.defaultProps,b=f!==void 0?cs(cs({},f),v[0].props):v[0].props,N=b.barSize,w=b[y];l[w]||(l[w]=[]);var C=Vt(N)?s:N;l[w].push({item:v[0],stackList:v.slice(1),barSize:Vt(C)?void 0:bn(C,n,0)})}}return l},r1e=function(r){var s=r.barGap,n=r.barCategoryGap,a=r.bandSize,i=r.sizeList,l=i===void 0?[]:i,o=r.maxBarSize,c=l.length;if(c<1)return null;var d=bn(s,a,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var h=!1,g=a/c,x=l.reduce(function(N,w){return N+w.barSize||0},0);x+=(c-1)*d,x>=a&&(x-=(c-1)*d,d=0),x>=a&&g>0&&(h=!0,g*=.9,x=c*g);var p=(a-x)/2>>0,y={offset:p-d,size:0};u=l.reduce(function(N,w){var C={item:w.item,position:{offset:y.offset+y.size+d,size:h?g:w.barSize}},P=[].concat(BO(N),[C]);return y=P[P.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){P.push({item:S,position:y})}),P},m)}else{var v=bn(n,a,0,!0);a-2*v-(c-1)*d<=0&&(d=0);var f=(a-2*v-(c-1)*d)/c;f>1&&(f>>=0);var b=o===+o?Math.min(f,o):f;u=l.reduce(function(N,w,C){var P=[].concat(BO(N),[{item:w.item,position:{offset:v+(f+d)*C+(f-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){P.push({item:S,position:P[P.length-1].position})}),P},m)}return u},s1e=function(r,s,n,a){var i=n.children,l=n.width,o=n.margin,c=l-(o.left||0)-(o.right||0),d=_z({children:i,legendWidth:c});if(d){var u=a||{},m=u.width,h=u.height,g=d.align,x=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&x==="middle")&&g!=="center"&&Ye(r[g]))return cs(cs({},r),{},ou({},g,r[g]+(m||0)));if((p==="horizontal"||p==="vertical"&&g==="center")&&x!=="middle"&&Ye(r[x]))return cs(cs({},r),{},ou({},x,r[x]+(h||0)))}return r},n1e=function(r,s,n){return Vt(s)?!0:r==="horizontal"?s==="yAxis":r==="vertical"||n==="x"?s==="xAxis":n==="y"?s==="yAxis":!0},Tz=function(r,s,n,a,i){var l=s.props.children,o=ha(l,Xf).filter(function(d){return n1e(a,i,d.props.direction)});if(o&&o.length){var c=o.map(function(d){return d.props.dataKey});return r.reduce(function(d,u){var m=_s(u,n);if(Vt(m))return d;var h=Array.isArray(m)?[ob(m),lb(m)]:[m,m],g=c.reduce(function(x,p){var y=_s(u,p,0),v=h[0]-Math.abs(Array.isArray(y)?y[0]:y),f=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,x[0]),Math.max(f,x[1])]},[1/0,-1/0]);return[Math.min(g[0],d[0]),Math.max(g[1],d[1])]},[1/0,-1/0])}return null},a1e=function(r,s,n,a,i){var l=s.map(function(o){return Tz(r,o,n,i,a)}).filter(function(o){return!Vt(o)});return l&&l.length?l.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},Oz=function(r,s,n,a,i){var l=s.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&Tz(r,c,d,a)||Wh(r,d,n,i)});if(n==="number")return l.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var o={};return l.reduce(function(c,d){for(var u=0,m=d.length;u<m;u++)o[d[u]]||(o[d[u]]=!0,c.push(d[u]));return c},[])},Ez=function(r,s){return r==="horizontal"&&s==="xAxis"||r==="vertical"&&s==="yAxis"||r==="centric"&&s==="angleAxis"||r==="radial"&&s==="radiusAxis"},Dz=function(r,s,n,a){if(a)return r.map(function(c){return c.coordinate});var i,l,o=r.map(function(c){return c.coordinate===s&&(i=!0),c.coordinate===n&&(l=!0),c.coordinate});return i||o.push(s),l||o.push(n),o},fl=function(r,s,n){if(!r)return null;var a=r.scale,i=r.duplicateDomain,l=r.type,o=r.range,c=r.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(s||n)&&l==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=r.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?jn(o[0]-o[1])*2*d:d,s&&(r.ticks||r.niceTicks)){var u=(r.ticks||r.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:a(h)+d,value:m,offset:d}});return u.filter(function(m){return!zf(m.coordinate)})}return r.isCategorical&&r.categoricalDomain?r.categoricalDomain.map(function(m,h){return{coordinate:a(m)+d,value:m,index:h,offset:d}}):a.ticks&&!n?a.ticks(r.tickCount).map(function(m){return{coordinate:a(m)+d,value:m,offset:d}}):a.domain().map(function(m,h){return{coordinate:a(m)+d,value:i?i[m]:m,index:h,offset:d}})},oN=new WeakMap,Vx=function(r,s){if(typeof s!="function")return r;oN.has(r)||oN.set(r,new WeakMap);var n=oN.get(r);if(n.has(s))return n.get(s);var a=function(){r.apply(void 0,arguments),s.apply(void 0,arguments)};return n.set(s,a),a},Mz=function(r,s,n){var a=r.scale,i=r.type,l=r.layout,o=r.axisType;if(a==="auto")return l==="radial"&&o==="radiusAxis"?{scale:Vp(),realScaleType:"band"}:l==="radial"&&o==="angleAxis"?{scale:Qv(),realScaleType:"linear"}:i==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?{scale:Hh(),realScaleType:"point"}:i==="category"?{scale:Vp(),realScaleType:"band"}:{scale:Qv(),realScaleType:"linear"};if(Kc(a)){var c="scale".concat(Hj(a));return{scale:(MO[c]||Hh)(),realScaleType:MO[c]?c:"point"}}return Lt(a)?{scale:a}:{scale:Hh(),realScaleType:"point"}},UO=1e-4,Iz=function(r){var s=r.domain();if(!(!s||s.length<=2)){var n=s.length,a=r.range(),i=Math.min(a[0],a[1])-UO,l=Math.max(a[0],a[1])+UO,o=r(s[0]),c=r(s[n-1]);(o<i||o>l||c<i||c>l)&&r.domain([s[0],s[n-1]])}},i1e=function(r,s){if(!r)return null;for(var n=0,a=r.length;n<a;n++)if(r[n].item===s)return r[n].position;return null},l1e=function(r,s){if(!s||s.length!==2||!Ye(s[0])||!Ye(s[1]))return r;var n=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]),i=[r[0],r[1]];return(!Ye(r[0])||r[0]<n)&&(i[0]=n),(!Ye(r[1])||r[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},o1e=function(r){var s=r.length;if(!(s<=0))for(var n=0,a=r[0].length;n<a;++n)for(var i=0,l=0,o=0;o<s;++o){var c=zf(r[o][n][1])?r[o][n][0]:r[o][n][1];c>=0?(r[o][n][0]=i,r[o][n][1]=i+c,i=r[o][n][1]):(r[o][n][0]=l,r[o][n][1]=l+c,l=r[o][n][1])}},c1e=function(r){var s=r.length;if(!(s<=0))for(var n=0,a=r[0].length;n<a;++n)for(var i=0,l=0;l<s;++l){var o=zf(r[l][n][1])?r[l][n][0]:r[l][n][1];o>=0?(r[l][n][0]=i,r[l][n][1]=i+o,i=r[l][n][1]):(r[l][n][0]=0,r[l][n][1]=0)}},d1e={sign:o1e,expand:_ue,none:$u,silhouette:Tue,wiggle:Oue,positive:c1e},u1e=function(r,s,n){var a=s.map(function(o){return o.props.dataKey}),i=d1e[n],l=Aue().keys(a).value(function(o,c){return+_s(o,c,0)}).order(S1).offset(i);return l(r)},m1e=function(r,s,n,a,i,l){if(!r)return null;var o=l?s.reverse():s,c={},d=o.reduce(function(m,h){var g,x=(g=h.type)!==null&&g!==void 0&&g.defaultProps?cs(cs({},h.type.defaultProps),h.props):h.props,p=x.stackId,y=x.hide;if(y)return m;var v=x[n],f=m[v]||{hasStack:!1,stackGroups:{}};if(Ms(p)){var b=f.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};b.items.push(h),f.hasStack=!0,f.stackGroups[p]=b}else f.stackGroups[Im("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return cs(cs({},m),{},ou({},v,f))},c),u={};return Object.keys(d).reduce(function(m,h){var g=d[h];if(g.hasStack){var x={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(p,y){var v=g.stackGroups[y];return cs(cs({},p),{},ou({},y,{numericAxisId:n,cateAxisId:a,items:v.items,stackedData:u1e(r,v.items,i)}))},x)}return cs(cs({},m),{},ou({},h,g))},u)},Rz=function(r,s){var n=s.realScaleType,a=s.type,i=s.tickCount,l=s.originalDomain,o=s.allowDecimals,c=n||s.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=r.domain();if(!d.length)return null;var u=Pwe(d,i,o);return r.domain([ob(u),lb(u)]),{niceTicks:u}}if(i&&a==="number"){var m=r.domain(),h=kwe(m,i,o);return{niceTicks:h}}return null};function qO(t){var r=t.axis,s=t.ticks,n=t.bandSize,a=t.entry,i=t.index,l=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Vt(a[r.dataKey])){var o=Av(s,"value",a[r.dataKey]);if(o)return o.coordinate+n/2}return s[i]?s[i].coordinate+n/2:null}var c=_s(a,Vt(l)?r.dataKey:l);return Vt(c)?null:r.scale(c)}var zO=function(r){var s=r.axis,n=r.ticks,a=r.offset,i=r.bandSize,l=r.entry,o=r.index;if(s.type==="category")return n[o]?n[o].coordinate+a:null;var c=_s(l,s.dataKey,s.domain[o]);return Vt(c)?null:s.scale(c)-i/2+a},h1e=function(r){var s=r.numericAxis,n=s.scale.domain();if(s.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},p1e=function(r,s){var n,a=(n=r.type)!==null&&n!==void 0&&n.defaultProps?cs(cs({},r.type.defaultProps),r.props):r.props,i=a.stackId;if(Ms(i)){var l=s[i];if(l){var o=l.items.indexOf(r);return o>=0?l.stackedData[o]:null}}return null},f1e=function(r){return r.reduce(function(s,n){return[ob(n.concat([s[0]]).filter(Ye)),lb(n.concat([s[1]]).filter(Ye))]},[1/0,-1/0])},Fz=function(r,s,n){return Object.keys(r).reduce(function(a,i){var l=r[i],o=l.stackedData,c=o.reduce(function(d,u){var m=f1e(u.slice(s,n+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},KO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eS=function(r,s,n){if(Lt(r))return r(s,n);if(!Array.isArray(r))return s;var a=[];if(Ye(r[0]))a[0]=n?r[0]:Math.min(r[0],s[0]);else if(KO.test(r[0])){var i=+KO.exec(r[0])[1];a[0]=s[0]-i}else Lt(r[0])?a[0]=r[0](s[0]):a[0]=s[0];if(Ye(r[1]))a[1]=n?r[1]:Math.max(r[1],s[1]);else if(HO.test(r[1])){var l=+HO.exec(r[1])[1];a[1]=s[1]+l}else Lt(r[1])?a[1]=r[1](s[1]):a[1]=s[1];return a},sy=function(r,s,n){if(r&&r.scale&&r.scale.bandwidth){var a=r.scale.bandwidth();if(!n||a>0)return a}if(r&&s&&s.length>=2){for(var i=wP(s,function(m){return m.coordinate}),l=1/0,o=1,c=i.length;o<c;o++){var d=i[o],u=i[o-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0},WO=function(r,s,n){return!r||!r.length||Qf(r,ma(n,"type.defaultProps.domain"))?s:r},$z=function(r,s){var n=r.type.defaultProps?cs(cs({},r.type.defaultProps),r.props):r.props,a=n.dataKey,i=n.name,l=n.unit,o=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return cs(cs({},St(r,!1)),{},{dataKey:a,unit:l,formatter:o,name:i||a,color:YP(r),value:_s(s,a),type:c,payload:s,chartType:d,hide:u})};function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qp(t)}function GO(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function al(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?GO(Object(s),!0).forEach(function(n){Lz(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):GO(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Lz(t,r,s){return r=x1e(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function x1e(t){var r=g1e(t,"string");return Qp(r)=="symbol"?r:r+""}function g1e(t,r){if(Qp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function v1e(t,r){return N1e(t)||b1e(t,r)||j1e(t,r)||y1e()}function y1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j1e(t,r){if(t){if(typeof t=="string")return YO(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return YO(t,r)}}function YO(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function b1e(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function N1e(t){if(Array.isArray(t))return t}var ny=Math.PI/180,w1e=function(r){return r*180/Math.PI},$r=function(r,s,n,a){return{x:r+Math.cos(-ny*a)*n,y:s+Math.sin(-ny*a)*n}},Bz=function(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(n.left||0)-(n.right||0)),Math.abs(s-(n.top||0)-(n.bottom||0)))/2},S1e=function(r,s,n,a,i){var l=r.width,o=r.height,c=r.startAngle,d=r.endAngle,u=bn(r.cx,l,l/2),m=bn(r.cy,o,o/2),h=Bz(l,o,n),g=bn(r.innerRadius,h,0),x=bn(r.outerRadius,h,h*.8),p=Object.keys(s);return p.reduce(function(y,v){var f=s[v],b=f.domain,N=f.reversed,w;if(Vt(f.range))a==="angleAxis"?w=[c,d]:a==="radiusAxis"&&(w=[g,x]),N&&(w=[w[1],w[0]]);else{w=f.range;var C=w,P=v1e(C,2);c=P[0],d=P[1]}var S=Mz(f,i),A=S.realScaleType,k=S.scale;k.domain(b).range(w),Iz(k);var D=Rz(k,al(al({},f),{},{realScaleType:A})),q=al(al(al({},f),D),{},{range:w,radius:x,realScaleType:A,scale:k,cx:u,cy:m,innerRadius:g,outerRadius:x,startAngle:c,endAngle:d});return al(al({},y),{},Lz({},v,q))},{})},C1e=function(r,s){var n=r.x,a=r.y,i=s.x,l=s.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-l,2))},P1e=function(r,s){var n=r.x,a=r.y,i=s.cx,l=s.cy,o=C1e({x:n,y:a},{x:i,y:l});if(o<=0)return{radius:o};var c=(n-i)/o,d=Math.acos(c);return a>l&&(d=2*Math.PI-d),{radius:o,angle:w1e(d),angleInRadian:d}},k1e=function(r){var s=r.startAngle,n=r.endAngle,a=Math.floor(s/360),i=Math.floor(n/360),l=Math.min(a,i);return{startAngle:s-l*360,endAngle:n-l*360}},A1e=function(r,s){var n=s.startAngle,a=s.endAngle,i=Math.floor(n/360),l=Math.floor(a/360),o=Math.min(i,l);return r+o*360},QO=function(r,s){var n=r.x,a=r.y,i=P1e({x:n,y:a},s),l=i.radius,o=i.angle,c=s.innerRadius,d=s.outerRadius;if(l<c||l>d)return!1;if(l===0)return!0;var u=k1e(s),m=u.startAngle,h=u.endAngle,g=o,x;if(m<=h){for(;g>h;)g-=360;for(;g<m;)g+=360;x=g>=m&&g<=h}else{for(;g>m;)g-=360;for(;g<h;)g+=360;x=g>=h&&g<=m}return x?al(al({},s),{},{radius:l,angle:A1e(g,s)}):null},Vz=function(r){return!j.isValidElement(r)&&!Lt(r)&&typeof r!="boolean"?r.className:""};function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xp(t)}var _1e=["offset"];function T1e(t){return M1e(t)||D1e(t)||E1e(t)||O1e()}function O1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E1e(t,r){if(t){if(typeof t=="string")return tS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return tS(t,r)}}function D1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function M1e(t){if(Array.isArray(t))return tS(t)}function tS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function I1e(t,r){if(t==null)return{};var s=R1e(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function R1e(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function XO(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Cs(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?XO(Object(s),!0).forEach(function(n){F1e(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):XO(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function F1e(t,r,s){return r=$1e(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function $1e(t){var r=L1e(t,"string");return Xp(r)=="symbol"?r:r+""}function L1e(t,r){if(Xp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Zp.apply(this,arguments)}var B1e=function(r){var s=r.value,n=r.formatter,a=Vt(r.children)?s:r.children;return Lt(n)?n(a):a},V1e=function(r,s){var n=jn(s-r),a=Math.min(Math.abs(s-r),360);return n*a},U1e=function(r,s,n){var a=r.position,i=r.viewBox,l=r.offset,o=r.className,c=i,d=c.cx,u=c.cy,m=c.innerRadius,h=c.outerRadius,g=c.startAngle,x=c.endAngle,p=c.clockWise,y=(m+h)/2,v=V1e(g,x),f=v>=0?1:-1,b,N;a==="insideStart"?(b=g+f*l,N=p):a==="insideEnd"?(b=x-f*l,N=!p):a==="end"&&(b=x+f*l,N=p),N=v<=0?N:!N;var w=$r(d,u,y,b),C=$r(d,u,y,b+(N?1:-1)*359),P="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),S=Vt(r.id)?Im("recharts-radial-line-"):r.id;return Q.createElement("text",Zp({},n,{dominantBaseline:"central",className:Ut("recharts-radial-bar-label",o)}),Q.createElement("defs",null,Q.createElement("path",{id:S,d:P})),Q.createElement("textPath",{xlinkHref:"#".concat(S)},s))},q1e=function(r){var s=r.viewBox,n=r.offset,a=r.position,i=s,l=i.cx,o=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,h=(u+m)/2;if(a==="outside"){var g=$r(l,o,d+n,h),x=g.x,p=g.y;return{x,y:p,textAnchor:x>=l?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:l,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(c+d)/2,v=$r(l,o,y,h),f=v.x,b=v.y;return{x:f,y:b,textAnchor:"middle",verticalAnchor:"middle"}},z1e=function(r){var s=r.viewBox,n=r.parentViewBox,a=r.offset,i=r.position,l=s,o=l.x,c=l.y,d=l.width,u=l.height,m=u>=0?1:-1,h=m*a,g=m>0?"end":"start",x=m>0?"start":"end",p=d>=0?1:-1,y=p*a,v=p>0?"end":"start",f=p>0?"start":"end";if(i==="top"){var b={x:o+d/2,y:c-m*a,textAnchor:"middle",verticalAnchor:g};return Cs(Cs({},b),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var N={x:o+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:x};return Cs(Cs({},N),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(i==="left"){var w={x:o-y,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return Cs(Cs({},w),n?{width:Math.max(w.x-n.x,0),height:u}:{})}if(i==="right"){var C={x:o+d+y,y:c+u/2,textAnchor:f,verticalAnchor:"middle"};return Cs(Cs({},C),n?{width:Math.max(n.x+n.width-C.x,0),height:u}:{})}var P=n?{width:d,height:u}:{};return i==="insideLeft"?Cs({x:o+y,y:c+u/2,textAnchor:f,verticalAnchor:"middle"},P):i==="insideRight"?Cs({x:o+d-y,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},P):i==="insideTop"?Cs({x:o+d/2,y:c+h,textAnchor:"middle",verticalAnchor:x},P):i==="insideBottom"?Cs({x:o+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:g},P):i==="insideTopLeft"?Cs({x:o+y,y:c+h,textAnchor:f,verticalAnchor:x},P):i==="insideTopRight"?Cs({x:o+d-y,y:c+h,textAnchor:v,verticalAnchor:x},P):i==="insideBottomLeft"?Cs({x:o+y,y:c+u-h,textAnchor:f,verticalAnchor:g},P):i==="insideBottomRight"?Cs({x:o+d-y,y:c+u-h,textAnchor:v,verticalAnchor:g},P):Om(i)&&(Ye(i.x)||uc(i.x))&&(Ye(i.y)||uc(i.y))?Cs({x:o+bn(i.x,d),y:c+bn(i.y,u),textAnchor:"end",verticalAnchor:"end"},P):Cs({x:o+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},K1e=function(r){return"cx"in r&&Ye(r.cx)};function Bs(t){var r=t.offset,s=r===void 0?5:r,n=I1e(t,_1e),a=Cs({offset:s},n),i=a.viewBox,l=a.position,o=a.value,c=a.children,d=a.content,u=a.className,m=u===void 0?"":u,h=a.textBreakAll;if(!i||Vt(o)&&Vt(c)&&!j.isValidElement(d)&&!Lt(d))return null;if(j.isValidElement(d))return j.cloneElement(d,a);var g;if(Lt(d)){if(g=j.createElement(d,a),j.isValidElement(g))return g}else g=B1e(a);var x=K1e(i),p=St(a,!0);if(x&&(l==="insideStart"||l==="insideEnd"||l==="end"))return U1e(a,g,p);var y=x?q1e(a):z1e(a);return Q.createElement(Wc,Zp({className:Ut("recharts-label",m)},p,y,{breakAll:h}),g)}Bs.displayName="Label";var Uz=function(r){var s=r.cx,n=r.cy,a=r.angle,i=r.startAngle,l=r.endAngle,o=r.r,c=r.radius,d=r.innerRadius,u=r.outerRadius,m=r.x,h=r.y,g=r.top,x=r.left,p=r.width,y=r.height,v=r.clockWise,f=r.labelViewBox;if(f)return f;if(Ye(p)&&Ye(y)){if(Ye(m)&&Ye(h))return{x:m,y:h,width:p,height:y};if(Ye(g)&&Ye(x))return{x:g,y:x,width:p,height:y}}return Ye(m)&&Ye(h)?{x:m,y:h,width:0,height:0}:Ye(s)&&Ye(n)?{cx:s,cy:n,startAngle:i||a||0,endAngle:l||a||0,innerRadius:d||0,outerRadius:u||c||o||0,clockWise:v}:r.viewBox?r.viewBox:{}},H1e=function(r,s){return r?r===!0?Q.createElement(Bs,{key:"label-implicit",viewBox:s}):Ms(r)?Q.createElement(Bs,{key:"label-implicit",viewBox:s,value:r}):j.isValidElement(r)?r.type===Bs?j.cloneElement(r,{key:"label-implicit",viewBox:s}):Q.createElement(Bs,{key:"label-implicit",content:r,viewBox:s}):Lt(r)?Q.createElement(Bs,{key:"label-implicit",content:r,viewBox:s}):Om(r)?Q.createElement(Bs,Zp({viewBox:s},r,{key:"label-implicit"})):null:null},W1e=function(r,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&n&&!r.label)return null;var a=r.children,i=Uz(r),l=ha(a,Bs).map(function(c,d){return j.cloneElement(c,{viewBox:s||i,key:"label-".concat(d)})});if(!n)return l;var o=H1e(r.label,s||i);return[o].concat(T1e(l))};Bs.parseViewBox=Uz;Bs.renderCallByParent=W1e;function G1e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}var Y1e=G1e;const Q1e=jr(Y1e);function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jp(t)}var X1e=["valueAccessor"],Z1e=["data","dataKey","clockWise","id","textBreakAll"];function J1e(t){return sSe(t)||rSe(t)||tSe(t)||eSe()}function eSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tSe(t,r){if(t){if(typeof t=="string")return rS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return rS(t,r)}}function rSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sSe(t){if(Array.isArray(t))return rS(t)}function rS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ay.apply(this,arguments)}function ZO(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function JO(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ZO(Object(s),!0).forEach(function(n){nSe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ZO(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function nSe(t,r,s){return r=aSe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function aSe(t){var r=iSe(t,"string");return Jp(r)=="symbol"?r:r+""}function iSe(t,r){if(Jp(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function eE(t,r){if(t==null)return{};var s=lSe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function lSe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}var oSe=function(r){return Array.isArray(r.value)?Q1e(r.value):r.value};function jl(t){var r=t.valueAccessor,s=r===void 0?oSe:r,n=eE(t,X1e),a=n.data,i=n.dataKey,l=n.clockWise,o=n.id,c=n.textBreakAll,d=eE(n,Z1e);return!a||!a.length?null:Q.createElement(hr,{className:"recharts-label-list"},a.map(function(u,m){var h=Vt(i)?s(u,m):_s(u&&u.payload,i),g=Vt(o)?{}:{id:"".concat(o,"-").concat(m)};return Q.createElement(Bs,ay({},St(u,!0),d,g,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:Bs.parseViewBox(Vt(l)?u:JO(JO({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}jl.displayName="LabelList";function cSe(t,r){return t?t===!0?Q.createElement(jl,{key:"labelList-implicit",data:r}):Q.isValidElement(t)||Lt(t)?Q.createElement(jl,{key:"labelList-implicit",data:r,content:t}):Om(t)?Q.createElement(jl,ay({data:r},t,{key:"labelList-implicit"})):null:null}function dSe(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var n=t.children,a=ha(n,jl).map(function(l,o){return j.cloneElement(l,{data:r,key:"labelList-".concat(o)})});if(!s)return a;var i=cSe(t.label,r);return[i].concat(J1e(a))}jl.renderCallByParent=dSe;function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ef(t)}function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},sS.apply(this,arguments)}function tE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function rE(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?tE(Object(s),!0).forEach(function(n){uSe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):tE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function uSe(t,r,s){return r=mSe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function mSe(t){var r=hSe(t,"string");return ef(r)=="symbol"?r:r+""}function hSe(t,r){if(ef(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var pSe=function(r,s){var n=jn(s-r),a=Math.min(Math.abs(s-r),359.999);return n*a},Ux=function(r){var s=r.cx,n=r.cy,a=r.radius,i=r.angle,l=r.sign,o=r.isExternal,c=r.cornerRadius,d=r.cornerIsExternal,u=c*(o?1:-1)+a,m=Math.asin(c/u)/ny,h=d?i:i+l*m,g=$r(s,n,u,h),x=$r(s,n,a,h),p=d?i-l*m:i,y=$r(s,n,u*Math.cos(m*ny),p);return{center:g,circleTangency:x,lineTangency:y,theta:m}},qz=function(r){var s=r.cx,n=r.cy,a=r.innerRadius,i=r.outerRadius,l=r.startAngle,o=r.endAngle,c=pSe(l,o),d=l+c,u=$r(s,n,i,l),m=$r(s,n,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var g=$r(s,n,a,l),x=$r(s,n,a,d);h+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(l<=d),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(s,",").concat(n," Z");return h},fSe=function(r){var s=r.cx,n=r.cy,a=r.innerRadius,i=r.outerRadius,l=r.cornerRadius,o=r.forceCornerRadius,c=r.cornerIsExternal,d=r.startAngle,u=r.endAngle,m=jn(u-d),h=Ux({cx:s,cy:n,radius:i,angle:d,sign:m,cornerRadius:l,cornerIsExternal:c}),g=h.circleTangency,x=h.lineTangency,p=h.theta,y=Ux({cx:s,cy:n,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:c}),v=y.circleTangency,f=y.lineTangency,b=y.theta,N=c?Math.abs(d-u):Math.abs(d-u)-p-b;if(N<0)return o?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):qz({cx:s,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var w="M ".concat(x.x,",").concat(x.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(f.x,",").concat(f.y,`
  `);if(a>0){var C=Ux({cx:s,cy:n,radius:a,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),P=C.circleTangency,S=C.lineTangency,A=C.theta,k=Ux({cx:s,cy:n,radius:a,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:c}),D=k.circleTangency,q=k.lineTangency,z=k.theta,I=c?Math.abs(d-u):Math.abs(d-u)-A-z;if(I<0&&l===0)return"".concat(w,"L").concat(s,",").concat(n,"Z");w+="L".concat(q.x,",").concat(q.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(m>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(s,",").concat(n,"Z");return w},xSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zz=function(r){var s=rE(rE({},xSe),r),n=s.cx,a=s.cy,i=s.innerRadius,l=s.outerRadius,o=s.cornerRadius,c=s.forceCornerRadius,d=s.cornerIsExternal,u=s.startAngle,m=s.endAngle,h=s.className;if(l<i||u===m)return null;var g=Ut("recharts-sector",h),x=l-i,p=bn(o,x,0,!0),y;return p>0&&Math.abs(u-m)<360?y=fSe({cx:n,cy:a,innerRadius:i,outerRadius:l,cornerRadius:Math.min(p,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:m}):y=qz({cx:n,cy:a,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),Q.createElement("path",sS({},St(s,!0),{className:g,d:y,role:"img"}))};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tf(t)}function nS(){return nS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},nS.apply(this,arguments)}function sE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function nE(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?sE(Object(s),!0).forEach(function(n){gSe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):sE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function gSe(t,r,s){return r=vSe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function vSe(t){var r=ySe(t,"string");return tf(r)=="symbol"?r:r+""}function ySe(t,r){if(tf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var aE={curveBasisClosed:gue,curveBasisOpen:vue,curveBasis:xue,curveBumpX:rue,curveBumpY:sue,curveLinearClosed:yue,curveLinear:Gj,curveMonotoneX:jue,curveMonotoneY:bue,curveNatural:Nue,curveStep:wue,curveStepAfter:Cue,curveStepBefore:Sue},qx=function(r){return r.x===+r.x&&r.y===+r.y},dh=function(r){return r.x},uh=function(r){return r.y},jSe=function(r,s){if(Lt(r))return r;var n="curve".concat(Hj(r));return(n==="curveMonotone"||n==="curveBump")&&s?aE["".concat(n).concat(s==="vertical"?"Y":"X")]:aE[n]||Gj},bSe=function(r){var s=r.type,n=s===void 0?"linear":s,a=r.points,i=a===void 0?[]:a,l=r.baseLine,o=r.layout,c=r.connectNulls,d=c===void 0?!1:c,u=jSe(n,o),m=d?i.filter(function(p){return qx(p)}):i,h;if(Array.isArray(l)){var g=d?l.filter(function(p){return qx(p)}):l,x=m.map(function(p,y){return nE(nE({},p),{},{base:g[y]})});return o==="vertical"?h=Dx().y(uh).x1(dh).x0(function(p){return p.base.x}):h=Dx().x(dh).y1(uh).y0(function(p){return p.base.y}),h.defined(qx).curve(u),h(x)}return o==="vertical"&&Ye(l)?h=Dx().y(uh).x1(dh).x0(l):Ye(l)?h=Dx().x(dh).y1(uh).y0(l):h=$U().x(dh).y(uh),h.defined(qx).curve(u),h(m)},iy=function(r){var s=r.className,n=r.points,a=r.path,i=r.pathRef;if((!n||!n.length)&&!a)return null;var l=n&&n.length?bSe(r):a;return j.createElement("path",nS({},St(r,!1),_v(r),{className:Ut("recharts-curve",s),d:l,ref:i}))},Kz={exports:{}},NSe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wSe=NSe,SSe=wSe;function Hz(){}function Wz(){}Wz.resetWarningCache=Hz;var CSe=function(){function t(n,a,i,l,o,c){if(c!==SSe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function r(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:Wz,resetWarningCache:Hz};return s.PropTypes=s,s};Kz.exports=CSe();var PSe=Kz.exports;const vr=jr(PSe);var kSe=Object.getOwnPropertyNames,ASe=Object.getOwnPropertySymbols,_Se=Object.prototype.hasOwnProperty;function iE(t,r){return function(n,a,i){return t(n,a,i)&&r(n,a,i)}}function zx(t){return function(s,n,a){if(!s||!n||typeof s!="object"||typeof n!="object")return t(s,n,a);var i=a.cache,l=i.get(s),o=i.get(n);if(l&&o)return l===n&&o===s;i.set(s,n),i.set(n,s);var c=t(s,n,a);return i.delete(s),i.delete(n),c}}function lE(t){return kSe(t).concat(ASe(t))}var TSe=Object.hasOwn||function(t,r){return _Se.call(t,r)};function cd(t,r){return t===r||!t&&!r&&t!==t&&r!==r}var OSe="__v",ESe="__o",DSe="_owner",oE=Object.getOwnPropertyDescriptor,cE=Object.keys;function MSe(t,r,s){var n=t.length;if(r.length!==n)return!1;for(;n-- >0;)if(!s.equals(t[n],r[n],n,n,t,r,s))return!1;return!0}function ISe(t,r){return cd(t.getTime(),r.getTime())}function RSe(t,r){return t.name===r.name&&t.message===r.message&&t.cause===r.cause&&t.stack===r.stack}function FSe(t,r){return t===r}function dE(t,r,s){var n=t.size;if(n!==r.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.entries(),l,o,c=0;(l=i.next())&&!l.done;){for(var d=r.entries(),u=!1,m=0;(o=d.next())&&!o.done;){if(a[m]){m++;continue}var h=l.value,g=o.value;if(s.equals(h[0],g[0],c,m,t,r,s)&&s.equals(h[1],g[1],h[0],g[0],t,r,s)){u=a[m]=!0;break}m++}if(!u)return!1;c++}return!0}var $Se=cd;function LSe(t,r,s){var n=cE(t),a=n.length;if(cE(r).length!==a)return!1;for(;a-- >0;)if(!Gz(t,r,s,n[a]))return!1;return!0}function mh(t,r,s){var n=lE(t),a=n.length;if(lE(r).length!==a)return!1;for(var i,l,o;a-- >0;)if(i=n[a],!Gz(t,r,s,i)||(l=oE(t,i),o=oE(r,i),(l||o)&&(!l||!o||l.configurable!==o.configurable||l.enumerable!==o.enumerable||l.writable!==o.writable)))return!1;return!0}function BSe(t,r){return cd(t.valueOf(),r.valueOf())}function VSe(t,r){return t.source===r.source&&t.flags===r.flags}function uE(t,r,s){var n=t.size;if(n!==r.size)return!1;if(!n)return!0;for(var a=new Array(n),i=t.values(),l,o;(l=i.next())&&!l.done;){for(var c=r.values(),d=!1,u=0;(o=c.next())&&!o.done;){if(!a[u]&&s.equals(l.value,o.value,l.value,o.value,t,r,s)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function USe(t,r){var s=t.length;if(r.length!==s)return!1;for(;s-- >0;)if(t[s]!==r[s])return!1;return!0}function qSe(t,r){return t.hostname===r.hostname&&t.pathname===r.pathname&&t.protocol===r.protocol&&t.port===r.port&&t.hash===r.hash&&t.username===r.username&&t.password===r.password}function Gz(t,r,s,n){return(n===DSe||n===ESe||n===OSe)&&(t.$$typeof||r.$$typeof)?!0:TSe(r,n)&&s.equals(t[n],r[n],n,n,t,r,s)}var zSe="[object Arguments]",KSe="[object Boolean]",HSe="[object Date]",WSe="[object Error]",GSe="[object Map]",YSe="[object Number]",QSe="[object Object]",XSe="[object RegExp]",ZSe="[object Set]",JSe="[object String]",e2e="[object URL]",t2e=Array.isArray,mE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,hE=Object.assign,r2e=Object.prototype.toString.call.bind(Object.prototype.toString);function s2e(t){var r=t.areArraysEqual,s=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,m=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(x,p,y){if(x===p)return!0;if(x==null||p==null)return!1;var v=typeof x;if(v!==typeof p)return!1;if(v!=="object")return v==="number"?l(x,p,y):v==="function"?a(x,p,y):!1;var f=x.constructor;if(f!==p.constructor)return!1;if(f===Object)return o(x,p,y);if(t2e(x))return r(x,p,y);if(mE!=null&&mE(x))return m(x,p,y);if(f===Date)return s(x,p,y);if(f===RegExp)return d(x,p,y);if(f===Map)return i(x,p,y);if(f===Set)return u(x,p,y);var b=r2e(x);return b===HSe?s(x,p,y):b===XSe?d(x,p,y):b===GSe?i(x,p,y):b===ZSe?u(x,p,y):b===QSe?typeof x.then!="function"&&typeof p.then!="function"&&o(x,p,y):b===e2e?h(x,p,y):b===WSe?n(x,p,y):b===zSe?o(x,p,y):b===KSe||b===YSe||b===JSe?c(x,p,y):!1}}function n2e(t){var r=t.circular,s=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?mh:MSe,areDatesEqual:ISe,areErrorsEqual:RSe,areFunctionsEqual:FSe,areMapsEqual:n?iE(dE,mh):dE,areNumbersEqual:$Se,areObjectsEqual:n?mh:LSe,arePrimitiveWrappersEqual:BSe,areRegExpsEqual:VSe,areSetsEqual:n?iE(uE,mh):uE,areTypedArraysEqual:n?mh:USe,areUrlsEqual:qSe};if(s&&(a=hE({},a,s(a))),r){var i=zx(a.areArraysEqual),l=zx(a.areMapsEqual),o=zx(a.areObjectsEqual),c=zx(a.areSetsEqual);a=hE({},a,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:o,areSetsEqual:c})}return a}function a2e(t){return function(r,s,n,a,i,l,o){return t(r,s,o)}}function i2e(t){var r=t.circular,s=t.comparator,n=t.createState,a=t.equals,i=t.strict;if(n)return function(c,d){var u=n(),m=u.cache,h=m===void 0?r?new WeakMap:void 0:m,g=u.meta;return s(c,d,{cache:h,equals:a,meta:g,strict:i})};if(r)return function(c,d){return s(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var l={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return s(c,d,l)}}var l2e=Go();Go({strict:!0});Go({circular:!0});Go({circular:!0,strict:!0});Go({createInternalComparator:function(){return cd}});Go({strict:!0,createInternalComparator:function(){return cd}});Go({circular:!0,createInternalComparator:function(){return cd}});Go({circular:!0,createInternalComparator:function(){return cd},strict:!0});function Go(t){t===void 0&&(t={});var r=t.circular,s=r===void 0?!1:r,n=t.createInternalComparator,a=t.createState,i=t.strict,l=i===void 0?!1:i,o=n2e(t),c=s2e(o),d=n?n(c):a2e(c);return i2e({circular:s,comparator:c,createState:a,equals:d,strict:l})}function o2e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function pE(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=-1,n=function a(i){s<0&&(s=i),i-s>r?(t(i),s=-1):o2e(a)};requestAnimationFrame(n)}function aS(t){"@babel/helpers - typeof";return aS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},aS(t)}function c2e(t){return h2e(t)||m2e(t)||u2e(t)||d2e()}function d2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u2e(t,r){if(t){if(typeof t=="string")return fE(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return fE(t,r)}}function fE(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function m2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function h2e(t){if(Array.isArray(t))return t}function p2e(){var t={},r=function(){return null},s=!1,n=function a(i){if(!s){if(Array.isArray(i)){if(!i.length)return;var l=i,o=c2e(l),c=o[0],d=o.slice(1);if(typeof c=="number"){pE(a.bind(null,d),c);return}a(c),pE(a.bind(null,d));return}aS(i)==="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:function(){s=!0},start:function(i){s=!1,n(i)},subscribe:function(i){return r=i,function(){r=function(){return null}}}}}function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rf(t)}function xE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function gE(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?xE(Object(s),!0).forEach(function(n){Yz(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):xE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Yz(t,r,s){return r=f2e(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function f2e(t){var r=x2e(t,"string");return rf(r)==="symbol"?r:String(r)}function x2e(t,r){if(rf(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(rf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var g2e=function(r,s){return[Object.keys(r),Object.keys(s)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},v2e=function(r){return r},y2e=function(r){return r.replace(/([A-Z])/g,function(s){return"-".concat(s.toLowerCase())})},Gh=function(r,s){return Object.keys(s).reduce(function(n,a){return gE(gE({},n),{},Yz({},a,r(a,s[a])))},{})},vE=function(r,s,n){return r.map(function(a){return"".concat(y2e(a)," ").concat(s,"ms ").concat(n)}).join(",")};function j2e(t,r){return w2e(t)||N2e(t,r)||Qz(t,r)||b2e()}function b2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N2e(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function w2e(t){if(Array.isArray(t))return t}function S2e(t){return k2e(t)||P2e(t)||Qz(t)||C2e()}function C2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qz(t,r){if(t){if(typeof t=="string")return iS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return iS(t,r)}}function P2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function k2e(t){if(Array.isArray(t))return iS(t)}function iS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}var ly=1e-4,Xz=function(r,s){return[0,3*r,3*s-6*r,3*r-3*s+1]},Zz=function(r,s){return r.map(function(n,a){return n*Math.pow(s,a)}).reduce(function(n,a){return n+a})},yE=function(r,s){return function(n){var a=Xz(r,s);return Zz(a,n)}},A2e=function(r,s){return function(n){var a=Xz(r,s),i=[].concat(S2e(a.map(function(l,o){return l*o}).slice(1)),[0]);return Zz(i,n)}},jE=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];var a=s[0],i=s[1],l=s[2],o=s[3];if(s.length===1)switch(s[0]){case"linear":a=0,i=0,l=1,o=1;break;case"ease":a=.25,i=.1,l=.25,o=1;break;case"ease-in":a=.42,i=0,l=1,o=1;break;case"ease-out":a=.42,i=0,l=.58,o=1;break;case"ease-in-out":a=0,i=0,l=.58,o=1;break;default:{var c=s[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=j2e(d,4);a=u[0],i=u[1],l=u[2],o=u[3]}}}var m=yE(a,l),h=yE(i,o),g=A2e(a,l),x=function(v){return v>1?1:v<0?0:v},p=function(v){for(var f=v>1?1:v,b=f,N=0;N<8;++N){var w=m(b)-f,C=g(b);if(Math.abs(w-f)<ly||C<ly)return h(b);b=x(b-w/C)}return h(b)};return p.isStepper=!1,p},_2e=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=r.stiff,n=s===void 0?100:s,a=r.damping,i=a===void 0?8:a,l=r.dt,o=l===void 0?17:l,c=function(u,m,h){var g=-(u-m)*n,x=h*i,p=h+(g-x)*o/1e3,y=h*o/1e3+u;return Math.abs(y-m)<ly&&Math.abs(p)<ly?[m,0]:[y,p]};return c.isStepper=!0,c.dt=o,c},T2e=function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];var a=s[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return jE(a);case"spring":return _2e();default:if(a.split("(")[0]==="cubic-bezier")return jE(a)}return typeof a=="function"?a:null};function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sf(t)}function bE(t){return D2e(t)||E2e(t)||Jz(t)||O2e()}function O2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function D2e(t){if(Array.isArray(t))return oS(t)}function NE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Ys(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?NE(Object(s),!0).forEach(function(n){lS(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):NE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function lS(t,r,s){return r=M2e(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function M2e(t){var r=I2e(t,"string");return sf(r)==="symbol"?r:String(r)}function I2e(t,r){if(sf(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(sf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function R2e(t,r){return L2e(t)||$2e(t,r)||Jz(t,r)||F2e()}function F2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jz(t,r){if(t){if(typeof t=="string")return oS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return oS(t,r)}}function oS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function $2e(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function L2e(t){if(Array.isArray(t))return t}var oy=function(r,s,n){return r+(s-r)*n},cS=function(r){var s=r.from,n=r.to;return s!==n},B2e=function t(r,s,n){var a=Gh(function(i,l){if(cS(l)){var o=r(l.from,l.to,l.velocity),c=R2e(o,2),d=c[0],u=c[1];return Ys(Ys({},l),{},{from:d,velocity:u})}return l},s);return n<1?Gh(function(i,l){return cS(l)?Ys(Ys({},l),{},{velocity:oy(l.velocity,a[i].velocity,n),from:oy(l.from,a[i].from,n)}):l},s):t(r,a,n-1)};const V2e=function(t,r,s,n,a){var i=g2e(t,r),l=i.reduce(function(y,v){return Ys(Ys({},y),{},lS({},v,[t[v],r[v]]))},{}),o=i.reduce(function(y,v){return Ys(Ys({},y),{},lS({},v,{from:t[v],velocity:0,to:r[v]}))},{}),c=-1,d,u,m=function(){return null},h=function(){return Gh(function(v,f){return f.from},o)},g=function(){return!Object.values(o).filter(cS).length},x=function(v){d||(d=v);var f=v-d,b=f/s.dt;o=B2e(s,o,b),a(Ys(Ys(Ys({},t),r),h())),d=v,g()||(c=requestAnimationFrame(m))},p=function(v){u||(u=v);var f=(v-u)/n,b=Gh(function(w,C){return oy.apply(void 0,bE(C).concat([s(f)]))},l);if(a(Ys(Ys(Ys({},t),r),b)),f<1)c=requestAnimationFrame(m);else{var N=Gh(function(w,C){return oy.apply(void 0,bE(C).concat([s(1)]))},l);a(Ys(Ys(Ys({},t),r),N))}};return m=s.isStepper?x:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(c)}}};function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wu(t)}var U2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function q2e(t,r){if(t==null)return{};var s=z2e(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function z2e(t,r){if(t==null)return{};var s={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(r.indexOf(a)>=0)&&(s[a]=t[a]);return s}function cN(t){return G2e(t)||W2e(t)||H2e(t)||K2e()}function K2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H2e(t,r){if(t){if(typeof t=="string")return dS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return dS(t,r)}}function W2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G2e(t){if(Array.isArray(t))return dS(t)}function dS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function wE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Ba(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?wE(Object(s),!0).forEach(function(n){kh(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):wE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function kh(t,r,s){return r=e9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function Y2e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Q2e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,e9(n.key),n)}}function X2e(t,r,s){return r&&Q2e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function e9(t){var r=Z2e(t,"string");return Wu(r)==="symbol"?r:String(r)}function Z2e(t,r){if(Wu(t)!=="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Wu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function J2e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&uS(t,r)}function uS(t,r){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uS(t,r)}function eCe(t){var r=tCe();return function(){var n=cy(t),a;if(r){var i=cy(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return mS(this,a)}}function mS(t,r){if(r&&(Wu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hS(t)}function hS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cy(t){return cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},cy(t)}var Ki=function(t){J2e(s,t);var r=eCe(s);function s(n,a){var i;Y2e(this,s),i=r.call(this,n,a);var l=i.props,o=l.isActive,c=l.attributeName,d=l.from,u=l.to,m=l.steps,h=l.children,g=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(hS(i)),i.changeStyle=i.changeStyle.bind(hS(i)),!o||g<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),mS(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof h=="function")return i.state={style:d},mS(i);i.state={style:c?kh({},c,d):d}}else i.state={style:{}};return i}return X2e(s,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,l=a.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,l=i.isActive,o=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,h=this.state.style;if(o){if(!l){var g={style:c?kh({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(g);return}if(!(l2e(a.to,u)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=x||d?m:a.to;if(this.state&&h){var y={style:c?kh({},c,p):p};(c&&h[c]!==p||!c&&h!==p)&&this.setState(y)}this.runAnimation(Ba(Ba({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,l=a.from,o=a.to,c=a.duration,d=a.easing,u=a.begin,m=a.onAnimationEnd,h=a.onAnimationStart,g=V2e(l,o,T2e(d),c,this.changeStyle),x=function(){i.stopJSAnimation=g()};this.manager.start([h,u,x,c,m])}},{key:"runStepAnimation",value:function(a){var i=this,l=a.steps,o=a.begin,c=a.onAnimationStart,d=l[0],u=d.style,m=d.duration,h=m===void 0?0:m,g=function(p,y,v){if(v===0)return p;var f=y.duration,b=y.easing,N=b===void 0?"ease":b,w=y.style,C=y.properties,P=y.onAnimationEnd,S=v>0?l[v-1]:y,A=C||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(cN(p),[i.runJSAnimation.bind(i,{from:S.style,to:w,duration:f,easing:N}),f]);var k=vE(A,f,N),D=Ba(Ba(Ba({},S.style),w),{},{transition:k});return[].concat(cN(p),[D,f,P]).filter(v2e)};return this.manager.start([c].concat(cN(l.reduce(g,[u,Math.max(h,o)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=p2e());var i=a.begin,l=a.duration,o=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,m=a.onAnimationEnd,h=a.steps,g=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof d=="function"||typeof g=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var p=o?kh({},o,c):c,y=vE(Object.keys(p),l,d);x.start([u,i,Ba(Ba({},p),{},{transition:y}),l,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var l=a.duration;a.attributeName,a.easing;var o=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=q2e(a,U2e),d=j.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!o||d===0||l<=0)return i;var m=function(g){var x=g.props,p=x.style,y=p===void 0?{}:p,v=x.className,f=j.cloneElement(g,Ba(Ba({},c),{},{style:Ba(Ba({},y),u),className:v}));return f};return d===1?m(j.Children.only(i)):Q.createElement("div",null,j.Children.map(i,function(h){return m(h)}))}}]),s}(j.PureComponent);Ki.displayName="Animate";Ki.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ki.propTypes={from:vr.oneOfType([vr.object,vr.string]),to:vr.oneOfType([vr.object,vr.string]),attributeName:vr.string,duration:vr.number,begin:vr.number,easing:vr.oneOfType([vr.string,vr.func]),steps:vr.arrayOf(vr.shape({duration:vr.number.isRequired,style:vr.object.isRequired,easing:vr.oneOfType([vr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),vr.func]),properties:vr.arrayOf("string"),onAnimationEnd:vr.func})),children:vr.oneOfType([vr.node,vr.func]),isActive:vr.bool,canBegin:vr.bool,onAnimationEnd:vr.func,shouldReAnimate:vr.bool,onAnimationStart:vr.func,onAnimationReStart:vr.func};function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nf(t)}function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},dy.apply(this,arguments)}function rCe(t,r){return iCe(t)||aCe(t,r)||nCe(t,r)||sCe()}function sCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nCe(t,r){if(t){if(typeof t=="string")return SE(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return SE(t,r)}}function SE(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function aCe(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function iCe(t){if(Array.isArray(t))return t}function CE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function PE(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?CE(Object(s),!0).forEach(function(n){lCe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):CE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function lCe(t,r,s){return r=oCe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function oCe(t){var r=cCe(t,"string");return nf(r)=="symbol"?r:r+""}function cCe(t,r){if(nf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var kE=function(r,s,n,a,i){var l=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,g=4;h<g;h++)m[h]=i[h]>l?l:i[h];u="M".concat(r,",").concat(s+o*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(r+c*m[0],",").concat(s)),u+="L ".concat(r+n-c*m[1],",").concat(s),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(r+n,",").concat(s+o*m[1])),u+="L ".concat(r+n,",").concat(s+a-o*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(r+n-c*m[2],",").concat(s+a)),u+="L ".concat(r+c*m[3],",").concat(s+a),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(r,",").concat(s+a-o*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var x=Math.min(l,i);u="M ".concat(r,",").concat(s+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(r+c*x,",").concat(s,`
            L `).concat(r+n-c*x,",").concat(s,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(r+n,",").concat(s+o*x,`
            L `).concat(r+n,",").concat(s+a-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(r+n-c*x,",").concat(s+a,`
            L `).concat(r+c*x,",").concat(s+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(r,",").concat(s+a-o*x," Z")}else u="M ".concat(r,",").concat(s," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},dCe=function(r,s){if(!r||!s)return!1;var n=r.x,a=r.y,i=s.x,l=s.y,o=s.width,c=s.height;if(Math.abs(o)>0&&Math.abs(c)>0){var d=Math.min(i,i+o),u=Math.max(i,i+o),m=Math.min(l,l+c),h=Math.max(l,l+c);return n>=d&&n<=u&&a>=m&&a<=h}return!1},uCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QP=function(r){var s=PE(PE({},uCe),r),n=j.useRef(),a=j.useState(-1),i=rCe(a,2),l=i[0],o=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var N=n.current.getTotalLength();N&&o(N)}catch{}},[]);var c=s.x,d=s.y,u=s.width,m=s.height,h=s.radius,g=s.className,x=s.animationEasing,p=s.animationDuration,y=s.animationBegin,v=s.isAnimationActive,f=s.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var b=Ut("recharts-rectangle",g);return f?Q.createElement(Ki,{canBegin:l>0,from:{width:u,height:m,x:c,y:d},to:{width:u,height:m,x:c,y:d},duration:p,animationEasing:x,isActive:f},function(N){var w=N.width,C=N.height,P=N.x,S=N.y;return Q.createElement(Ki,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,isActive:v,easing:x},Q.createElement("path",dy({},St(s,!0),{className:b,d:kE(P,S,w,C,h),ref:n})))}):Q.createElement("path",dy({},St(s,!0),{className:b,d:kE(c,d,u,m,h)}))},mCe=["points","className","baseLinePoints","connectNulls"];function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},zd.apply(this,arguments)}function hCe(t,r){if(t==null)return{};var s=pCe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function pCe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function AE(t){return vCe(t)||gCe(t)||xCe(t)||fCe()}function fCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xCe(t,r){if(t){if(typeof t=="string")return pS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return pS(t,r)}}function gCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vCe(t){if(Array.isArray(t))return pS(t)}function pS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}var _E=function(r){return r&&r.x===+r.x&&r.y===+r.y},yCe=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=[[]];return r.forEach(function(n){_E(n)?s[s.length-1].push(n):s[s.length-1].length>0&&s.push([])}),_E(r[0])&&s[s.length-1].push(r[0]),s[s.length-1].length<=0&&(s=s.slice(0,-1)),s},Yh=function(r,s){var n=yCe(r);s&&(n=[n.reduce(function(i,l){return[].concat(AE(i),AE(l))},[])]);var a=n.map(function(i){return i.reduce(function(l,o,c){return"".concat(l).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},jCe=function(r,s,n){var a=Yh(r,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Yh(s.reverse(),n).slice(1))},bCe=function(r){var s=r.points,n=r.className,a=r.baseLinePoints,i=r.connectNulls,l=hCe(r,mCe);if(!s||!s.length)return null;var o=Ut("recharts-polygon",n);if(a&&a.length){var c=l.stroke&&l.stroke!=="none",d=jCe(s,a,i);return Q.createElement("g",{className:o},Q.createElement("path",zd({},St(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),c?Q.createElement("path",zd({},St(l,!0),{fill:"none",d:Yh(s,i)})):null,c?Q.createElement("path",zd({},St(l,!0),{fill:"none",d:Yh(a,i)})):null)}var u=Yh(s,i);return Q.createElement("path",zd({},St(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:o,d:u}))};function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},fS.apply(this,arguments)}var ub=function(r){var s=r.cx,n=r.cy,a=r.r,i=r.className,l=Ut("recharts-dot",i);return s===+s&&n===+n&&a===+a?j.createElement("circle",fS({},St(r,!1),_v(r),{className:l,cx:s,cy:n,r:a})):null};function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},af(t)}var NCe=["x","y","top","left","width","height","className"];function xS(){return xS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},xS.apply(this,arguments)}function TE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function wCe(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?TE(Object(s),!0).forEach(function(n){SCe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):TE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function SCe(t,r,s){return r=CCe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function CCe(t){var r=PCe(t,"string");return af(r)=="symbol"?r:r+""}function PCe(t,r){if(af(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function kCe(t,r){if(t==null)return{};var s=ACe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function ACe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}var _Ce=function(r,s,n,a,i,l){return"M".concat(r,",").concat(i,"v").concat(a,"M").concat(l,",").concat(s,"h").concat(n)},TCe=function(r){var s=r.x,n=s===void 0?0:s,a=r.y,i=a===void 0?0:a,l=r.top,o=l===void 0?0:l,c=r.left,d=c===void 0?0:c,u=r.width,m=u===void 0?0:u,h=r.height,g=h===void 0?0:h,x=r.className,p=kCe(r,NCe),y=wCe({x:n,y:i,top:o,left:d,width:m,height:g},p);return!Ye(n)||!Ye(i)||!Ye(m)||!Ye(g)||!Ye(o)||!Ye(d)?null:Q.createElement("path",xS({},St(y,!0),{className:Ut("recharts-cross",x),d:_Ce(n,i,m,g,o,d)}))},OCe=ib,ECe=mz,DCe=Qi;function MCe(t,r){return t&&t.length?OCe(t,DCe(r),ECe):void 0}var ICe=MCe;const RCe=jr(ICe);var FCe=ib,$Ce=Qi,LCe=hz;function BCe(t,r){return t&&t.length?FCe(t,$Ce(r),LCe):void 0}var VCe=BCe;const UCe=jr(VCe);var qCe=["cx","cy","angle","ticks","axisLine"],zCe=["ticks","tick","angle","tickFormatter","stroke"];function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gu(t)}function Qh(){return Qh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Qh.apply(this,arguments)}function OE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Xo(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?OE(Object(s),!0).forEach(function(n){mb(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):OE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function EE(t,r){if(t==null)return{};var s=KCe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function KCe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function HCe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function DE(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r9(n.key),n)}}function WCe(t,r,s){return r&&DE(t.prototype,r),s&&DE(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function GCe(t,r,s){return r=uy(r),YCe(t,t9()?Reflect.construct(r,s||[],uy(t).constructor):r.apply(t,s))}function YCe(t,r){if(r&&(Gu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QCe(t)}function QCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t9=function(){return!!t})()}function uy(t){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},uy(t)}function XCe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&gS(t,r)}function gS(t,r){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gS(t,r)}function mb(t,r,s){return r=r9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function r9(t){var r=ZCe(t,"string");return Gu(r)=="symbol"?r:r+""}function ZCe(t,r){if(Gu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var hb=function(t){function r(){return HCe(this,r),GCe(this,r,arguments)}return XCe(r,t),WCe(r,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,l=i.angle,o=i.cx,c=i.cy;return $r(o,c,a,l)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.angle,o=n.ticks,c=RCe(o,function(u){return u.coordinate||0}),d=UCe(o,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.angle,o=n.ticks,c=n.axisLine,d=EE(n,qCe),u=o.reduce(function(x,p){return[Math.min(x[0],p.coordinate),Math.max(x[1],p.coordinate)]},[1/0,-1/0]),m=$r(a,i,u[0],l),h=$r(a,i,u[1],l),g=Xo(Xo(Xo({},St(d,!1)),{},{fill:"none"},St(c,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return Q.createElement("line",Qh({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,l=a.tick,o=a.angle,c=a.tickFormatter,d=a.stroke,u=EE(a,zCe),m=this.getTickTextAnchor(),h=St(u,!1),g=St(l,!1),x=i.map(function(p,y){var v=n.getTickValueCoord(p),f=Xo(Xo(Xo(Xo({textAnchor:m,transform:"rotate(".concat(90-o,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:d},g),{},{index:y},v),{},{payload:p});return Q.createElement(hr,Qh({className:Ut("recharts-polar-radius-axis-tick",Vz(l)),key:"tick-".concat(p.coordinate)},Hc(n.props,p,y)),r.renderTickItem(l,f,c?c(p.value,y):p.value))});return Q.createElement(hr,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,l=n.tick;return!a||!a.length?null:Q.createElement(hr,{className:Ut("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),Bs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var l;return Q.isValidElement(n)?l=Q.cloneElement(n,a):Lt(n)?l=n(a):l=Q.createElement(Wc,Qh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(j.PureComponent);mb(hb,"displayName","PolarRadiusAxis");mb(hb,"axisType","radiusAxis");mb(hb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Yu(t){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yu(t)}function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ac.apply(this,arguments)}function ME(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Zo(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ME(Object(s),!0).forEach(function(n){pb(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ME(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function JCe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function IE(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n9(n.key),n)}}function ePe(t,r,s){return r&&IE(t.prototype,r),s&&IE(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function tPe(t,r,s){return r=my(r),rPe(t,s9()?Reflect.construct(r,s||[],my(t).constructor):r.apply(t,s))}function rPe(t,r){if(r&&(Yu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(t)}function sPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s9=function(){return!!t})()}function my(t){return my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},my(t)}function nPe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&vS(t,r)}function vS(t,r){return vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},vS(t,r)}function pb(t,r,s){return r=n9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function n9(t){var r=aPe(t,"string");return Yu(r)=="symbol"?r:r+""}function aPe(t,r){if(Yu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var iPe=Math.PI/180,RE=1e-5,fb=function(t){function r(){return JCe(this,r),tPe(this,r,arguments)}return nPe(r,t),ePe(r,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,l=a.cy,o=a.radius,c=a.orientation,d=a.tickSize,u=d||8,m=$r(i,l,o,n.coordinate),h=$r(i,l,o+(c==="inner"?-1:1)*u,n.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*iPe),l;return i>RE?l=a==="outer"?"start":"end":i<-RE?l=a==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,l=n.radius,o=n.axisLine,c=n.axisLineType,d=Zo(Zo({},St(this.props,!1)),{},{fill:"none"},St(o,!1));if(c==="circle")return Q.createElement(ub,ac({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(h){return $r(a,i,l,h.coordinate)});return Q.createElement(bCe,ac({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,l=a.tick,o=a.tickLine,c=a.tickFormatter,d=a.stroke,u=St(this.props,!1),m=St(l,!1),h=Zo(Zo({},u),{},{fill:"none"},St(o,!1)),g=i.map(function(x,p){var y=n.getTickLineCoord(x),v=n.getTickTextAnchor(x),f=Zo(Zo(Zo({textAnchor:v},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:x,x:y.x2,y:y.y2});return Q.createElement(hr,ac({className:Ut("recharts-polar-angle-axis-tick",Vz(l)),key:"tick-".concat(x.coordinate)},Hc(n.props,x,p)),o&&Q.createElement("line",ac({className:"recharts-polar-angle-axis-tick-line"},h,y)),l&&r.renderTickItem(l,f,c?c(x.value,p):x.value))});return Q.createElement(hr,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,l=n.axisLine;return i<=0||!a||!a.length?null:Q.createElement(hr,{className:Ut("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var l;return Q.isValidElement(n)?l=Q.cloneElement(n,a):Lt(n)?l=n(a):l=Q.createElement(Wc,ac({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(j.PureComponent);pb(fb,"displayName","PolarAngleAxis");pb(fb,"axisType","angleAxis");pb(fb,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var lPe=oq,oPe=lPe(Object.getPrototypeOf,Object),cPe=oPe,dPe=Il,uPe=cPe,mPe=Rl,hPe="[object Object]",pPe=Function.prototype,fPe=Object.prototype,a9=pPe.toString,xPe=fPe.hasOwnProperty,gPe=a9.call(Object);function vPe(t){if(!mPe(t)||dPe(t)!=hPe)return!1;var r=uPe(t);if(r===null)return!0;var s=xPe.call(r,"constructor")&&r.constructor;return typeof s=="function"&&s instanceof s&&a9.call(s)==gPe}var yPe=vPe;const jPe=jr(yPe);var bPe=Il,NPe=Rl,wPe="[object Boolean]";function SPe(t){return t===!0||t===!1||NPe(t)&&bPe(t)==wPe}var CPe=SPe;const PPe=jr(CPe);function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lf(t)}function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},hy.apply(this,arguments)}function kPe(t,r){return OPe(t)||TPe(t,r)||_Pe(t,r)||APe()}function APe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Pe(t,r){if(t){if(typeof t=="string")return FE(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return FE(t,r)}}function FE(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function TPe(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function OPe(t){if(Array.isArray(t))return t}function $E(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function LE(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?$E(Object(s),!0).forEach(function(n){EPe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):$E(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function EPe(t,r,s){return r=DPe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function DPe(t){var r=MPe(t,"string");return lf(r)=="symbol"?r:r+""}function MPe(t,r){if(lf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var BE=function(r,s,n,a,i){var l=n-a,o;return o="M ".concat(r,",").concat(s),o+="L ".concat(r+n,",").concat(s),o+="L ".concat(r+n-l/2,",").concat(s+i),o+="L ".concat(r+n-l/2-a,",").concat(s+i),o+="L ".concat(r,",").concat(s," Z"),o},IPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RPe=function(r){var s=LE(LE({},IPe),r),n=j.useRef(),a=j.useState(-1),i=kPe(a,2),l=i[0],o=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&o(b)}catch{}},[]);var c=s.x,d=s.y,u=s.upperWidth,m=s.lowerWidth,h=s.height,g=s.className,x=s.animationEasing,p=s.animationDuration,y=s.animationBegin,v=s.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||m!==+m||h!==+h||u===0&&m===0||h===0)return null;var f=Ut("recharts-trapezoid",g);return v?Q.createElement(Ki,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:m,height:h,x:c,y:d},duration:p,animationEasing:x,isActive:v},function(b){var N=b.upperWidth,w=b.lowerWidth,C=b.height,P=b.x,S=b.y;return Q.createElement(Ki,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:p,easing:x},Q.createElement("path",hy({},St(s,!0),{className:f,d:BE(P,S,N,w,C),ref:n})))}):Q.createElement("g",null,Q.createElement("path",hy({},St(s,!0),{className:f,d:BE(c,d,u,m,h)})))},FPe=["option","shapeType","propTransformer","activeClassName","isActive"];function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},of(t)}function $Pe(t,r){if(t==null)return{};var s=LPe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function LPe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function VE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function py(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?VE(Object(s),!0).forEach(function(n){BPe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):VE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function BPe(t,r,s){return r=VPe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function VPe(t){var r=UPe(t,"string");return of(r)=="symbol"?r:r+""}function UPe(t,r){if(of(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function qPe(t,r){return py(py({},r),t)}function zPe(t,r){return t==="symbols"}function UE(t){var r=t.shapeType,s=t.elementProps;switch(r){case"rectangle":return Q.createElement(QP,s);case"trapezoid":return Q.createElement(RPe,s);case"sector":return Q.createElement(zz,s);case"symbols":if(zPe(r))return Q.createElement(fP,s);break;default:return null}}function KPe(t){return j.isValidElement(t)?t.props:t}function i9(t){var r=t.option,s=t.shapeType,n=t.propTransformer,a=n===void 0?qPe:n,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,o=t.isActive,c=$Pe(t,FPe),d;if(j.isValidElement(r))d=j.cloneElement(r,py(py({},c),KPe(r)));else if(Lt(r))d=r(c);else if(jPe(r)&&!PPe(r)){var u=a(r,c);d=Q.createElement(UE,{shapeType:s,elementProps:u})}else{var m=c;d=Q.createElement(UE,{shapeType:s,elementProps:m})}return o?Q.createElement(hr,{className:l},d):d}function xb(t,r){return r!=null&&"trapezoids"in t.props}function gb(t,r){return r!=null&&"sectors"in t.props}function cf(t,r){return r!=null&&"points"in t.props}function HPe(t,r){var s,n,a=t.x===(r==null||(s=r.labelViewBox)===null||s===void 0?void 0:s.x)||t.x===r.x,i=t.y===(r==null||(n=r.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===r.y;return a&&i}function WPe(t,r){var s=t.endAngle===r.endAngle,n=t.startAngle===r.startAngle;return s&&n}function GPe(t,r){var s=t.x===r.x,n=t.y===r.y,a=t.z===r.z;return s&&n&&a}function YPe(t,r){var s;return xb(t,r)?s=HPe:gb(t,r)?s=WPe:cf(t,r)&&(s=GPe),s}function QPe(t,r){var s;return xb(t,r)?s="trapezoids":gb(t,r)?s="sectors":cf(t,r)&&(s="points"),s}function XPe(t,r){if(xb(t,r)){var s;return(s=r.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}if(gb(t,r)){var n;return(n=r.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return cf(t,r)?r.payload:{}}function ZPe(t){var r=t.activeTooltipItem,s=t.graphicalItem,n=t.itemData,a=QPe(s,r),i=XPe(s,r),l=n.filter(function(c,d){var u=Qf(i,c),m=s.props[a].filter(function(x){var p=YPe(s,r);return p(x,r)}),h=s.props[a].indexOf(m[m.length-1]),g=d===h;return u&&g}),o=n.indexOf(l[l.length-1]);return o}var wg;function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qu(t)}function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Kd.apply(this,arguments)}function qE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Dr(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?qE(Object(s),!0).forEach(function(n){Aa(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):qE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function JPe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function zE(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o9(n.key),n)}}function eke(t,r,s){return r&&zE(t.prototype,r),s&&zE(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function tke(t,r,s){return r=fy(r),rke(t,l9()?Reflect.construct(r,s||[],fy(t).constructor):r.apply(t,s))}function rke(t,r){if(r&&(Qu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ske(t)}function ske(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l9=function(){return!!t})()}function fy(t){return fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},fy(t)}function nke(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&yS(t,r)}function yS(t,r){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},yS(t,r)}function Aa(t,r,s){return r=o9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function o9(t){var r=ake(t,"string");return Qu(r)=="symbol"?r:r+""}function ake(t,r){if(Qu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $l=function(t){function r(s){var n;return JPe(this,r),n=tke(this,r,[s]),Aa(n,"pieRef",null),Aa(n,"sectorRefs",[]),Aa(n,"id",Im("recharts-pie-")),Aa(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Lt(a)&&a()}),Aa(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Lt(a)&&a()}),n.state={isAnimationFinished:!s.isAnimationActive,prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,sectorToFocus:0},n}return nke(r,t),eke(r,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,o=i.labelLine,c=i.dataKey,d=i.valueKey,u=St(this.props,!1),m=St(l,!1),h=St(o,!1),g=l&&l.offsetRadius||20,x=n.map(function(p,y){var v=(p.startAngle+p.endAngle)/2,f=$r(p.cx,p.cy,p.outerRadius+g,v),b=Dr(Dr(Dr(Dr({},u),p),{},{stroke:"none"},m),{},{index:y,textAnchor:r.getTextAnchor(f.x,p.cx)},f),N=Dr(Dr(Dr(Dr({},u),p),{},{fill:"none",stroke:p.fill},h),{},{index:y,points:[$r(p.cx,p.cy,p.outerRadius,v),f]}),w=c;return Vt(c)&&Vt(d)?w="value":Vt(c)&&(w=d),Q.createElement(hr,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(y)},o&&r.renderLabelLineItem(o,N,"line"),r.renderLabelItem(l,b,_s(p,w)))});return Q.createElement(hr,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,l=i.activeShape,o=i.blendStroke,c=i.inactiveShape;return n.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&n.length!==1)return null;var m=a.isActiveIndex(u),h=c&&a.hasActiveIndex()?c:null,g=m?l:h,x=Dr(Dr({},d),{},{stroke:o?d.fill:d.stroke,tabIndex:-1});return Q.createElement(hr,Kd({ref:function(y){y&&!a.sectorRefs.includes(y)&&a.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Hc(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),Q.createElement(i9,Kd({option:g,isActive:m,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,l=a.isAnimationActive,o=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,m=this.state,h=m.prevSectors,g=m.prevIsAnimationActive;return Q.createElement(Ki,{begin:o,duration:c,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var p=x.t,y=[],v=i&&i[0],f=v.startAngle;return i.forEach(function(b,N){var w=h&&h[N],C=N>0?ma(b,"paddingAngle",0):0;if(w){var P=sa(w.endAngle-w.startAngle,b.endAngle-b.startAngle),S=Dr(Dr({},b),{},{startAngle:f+C,endAngle:f+P(p)+C});y.push(S),f=S.endAngle}else{var A=b.endAngle,k=b.startAngle,D=sa(0,A-k),q=D(p),z=Dr(Dr({},b),{},{startAngle:f+C,endAngle:f+q+C});y.push(z),f=z.endAngle}}),Q.createElement(hr,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"ArrowRight":{var o=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,l=this.state.prevSectors;return i&&a&&a.length&&(!l||!Qf(l,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,l=a.sectors,o=a.className,c=a.label,d=a.cx,u=a.cy,m=a.innerRadius,h=a.outerRadius,g=a.isAnimationActive,x=this.state.isAnimationFinished;if(i||!l||!l.length||!Ye(d)||!Ye(u)||!Ye(m)||!Ye(h))return null;var p=Ut("recharts-pie",o);return Q.createElement(hr,{tabIndex:this.props.rootTabIndex,className:p,ref:function(v){n.pieRef=v}},this.renderSectors(),c&&this.renderLabels(l),Bs.renderCallByParent(this.props,null,!1),(!g||x)&&jl.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(Q.isValidElement(n))return Q.cloneElement(n,a);if(Lt(n))return n(a);var l=Ut("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return Q.createElement(iy,Kd({},a,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(n,a,i){if(Q.isValidElement(n))return Q.cloneElement(n,a);var l=i;if(Lt(n)&&(l=n(a),Q.isValidElement(l)))return l;var o=Ut("recharts-pie-label-text",typeof n!="boolean"&&!Lt(n)?n.className:"");return Q.createElement(Wc,Kd({},a,{alignmentBaseline:"middle",className:o}),l)}}])}(j.PureComponent);wg=$l;Aa($l,"displayName","Pie");Aa($l,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!id.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Aa($l,"parseDeltaAngle",function(t,r){var s=jn(r-t),n=Math.min(Math.abs(r-t),360);return s*n});Aa($l,"getRealPieData",function(t){var r=t.data,s=t.children,n=St(t,!1),a=ha(s,Jj);return r&&r.length?r.map(function(i,l){return Dr(Dr(Dr({payload:i},n),i),a&&a[l]&&a[l].props)}):a&&a.length?a.map(function(i){return Dr(Dr({},n),i.props)}):[]});Aa($l,"parseCoordinateOfPie",function(t,r){var s=r.top,n=r.left,a=r.width,i=r.height,l=Bz(a,i),o=n+bn(t.cx,a,a/2),c=s+bn(t.cy,i,i/2),d=bn(t.innerRadius,l,0),u=bn(t.outerRadius,l,l*.8),m=t.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:o,cy:c,innerRadius:d,outerRadius:u,maxRadius:m}});Aa($l,"getComposedData",function(t){var r=t.item,s=t.offset,n=r.type.defaultProps!==void 0?Dr(Dr({},r.type.defaultProps),r.props):r.props,a=wg.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,l=n.startAngle,o=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,m=n.valueKey,h=n.tooltipType,g=Math.abs(n.minAngle),x=wg.parseCoordinateOfPie(n,s),p=wg.parseDeltaAngle(l,o),y=Math.abs(p),v=d;Vt(d)&&Vt(m)?(oi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Vt(d)&&(oi(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=m);var f=a.filter(function(S){return _s(S,v,0)!==0}).length,b=(y>=360?f:f-1)*c,N=y-f*g-b,w=a.reduce(function(S,A){var k=_s(A,v,0);return S+(Ye(k)?k:0)},0),C;if(w>0){var P;C=a.map(function(S,A){var k=_s(S,v,0),D=_s(S,u,A),q=(Ye(k)?k:0)/w,z;A?z=P.endAngle+jn(p)*c*(k!==0?1:0):z=l;var I=z+jn(p)*((k!==0?g:0)+q*N),F=(z+I)/2,W=(x.innerRadius+x.outerRadius)/2,X=[{name:D,value:k,payload:S,dataKey:v,type:h}],K=$r(x.cx,x.cy,W,F);return P=Dr(Dr(Dr({percent:q,cornerRadius:i,name:D,tooltipPayload:X,midAngle:F,middleRadius:W,tooltipPosition:K},S),x),{},{value:_s(S,v),startAngle:z,endAngle:I,payload:S,paddingAngle:jn(p)*c}),P})}return Dr(Dr({},x),{},{sectors:C,data:a})});var ike=Math.ceil,lke=Math.max;function oke(t,r,s,n){for(var a=-1,i=lke(ike((r-t)/(s||1)),0),l=Array(i);i--;)l[n?i:++a]=t,t+=s;return l}var cke=oke,dke=kq,KE=1/0,uke=17976931348623157e292;function mke(t){if(!t)return t===0?t:0;if(t=dke(t),t===KE||t===-KE){var r=t<0?-1:1;return r*uke}return t===t?t:0}var c9=mke,hke=cke,pke=Zj,dN=c9;function fke(t){return function(r,s,n){return n&&typeof n!="number"&&pke(r,s,n)&&(s=n=void 0),r=dN(r),s===void 0?(s=r,r=0):s=dN(s),n=n===void 0?r<s?1:-1:dN(n),hke(r,s,n,t)}}var xke=fke,gke=xke,vke=gke(),yke=vke;const xy=jr(yke);function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},df(t)}function HE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function WE(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?HE(Object(s),!0).forEach(function(n){d9(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):HE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function d9(t,r,s){return r=jke(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function jke(t){var r=bke(t,"string");return df(r)=="symbol"?r:r+""}function bke(t,r){if(df(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Nke=["Webkit","Moz","O","ms"],wke=function(r,s){var n=r.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Nke.reduce(function(i,l){return WE(WE({},i),{},d9({},l+n,s))},{});return a[r]=s,a};function Xu(t){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Xu(t)}function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},gy.apply(this,arguments)}function GE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function uN(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?GE(Object(s),!0).forEach(function(n){Qn(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):GE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Ske(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function YE(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m9(n.key),n)}}function Cke(t,r,s){return r&&YE(t.prototype,r),s&&YE(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pke(t,r,s){return r=vy(r),kke(t,u9()?Reflect.construct(r,s||[],vy(t).constructor):r.apply(t,s))}function kke(t,r){if(r&&(Xu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ake(t)}function Ake(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u9=function(){return!!t})()}function vy(t){return vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},vy(t)}function _ke(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&jS(t,r)}function jS(t,r){return jS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},jS(t,r)}function Qn(t,r,s){return r=m9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function m9(t){var r=Tke(t,"string");return Xu(r)=="symbol"?r:r+""}function Tke(t,r){if(Xu(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Oke=function(r){var s=r.data,n=r.startIndex,a=r.endIndex,i=r.x,l=r.width,o=r.travellerWidth;if(!s||!s.length)return{};var c=s.length,d=Hh().domain(xy(0,c)).range([i,i+l-o]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:u}},QE=function(r){return r.changedTouches&&!!r.changedTouches.length},Zu=function(t){function r(s){var n;return Ske(this,r),n=Pke(this,r,[s]),Qn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Qn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Qn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,l=a.onDragEnd,o=a.startIndex;l==null||l({endIndex:i,startIndex:o})}),n.detachDragEndListener()}),Qn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Qn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Qn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Qn(n,"handleSlideDragStart",function(a){var i=QE(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return _ke(r,t),Cke(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,l=this.state.scaleValues,o=this.props,c=o.gap,d=o.data,u=d.length-1,m=Math.min(a,i),h=Math.max(a,i),g=r.getIndexInRange(l,m),x=r.getIndexInRange(l,h);return{startIndex:g-g%c,endIndex:x===u?u:x-x%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,l=a.tickFormatter,o=a.dataKey,c=_s(i[n],o,n);return Lt(l)?l(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,l=a.startX,o=a.endX,c=this.props,d=c.x,u=c.width,m=c.travellerWidth,h=c.startIndex,g=c.endIndex,x=c.onChange,p=n.pageX-i;p>0?p=Math.min(p,d+u-m-o,d+u-m-l):p<0&&(p=Math.max(p,d-l,d-o));var y=this.getIndex({startX:l+p,endX:o+p});(y.startIndex!==h||y.endIndex!==g)&&x&&x(y),this.setState({startX:l+p,endX:o+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=QE(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,l=a.movingTravellerId,o=a.endX,c=a.startX,d=this.state[l],u=this.props,m=u.x,h=u.width,g=u.travellerWidth,x=u.onChange,p=u.gap,y=u.data,v={startX:this.state.startX,endX:this.state.endX},f=n.pageX-i;f>0?f=Math.min(f,m+h-g-d):f<0&&(f=Math.max(f,m-d)),v[l]=d+f;var b=this.getIndex(v),N=b.startIndex,w=b.endIndex,C=function(){var S=y.length-1;return l==="startX"&&(o>c?N%p===0:w%p===0)||o<c&&w===S||l==="endX"&&(o>c?w%p===0:N%p===0)||o>c&&w===S};this.setState(Qn(Qn({},l,d+f),"brushMoveStartX",n.pageX),function(){x&&C()&&x(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,l=this.state,o=l.scaleValues,c=l.startX,d=l.endX,u=this.state[a],m=o.indexOf(u);if(m!==-1){var h=m+n;if(!(h===-1||h>=o.length)){var g=o[h];a==="startX"&&g>=d||a==="endX"&&g<=c||this.setState(Qn({},a,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.fill,d=n.stroke;return Q.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:l,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.data,d=n.children,u=n.padding,m=j.Children.only(d);return m?Q.cloneElement(m,{x:a,y:i,width:l,height:o,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,l,o=this,c=this.props,d=c.y,u=c.travellerWidth,m=c.height,h=c.traveller,g=c.ariaLabel,x=c.data,p=c.startIndex,y=c.endIndex,v=Math.max(n,this.props.x),f=uN(uN({},St(this.props,!1)),{},{x:v,y:d,width:u,height:m}),b=g||"Min value: ".concat((i=x[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=x[y])===null||l===void 0?void 0:l.name);return Q.createElement(hr,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),o.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},r.renderTraveller(h,f))}},{key:"renderSlide",value:function(n,a){var i=this.props,l=i.y,o=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(n,a)+d,m=Math.max(Math.abs(a-n)-d,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:l,width:m,height:o})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,l=n.y,o=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,m=u.startX,h=u.endX,g=5,x={pointerEvents:"none",fill:d};return Q.createElement(hr,{className:"recharts-brush-texts"},Q.createElement(Wc,gy({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-g,y:l+o/2},x),this.getTextOfTick(a)),Q.createElement(Wc,gy({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+c+g,y:l+o/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,l=n.children,o=n.x,c=n.y,d=n.width,u=n.height,m=n.alwaysShowText,h=this.state,g=h.startX,x=h.endX,p=h.isTextActive,y=h.isSlideMoving,v=h.isTravellerMoving,f=h.isTravellerFocused;if(!a||!a.length||!Ye(o)||!Ye(c)||!Ye(d)||!Ye(u)||d<=0||u<=0)return null;var b=Ut("recharts-brush",i),N=Q.Children.count(l)===1,w=wke("userSelect","none");return Q.createElement(hr,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(g,x),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(x,"endX"),(p||y||v||f||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,l=n.width,o=n.height,c=n.stroke,d=Math.floor(i+o/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:a,y:i,width:l,height:o,fill:c,stroke:"none"}),Q.createElement("line",{x1:a+1,y1:d,x2:a+l-1,y2:d,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:a+1,y1:d+2,x2:a+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return Q.isValidElement(n)?i=Q.cloneElement(n,a):Lt(n)?i=n(a):i=r.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,l=n.width,o=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,m=n.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return uN({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l},i&&i.length?Oke({data:i,width:l,x:o,travellerWidth:c,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(l!==a.prevWidth||o!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([o,o+l-c]);var h=a.scale.domain().map(function(g){return a.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:o,prevWidth:l,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,l=0,o=i-1;o-l>1;){var c=Math.floor((l+o)/2);n[c]>a?o=c:l=c}return a>=n[o]?o:l}}])}(j.PureComponent);Qn(Zu,"displayName","Brush");Qn(Zu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Eke=NP;function Dke(t,r){var s;return Eke(t,function(n,a,i){return s=r(n,a,i),!s}),!!s}var Mke=Dke,Ike=eq,Rke=Qi,Fke=Mke,$ke=Gn,Lke=Zj;function Bke(t,r,s){var n=$ke(t)?Ike:Fke;return s&&Lke(t,r,s)&&(r=void 0),n(t,Rke(r))}var Vke=Bke;const Uke=jr(Vke);var Bi=function(r,s){var n=r.alwaysShow,a=r.ifOverflow;return n&&(a="extendDomain"),a===s},XE=Nq;function qke(t,r,s){r=="__proto__"&&XE?XE(t,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[r]=s}var zke=qke,Kke=zke,Hke=jq,Wke=Qi;function Gke(t,r){var s={};return r=Wke(r),Hke(t,function(n,a,i){Kke(s,a,r(n,a,i))}),s}var Yke=Gke;const Qke=jr(Yke);function Xke(t,r){for(var s=-1,n=t==null?0:t.length;++s<n;)if(!r(t[s],s,t))return!1;return!0}var Zke=Xke,Jke=NP;function eAe(t,r){var s=!0;return Jke(t,function(n,a,i){return s=!!r(n,a,i),s}),s}var tAe=eAe,rAe=Zke,sAe=tAe,nAe=Qi,aAe=Gn,iAe=Zj;function lAe(t,r,s){var n=aAe(t)?rAe:sAe;return s&&iAe(t,r,s)&&(r=void 0),n(t,nAe(r))}var oAe=lAe;const h9=jr(oAe);var cAe=["x","y"];function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},uf(t)}function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},bS.apply(this,arguments)}function ZE(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function hh(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?ZE(Object(s),!0).forEach(function(n){dAe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ZE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function dAe(t,r,s){return r=uAe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function uAe(t){var r=mAe(t,"string");return uf(r)=="symbol"?r:r+""}function mAe(t,r){if(uf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function hAe(t,r){if(t==null)return{};var s=pAe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function pAe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function fAe(t,r){var s=t.x,n=t.y,a=hAe(t,cAe),i="".concat(s),l=parseInt(i,10),o="".concat(n),c=parseInt(o,10),d="".concat(r.height||a.height),u=parseInt(d,10),m="".concat(r.width||a.width),h=parseInt(m,10);return hh(hh(hh(hh(hh({},r),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:u,width:h,name:r.name,radius:r.radius})}function JE(t){return Q.createElement(i9,bS({shapeType:"rectangle",propTransformer:fAe,activeClassName:"recharts-active-bar"},t))}var xAe=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof r=="number")return r;var i=Ye(n)||Vce(n);return i?r(n,a):(i||Yc(),s)}},gAe=["value","background"],p9;function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ju(t)}function vAe(t,r){if(t==null)return{};var s=yAe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function yAe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},yy.apply(this,arguments)}function eD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function js(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?eD(Object(s),!0).forEach(function(n){po(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):eD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function jAe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function tD(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x9(n.key),n)}}function bAe(t,r,s){return r&&tD(t.prototype,r),s&&tD(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function NAe(t,r,s){return r=jy(r),wAe(t,f9()?Reflect.construct(r,s||[],jy(t).constructor):r.apply(t,s))}function wAe(t,r){if(r&&(Ju(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SAe(t)}function SAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f9=function(){return!!t})()}function jy(t){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},jy(t)}function CAe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&NS(t,r)}function NS(t,r){return NS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},NS(t,r)}function po(t,r,s){return r=x9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function x9(t){var r=PAe(t,"string");return Ju(r)=="symbol"?r:r+""}function PAe(t,r){if(Ju(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ro=function(t){function r(){var s;jAe(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=NAe(this,r,[].concat(a)),po(s,"state",{isAnimationFinished:!1}),po(s,"id",Im("recharts-bar-")),po(s,"handleAnimationEnd",function(){var l=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),l&&l()}),po(s,"handleAnimationStart",function(){var l=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),l&&l()}),s}return CAe(r,t),bAe(r,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,l=i.shape,o=i.dataKey,c=i.activeIndex,d=i.activeBar,u=St(this.props,!1);return n&&n.map(function(m,h){var g=h===c,x=g?d:l,p=js(js(js({},u),m),{},{isActive:g,option:x,index:h,dataKey:o,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Q.createElement(hr,yy({className:"recharts-bar-rectangle"},Hc(a.props,m,h),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(h)}),Q.createElement(JE,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,l=a.layout,o=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,m=a.animationId,h=this.state.prevData;return Q.createElement(Ki,{begin:c,duration:d,isActive:o,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t,p=i.map(function(y,v){var f=h&&h[v];if(f){var b=sa(f.x,y.x),N=sa(f.y,y.y),w=sa(f.width,y.width),C=sa(f.height,y.height);return js(js({},y),{},{x:b(x),y:N(x),width:w(x),height:C(x)})}if(l==="horizontal"){var P=sa(0,y.height),S=P(x);return js(js({},y),{},{y:y.y+y.height-S,height:S})}var A=sa(0,y.width),k=A(x);return js(js({},y),{},{width:k})});return Q.createElement(hr,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,l=this.state.prevData;return i&&a&&a.length&&(!l||!Qf(l,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,l=a.dataKey,o=a.activeIndex,c=St(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,h=vAe(d,gAe);if(!m)return null;var g=js(js(js(js(js({},h),{},{fill:"#eee"},m),c),Hc(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return Q.createElement(JE,yy({key:"background-bar-".concat(u),option:n.props.background,isActive:u===o},g))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ha(u,Xf);if(!m)return null;var h=d==="vertical"?l[0].height/2:l[0].width/2,g=function(y,v){var f=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:f,errorVal:_s(y,v)}},x={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Q.createElement(hr,x,m.map(function(p){return Q.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,offset:h,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,l=n.className,o=n.xAxis,c=n.yAxis,d=n.left,u=n.top,m=n.width,h=n.height,g=n.isAnimationActive,x=n.background,p=n.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,v=Ut("recharts-bar",l),f=o&&o.allowDataOverflow,b=c&&c.allowDataOverflow,N=f||b,w=Vt(p)?this.id:p;return Q.createElement(hr,{className:v},f||b?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(w)},Q.createElement("rect",{x:f?d:d-m/2,y:b?u:u-h/2,width:f?m:m*2,height:b?h:h*2}))):null,Q.createElement(hr,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!g||y)&&jl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);p9=Ro;po(Ro,"displayName","Bar");po(Ro,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!id.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});po(Ro,"getComposedData",function(t){var r=t.props,s=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,l=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,g=i1e(n,s);if(!g)return null;var x=r.layout,p=s.type.defaultProps,y=p!==void 0?js(js({},p),s.props):s.props,v=y.dataKey,f=y.children,b=y.minPointSize,N=x==="horizontal"?l:i,w=d?N.scale.domain():null,C=h1e({numericAxis:N}),P=ha(f,Jj),S=m.map(function(A,k){var D,q,z,I,F,W;d?D=l1e(d[u+k],w):(D=_s(A,v),Array.isArray(D)||(D=[C,D]));var X=xAe(b,p9.defaultProps.minPointSize)(D[1],k);if(x==="horizontal"){var K,Z=[l.scale(D[0]),l.scale(D[1])],ue=Z[0],Ne=Z[1];q=zO({axis:i,ticks:o,bandSize:a,offset:g.offset,entry:A,index:k}),z=(K=Ne??ue)!==null&&K!==void 0?K:void 0,I=g.size;var J=ue-Ne;if(F=Number.isNaN(J)?0:J,W={x:q,y:l.y,width:I,height:l.height},Math.abs(X)>0&&Math.abs(F)<Math.abs(X)){var Re=jn(F||X)*(Math.abs(X)-Math.abs(F));z-=Re,F+=Re}}else{var Ee=[i.scale(D[0]),i.scale(D[1])],ut=Ee[0],ce=Ee[1];if(q=ut,z=zO({axis:l,ticks:c,bandSize:a,offset:g.offset,entry:A,index:k}),I=ce-ut,F=g.size,W={x:i.x,y:z,width:i.width,height:F},Math.abs(X)>0&&Math.abs(I)<Math.abs(X)){var ke=jn(I||X)*(Math.abs(X)-Math.abs(I));I+=ke}}return js(js(js({},A),{},{x:q,y:z,width:I,height:F,value:d?D:D[1],payload:A,background:W},P&&P[k]&&P[k].props),{},{tooltipPayload:[$z(s,A)],tooltipPosition:{x:q+I/2,y:z+F/2}})});return js({data:S,layout:x},h)});function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mf(t)}function kAe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function rD(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g9(n.key),n)}}function AAe(t,r,s){return r&&rD(t.prototype,r),s&&rD(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function sD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Ha(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?sD(Object(s),!0).forEach(function(n){vb(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):sD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function vb(t,r,s){return r=g9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function g9(t){var r=_Ae(t,"string");return mf(r)=="symbol"?r:r+""}function _Ae(t,r){if(mf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var v9=function(r,s,n,a,i){var l=r.width,o=r.height,c=r.layout,d=r.children,u=Object.keys(s),m={left:n.left,leftMirror:n.left,right:l-n.right,rightMirror:l-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},h=!!Zn(d,Ro);return u.reduce(function(g,x){var p=s[x],y=p.orientation,v=p.domain,f=p.padding,b=f===void 0?{}:f,N=p.mirror,w=p.reversed,C="".concat(y).concat(N?"Mirror":""),P,S,A,k,D;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var q=v[1]-v[0],z=1/0,I=p.categoricalDomain.sort(zce);if(I.forEach(function(Ee,ut){ut>0&&(z=Math.min((Ee||0)-(I[ut-1]||0),z))}),Number.isFinite(z)){var F=z/q,W=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(P=F*W/2),p.padding==="no-gap"){var X=bn(r.barCategoryGap,F*W),K=F*W/2;P=K-X-(K-X)/W*X}}}a==="xAxis"?S=[n.left+(b.left||0)+(P||0),n.left+n.width-(b.right||0)-(P||0)]:a==="yAxis"?S=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(P||0),n.top+n.height-(b.bottom||0)-(P||0)]:S=p.range,w&&(S=[S[1],S[0]]);var Z=Mz(p,i,h),ue=Z.scale,Ne=Z.realScaleType;ue.domain(v).range(S),Iz(ue);var J=Rz(ue,Ha(Ha({},p),{},{realScaleType:Ne}));a==="xAxis"?(D=y==="top"&&!N||y==="bottom"&&N,A=n.left,k=m[C]-D*p.height):a==="yAxis"&&(D=y==="left"&&!N||y==="right"&&N,A=m[C]-D*p.width,k=n.top);var Re=Ha(Ha(Ha({},p),J),{},{realScaleType:Ne,x:A,y:k,scale:ue,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return Re.bandSize=sy(Re,J),!p.hide&&a==="xAxis"?m[C]+=(D?-1:1)*Re.height:p.hide||(m[C]+=(D?-1:1)*Re.width),Ha(Ha({},g),{},vb({},x,Re))},{})},y9=function(r,s){var n=r.x,a=r.y,i=s.x,l=s.y;return{x:Math.min(n,i),y:Math.min(a,l),width:Math.abs(i-n),height:Math.abs(l-a)}},TAe=function(r){var s=r.x1,n=r.y1,a=r.x2,i=r.y2;return y9({x:s,y:n},{x:a,y:i})},j9=function(){function t(r){kAe(this,t),this.scale=r}return AAe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(s!==void 0){if(i)switch(i){case"start":return this.scale(s);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(s)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(s)+o}default:return this.scale(s)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(s)+c}return this.scale(s)}}},{key:"isInRange",value:function(s){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?s>=a&&s<=i:s>=i&&s<=a}}],[{key:"create",value:function(s){return new t(s)}}])}();vb(j9,"EPS",1e-4);var XP=function(r){var s=Object.keys(r).reduce(function(n,a){return Ha(Ha({},n),{},vb({},a,j9.create(r[a])))},{});return Ha(Ha({},s),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,o=i.position;return Qke(a,function(c,d){return s[d].apply(c,{bandAware:l,position:o})})},isInRange:function(a){return h9(a,function(i,l){return s[l].isInRange(i)})}})};function OAe(t){return(t%180+180)%180}var EAe=function(r){var s=r.width,n=r.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=OAe(a),l=i*Math.PI/180,o=Math.atan(n/s),c=l>o&&l<Math.PI-o?n/Math.sin(l):s/Math.cos(l);return Math.abs(c)},DAe=Qi,MAe=Kf,IAe=Qj;function RAe(t){return function(r,s,n){var a=Object(r);if(!MAe(r)){var i=DAe(s);r=IAe(r),s=function(o){return i(a[o],o,a)}}var l=t(r,s,n);return l>-1?a[i?r[l]:l]:void 0}}var FAe=RAe,$Ae=c9;function LAe(t){var r=$Ae(t),s=r%1;return r===r?s?r-s:r:0}var BAe=LAe,VAe=pq,UAe=Qi,qAe=BAe,zAe=Math.max;function KAe(t,r,s){var n=t==null?0:t.length;if(!n)return-1;var a=s==null?0:qAe(s);return a<0&&(a=zAe(n+a,0)),VAe(t,UAe(r),a)}var HAe=KAe,WAe=FAe,GAe=HAe,YAe=WAe(GAe),QAe=YAe;const XAe=jr(QAe);var ZAe=Woe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),ZP=j.createContext(void 0),JP=j.createContext(void 0),b9=j.createContext(void 0),N9=j.createContext({}),w9=j.createContext(void 0),S9=j.createContext(0),C9=j.createContext(0),nD=function(r){var s=r.state,n=s.xAxisMap,a=s.yAxisMap,i=s.offset,l=r.clipPathId,o=r.children,c=r.width,d=r.height,u=ZAe(i);return Q.createElement(ZP.Provider,{value:n},Q.createElement(JP.Provider,{value:a},Q.createElement(N9.Provider,{value:i},Q.createElement(b9.Provider,{value:u},Q.createElement(w9.Provider,{value:l},Q.createElement(S9.Provider,{value:d},Q.createElement(C9.Provider,{value:c},o)))))))},JAe=function(){return j.useContext(w9)},P9=function(r){var s=j.useContext(ZP);s==null&&Yc();var n=s[r];return n==null&&Yc(),n},e_e=function(){var r=j.useContext(ZP);return eo(r)},t_e=function(){var r=j.useContext(JP),s=XAe(r,function(n){return h9(n.domain,Number.isFinite)});return s||eo(r)},k9=function(r){var s=j.useContext(JP);s==null&&Yc();var n=s[r];return n==null&&Yc(),n},r_e=function(){var r=j.useContext(b9);return r},s_e=function(){return j.useContext(N9)},ek=function(){return j.useContext(C9)},tk=function(){return j.useContext(S9)};function em(t){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},em(t)}function n_e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function a_e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_9(n.key),n)}}function i_e(t,r,s){return r&&a_e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l_e(t,r,s){return r=by(r),o_e(t,A9()?Reflect.construct(r,s||[],by(t).constructor):r.apply(t,s))}function o_e(t,r){if(r&&(em(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c_e(t)}function c_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A9=function(){return!!t})()}function by(t){return by=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},by(t)}function d_e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&wS(t,r)}function wS(t,r){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},wS(t,r)}function aD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function iD(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?aD(Object(s),!0).forEach(function(n){rk(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):aD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function rk(t,r,s){return r=_9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function _9(t){var r=u_e(t,"string");return em(r)=="symbol"?r:r+""}function u_e(t,r){if(em(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(em(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function m_e(t,r){return x_e(t)||f_e(t,r)||p_e(t,r)||h_e()}function h_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p_e(t,r){if(t){if(typeof t=="string")return lD(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return lD(t,r)}}function lD(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function f_e(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function x_e(t){if(Array.isArray(t))return t}function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},SS.apply(this,arguments)}var g_e=function(r,s){var n;return Q.isValidElement(r)?n=Q.cloneElement(r,s):Lt(r)?n=r(s):n=Q.createElement("line",SS({},s,{className:"recharts-reference-line-line"})),n},v_e=function(r,s,n,a,i,l,o,c,d){var u=i.x,m=i.y,h=i.width,g=i.height;if(n){var x=d.y,p=r.y.apply(x,{position:l});if(Bi(d,"discard")&&!r.y.isInRange(p))return null;var y=[{x:u+h,y:p},{x:u,y:p}];return c==="left"?y.reverse():y}if(s){var v=d.x,f=r.x.apply(v,{position:l});if(Bi(d,"discard")&&!r.x.isInRange(f))return null;var b=[{x:f,y:m+g},{x:f,y:m}];return o==="top"?b.reverse():b}if(a){var N=d.segment,w=N.map(function(C){return r.apply(C,{position:l})});return Bi(d,"discard")&&Uke(w,function(C){return!r.isInRange(C)})?null:w}return null};function y_e(t){var r=t.x,s=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,l=t.shape,o=t.className,c=t.alwaysShow,d=JAe(),u=P9(a),m=k9(i),h=r_e();if(!d||!h)return null;oi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=XP({x:u.scale,y:m.scale}),x=Ms(r),p=Ms(s),y=n&&n.length===2,v=v_e(g,x,p,y,h,t.position,u.orientation,m.orientation,t);if(!v)return null;var f=m_e(v,2),b=f[0],N=b.x,w=b.y,C=f[1],P=C.x,S=C.y,A=Bi(t,"hidden")?"url(#".concat(d,")"):void 0,k=iD(iD({clipPath:A},St(t,!0)),{},{x1:N,y1:w,x2:P,y2:S});return Q.createElement(hr,{className:Ut("recharts-reference-line",o)},g_e(l,k),Bs.renderCallByParent(t,TAe({x1:N,y1:w,x2:P,y2:S})))}var sk=function(t){function r(){return n_e(this,r),l_e(this,r,arguments)}return d_e(r,t),i_e(r,[{key:"render",value:function(){return Q.createElement(y_e,this.props)}}])}(Q.Component);rk(sk,"displayName","ReferenceLine");rk(sk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},CS.apply(this,arguments)}function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},tm(t)}function oD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function cD(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?oD(Object(s),!0).forEach(function(n){yb(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):oD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function j_e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function b_e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O9(n.key),n)}}function N_e(t,r,s){return r&&b_e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w_e(t,r,s){return r=Ny(r),S_e(t,T9()?Reflect.construct(r,s||[],Ny(t).constructor):r.apply(t,s))}function S_e(t,r){if(r&&(tm(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C_e(t)}function C_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T9=function(){return!!t})()}function Ny(t){return Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ny(t)}function P_e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&PS(t,r)}function PS(t,r){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},PS(t,r)}function yb(t,r,s){return r=O9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function O9(t){var r=k_e(t,"string");return tm(r)=="symbol"?r:r+""}function k_e(t,r){if(tm(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var A_e=function(r){var s=r.x,n=r.y,a=r.xAxis,i=r.yAxis,l=XP({x:a.scale,y:i.scale}),o=l.apply({x:s,y:n},{bandAware:!0});return Bi(r,"discard")&&!l.isInRange(o)?null:o},jb=function(t){function r(){return j_e(this,r),w_e(this,r,arguments)}return P_e(r,t),N_e(r,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,l=n.r,o=n.alwaysShow,c=n.clipPathId,d=Ms(a),u=Ms(i);if(oi(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=A_e(this.props);if(!m)return null;var h=m.x,g=m.y,x=this.props,p=x.shape,y=x.className,v=Bi(this.props,"hidden")?"url(#".concat(c,")"):void 0,f=cD(cD({clipPath:v},St(this.props,!0)),{},{cx:h,cy:g});return Q.createElement(hr,{className:Ut("recharts-reference-dot",y)},r.renderDot(p,f),Bs.renderCallByParent(this.props,{x:h-l,y:g-l,width:2*l,height:2*l}))}}])}(Q.Component);yb(jb,"displayName","ReferenceDot");yb(jb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});yb(jb,"renderDot",function(t,r){var s;return Q.isValidElement(t)?s=Q.cloneElement(t,r):Lt(t)?s=t(r):s=Q.createElement(ub,CS({},r,{cx:r.cx,cy:r.cy,className:"recharts-reference-dot-dot"})),s});function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},kS.apply(this,arguments)}function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rm(t)}function dD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function uD(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?dD(Object(s),!0).forEach(function(n){bb(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function __e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function T_e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D9(n.key),n)}}function O_e(t,r,s){return r&&T_e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function E_e(t,r,s){return r=wy(r),D_e(t,E9()?Reflect.construct(r,s||[],wy(t).constructor):r.apply(t,s))}function D_e(t,r){if(r&&(rm(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M_e(t)}function M_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E9=function(){return!!t})()}function wy(t){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},wy(t)}function I_e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&AS(t,r)}function AS(t,r){return AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},AS(t,r)}function bb(t,r,s){return r=D9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function D9(t){var r=R_e(t,"string");return rm(r)=="symbol"?r:r+""}function R_e(t,r){if(rm(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(rm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F_e=function(r,s,n,a,i){var l=i.x1,o=i.x2,c=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var h=XP({x:u.scale,y:m.scale}),g={x:r?h.x.apply(l,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},x={x:s?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return Bi(i,"discard")&&(!h.isInRange(g)||!h.isInRange(x))?null:y9(g,x)},Nb=function(t){function r(){return __e(this,r),E_e(this,r,arguments)}return I_e(r,t),O_e(r,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,l=n.y1,o=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;oi(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ms(a),h=Ms(i),g=Ms(l),x=Ms(o),p=this.props.shape;if(!m&&!h&&!g&&!x&&!p)return null;var y=F_e(m,h,g,x,this.props);if(!y&&!p)return null;var v=Bi(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Q.createElement(hr,{className:Ut("recharts-reference-area",c)},r.renderRect(p,uD(uD({clipPath:v},St(this.props,!0)),y)),Bs.renderCallByParent(this.props,y))}}])}(Q.Component);bb(Nb,"displayName","ReferenceArea");bb(Nb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});bb(Nb,"renderRect",function(t,r){var s;return Q.isValidElement(t)?s=Q.cloneElement(t,r):Lt(t)?s=t(r):s=Q.createElement(QP,kS({},r,{className:"recharts-reference-area-rect"})),s});function M9(t,r,s){if(r<1)return[];if(r===1&&s===void 0)return t;for(var n=[],a=0;a<t.length;a+=r)n.push(t[a]);return n}function $_e(t,r,s){var n={width:t.width+r.width,height:t.height+r.height};return EAe(n,s)}function L_e(t,r,s){var n=s==="width",a=t.x,i=t.y,l=t.width,o=t.height;return r===1?{start:n?a:i,end:n?a+l:i+o}:{start:n?a+l:i+o,end:n?a:i}}function Sy(t,r,s,n,a){if(t*r<t*n||t*r>t*a)return!1;var i=s();return t*(r-t*i/2-n)>=0&&t*(r+t*i/2-a)<=0}function B_e(t,r){return M9(t,r+1)}function V_e(t,r,s,n,a){for(var i=(n||[]).slice(),l=r.start,o=r.end,c=0,d=1,u=l,m=function(){var x=n==null?void 0:n[c];if(x===void 0)return{v:M9(n,d)};var p=c,y,v=function(){return y===void 0&&(y=s(x,p)),y},f=x.coordinate,b=c===0||Sy(t,f,v,u,o);b||(c=0,u=l,d+=1),b&&(u=f+t*(v()/2+a),c+=d)},h;d<=i.length;)if(h=m(),h)return h.v;return[]}function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hf(t)}function mD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function ln(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?mD(Object(s),!0).forEach(function(n){U_e(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):mD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function U_e(t,r,s){return r=q_e(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function q_e(t){var r=z_e(t,"string");return hf(r)=="symbol"?r:r+""}function z_e(t,r){if(hf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function K_e(t,r,s,n,a){for(var i=(n||[]).slice(),l=i.length,o=r.start,c=r.end,d=function(h){var g=i[h],x,p=function(){return x===void 0&&(x=s(g,h)),x};if(h===l-1){var y=t*(g.coordinate+t*p()/2-c);i[h]=g=ln(ln({},g),{},{tickCoord:y>0?g.coordinate-y*t:g.coordinate})}else i[h]=g=ln(ln({},g),{},{tickCoord:g.coordinate});var v=Sy(t,g.tickCoord,p,o,c);v&&(c=g.tickCoord-t*(p()/2+a),i[h]=ln(ln({},g),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function H_e(t,r,s,n,a,i){var l=(n||[]).slice(),o=l.length,c=r.start,d=r.end;if(i){var u=n[o-1],m=s(u,o-1),h=t*(u.coordinate+t*m/2-d);l[o-1]=u=ln(ln({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var g=Sy(t,u.tickCoord,function(){return m},c,d);g&&(d=u.tickCoord-t*(m/2+a),l[o-1]=ln(ln({},u),{},{isShow:!0}))}for(var x=i?o-1:o,p=function(f){var b=l[f],N,w=function(){return N===void 0&&(N=s(b,f)),N};if(f===0){var C=t*(b.coordinate-t*w()/2-c);l[f]=b=ln(ln({},b),{},{tickCoord:C<0?b.coordinate-C*t:b.coordinate})}else l[f]=b=ln(ln({},b),{},{tickCoord:b.coordinate});var P=Sy(t,b.tickCoord,w,c,d);P&&(c=b.tickCoord+t*(w()/2+a),l[f]=ln(ln({},b),{},{isShow:!0}))},y=0;y<x;y++)p(y);return l}function nk(t,r,s){var n=t.tick,a=t.ticks,i=t.viewBox,l=t.minTickGap,o=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(Ye(c)||id.isSsr)return B_e(a,typeof c=="number"&&Ye(c)?c:0);var h=[],g=o==="top"||o==="bottom"?"width":"height",x=u&&g==="width"?Kh(u,{fontSize:r,letterSpacing:s}):{width:0,height:0},p=function(b,N){var w=Lt(d)?d(b.value,N):b.value;return g==="width"?$_e(Kh(w,{fontSize:r,letterSpacing:s}),x,m):Kh(w,{fontSize:r,letterSpacing:s})[g]},y=a.length>=2?jn(a[1].coordinate-a[0].coordinate):1,v=L_e(i,y,g);return c==="equidistantPreserveStart"?V_e(y,v,p,a,l):(c==="preserveStart"||c==="preserveStartEnd"?h=H_e(y,v,p,a,l,c==="preserveStartEnd"):h=K_e(y,v,p,a,l),h.filter(function(f){return f.isShow}))}var W_e=["viewBox"],G_e=["viewBox"],Y_e=["ticks"];function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sm(t)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Hd.apply(this,arguments)}function hD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Ss(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?hD(Object(s),!0).forEach(function(n){ak(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):hD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function mN(t,r){if(t==null)return{};var s=Q_e(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Q_e(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function X_e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function pD(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R9(n.key),n)}}function Z_e(t,r,s){return r&&pD(t.prototype,r),s&&pD(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function J_e(t,r,s){return r=Cy(r),eTe(t,I9()?Reflect.construct(r,s||[],Cy(t).constructor):r.apply(t,s))}function eTe(t,r){if(r&&(sm(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tTe(t)}function tTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I9=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Cy(t)}function rTe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_S(t,r)}function _S(t,r){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_S(t,r)}function ak(t,r,s){return r=R9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function R9(t){var r=sTe(t,"string");return sm(r)=="symbol"?r:r+""}function sTe(t,r){if(sm(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Um=function(t){function r(s){var n;return X_e(this,r),n=J_e(this,r,[s]),n.state={fontSize:"",letterSpacing:""},n}return rTe(r,t),Z_e(r,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,l=mN(n,W_e),o=this.props,c=o.viewBox,d=mN(o,G_e);return!iu(i,c)||!iu(l,d)||!iu(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,l=a.y,o=a.width,c=a.height,d=a.orientation,u=a.tickSize,m=a.mirror,h=a.tickMargin,g,x,p,y,v,f,b=m?-1:1,N=n.tickSize||u,w=Ye(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":g=x=n.coordinate,y=l+ +!m*c,p=y-b*N,f=p-b*h,v=w;break;case"left":p=y=n.coordinate,x=i+ +!m*o,g=x-b*N,v=g-b*h,f=w;break;case"right":p=y=n.coordinate,x=i+ +m*o,g=x+b*N,v=g+b*h,f=w;break;default:g=x=n.coordinate,y=l+ +m*c,p=y+b*N,f=p+b*h,v=w;break}return{line:{x1:g,y1:p,x2:x,y2:y},tick:{x:v,y:f}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,l;switch(a){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,l="end";switch(a){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,l=n.width,o=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,m=Ss(Ss(Ss({},St(this.props,!1)),St(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);m=Ss(Ss({},m),{},{x1:a,y1:i+h*o,x2:a+l,y2:i+h*o})}else{var g=+(c==="left"&&!d||c==="right"&&d);m=Ss(Ss({},m),{},{x1:a+g*l,y1:i,x2:a+g*l,y2:i+o})}return Q.createElement("line",Hd({},m,{className:Ut("recharts-cartesian-axis-line",ma(u,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var l=this,o=this.props,c=o.tickLine,d=o.stroke,u=o.tick,m=o.tickFormatter,h=o.unit,g=nk(Ss(Ss({},this.props),{},{ticks:n}),a,i),x=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=St(this.props,!1),v=St(u,!1),f=Ss(Ss({},y),{},{fill:"none"},St(c,!1)),b=g.map(function(N,w){var C=l.getTickLineCoord(N),P=C.line,S=C.tick,A=Ss(Ss(Ss(Ss({textAnchor:x,verticalAnchor:p},y),{},{stroke:"none",fill:d},v),S),{},{index:w,payload:N,visibleTicksCount:g.length,tickFormatter:m});return Q.createElement(hr,Hd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Hc(l.props,N,w)),c&&Q.createElement("line",Hd({},f,P,{className:Ut("recharts-cartesian-axis-tick-line",ma(c,"className"))})),u&&r.renderTickItem(u,A,"".concat(Lt(m)?m(N.value,w):N.value).concat(h||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,l=a.width,o=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var m=this.props,h=m.ticks,g=mN(m,Y_e),x=h;return Lt(c)&&(x=h&&h.length>0?c(this.props):c(g)),l<=0||o<=0||!x||!x.length?null:Q.createElement(hr,{className:Ut("recharts-cartesian-axis",d),ref:function(y){n.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Bs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var l,o=Ut(a.className,"recharts-cartesian-axis-tick-value");return Q.isValidElement(n)?l=Q.cloneElement(n,Ss(Ss({},a),{},{className:o})):Lt(n)?l=n(Ss(Ss({},a),{},{className:o})):l=Q.createElement(Wc,Hd({},a,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(j.Component);ak(Um,"displayName","CartesianAxis");ak(Um,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var nTe=["x1","y1","x2","y2","key"],aTe=["offset"];function Qc(t){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qc(t)}function fD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function cn(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?fD(Object(s),!0).forEach(function(n){iTe(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):fD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function iTe(t,r,s){return r=lTe(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function lTe(t){var r=oTe(t,"string");return Qc(r)=="symbol"?r:r+""}function oTe(t,r){if(Qc(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(Qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},pc.apply(this,arguments)}function xD(t,r){if(t==null)return{};var s=cTe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function cTe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}var dTe=function(r){var s=r.fill;if(!s||s==="none")return null;var n=r.fillOpacity,a=r.x,i=r.y,l=r.width,o=r.height,c=r.ry;return Q.createElement("rect",{x:a,y:i,ry:c,width:l,height:o,stroke:"none",fill:s,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function F9(t,r){var s;if(Q.isValidElement(t))s=Q.cloneElement(t,r);else if(Lt(t))s=t(r);else{var n=r.x1,a=r.y1,i=r.x2,l=r.y2,o=r.key,c=xD(r,nTe),d=St(c,!1);d.offset;var u=xD(d,aTe);s=Q.createElement("line",pc({},u,{x1:n,y1:a,x2:i,y2:l,fill:"none",key:o}))}return s}function uTe(t){var r=t.x,s=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=cn(cn({},t),{},{x1:r,y1:o,x2:r+s,y2:o,key:"line-".concat(c),index:c});return F9(a,d)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function mTe(t){var r=t.y,s=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var l=i.map(function(o,c){var d=cn(cn({},t),{},{x1:o,y1:r,x2:o,y2:r+s,key:"line-".concat(c),index:c});return F9(a,d)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function hTe(t){var r=t.horizontalFill,s=t.fillOpacity,n=t.x,a=t.y,i=t.width,l=t.height,o=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!r||!r.length)return null;var u=o.map(function(h){return Math.round(h+a-a)}).sort(function(h,g){return h-g});a!==u[0]&&u.unshift(0);var m=u.map(function(h,g){var x=!u[g+1],p=x?a+l-h:u[g+1]-h;if(p<=0)return null;var y=g%r.length;return Q.createElement("rect",{key:"react-".concat(g),y:h,x:n,height:p,width:i,stroke:"none",fill:r[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function pTe(t){var r=t.vertical,s=r===void 0?!0:r,n=t.verticalFill,a=t.fillOpacity,i=t.x,l=t.y,o=t.width,c=t.height,d=t.verticalPoints;if(!s||!n||!n.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,g){return h-g});i!==u[0]&&u.unshift(0);var m=u.map(function(h,g){var x=!u[g+1],p=x?i+o-h:u[g+1]-h;if(p<=0)return null;var y=g%n.length;return Q.createElement("rect",{key:"react-".concat(g),x:h,y:l,width:p,height:c,stroke:"none",fill:n[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var fTe=function(r,s){var n=r.xAxis,a=r.width,i=r.height,l=r.offset;return Dz(nk(cn(cn(cn({},Um.defaultProps),n),{},{ticks:fl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.left,l.left+l.width,s)},xTe=function(r,s){var n=r.yAxis,a=r.width,i=r.height,l=r.offset;return Dz(nk(cn(cn(cn({},Um.defaultProps),n),{},{ticks:fl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),l.top,l.top+l.height,s)},Cd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Py(t){var r,s,n,a,i,l,o=ek(),c=tk(),d=s_e(),u=cn(cn({},t),{},{stroke:(r=t.stroke)!==null&&r!==void 0?r:Cd.stroke,fill:(s=t.fill)!==null&&s!==void 0?s:Cd.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Cd.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Cd.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Cd.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Cd.verticalFill,x:Ye(t.x)?t.x:d.left,y:Ye(t.y)?t.y:d.top,width:Ye(t.width)?t.width:d.width,height:Ye(t.height)?t.height:d.height}),m=u.x,h=u.y,g=u.width,x=u.height,p=u.syncWithTicks,y=u.horizontalValues,v=u.verticalValues,f=e_e(),b=t_e();if(!Ye(g)||g<=0||!Ye(x)||x<=0||!Ye(m)||m!==+m||!Ye(h)||h!==+h)return null;var N=u.verticalCoordinatesGenerator||fTe,w=u.horizontalCoordinatesGenerator||xTe,C=u.horizontalPoints,P=u.verticalPoints;if((!C||!C.length)&&Lt(w)){var S=y&&y.length,A=w({yAxis:b?cn(cn({},b),{},{ticks:S?y:b.ticks}):void 0,width:o,height:c,offset:d},S?!0:p);oi(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(A),"]")),Array.isArray(A)&&(C=A)}if((!P||!P.length)&&Lt(N)){var k=v&&v.length,D=N({xAxis:f?cn(cn({},f),{},{ticks:k?v:f.ticks}):void 0,width:o,height:c,offset:d},k?!0:p);oi(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(D),"]")),Array.isArray(D)&&(P=D)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(dTe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Q.createElement(uTe,pc({},u,{offset:d,horizontalPoints:C,xAxis:f,yAxis:b})),Q.createElement(mTe,pc({},u,{offset:d,verticalPoints:P,xAxis:f,yAxis:b})),Q.createElement(hTe,pc({},u,{horizontalPoints:C})),Q.createElement(pTe,pc({},u,{verticalPoints:P})))}Py.displayName="CartesianGrid";var gTe=["type","layout","connectNulls","ref"],vTe=["key"];function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nm(t)}function gD(t,r){if(t==null)return{};var s=yTe(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function yTe(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Xh.apply(this,arguments)}function vD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Yn(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?vD(Object(s),!0).forEach(function(n){Wa(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):vD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Pd(t){return wTe(t)||NTe(t)||bTe(t)||jTe()}function jTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bTe(t,r){if(t){if(typeof t=="string")return TS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return TS(t,r)}}function NTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wTe(t){if(Array.isArray(t))return TS(t)}function TS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function STe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function yD(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L9(n.key),n)}}function CTe(t,r,s){return r&&yD(t.prototype,r),s&&yD(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function PTe(t,r,s){return r=ky(r),kTe(t,$9()?Reflect.construct(r,s||[],ky(t).constructor):r.apply(t,s))}function kTe(t,r){if(r&&(nm(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ATe(t)}function ATe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($9=function(){return!!t})()}function ky(t){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},ky(t)}function _Te(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&OS(t,r)}function OS(t,r){return OS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},OS(t,r)}function Wa(t,r,s){return r=L9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function L9(t){var r=TTe(t,"string");return nm(r)=="symbol"?r:r+""}function TTe(t,r){if(nm(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fo=function(t){function r(){var s;STe(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=PTe(this,r,[].concat(a)),Wa(s,"state",{isAnimationFinished:!0,totalLength:0}),Wa(s,"generateSimpleStrokeDasharray",function(l,o){return"".concat(o,"px ").concat(l-o,"px")}),Wa(s,"getStrokeDasharray",function(l,o,c){var d=c.reduce(function(v,f){return v+f});if(!d)return s.generateSimpleStrokeDasharray(o,l);for(var u=Math.floor(l/d),m=l%d,h=o-l,g=[],x=0,p=0;x<c.length;p+=c[x],++x)if(p+c[x]>m){g=[].concat(Pd(c.slice(0,x)),[m-p]);break}var y=g.length%2===0?[0,h]:[h];return[].concat(Pd(r.repeat(c,u)),Pd(g),y).map(function(v){return"".concat(v,"px")}).join(", ")}),Wa(s,"id",Im("recharts-line-")),Wa(s,"pathRef",function(l){s.mainCurve=l}),Wa(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0}),s.props.onAnimationEnd&&s.props.onAnimationEnd()}),Wa(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1}),s.props.onAnimationStart&&s.props.onAnimationStart()}),s}return _Te(r,t),CTe(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,o=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,m=ha(u,Xf);if(!m)return null;var h=function(p,y){return{x:p.x,y:p.y,value:p.value,errorVal:_s(p.payload,y)}},g={clipPath:n?"url(#clipPath-".concat(a,")"):null};return Q.createElement(hr,g,m.map(function(x){return Q.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:l,xAxis:o,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,d=o.points,u=o.dataKey,m=St(this.props,!1),h=St(c,!0),g=d.map(function(p,y){var v=Yn(Yn(Yn({key:"dot-".concat(y),r:3},m),h),{},{index:y,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return r.renderDotItem(c,v)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Q.createElement(hr,Xh({className:"recharts-line-dots",key:"dots"},x),g)}},{key:"renderCurveStatically",value:function(n,a,i,l){var o=this.props,c=o.type,d=o.layout,u=o.connectNulls;o.ref;var m=gD(o,gTe),h=Yn(Yn(Yn({},St(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},l),{},{type:c,layout:d,connectNulls:u});return Q.createElement(iy,Xh({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,l=this.props,o=l.points,c=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,g=l.animationId,x=l.animateNewValues,p=l.width,y=l.height,v=this.state,f=v.prevPoints,b=v.totalLength;return Q.createElement(Ki,{begin:u,duration:m,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(f){var C=f.length/o.length,P=o.map(function(q,z){var I=Math.floor(z*C);if(f[I]){var F=f[I],W=sa(F.x,q.x),X=sa(F.y,q.y);return Yn(Yn({},q),{},{x:W(w),y:X(w)})}if(x){var K=sa(p*2,q.x),Z=sa(y/2,q.y);return Yn(Yn({},q),{},{x:K(w),y:Z(w)})}return Yn(Yn({},q),{},{x:q.x,y:q.y})});return i.renderCurveStatically(P,n,a)}var S=sa(0,b),A=S(w),k;if(c){var D="".concat(c).split(/[,\s]+/gim).map(function(q){return parseFloat(q)});k=i.getStrokeDasharray(A,b,D)}else k=i.generateSimpleStrokeDasharray(b,A);return i.renderCurveStatically(o,n,a,{strokeDasharray:k})})}},{key:"renderCurve",value:function(n,a){var i=this.props,l=i.points,o=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return o&&l&&l.length&&(!d&&u>0||!Qf(d,l))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,l=a.dot,o=a.points,c=a.className,d=a.xAxis,u=a.yAxis,m=a.top,h=a.left,g=a.width,x=a.height,p=a.isAnimationActive,y=a.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,f=o.length===1,b=Ut("recharts-line",c),N=d&&d.allowDataOverflow,w=u&&u.allowDataOverflow,C=N||w,P=Vt(y)?this.id:y,S=(n=St(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=S.r,k=A===void 0?3:A,D=S.strokeWidth,q=D===void 0?2:D,z=Jce(l)?l:{},I=z.clipDot,F=I===void 0?!0:I,W=k*2+q;return Q.createElement(hr,{className:b},N||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(P)},Q.createElement("rect",{x:N?h:h-g/2,y:w?m:m-x/2,width:N?g:g*2,height:w?x:x*2})),!F&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(P)},Q.createElement("rect",{x:h-W/2,y:m-W/2,width:g+W,height:x+W}))):null,!f&&this.renderCurve(C,P),this.renderErrorBar(C,P),(f||l)&&this.renderDots(C,F,P),(!p||v)&&jl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(Pd(n),[0]):n,l=[],o=0;o<a;++o)l=[].concat(Pd(l),Pd(i));return l}},{key:"renderDotItem",value:function(n,a){var i;if(Q.isValidElement(n))i=Q.cloneElement(n,a);else if(Lt(n))i=n(a);else{var l=a.key,o=gD(a,vTe),c=Ut("recharts-line-dot",typeof n!="boolean"?n.className:"");i=Q.createElement(ub,Xh({key:l},o,{className:c}))}return i}}])}(j.PureComponent);Wa(Fo,"displayName","Line");Wa(Fo,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!id.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Wa(Fo,"getComposedData",function(t){var r=t.props,s=t.xAxis,n=t.yAxis,a=t.xAxisTicks,i=t.yAxisTicks,l=t.dataKey,o=t.bandSize,c=t.displayedData,d=t.offset,u=r.layout,m=c.map(function(h,g){var x=_s(h,l);return u==="horizontal"?{x:qO({axis:s,ticks:a,bandSize:o,entry:h,index:g}),y:Vt(x)?null:n.scale(x),value:x,payload:h}:{x:Vt(x)?null:s.scale(x),y:qO({axis:n,ticks:i,bandSize:o,entry:h,index:g}),value:x,payload:h}});return Yn({points:m,layout:u},d)});function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},am(t)}function OTe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ETe(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U9(n.key),n)}}function DTe(t,r,s){return r&&ETe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MTe(t,r,s){return r=Ay(r),ITe(t,B9()?Reflect.construct(r,s||[],Ay(t).constructor):r.apply(t,s))}function ITe(t,r){if(r&&(am(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RTe(t)}function RTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B9=function(){return!!t})()}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ay(t)}function FTe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ES(t,r)}function ES(t,r){return ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ES(t,r)}function V9(t,r,s){return r=U9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function U9(t){var r=$Te(t,"string");return am(r)=="symbol"?r:r+""}function $Te(t,r){if(am(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(am(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},DS.apply(this,arguments)}function LTe(t){var r=t.xAxisId,s=ek(),n=tk(),a=P9(r);return a==null?null:j.createElement(Um,DS({},a,{className:Ut("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:n},ticksGenerator:function(l){return fl(l,!0)}}))}var Xc=function(t){function r(){return OTe(this,r),MTe(this,r,arguments)}return FTe(r,t),DTe(r,[{key:"render",value:function(){return j.createElement(LTe,this.props)}}])}(j.Component);V9(Xc,"displayName","XAxis");V9(Xc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},im(t)}function BTe(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function VTe(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K9(n.key),n)}}function UTe(t,r,s){return r&&VTe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function qTe(t,r,s){return r=_y(r),zTe(t,q9()?Reflect.construct(r,s||[],_y(t).constructor):r.apply(t,s))}function zTe(t,r){if(r&&(im(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KTe(t)}function KTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q9=function(){return!!t})()}function _y(t){return _y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_y(t)}function HTe(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&MS(t,r)}function MS(t,r){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},MS(t,r)}function z9(t,r,s){return r=K9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function K9(t){var r=WTe(t,"string");return im(r)=="symbol"?r:r+""}function WTe(t,r){if(im(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(im(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function IS(){return IS=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},IS.apply(this,arguments)}var GTe=function(r){var s=r.yAxisId,n=ek(),a=tk(),i=k9(s);return i==null?null:j.createElement(Um,IS({},i,{className:Ut("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(o){return fl(o,!0)}}))},$o=function(t){function r(){return BTe(this,r),qTe(this,r,arguments)}return HTe(r,t),UTe(r,[{key:"render",value:function(){return j.createElement(GTe,this.props)}}])}(j.Component);z9($o,"displayName","YAxis");z9($o,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function jD(t){return ZTe(t)||XTe(t)||QTe(t)||YTe()}function YTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QTe(t,r){if(t){if(typeof t=="string")return RS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return RS(t,r)}}function XTe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZTe(t){if(Array.isArray(t))return RS(t)}function RS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}var FS=function(r,s,n,a,i){var l=ha(r,sk),o=ha(r,jb),c=[].concat(jD(l),jD(o)),d=ha(r,Nb),u="".concat(a,"Id"),m=a[0],h=s;if(c.length&&(h=c.reduce(function(p,y){if(y.props[u]===n&&Bi(y.props,"extendDomain")&&Ye(y.props[m])){var v=y.props[m];return[Math.min(p[0],v),Math.max(p[1],v)]}return p},h)),d.length){var g="".concat(m,"1"),x="".concat(m,"2");h=d.reduce(function(p,y){if(y.props[u]===n&&Bi(y.props,"extendDomain")&&Ye(y.props[g])&&Ye(y.props[x])){var v=y.props[g],f=y.props[x];return[Math.min(p[0],v,f),Math.max(p[1],v,f)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,y){return Ye(y)?[Math.min(p[0],y),Math.max(p[1],y)]:p},h)),h},H9={exports:{}};(function(t){var r=Object.prototype.hasOwnProperty,s="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(s=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,m,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,m||c,h),x=s?s+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],g]:c._events[x].push(g):(c._events[x]=g,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)r.call(u,m)&&d.push(s?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=s?s+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,g=m.length,x=new Array(g);h<g;h++)x[h]=m[h].fn;return x},o.prototype.listenerCount=function(d){var u=s?s+d:d,m=this._events[u];return m?m.fn?1:m.length:0},o.prototype.emit=function(d,u,m,h,g,x){var p=s?s+d:d;if(!this._events[p])return!1;var y=this._events[p],v=arguments.length,f,b;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,m),!0;case 4:return y.fn.call(y.context,u,m,h),!0;case 5:return y.fn.call(y.context,u,m,h,g),!0;case 6:return y.fn.call(y.context,u,m,h,g,x),!0}for(b=1,f=new Array(v-1);b<v;b++)f[b-1]=arguments[b];y.fn.apply(y.context,f)}else{var N=y.length,w;for(b=0;b<N;b++)switch(y[b].once&&this.removeListener(d,y[b].fn,void 0,!0),v){case 1:y[b].fn.call(y[b].context);break;case 2:y[b].fn.call(y[b].context,u);break;case 3:y[b].fn.call(y[b].context,u,m);break;case 4:y[b].fn.call(y[b].context,u,m,h);break;default:if(!f)for(w=1,f=new Array(v-1);w<v;w++)f[w-1]=arguments[w];y[b].fn.apply(y[b].context,f)}}return!0},o.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},o.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},o.prototype.removeListener=function(d,u,m,h){var g=s?s+d:d;if(!this._events[g])return this;if(!u)return l(this,g),this;var x=this._events[g];if(x.fn)x.fn===u&&(!h||x.once)&&(!m||x.context===m)&&l(this,g);else{for(var p=0,y=[],v=x.length;p<v;p++)(x[p].fn!==u||h&&!x[p].once||m&&x[p].context!==m)&&y.push(x[p]);y.length?this._events[g]=y.length===1?y[0]:y:l(this,g)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=s?s+d:d,this._events[u]&&l(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,t.exports=o})(H9);var JTe=H9.exports;const e4e=jr(JTe);var hN=new e4e,pN="recharts.syncMouseEvents";function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pf(t)}function t4e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function r4e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W9(n.key),n)}}function s4e(t,r,s){return r&&r4e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fN(t,r,s){return r=W9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function W9(t){var r=n4e(t,"string");return pf(r)=="symbol"?r:r+""}function n4e(t,r){if(pf(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var a4e=function(){function t(){t4e(this,t),fN(this,"activeIndex",0),fN(this,"coordinateList",[]),fN(this,"layout","horizontal")}return s4e(t,[{key:"setDetails",value:function(s){var n,a=s.coordinateList,i=a===void 0?null:a,l=s.container,o=l===void 0?null:l,c=s.layout,d=c===void 0?null:c,u=s.offset,m=u===void 0?null:u,h=s.mouseHandlerCallback,g=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(s){if(this.coordinateList.length!==0)switch(s.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(s){this.activeIndex=s}},{key:"spoofMouse",value:function(){var s,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,l=a.y,o=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((s=window)===null||s===void 0?void 0:s.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+c+d,h=l+this.offset.top+o/2+u;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])}();function i4e(t,r,s){if(s==="number"&&r===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&Ye(n)&&Ye(a))return!0}return!1}function l4e(t,r,s,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-a:s.left+.5,y:t==="horizontal"?s.top+.5:r.y-a,width:t==="horizontal"?n:s.width-1,height:t==="horizontal"?s.height-1:n}}function G9(t){var r=t.cx,s=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,l=$r(r,s,n,a),o=$r(r,s,n,i);return{points:[l,o],cx:r,cy:s,radius:n,startAngle:a,endAngle:i}}function o4e(t,r,s){var n,a,i,l;if(t==="horizontal")n=r.x,i=n,a=s.top,l=s.top+s.height;else if(t==="vertical")a=r.y,l=a,n=s.left,i=s.left+s.width;else if(r.cx!=null&&r.cy!=null)if(t==="centric"){var o=r.cx,c=r.cy,d=r.innerRadius,u=r.outerRadius,m=r.angle,h=$r(o,c,d,m),g=$r(o,c,u,m);n=h.x,a=h.y,i=g.x,l=g.y}else return G9(r);return[{x:n,y:a},{x:i,y:l}]}function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ff(t)}function bD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function Kx(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?bD(Object(s),!0).forEach(function(n){c4e(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):bD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function c4e(t,r,s){return r=d4e(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function d4e(t){var r=u4e(t,"string");return ff(r)=="symbol"?r:r+""}function u4e(t,r){if(ff(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function m4e(t){var r,s,n=t.element,a=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,o=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,h=t.chartName,g=(r=n.props.cursor)!==null&&r!==void 0?r:(s=n.type.defaultProps)===null||s===void 0?void 0:s.cursor;if(!n||!g||!i||!l||h!=="ScatterChart"&&a!=="axis")return null;var x,p=iy;if(h==="ScatterChart")x=l,p=TCe;else if(h==="BarChart")x=l4e(m,l,c,u),p=QP;else if(m==="radial"){var y=G9(l),v=y.cx,f=y.cy,b=y.radius,N=y.startAngle,w=y.endAngle;x={cx:v,cy:f,startAngle:N,endAngle:w,innerRadius:b,outerRadius:b},p=zz}else x={points:o4e(m,l,c)},p=iy;var C=Kx(Kx(Kx(Kx({stroke:"#ccc",pointerEvents:"none"},c),x),St(g,!1)),{},{payload:o,payloadIndex:d,className:Ut("recharts-tooltip-cursor",g.className)});return j.isValidElement(g)?j.cloneElement(g,C):j.createElement(p,C)}var h4e=["item"],p4e=["children","className","width","height","style","compact","title","desc"];function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lm(t)}function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Wd.apply(this,arguments)}function ND(t,r){return g4e(t)||x4e(t,r)||Q9(t,r)||f4e()}function f4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x4e(t,r){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(s=s.call(t)).next,r!==0)for(;!(c=(n=i.call(s)).done)&&(o.push(n.value),o.length!==r);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function g4e(t){if(Array.isArray(t))return t}function wD(t,r){if(t==null)return{};var s=v4e(t,r),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function v4e(t,r){if(t==null)return{};var s={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(r.indexOf(n)>=0)continue;s[n]=t[n]}return s}function y4e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function j4e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X9(n.key),n)}}function b4e(t,r,s){return r&&j4e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N4e(t,r,s){return r=Ty(r),w4e(t,Y9()?Reflect.construct(r,s||[],Ty(t).constructor):r.apply(t,s))}function w4e(t,r){if(r&&(lm(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S4e(t)}function S4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y9=function(){return!!t})()}function Ty(t){return Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ty(t)}function C4e(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&$S(t,r)}function $S(t,r){return $S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$S(t,r)}function om(t){return A4e(t)||k4e(t)||Q9(t)||P4e()}function P4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9(t,r){if(t){if(typeof t=="string")return LS(t,r);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return LS(t,r)}}function k4e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A4e(t){if(Array.isArray(t))return LS(t)}function LS(t,r){(r==null||r>t.length)&&(r=t.length);for(var s=0,n=new Array(r);s<r;s++)n[s]=t[s];return n}function SD(t,r){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,n)}return s}function _e(t){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?SD(Object(s),!0).forEach(function(n){At(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):SD(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function At(t,r,s){return r=X9(r),r in t?Object.defineProperty(t,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[r]=s,t}function X9(t){var r=_4e(t,"string");return lm(r)=="symbol"?r:r+""}function _4e(t,r){if(lm(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,r);if(lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var T4e={xAxis:["bottom","top"],yAxis:["left","right"]},O4e={width:"100%",height:"100%"},Z9={x:0,y:0};function Hx(t){return t}var E4e=function(r,s){return s==="horizontal"?r.x:s==="vertical"?r.y:s==="centric"?r.angle:r.radius},D4e=function(r,s,n,a){var i=s.find(function(u){return u&&u.index===n});if(i){if(r==="horizontal")return{x:i.coordinate,y:a.y};if(r==="vertical")return{x:a.x,y:i.coordinate};if(r==="centric"){var l=i.coordinate,o=a.radius;return _e(_e(_e({},a),$r(a.cx,a.cy,o,l)),{},{angle:l,radius:o})}var c=i.coordinate,d=a.angle;return _e(_e(_e({},a),$r(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return Z9},wb=function(r,s){var n=s.graphicalItems,a=s.dataStartIndex,i=s.dataEndIndex,l=(n??[]).reduce(function(o,c){var d=c.props.data;return d&&d.length?[].concat(om(o),om(d)):o},[]);return l.length>0?l:r&&r.length&&Ye(a)&&Ye(i)?r.slice(a,i+1):[]};function J9(t){return t==="number"?[0,"auto"]:void 0}var BS=function(r,s,n,a){var i=r.graphicalItems,l=r.tooltipAxis,o=wb(s,r);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(c,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:s;m&&r.dataStartIndex+r.dataEndIndex!==0&&r.dataEndIndex-r.dataStartIndex>=n&&(m=m.slice(r.dataStartIndex,r.dataEndIndex+1));var h;if(l.dataKey&&!l.allowDuplicatedCategory){var g=m===void 0?o:m;h=Av(g,l.dataKey,a)}else h=m&&m[n]||o[n];return h?[].concat(om(c),[$z(d,h)]):c},[])},CD=function(r,s,n,a){var i=a||{x:r.chartX,y:r.chartY},l=E4e(i,n),o=r.orderedTooltipTicks,c=r.tooltipAxis,d=r.tooltipTicks,u=e1e(l,o,d,c);if(u>=0&&d){var m=d[u]&&d[u].value,h=BS(r,s,u,m),g=D4e(n,o,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:h,activeCoordinate:g}}return null},M4e=function(r,s){var n=s.axes,a=s.graphicalItems,i=s.axisType,l=s.axisIdKey,o=s.stackGroups,c=s.dataStartIndex,d=s.dataEndIndex,u=r.layout,m=r.children,h=r.stackOffset,g=Ez(u,i);return n.reduce(function(x,p){var y,v=p.type.defaultProps!==void 0?_e(_e({},p.type.defaultProps),p.props):p.props,f=v.type,b=v.dataKey,N=v.allowDataOverflow,w=v.allowDuplicatedCategory,C=v.scale,P=v.ticks,S=v.includeHidden,A=v[l];if(x[A])return x;var k=wb(r.data,{graphicalItems:a.filter(function(J){var Re,Ee=l in J.props?J.props[l]:(Re=J.type.defaultProps)===null||Re===void 0?void 0:Re[l];return Ee===A}),dataStartIndex:c,dataEndIndex:d}),D=k.length,q,z,I;i4e(v.domain,N,f)&&(q=eS(v.domain,null,N),g&&(f==="number"||C!=="auto")&&(I=Wh(k,b,"category")));var F=J9(f);if(!q||q.length===0){var W,X=(W=v.domain)!==null&&W!==void 0?W:F;if(b){if(q=Wh(k,b,f),f==="category"&&g){var K=qce(q);w&&K?(z=q,q=xy(0,D)):w||(q=WO(X,q,p).reduce(function(J,Re){return J.indexOf(Re)>=0?J:[].concat(om(J),[Re])},[]))}else if(f==="category")w?q=q.filter(function(J){return J!==""&&!Vt(J)}):q=WO(X,q,p).reduce(function(J,Re){return J.indexOf(Re)>=0||Re===""||Vt(Re)?J:[].concat(om(J),[Re])},[]);else if(f==="number"){var Z=a1e(k,a.filter(function(J){var Re,Ee,ut=l in J.props?J.props[l]:(Re=J.type.defaultProps)===null||Re===void 0?void 0:Re[l],ce="hide"in J.props?J.props.hide:(Ee=J.type.defaultProps)===null||Ee===void 0?void 0:Ee.hide;return ut===A&&(S||!ce)}),b,i,u);Z&&(q=Z)}g&&(f==="number"||C!=="auto")&&(I=Wh(k,b,"category"))}else g?q=xy(0,D):o&&o[A]&&o[A].hasStack&&f==="number"?q=h==="expand"?[0,1]:Fz(o[A].stackGroups,c,d):q=Oz(k,a.filter(function(J){var Re=l in J.props?J.props[l]:J.type.defaultProps[l],Ee="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return Re===A&&(S||!Ee)}),f,u,!0);if(f==="number")q=FS(m,q,A,i,P),X&&(q=eS(X,q,N));else if(f==="category"&&X){var ue=X,Ne=q.every(function(J){return ue.indexOf(J)>=0});Ne&&(q=ue)}}return _e(_e({},x),{},At({},A,_e(_e({},v),{},{axisType:i,domain:q,categoricalDomain:I,duplicateDomain:z,originalDomain:(y=v.domain)!==null&&y!==void 0?y:F,isCategorical:g,layout:u})))},{})},I4e=function(r,s){var n=s.graphicalItems,a=s.Axis,i=s.axisType,l=s.axisIdKey,o=s.stackGroups,c=s.dataStartIndex,d=s.dataEndIndex,u=r.layout,m=r.children,h=wb(r.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),g=h.length,x=Ez(u,i),p=-1;return n.reduce(function(y,v){var f=v.type.defaultProps!==void 0?_e(_e({},v.type.defaultProps),v.props):v.props,b=f[l],N=J9("number");if(!y[b]){p++;var w;return x?w=xy(0,g):o&&o[b]&&o[b].hasStack?(w=Fz(o[b].stackGroups,c,d),w=FS(m,w,b,i)):(w=eS(N,Oz(h,n.filter(function(C){var P,S,A=l in C.props?C.props[l]:(P=C.type.defaultProps)===null||P===void 0?void 0:P[l],k="hide"in C.props?C.props.hide:(S=C.type.defaultProps)===null||S===void 0?void 0:S.hide;return A===b&&!k}),"number",u),a.defaultProps.allowDataOverflow),w=FS(m,w,b,i)),_e(_e({},y),{},At({},b,_e(_e({axisType:i},a.defaultProps),{},{hide:!0,orientation:ma(T4e,"".concat(i,".").concat(p%2),null),domain:w,originalDomain:N,isCategorical:x,layout:u})))}return y},{})},R4e=function(r,s){var n=s.axisType,a=n===void 0?"xAxis":n,i=s.AxisComp,l=s.graphicalItems,o=s.stackGroups,c=s.dataStartIndex,d=s.dataEndIndex,u=r.children,m="".concat(a,"Id"),h=ha(u,i),g={};return h&&h.length?g=M4e(r,{axes:h,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d}):l&&l.length&&(g=I4e(r,{Axis:i,graphicalItems:l,axisType:a,axisIdKey:m,stackGroups:o,dataStartIndex:c,dataEndIndex:d})),g},F4e=function(r){var s=eo(r),n=fl(s,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:wP(n,function(a){return a.coordinate}),tooltipAxis:s,tooltipAxisBandSize:sy(s,n)}},PD=function(r){var s=r.children,n=r.defaultShowTooltip,a=Zn(s,Zu),i=0,l=0;return r.data&&r.data.length!==0&&(l=r.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(l=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!n}},$4e=function(r){return!r||!r.length?!1:r.some(function(s){var n=gl(s&&s.type);return n&&n.indexOf("Bar")>=0})},kD=function(r){return r==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:r==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:r==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},L4e=function(r,s){var n=r.props,a=r.graphicalItems,i=r.xAxisMap,l=i===void 0?{}:i,o=r.yAxisMap,c=o===void 0?{}:o,d=n.width,u=n.height,m=n.children,h=n.margin||{},g=Zn(m,Zu),x=Zn(m,vl),p=Object.keys(c).reduce(function(w,C){var P=c[C],S=P.orientation;return!P.mirror&&!P.hide?_e(_e({},w),{},At({},S,w[S]+P.width)):w},{left:h.left||0,right:h.right||0}),y=Object.keys(l).reduce(function(w,C){var P=l[C],S=P.orientation;return!P.mirror&&!P.hide?_e(_e({},w),{},At({},S,ma(w,"".concat(S))+P.height)):w},{top:h.top||0,bottom:h.bottom||0}),v=_e(_e({},y),p),f=v.bottom;g&&(v.bottom+=g.props.height||Zu.defaultProps.height),x&&s&&(v=s1e(v,a,n,s));var b=d-v.left-v.right,N=u-v.top-v.bottom;return _e(_e({brushBottom:f},v),{},{width:Math.max(b,0),height:Math.max(N,0)})},B4e=function(r,s){if(s==="xAxis")return r[s].width;if(s==="yAxis")return r[s].height},ik=function(r){var s=r.chartName,n=r.GraphicalChild,a=r.defaultTooltipEventType,i=a===void 0?"axis":a,l=r.validateTooltipEventTypes,o=l===void 0?["axis"]:l,c=r.axisComponents,d=r.legendContent,u=r.formatAxisMap,m=r.defaultProps,h=function(v,f){var b=f.graphicalItems,N=f.stackGroups,w=f.offset,C=f.updateId,P=f.dataStartIndex,S=f.dataEndIndex,A=v.barSize,k=v.layout,D=v.barGap,q=v.barCategoryGap,z=v.maxBarSize,I=kD(k),F=I.numericAxisName,W=I.cateAxisName,X=$4e(b),K=[];return b.forEach(function(Z,ue){var Ne=wb(v.data,{graphicalItems:[Z],dataStartIndex:P,dataEndIndex:S}),J=Z.type.defaultProps!==void 0?_e(_e({},Z.type.defaultProps),Z.props):Z.props,Re=J.dataKey,Ee=J.maxBarSize,ut=J["".concat(F,"Id")],ce=J["".concat(W,"Id")],ke={},Be=c.reduce(function(me,Ce){var te=f["".concat(Ce.axisType,"Map")],Oe=J["".concat(Ce.axisType,"Id")];te&&te[Oe]||Ce.axisType==="zAxis"||Yc();var Ie=te[Oe];return _e(_e({},me),{},At(At({},Ce.axisType,Ie),"".concat(Ce.axisType,"Ticks"),fl(Ie)))},ke),Me=Be[W],He=Be["".concat(W,"Ticks")],Xe=N&&N[ut]&&N[ut].hasStack&&p1e(Z,N[ut].stackGroups),we=gl(Z.type).indexOf("Bar")>=0,Bt=sy(Me,He),jt=[],or=X&&t1e({barSize:A,stackGroups:N,totalSize:B4e(Be,W)});if(we){var ir,Nr,Jr=Vt(Ee)?z:Ee,Ge=(ir=(Nr=sy(Me,He,!0))!==null&&Nr!==void 0?Nr:Jr)!==null&&ir!==void 0?ir:0;jt=r1e({barGap:D,barCategoryGap:q,bandSize:Ge!==Bt?Ge:Bt,sizeList:or[ce],maxBarSize:Jr}),Ge!==Bt&&(jt=jt.map(function(me){return _e(_e({},me),{},{position:_e(_e({},me.position),{},{offset:me.position.offset-Ge/2})})}))}var ee=Z&&Z.type&&Z.type.getComposedData;ee&&K.push({props:_e(_e({},ee(_e(_e({},Be),{},{displayedData:Ne,props:v,dataKey:Re,item:Z,bandSize:Bt,barPosition:jt,offset:w,stackedData:Xe,layout:k,dataStartIndex:P,dataEndIndex:S}))),{},At(At(At({key:Z.key||"item-".concat(ue)},F,Be[F]),W,Be[W]),"animationId",C)),childIndex:rde(Z,v.children),item:Z})}),K},g=function(v,f){var b=v.props,N=v.dataStartIndex,w=v.dataEndIndex,C=v.updateId;if(!BT({props:b}))return null;var P=b.children,S=b.layout,A=b.stackOffset,k=b.data,D=b.reverseStackOrder,q=kD(S),z=q.numericAxisName,I=q.cateAxisName,F=ha(P,n),W=m1e(k,F,"".concat(z,"Id"),"".concat(I,"Id"),A,D),X=c.reduce(function(J,Re){var Ee="".concat(Re.axisType,"Map");return _e(_e({},J),{},At({},Ee,R4e(b,_e(_e({},Re),{},{graphicalItems:F,stackGroups:Re.axisType===z&&W,dataStartIndex:N,dataEndIndex:w}))))},{}),K=L4e(_e(_e({},X),{},{props:b,graphicalItems:F}),f==null?void 0:f.legendBBox);Object.keys(X).forEach(function(J){X[J]=u(b,X[J],K,J.replace("Map",""),s)});var Z=X["".concat(I,"Map")],ue=F4e(Z),Ne=h(b,_e(_e({},X),{},{dataStartIndex:N,dataEndIndex:w,updateId:C,graphicalItems:F,stackGroups:W,offset:K}));return _e(_e({formattedGraphicalItems:Ne,graphicalItems:F,offset:K,stackGroups:W},ue),X)},x=function(y){function v(f){var b,N,w;return y4e(this,v),w=N4e(this,v,[f]),At(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),At(w,"accessibilityManager",new a4e),At(w,"handleLegendBBoxUpdate",function(C){if(C){var P=w.state,S=P.dataStartIndex,A=P.dataEndIndex,k=P.updateId;w.setState(_e({legendBBox:C},g({props:w.props,dataStartIndex:S,dataEndIndex:A,updateId:k},_e(_e({},w.state),{},{legendBBox:C}))))}}),At(w,"handleReceiveSyncEvent",function(C,P,S){if(w.props.syncId===C){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(P)}}),At(w,"handleBrushChange",function(C){var P=C.startIndex,S=C.endIndex;if(P!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return _e({dataStartIndex:P,dataEndIndex:S},g({props:w.props,dataStartIndex:P,dataEndIndex:S,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:P,dataEndIndex:S})}}),At(w,"handleMouseEnter",function(C){var P=w.getMouseInfo(C);if(P){var S=_e(_e({},P),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var A=w.props.onMouseEnter;Lt(A)&&A(S,C)}}),At(w,"triggeredAfterMouseMove",function(C){var P=w.getMouseInfo(C),S=P?_e(_e({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var A=w.props.onMouseMove;Lt(A)&&A(S,C)}),At(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),At(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),At(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),At(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};w.setState(P),w.triggerSyncEvent(P);var S=w.props.onMouseLeave;Lt(S)&&S(P,C)}),At(w,"handleOuterEvent",function(C){var P=tde(C),S=ma(w.props,"".concat(P));if(P&&Lt(S)){var A,k;/.*touch.*/i.test(P)?k=w.getMouseInfo(C.changedTouches[0]):k=w.getMouseInfo(C),S((A=k)!==null&&A!==void 0?A:{},C)}}),At(w,"handleClick",function(C){var P=w.getMouseInfo(C);if(P){var S=_e(_e({},P),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var A=w.props.onClick;Lt(A)&&A(S,C)}}),At(w,"handleMouseDown",function(C){var P=w.props.onMouseDown;if(Lt(P)){var S=w.getMouseInfo(C);P(S,C)}}),At(w,"handleMouseUp",function(C){var P=w.props.onMouseUp;if(Lt(P)){var S=w.getMouseInfo(C);P(S,C)}}),At(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),At(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),At(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),At(w,"handleDoubleClick",function(C){var P=w.props.onDoubleClick;if(Lt(P)){var S=w.getMouseInfo(C);P(S,C)}}),At(w,"handleContextMenu",function(C){var P=w.props.onContextMenu;if(Lt(P)){var S=w.getMouseInfo(C);P(S,C)}}),At(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&hN.emit(pN,w.props.syncId,C,w.eventEmitterSymbol)}),At(w,"applySyncEvent",function(C){var P=w.props,S=P.layout,A=P.syncMethod,k=w.state.updateId,D=C.dataStartIndex,q=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(_e({dataStartIndex:D,dataEndIndex:q},g({props:w.props,dataStartIndex:D,dataEndIndex:q,updateId:k},w.state)));else if(C.activeTooltipIndex!==void 0){var z=C.chartX,I=C.chartY,F=C.activeTooltipIndex,W=w.state,X=W.offset,K=W.tooltipTicks;if(!X)return;if(typeof A=="function")F=A(K,C);else if(A==="value"){F=-1;for(var Z=0;Z<K.length;Z++)if(K[Z].value===C.activeLabel){F=Z;break}}var ue=_e(_e({},X),{},{x:X.left,y:X.top}),Ne=Math.min(z,ue.x+ue.width),J=Math.min(I,ue.y+ue.height),Re=K[F]&&K[F].value,Ee=BS(w.state,w.props.data,F),ut=K[F]?{x:S==="horizontal"?K[F].coordinate:Ne,y:S==="horizontal"?J:K[F].coordinate}:Z9;w.setState(_e(_e({},C),{},{activeLabel:Re,activeCoordinate:ut,activePayload:Ee,activeTooltipIndex:F}))}else w.setState(C)}),At(w,"renderCursor",function(C){var P,S=w.state,A=S.isTooltipActive,k=S.activeCoordinate,D=S.activePayload,q=S.offset,z=S.activeTooltipIndex,I=S.tooltipAxisBandSize,F=w.getTooltipEventType(),W=(P=C.props.active)!==null&&P!==void 0?P:A,X=w.props.layout,K=C.key||"_recharts-cursor";return Q.createElement(m4e,{key:K,activeCoordinate:k,activePayload:D,activeTooltipIndex:z,chartName:s,element:C,isActive:W,layout:X,offset:q,tooltipAxisBandSize:I,tooltipEventType:F})}),At(w,"renderPolarAxis",function(C,P,S){var A=ma(C,"type.axisType"),k=ma(w.state,"".concat(A,"Map")),D=C.type.defaultProps,q=D!==void 0?_e(_e({},D),C.props):C.props,z=k&&k[q["".concat(A,"Id")]];return j.cloneElement(C,_e(_e({},z),{},{className:Ut(A,z.className),key:C.key||"".concat(P,"-").concat(S),ticks:fl(z,!0)}))}),At(w,"renderPolarGrid",function(C){var P=C.props,S=P.radialLines,A=P.polarAngles,k=P.polarRadius,D=w.state,q=D.radiusAxisMap,z=D.angleAxisMap,I=eo(q),F=eo(z),W=F.cx,X=F.cy,K=F.innerRadius,Z=F.outerRadius;return j.cloneElement(C,{polarAngles:Array.isArray(A)?A:fl(F,!0).map(function(ue){return ue.coordinate}),polarRadius:Array.isArray(k)?k:fl(I,!0).map(function(ue){return ue.coordinate}),cx:W,cy:X,innerRadius:K,outerRadius:Z,key:C.key||"polar-grid",radialLines:S})}),At(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,P=w.props,S=P.children,A=P.width,k=P.height,D=w.props.margin||{},q=A-(D.left||0)-(D.right||0),z=_z({children:S,formattedGraphicalItems:C,legendWidth:q,legendContent:d});if(!z)return null;var I=z.item,F=wD(z,h4e);return j.cloneElement(I,_e(_e({},F),{},{chartWidth:A,chartHeight:k,margin:D,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),At(w,"renderTooltip",function(){var C,P=w.props,S=P.children,A=P.accessibilityLayer,k=Zn(S,ea);if(!k)return null;var D=w.state,q=D.isTooltipActive,z=D.activeCoordinate,I=D.activePayload,F=D.activeLabel,W=D.offset,X=(C=k.props.active)!==null&&C!==void 0?C:q;return j.cloneElement(k,{viewBox:_e(_e({},W),{},{x:W.left,y:W.top}),active:X,label:F,payload:X?I:[],coordinate:z,accessibilityLayer:A})}),At(w,"renderBrush",function(C){var P=w.props,S=P.margin,A=P.data,k=w.state,D=k.offset,q=k.dataStartIndex,z=k.dataEndIndex,I=k.updateId;return j.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Vx(w.handleBrushChange,C.props.onChange),data:A,x:Ye(C.props.x)?C.props.x:D.left,y:Ye(C.props.y)?C.props.y:D.top+D.height+D.brushBottom-(S.bottom||0),width:Ye(C.props.width)?C.props.width:D.width,startIndex:q,endIndex:z,updateId:"brush-".concat(I)})}),At(w,"renderReferenceElement",function(C,P,S){if(!C)return null;var A=w,k=A.clipPathId,D=w.state,q=D.xAxisMap,z=D.yAxisMap,I=D.offset,F=C.type.defaultProps||{},W=C.props,X=W.xAxisId,K=X===void 0?F.xAxisId:X,Z=W.yAxisId,ue=Z===void 0?F.yAxisId:Z;return j.cloneElement(C,{key:C.key||"".concat(P,"-").concat(S),xAxis:q[K],yAxis:z[ue],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:k})}),At(w,"renderActivePoints",function(C){var P=C.item,S=C.activePoint,A=C.basePoint,k=C.childIndex,D=C.isRange,q=[],z=P.props.key,I=P.item.type.defaultProps!==void 0?_e(_e({},P.item.type.defaultProps),P.item.props):P.item.props,F=I.activeDot,W=I.dataKey,X=_e(_e({index:k,dataKey:W,cx:S.x,cy:S.y,r:4,fill:YP(P.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},St(F,!1)),_v(F));return q.push(v.renderActiveDot(F,X,"".concat(z,"-activePoint-").concat(k))),A?q.push(v.renderActiveDot(F,_e(_e({},X),{},{cx:A.x,cy:A.y}),"".concat(z,"-basePoint-").concat(k))):D&&q.push(null),q}),At(w,"renderGraphicChild",function(C,P,S){var A=w.filterFormatItem(C,P,S);if(!A)return null;var k=w.getTooltipEventType(),D=w.state,q=D.isTooltipActive,z=D.tooltipAxis,I=D.activeTooltipIndex,F=D.activeLabel,W=w.props.children,X=Zn(W,ea),K=A.props,Z=K.points,ue=K.isRange,Ne=K.baseLine,J=A.item.type.defaultProps!==void 0?_e(_e({},A.item.type.defaultProps),A.item.props):A.item.props,Re=J.activeDot,Ee=J.hide,ut=J.activeBar,ce=J.activeShape,ke=!!(!Ee&&q&&X&&(Re||ut||ce)),Be={};k!=="axis"&&X&&X.props.trigger==="click"?Be={onClick:Vx(w.handleItemMouseEnter,C.props.onClick)}:k!=="axis"&&(Be={onMouseLeave:Vx(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Vx(w.handleItemMouseEnter,C.props.onMouseEnter)});var Me=j.cloneElement(C,_e(_e({},A.props),Be));function He(Ce){return typeof z.dataKey=="function"?z.dataKey(Ce.payload):null}if(ke)if(I>=0){var Xe,we;if(z.dataKey&&!z.allowDuplicatedCategory){var Bt=typeof z.dataKey=="function"?He:"payload.".concat(z.dataKey.toString());Xe=Av(Z,Bt,F),we=ue&&Ne&&Av(Ne,Bt,F)}else Xe=Z==null?void 0:Z[I],we=ue&&Ne&&Ne[I];if(ce||ut){var jt=C.props.activeIndex!==void 0?C.props.activeIndex:I;return[j.cloneElement(C,_e(_e(_e({},A.props),Be),{},{activeIndex:jt})),null,null]}if(!Vt(Xe))return[Me].concat(om(w.renderActivePoints({item:A,activePoint:Xe,basePoint:we,childIndex:I,isRange:ue})))}else{var or,ir=(or=w.getItemByXY(w.state.activeCoordinate))!==null&&or!==void 0?or:{graphicalItem:Me},Nr=ir.graphicalItem,Jr=Nr.item,Ge=Jr===void 0?C:Jr,ee=Nr.childIndex,me=_e(_e(_e({},A.props),Be),{},{activeIndex:ee});return[j.cloneElement(Ge,me),null,null]}return ue?[Me,null,null]:[Me,null]}),At(w,"renderCustomized",function(C,P,S){return j.cloneElement(C,_e(_e({key:"recharts-customized-".concat(S)},w.props),w.state))}),At(w,"renderMap",{CartesianGrid:{handler:Hx,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Hx},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Hx},YAxis:{handler:Hx},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=f.id)!==null&&b!==void 0?b:Im("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Aq(w.triggeredAfterMouseMove,(N=f.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return C4e(v,y),b4e(v,[{key:"componentDidMount",value:function(){var b,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,N=b.children,w=b.data,C=b.height,P=b.layout,S=Zn(N,ea);if(S){var A=S.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,D=BS(this.state,w,A,k),q=this.state.tooltipTicks[A].coordinate,z=(this.state.offset.top+C)/2,I=P==="horizontal",F=I?{x:q,y:z}:{y:q,x:z},W=this.state.formattedGraphicalItems.find(function(K){var Z=K.item;return Z.type.name==="Scatter"});W&&(F=_e(_e({},F),W.props.points[A].tooltipPosition),D=W.props.points[A].tooltipPayload);var X={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:k,activePayload:D,activeCoordinate:F};this.setState(X),this.renderCursor(S),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(b){f1([Zn(b.children,ea)],[Zn(this.props.children,ea)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Zn(this.props.children,ea);if(b&&typeof b.props.shared=="boolean"){var N=b.props.shared?"axis":"item";return o.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),C=Aje(w),P={chartX:Math.round(b.pageX-C.left),chartY:Math.round(b.pageY-C.top)},S=w.width/N.offsetWidth||1,A=this.inRange(P.chartX,P.chartY,S);if(!A)return null;var k=this.state,D=k.xAxisMap,q=k.yAxisMap,z=this.getTooltipEventType(),I=CD(this.state,this.props.data,this.props.layout,A);if(z!=="axis"&&D&&q){var F=eo(D).scale,W=eo(q).scale,X=F&&F.invert?F.invert(P.chartX):null,K=W&&W.invert?W.invert(P.chartY):null;return _e(_e({},P),{},{xValue:X,yValue:K},I)}return I?_e(_e({},P),I):null}},{key:"inRange",value:function(b,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,P=b/w,S=N/w;if(C==="horizontal"||C==="vertical"){var A=this.state.offset,k=P>=A.left&&P<=A.left+A.width&&S>=A.top&&S<=A.top+A.height;return k?{x:P,y:S}:null}var D=this.state,q=D.angleAxisMap,z=D.radiusAxisMap;if(q&&z){var I=eo(q);return QO({x:P,y:S},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,N=this.getTooltipEventType(),w=Zn(b,ea),C={};w&&N==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=_v(this.props,this.handleOuterEvent);return _e(_e({},P),C)}},{key:"addListener",value:function(){hN.on(pN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){hN.removeListener(pN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,N,w){for(var C=this.state.formattedGraphicalItems,P=0,S=C.length;P<S;P++){var A=C[P];if(A.item===b||A.props.key===b.key||N===gl(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,N=this.state.offset,w=N.left,C=N.top,P=N.height,S=N.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:b},Q.createElement("rect",{x:w,y:C,height:P,width:S})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(N,w){var C=ND(w,2),P=C[0],S=C[1];return _e(_e({},N),{},At({},P,S.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(N,w){var C=ND(w,2),P=C[0],S=C[1];return _e(_e({},N),{},At({},P,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(b){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(b){var N=this.state,w=N.formattedGraphicalItems,C=N.activeItem;if(w&&w.length)for(var P=0,S=w.length;P<S;P++){var A=w[P],k=A.props,D=A.item,q=D.type.defaultProps!==void 0?_e(_e({},D.type.defaultProps),D.props):D.props,z=gl(D.type);if(z==="Bar"){var I=(k.data||[]).find(function(K){return dCe(b,K)});if(I)return{graphicalItem:A,payload:I}}else if(z==="RadialBar"){var F=(k.data||[]).find(function(K){return QO(b,K)});if(F)return{graphicalItem:A,payload:F}}else if(xb(A,C)||gb(A,C)||cf(A,C)){var W=ZPe({graphicalItem:A,activeTooltipItem:C,itemData:q.data}),X=q.activeIndex===void 0?W:q.activeIndex;return{graphicalItem:_e(_e({},A),{},{childIndex:X}),payload:cf(A,C)?q.data[W]:A.props.data[W]}}}return null}},{key:"render",value:function(){var b=this;if(!BT(this))return null;var N=this.props,w=N.children,C=N.className,P=N.width,S=N.height,A=N.style,k=N.compact,D=N.title,q=N.desc,z=wD(N,p4e),I=St(z,!1);if(k)return Q.createElement(nD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(g1,Wd({},I,{width:P,height:S,title:D,desc:q}),this.renderClipPath(),UT(w,this.renderMap)));if(this.props.accessibilityLayer){var F,W;I.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,I.role=(W=this.props.role)!==null&&W!==void 0?W:"application",I.onKeyDown=function(K){b.accessibilityManager.keyboardEvent(K)},I.onFocus=function(){b.accessibilityManager.focus()}}var X=this.parseEventsOfWrapper();return Q.createElement(nD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",Wd({className:Ut("recharts-wrapper",C),style:_e({position:"relative",cursor:"default",width:P,height:S},A)},X,{ref:function(Z){b.container=Z}}),Q.createElement(g1,Wd({},I,{width:P,height:S,title:D,desc:q,style:O4e}),this.renderClipPath(),UT(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);At(x,"displayName",s),At(x,"defaultProps",_e({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),At(x,"getDerivedStateFromProps",function(y,v){var f=y.dataKey,b=y.data,N=y.children,w=y.width,C=y.height,P=y.layout,S=y.stackOffset,A=y.margin,k=v.dataStartIndex,D=v.dataEndIndex;if(v.updateId===void 0){var q=PD(y);return _e(_e(_e({},q),{},{updateId:0},g(_e(_e({props:y},q),{},{updateId:0}),v)),{},{prevDataKey:f,prevData:b,prevWidth:w,prevHeight:C,prevLayout:P,prevStackOffset:S,prevMargin:A,prevChildren:N})}if(f!==v.prevDataKey||b!==v.prevData||w!==v.prevWidth||C!==v.prevHeight||P!==v.prevLayout||S!==v.prevStackOffset||!iu(A,v.prevMargin)){var z=PD(y),I={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},F=_e(_e({},CD(v,b,P)),{},{updateId:v.updateId+1}),W=_e(_e(_e({},z),I),F);return _e(_e(_e({},W),g(_e({props:y},W),v)),{},{prevDataKey:f,prevData:b,prevWidth:w,prevHeight:C,prevLayout:P,prevStackOffset:S,prevMargin:A,prevChildren:N})}if(!f1(N,v.prevChildren)){var X,K,Z,ue,Ne=Zn(N,Zu),J=Ne&&(X=(K=Ne.props)===null||K===void 0?void 0:K.startIndex)!==null&&X!==void 0?X:k,Re=Ne&&(Z=(ue=Ne.props)===null||ue===void 0?void 0:ue.endIndex)!==null&&Z!==void 0?Z:D,Ee=J!==k||Re!==D,ut=!Vt(b),ce=ut&&!Ee?v.updateId:v.updateId+1;return _e(_e({updateId:ce},g(_e(_e({props:y},v),{},{updateId:ce,dataStartIndex:J,dataEndIndex:Re}),v)),{},{prevChildren:N,dataStartIndex:J,dataEndIndex:Re})}return null}),At(x,"renderActiveDot",function(y,v,f){var b;return j.isValidElement(y)?b=j.cloneElement(y,v):Lt(y)?b=y(v):b=Q.createElement(ub,v),Q.createElement(hr,{className:"recharts-active-dot",key:f},b)});var p=j.forwardRef(function(v,f){return Q.createElement(x,Wd({},v,{ref:f}))});return p.displayName=x.displayName,p},e7=ik({chartName:"LineChart",GraphicalChild:Fo,axisComponents:[{axisType:"xAxis",AxisComp:Xc},{axisType:"yAxis",AxisComp:$o}],formatAxisMap:v9}),V4e=ik({chartName:"BarChart",GraphicalChild:Ro,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Xc},{axisType:"yAxis",AxisComp:$o}],formatAxisMap:v9}),U4e=ik({chartName:"PieChart",GraphicalChild:$l,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:fb},{axisType:"radiusAxis",AxisComp:hb}],formatAxisMap:S1e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Rt(t){const r=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&r==="[object Date]"?new t.constructor(+t):typeof t=="number"||r==="[object Number]"||typeof t=="string"||r==="[object String]"?new Date(t):new Date(NaN)}function Wn(t,r){return t instanceof Date?new t.constructor(r):new Date(r)}function yn(t,r){const s=Rt(t);return isNaN(r)?Wn(t,NaN):(r&&s.setDate(s.getDate()+r),s)}function pi(t,r){const s=Rt(t);if(isNaN(r))return Wn(t,NaN);if(!r)return s;const n=s.getDate(),a=Wn(t,s.getTime());a.setMonth(s.getMonth()+r+1,0);const i=a.getDate();return n>=i?a:(s.setFullYear(a.getFullYear(),a.getMonth(),n),s)}const lk=6048e5,q4e=864e5,t7=6e4,r7=36e5,Wx=43200,AD=1440;let z4e={};function qm(){return z4e}function Hi(t,r){var o,c,d,u;const s=qm(),n=(r==null?void 0:r.weekStartsOn)??((c=(o=r==null?void 0:r.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Rt(t),i=a.getDay(),l=(i<n?7:0)+i-n;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function Zc(t){return Hi(t,{weekStartsOn:1})}function s7(t){const r=Rt(t),s=r.getFullYear(),n=Wn(t,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const a=Zc(n),i=Wn(t,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const l=Zc(i);return r.getTime()>=a.getTime()?s+1:r.getTime()>=l.getTime()?s:s-1}function cm(t){const r=Rt(t);return r.setHours(0,0,0,0),r}function dm(t){const r=Rt(t),s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),+t-+s}function si(t,r){const s=cm(t),n=cm(r),a=+s-dm(s),i=+n-dm(n);return Math.round((a-i)/q4e)}function K4e(t){const r=s7(t),s=Wn(t,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Zc(s)}function VS(t,r){const s=r*7;return yn(t,s)}function H4e(t,r){return pi(t,r*12)}function W4e(t){let r;return t.forEach(function(s){const n=Rt(s);(r===void 0||r<n||isNaN(Number(n)))&&(r=n)}),r||new Date(NaN)}function G4e(t){let r;return t.forEach(s=>{const n=Rt(s);(!r||r>n||isNaN(+n))&&(r=n)}),r||new Date(NaN)}function Sg(t,r){const s=Rt(t),n=Rt(r),a=s.getTime()-n.getTime();return a<0?-1:a>0?1:a}function Y4e(t){return Wn(t,Date.now())}function Bn(t,r){const s=cm(t),n=cm(r);return+s==+n}function ok(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function US(t){if(!ok(t)&&typeof t!="number")return!1;const r=Rt(t);return!isNaN(Number(r))}function um(t,r){const s=Rt(t),n=Rt(r),a=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return a*12+i}function Q4e(t,r,s){const n=Hi(t,s),a=Hi(r,s),i=+n-dm(n),l=+a-dm(a);return Math.round((i-l)/lk)}function _D(t,r){const s=Rt(t),n=Rt(r),a=TD(s,n),i=Math.abs(si(s,n));s.setDate(s.getDate()-a*i);const l=+(TD(s,n)===-a),o=a*(i-l);return o===0?0:o}function TD(t,r){const s=t.getFullYear()-r.getFullYear()||t.getMonth()-r.getMonth()||t.getDate()-r.getDate()||t.getHours()-r.getHours()||t.getMinutes()-r.getMinutes()||t.getSeconds()-r.getSeconds()||t.getMilliseconds()-r.getMilliseconds();return s<0?-1:s>0?1:s}function X4e(t){return r=>{const n=(t?Math[t]:Math.trunc)(r);return n===0?0:n}}function Z4e(t,r){return+Rt(t)-+Rt(r)}function J4e(t){const r=Rt(t);return r.setHours(23,59,59,999),r}function Sb(t){const r=Rt(t),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(23,59,59,999),r}function eOe(t){const r=Rt(t);return+J4e(r)==+Sb(r)}function tOe(t,r){const s=Rt(t),n=Rt(r),a=Sg(s,n),i=Math.abs(um(s,n));let l;if(i<1)l=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*i);let o=Sg(s,n)===-a;eOe(Rt(t))&&i===1&&Sg(t,n)===1&&(o=!1),l=a*(i-Number(o))}return l===0?0:l}function rOe(t,r,s){const n=Z4e(t,r)/1e3;return X4e(s==null?void 0:s.roundingMethod)(n)}function Kn(t){const r=Rt(t);return r.setDate(1),r.setHours(0,0,0,0),r}function n7(t){const r=Rt(t),s=Wn(t,0);return s.setFullYear(r.getFullYear(),0,1),s.setHours(0,0,0,0),s}function ck(t,r){var o,c,d,u;const s=qm(),n=(r==null?void 0:r.weekStartsOn)??((c=(o=r==null?void 0:r.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??s.weekStartsOn??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Rt(t),i=a.getDay(),l=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+l),a.setHours(23,59,59,999),a}function a7(t){return ck(t,{weekStartsOn:1})}const sOe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nOe=(t,r,s)=>{let n;const a=sOe[t];return typeof a=="string"?n=a:r===1?n=a.one:n=a.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function xN(t){return(r={})=>{const s=r.width?String(r.width):t.defaultWidth;return t.formats[s]||t.formats[t.defaultWidth]}}const aOe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iOe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},lOe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oOe={date:xN({formats:aOe,defaultWidth:"full"}),time:xN({formats:iOe,defaultWidth:"full"}),dateTime:xN({formats:lOe,defaultWidth:"full"})},cOe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dOe=(t,r,s,n)=>cOe[t];function ph(t){return(r,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,o=s!=null&&s.width?String(s.width):l;a=t.formattingValues[o]||t.formattingValues[l]}else{const l=t.defaultWidth,o=s!=null&&s.width?String(s.width):t.defaultWidth;a=t.values[o]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(r):r;return a[i]}}const uOe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mOe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hOe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pOe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xOe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gOe=(t,r)=>{const s=Number(t),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},vOe={ordinalNumber:gOe,era:ph({values:uOe,defaultWidth:"wide"}),quarter:ph({values:mOe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ph({values:hOe,defaultWidth:"wide"}),day:ph({values:pOe,defaultWidth:"wide"}),dayPeriod:ph({values:fOe,defaultWidth:"wide",formattingValues:xOe,defaultFormattingWidth:"wide"})};function fh(t){return(r,s={})=>{const n=s.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=r.match(a);if(!i)return null;const l=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?jOe(o,m=>m.test(l)):yOe(o,m=>m.test(l));let d;d=t.valueCallback?t.valueCallback(c):c,d=s.valueCallback?s.valueCallback(d):d;const u=r.slice(l.length);return{value:d,rest:u}}}function yOe(t,r){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&r(t[s]))return s}function jOe(t,r){for(let s=0;s<t.length;s++)if(r(t[s]))return s}function bOe(t){return(r,s={})=>{const n=r.match(t.matchPattern);if(!n)return null;const a=n[0],i=r.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=s.valueCallback?s.valueCallback(l):l;const o=r.slice(a.length);return{value:l,rest:o}}}const NOe=/^(\d+)(th|st|nd|rd)?/i,wOe=/\d+/i,SOe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},COe={any:[/^b/i,/^(a|c)/i]},POe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kOe={any:[/1/i,/2/i,/3/i,/4/i]},AOe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_Oe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TOe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OOe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},EOe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DOe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},MOe={ordinalNumber:bOe({matchPattern:NOe,parsePattern:wOe,valueCallback:t=>parseInt(t,10)}),era:fh({matchPatterns:SOe,defaultMatchWidth:"wide",parsePatterns:COe,defaultParseWidth:"any"}),quarter:fh({matchPatterns:POe,defaultMatchWidth:"wide",parsePatterns:kOe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fh({matchPatterns:AOe,defaultMatchWidth:"wide",parsePatterns:_Oe,defaultParseWidth:"any"}),day:fh({matchPatterns:TOe,defaultMatchWidth:"wide",parsePatterns:OOe,defaultParseWidth:"any"}),dayPeriod:fh({matchPatterns:EOe,defaultMatchWidth:"any",parsePatterns:DOe,defaultParseWidth:"any"})},dk={code:"en-US",formatDistance:nOe,formatLong:oOe,formatRelative:dOe,localize:vOe,match:MOe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IOe(t){const r=Rt(t);return si(r,n7(r))+1}function i7(t){const r=Rt(t),s=+Zc(r)-+K4e(r);return Math.round(s/lk)+1}function l7(t,r){var u,m,h,g;const s=Rt(t),n=s.getFullYear(),a=qm(),i=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(h=a.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,l=Wn(t,0);l.setFullYear(n+1,0,i),l.setHours(0,0,0,0);const o=Hi(l,r),c=Wn(t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Hi(c,r);return s.getTime()>=o.getTime()?n+1:s.getTime()>=d.getTime()?n:n-1}function ROe(t,r){var o,c,d,u;const s=qm(),n=(r==null?void 0:r.firstWeekContainsDate)??((c=(o=r==null?void 0:r.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??s.firstWeekContainsDate??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=l7(t,r),i=Wn(t,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Hi(i,r)}function o7(t,r){const s=Rt(t),n=+Hi(s,r)-+ROe(s,r);return Math.round(n/lk)+1}function Cr(t,r){const s=t<0?"-":"",n=Math.abs(t).toString().padStart(r,"0");return s+n}const zl={y(t,r){const s=t.getFullYear(),n=s>0?s:1-s;return Cr(r==="yy"?n%100:n,r.length)},M(t,r){const s=t.getMonth();return r==="M"?String(s+1):Cr(s+1,2)},d(t,r){return Cr(t.getDate(),r.length)},a(t,r){const s=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(t,r){return Cr(t.getHours()%12||12,r.length)},H(t,r){return Cr(t.getHours(),r.length)},m(t,r){return Cr(t.getMinutes(),r.length)},s(t,r){return Cr(t.getSeconds(),r.length)},S(t,r){const s=r.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,s-3));return Cr(a,r.length)}},kd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},OD={G:function(t,r,s){const n=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(t,r,s){if(r==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return s.ordinalNumber(a,{unit:"year"})}return zl.y(t,r)},Y:function(t,r,s,n){const a=l7(t,n),i=a>0?a:1-a;if(r==="YY"){const l=i%100;return Cr(l,2)}return r==="Yo"?s.ordinalNumber(i,{unit:"year"}):Cr(i,r.length)},R:function(t,r){const s=s7(t);return Cr(s,r.length)},u:function(t,r){const s=t.getFullYear();return Cr(s,r.length)},Q:function(t,r,s){const n=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return Cr(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,r,s){const n=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return Cr(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,r,s){const n=t.getMonth();switch(r){case"M":case"MM":return zl.M(t,r);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(t,r,s){const n=t.getMonth();switch(r){case"L":return String(n+1);case"LL":return Cr(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(t,r,s,n){const a=o7(t,n);return r==="wo"?s.ordinalNumber(a,{unit:"week"}):Cr(a,r.length)},I:function(t,r,s){const n=i7(t);return r==="Io"?s.ordinalNumber(n,{unit:"week"}):Cr(n,r.length)},d:function(t,r,s){return r==="do"?s.ordinalNumber(t.getDate(),{unit:"date"}):zl.d(t,r)},D:function(t,r,s){const n=IOe(t);return r==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):Cr(n,r.length)},E:function(t,r,s){const n=t.getDay();switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(t,r,s,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(i);case"ee":return Cr(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,s,n){const a=t.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(i);case"cc":return Cr(i,r.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,s){const n=t.getDay(),a=n===0?7:n;switch(r){case"i":return String(a);case"ii":return Cr(a,r.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(t,r,s){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,s){const n=t.getHours();let a;switch(n===12?a=kd.noon:n===0?a=kd.midnight:a=n/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,s){const n=t.getHours();let a;switch(n>=17?a=kd.evening:n>=12?a=kd.afternoon:n>=4?a=kd.morning:a=kd.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,s){if(r==="ho"){let n=t.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return zl.h(t,r)},H:function(t,r,s){return r==="Ho"?s.ordinalNumber(t.getHours(),{unit:"hour"}):zl.H(t,r)},K:function(t,r,s){const n=t.getHours()%12;return r==="Ko"?s.ordinalNumber(n,{unit:"hour"}):Cr(n,r.length)},k:function(t,r,s){let n=t.getHours();return n===0&&(n=24),r==="ko"?s.ordinalNumber(n,{unit:"hour"}):Cr(n,r.length)},m:function(t,r,s){return r==="mo"?s.ordinalNumber(t.getMinutes(),{unit:"minute"}):zl.m(t,r)},s:function(t,r,s){return r==="so"?s.ordinalNumber(t.getSeconds(),{unit:"second"}):zl.s(t,r)},S:function(t,r){return zl.S(t,r)},X:function(t,r,s){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(r){case"X":return DD(n);case"XXXX":case"XX":return nc(n);case"XXXXX":case"XXX":default:return nc(n,":")}},x:function(t,r,s){const n=t.getTimezoneOffset();switch(r){case"x":return DD(n);case"xxxx":case"xx":return nc(n);case"xxxxx":case"xxx":default:return nc(n,":")}},O:function(t,r,s){const n=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+ED(n,":");case"OOOO":default:return"GMT"+nc(n,":")}},z:function(t,r,s){const n=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+ED(n,":");case"zzzz":default:return"GMT"+nc(n,":")}},t:function(t,r,s){const n=Math.trunc(t.getTime()/1e3);return Cr(n,r.length)},T:function(t,r,s){const n=t.getTime();return Cr(n,r.length)}};function ED(t,r=""){const s=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),i=n%60;return i===0?s+String(a):s+String(a)+r+Cr(i,2)}function DD(t,r){return t%60===0?(t>0?"-":"+")+Cr(Math.abs(t)/60,2):nc(t,r)}function nc(t,r=""){const s=t>0?"-":"+",n=Math.abs(t),a=Cr(Math.trunc(n/60),2),i=Cr(n%60,2);return s+a+r+i}const MD=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},c7=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},FOe=(t,r)=>{const s=t.match(/(P+)(p+)?/)||[],n=s[1],a=s[2];if(!a)return MD(t,r);let i;switch(n){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;case"PPPP":default:i=r.dateTime({width:"full"});break}return i.replace("{{date}}",MD(n,r)).replace("{{time}}",c7(a,r))},$Oe={p:c7,P:FOe},LOe=/^D+$/,BOe=/^Y+$/,VOe=["D","DD","YY","YYYY"];function UOe(t){return LOe.test(t)}function qOe(t){return BOe.test(t)}function zOe(t,r,s){const n=KOe(t,r,s);if(console.warn(n),VOe.includes(t))throw new RangeError(n)}function KOe(t,r,s){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const HOe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WOe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GOe=/^'([^]*?)'?$/,YOe=/''/g,QOe=/[a-zA-Z]/;function vt(t,r,s){var u,m,h,g,x,p,y,v;const n=qm(),a=(s==null?void 0:s.locale)??n.locale??dk,i=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(h=n.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,l=(s==null?void 0:s.weekStartsOn)??((p=(x=s==null?void 0:s.locale)==null?void 0:x.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((v=(y=n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,o=Rt(t);if(!US(o))throw new RangeError("Invalid time value");let c=r.match(WOe).map(f=>{const b=f[0];if(b==="p"||b==="P"){const N=$Oe[b];return N(f,a.formatLong)}return f}).join("").match(HOe).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const b=f[0];if(b==="'")return{isToken:!1,value:XOe(f)};if(OD[b])return{isToken:!0,value:f};if(b.match(QOe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return c.map(f=>{if(!f.isToken)return f.value;const b=f.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&qOe(b)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&UOe(b))&&zOe(b,r,String(t));const N=OD[b[0]];return N(o,b,a.localize,d)}).join("")}function XOe(t){const r=t.match(GOe);return r?r[1].replace(YOe,"'"):t}function ZOe(t,r,s){const n=qm(),a=(s==null?void 0:s.locale)??n.locale??dk,i=2520,l=Sg(t,r);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:l});let c,d;l>0?(c=Rt(r),d=Rt(t)):(c=Rt(t),d=Rt(r));const u=rOe(d,c),m=(dm(d)-dm(c))/1e3,h=Math.round((u-m)/60);let g;if(h<2)return s!=null&&s.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,o):u<10?a.formatDistance("lessThanXSeconds",10,o):u<20?a.formatDistance("lessThanXSeconds",20,o):u<40?a.formatDistance("halfAMinute",0,o):u<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):h===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",h,o);if(h<45)return a.formatDistance("xMinutes",h,o);if(h<90)return a.formatDistance("aboutXHours",1,o);if(h<AD){const x=Math.round(h/60);return a.formatDistance("aboutXHours",x,o)}else{if(h<i)return a.formatDistance("xDays",1,o);if(h<Wx){const x=Math.round(h/AD);return a.formatDistance("xDays",x,o)}else if(h<Wx*2)return g=Math.round(h/Wx),a.formatDistance("aboutXMonths",g,o)}if(g=tOe(d,c),g<12){const x=Math.round(h/Wx);return a.formatDistance("xMonths",x,o)}else{const x=g%12,p=Math.trunc(g/12);return x<3?a.formatDistance("aboutXYears",p,o):x<9?a.formatDistance("overXYears",p,o):a.formatDistance("almostXYears",p+1,o)}}function uk(t,r){return ZOe(t,Y4e(t),r)}function JOe(t){const r=Rt(t),s=r.getFullYear(),n=r.getMonth(),a=Wn(t,0);return a.setFullYear(s,n+1,0),a.setHours(0,0,0,0),a.getDate()}function eEe(t){return Math.trunc(+Rt(t)/1e3)}function tEe(t){const r=Rt(t),s=r.getMonth();return r.setFullYear(r.getFullYear(),s+1,0),r.setHours(0,0,0,0),r}function rEe(t,r){return Q4e(tEe(t),Kn(t),r)+1}function qS(t,r){const s=Rt(t),n=Rt(r);return s.getTime()>n.getTime()}function d7(t,r){const s=Rt(t),n=Rt(r);return+s<+n}function mk(t,r){const s=Rt(t),n=Rt(r);return s.getFullYear()===n.getFullYear()&&s.getMonth()===n.getMonth()}function sEe(t,r){const s=Rt(t),n=Rt(r);return s.getFullYear()===n.getFullYear()}function Cg(t,r){return yn(t,-r)}function ID(t,r){const n=lEe(t);let a;if(n.date){const c=oEe(n.date,2);a=cEe(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let l=0,o;if(n.time&&(l=dEe(n.time),isNaN(l)))return new Date(NaN);if(n.timezone){if(o=uEe(n.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(i+l),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+l+o)}const Gx={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},nEe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,aEe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,iEe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function lEe(t){const r={},s=t.split(Gx.dateTimeDelimiter);let n;if(s.length>2)return r;if(/:/.test(s[0])?n=s[0]:(r.date=s[0],n=s[1],Gx.timeZoneDelimiter.test(r.date)&&(r.date=t.split(Gx.timeZoneDelimiter)[0],n=t.substr(r.date.length,t.length))),n){const a=Gx.timezone.exec(n);a?(r.time=n.replace(a[1],""),r.timezone=a[1]):r.time=n}return r}function oEe(t,r){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),n=t.match(s);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function cEe(t,r){if(r===null)return new Date(NaN);const s=t.match(nEe);if(!s)return new Date(NaN);const n=!!s[4],a=xh(s[1]),i=xh(s[2])-1,l=xh(s[3]),o=xh(s[4]),c=xh(s[5])-1;if(n)return xEe(r,o,c)?mEe(r,o,c):new Date(NaN);{const d=new Date(0);return!pEe(r,i,l)||!fEe(r,a)?new Date(NaN):(d.setUTCFullYear(r,i,Math.max(a,l)),d)}}function xh(t){return t?parseInt(t):1}function dEe(t){const r=t.match(aEe);if(!r)return NaN;const s=gN(r[1]),n=gN(r[2]),a=gN(r[3]);return gEe(s,n,a)?s*r7+n*t7+a*1e3:NaN}function gN(t){return t&&parseFloat(t.replace(",","."))||0}function uEe(t){if(t==="Z")return 0;const r=t.match(iEe);if(!r)return 0;const s=r[1]==="+"?-1:1,n=parseInt(r[2]),a=r[3]&&parseInt(r[3])||0;return vEe(n,a)?s*(n*r7+a*t7):NaN}function mEe(t,r,s){const n=new Date(0);n.setUTCFullYear(t,0,4);const a=n.getUTCDay()||7,i=(r-1)*7+s+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const hEe=[31,null,31,30,31,30,31,31,30,31,30,31];function u7(t){return t%400===0||t%4===0&&t%100!==0}function pEe(t,r,s){return r>=0&&r<=11&&s>=1&&s<=(hEe[r]||(u7(t)?29:28))}function fEe(t,r){return r>=1&&r<=(u7(t)?366:365)}function xEe(t,r,s){return r>=1&&r<=53&&s>=0&&s<=6}function gEe(t,r,s){return t===24?r===0&&s===0:s>=0&&s<60&&r>=0&&r<60&&t>=0&&t<25}function vEe(t,r){return r>=0&&r<=59}function vN(t,r){const s=Rt(t),n=s.getFullYear(),a=s.getDate(),i=Wn(t,0);i.setFullYear(n,r,15),i.setHours(0,0,0,0);const l=JOe(i);return s.setMonth(r,Math.min(a,l)),s}function RD(t,r){const s=Rt(t);return isNaN(+s)?Wn(t,NaN):(s.setFullYear(r),s)}var Cb="Popover",[m7,QFe]=ws(Cb,[Pm]),Zf=Pm(),[yEe,Yo]=m7(Cb),h7=t=>{const{__scopePopover:r,children:s,open:n,defaultOpen:a,onOpenChange:i,modal:l=!1}=t,o=Zf(r),c=j.useRef(null),[d,u]=j.useState(!1),[m,h]=Hn({prop:n,defaultProp:a??!1,onChange:i,caller:Cb});return e.jsx(RC,{...o,children:e.jsx(yEe,{scope:r,contentId:da(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(g=>!g),[h]),hasCustomAnchor:d,onCustomAnchorAdd:j.useCallback(()=>u(!0),[]),onCustomAnchorRemove:j.useCallback(()=>u(!1),[]),modal:l,children:s})})};h7.displayName=Cb;var p7="PopoverAnchor",jEe=j.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Yo(p7,s),i=Zf(s),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=a;return j.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(yj,{...i,...n,ref:r})});jEe.displayName=p7;var f7="PopoverTrigger",x7=j.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Yo(f7,s),i=Zf(s),l=$t(r,a.triggerRef),o=e.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":b7(a.open),...n,ref:l,onClick:We(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:e.jsx(yj,{asChild:!0,...i,children:o})});x7.displayName=f7;var hk="PopoverPortal",[bEe,NEe]=m7(hk,{forceMount:void 0}),g7=t=>{const{__scopePopover:r,forceMount:s,children:n,container:a}=t,i=Yo(hk,r);return e.jsx(bEe,{scope:r,forceMount:s,children:e.jsx(Rs,{present:s||i.open,children:e.jsx(bm,{asChild:!0,container:a,children:n})})})};g7.displayName=hk;var mm="PopoverContent",v7=j.forwardRef((t,r)=>{const s=NEe(mm,t.__scopePopover),{forceMount:n=s.forceMount,...a}=t,i=Yo(mm,t.__scopePopover);return e.jsx(Rs,{present:n||i.open,children:i.modal?e.jsx(SEe,{...a,ref:r}):e.jsx(CEe,{...a,ref:r})})});v7.displayName=mm;var wEe=Ao("PopoverContent.RemoveScroll"),SEe=j.forwardRef((t,r)=>{const s=Yo(mm,t.__scopePopover),n=j.useRef(null),a=$t(r,n),i=j.useRef(!1);return j.useEffect(()=>{const l=n.current;if(l)return bj(l)},[]),e.jsx(If,{as:wEe,allowPinchZoom:!0,children:e.jsx(y7,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:We(t.onCloseAutoFocus,l=>{var o;l.preventDefault(),i.current||(o=s.triggerRef.current)==null||o.focus()}),onPointerDownOutside:We(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:We(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),CEe=j.forwardRef((t,r)=>{const s=Yo(mm,t.__scopePopover),n=j.useRef(!1),a=j.useRef(!1);return e.jsx(y7,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var l,o;(l=t.onCloseAutoFocus)==null||l.call(t,i),i.defaultPrevented||(n.current||(o=s.triggerRef.current)==null||o.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=i.target;((d=s.triggerRef.current)==null?void 0:d.contains(l))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),y7=j.forwardRef((t,r)=>{const{__scopePopover:s,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=t,h=Yo(mm,s),g=Zf(s);return pj(),e.jsx(Df,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(jm,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:e.jsx(FC,{"data-state":b7(h.open),role:"dialog",id:h.contentId,...g,...m,ref:r,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),j7="PopoverClose",PEe=j.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Yo(j7,s);return e.jsx(it.button,{type:"button",...n,ref:r,onClick:We(t.onClick,()=>a.onOpenChange(!1))})});PEe.displayName=j7;var kEe="PopoverArrow",AEe=j.forwardRef((t,r)=>{const{__scopePopover:s,...n}=t,a=Zf(s);return e.jsx($C,{...a,...n,ref:r})});AEe.displayName=kEe;function b7(t){return t?"open":"closed"}var _Ee=h7,TEe=x7,OEe=g7,N7=v7;const wn=_Ee,Sn=TEe,dn=j.forwardRef(({className:t,align:r="center",sideOffset:s=4,...n},a)=>e.jsx(OEe,{children:e.jsx(N7,{ref:a,align:r,sideOffset:s,className:De("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));dn.displayName=N7.displayName;var It=function(){return It=Object.assign||function(r){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},It.apply(this,arguments)};function EEe(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s}function w7(t,r,s){for(var n=0,a=r.length,i;n<a;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return t.concat(i||Array.prototype.slice.call(r))}function Jf(t){return t.mode==="multiple"}function ex(t){return t.mode==="range"}function Pb(t){return t.mode==="single"}var DEe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function MEe(t,r){return vt(t,"LLLL y",r)}function IEe(t,r){return vt(t,"d",r)}function REe(t,r){return vt(t,"LLLL",r)}function FEe(t){return"".concat(t)}function $Ee(t,r){return vt(t,"cccccc",r)}function LEe(t,r){return vt(t,"yyyy",r)}var BEe=Object.freeze({__proto__:null,formatCaption:MEe,formatDay:IEe,formatMonthCaption:REe,formatWeekNumber:FEe,formatWeekdayName:$Ee,formatYearCaption:LEe}),VEe=function(t,r,s){return vt(t,"do MMMM (EEEE)",s)},UEe=function(){return"Month: "},qEe=function(){return"Go to next month"},zEe=function(){return"Go to previous month"},KEe=function(t,r){return vt(t,"cccc",r)},HEe=function(t){return"Week n. ".concat(t)},WEe=function(){return"Year: "},GEe=Object.freeze({__proto__:null,labelDay:VEe,labelMonthDropdown:UEe,labelNext:qEe,labelPrevious:zEe,labelWeekNumber:HEe,labelWeekday:KEe,labelYearDropdown:WEe});function YEe(){var t="buttons",r=DEe,s=dk,n={},a={},i=1,l={},o=new Date;return{captionLayout:t,classNames:r,formatters:BEe,labels:GEe,locale:s,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:l,today:o,mode:"default"}}function QEe(t){var r=t.fromYear,s=t.toYear,n=t.fromMonth,a=t.toMonth,i=t.fromDate,l=t.toDate;return n?i=Kn(n):r&&(i=new Date(r,0,1)),a?l=Sb(a):s&&(l=new Date(s,11,31)),{fromDate:i?cm(i):void 0,toDate:l?cm(l):void 0}}var S7=j.createContext(void 0);function XEe(t){var r,s=t.initialProps,n=YEe(),a=QEe(s),i=a.fromDate,l=a.toDate,o=(r=s.captionLayout)!==null&&r!==void 0?r:n.captionLayout;o!=="buttons"&&(!i||!l)&&(o="buttons");var c;(Pb(s)||Jf(s)||ex(s))&&(c=s.onSelect);var d=It(It(It({},n),s),{captionLayout:o,classNames:It(It({},n.classNames),s.classNames),components:It({},s.components),formatters:It(It({},n.formatters),s.formatters),fromDate:i,labels:It(It({},n.labels),s.labels),mode:s.mode||n.mode,modifiers:It(It({},n.modifiers),s.modifiers),modifiersClassNames:It(It({},n.modifiersClassNames),s.modifiersClassNames),onSelect:c,styles:It(It({},n.styles),s.styles),toDate:l});return e.jsx(S7.Provider,{value:d,children:t.children})}function Lr(){var t=j.useContext(S7);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function C7(t){var r=Lr(),s=r.locale,n=r.classNames,a=r.styles,i=r.formatters.formatCaption;return e.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:s})})}function ZEe(t){return e.jsx("svg",It({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:e.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function P7(t){var r,s,n=t.onChange,a=t.value,i=t.children,l=t.caption,o=t.className,c=t.style,d=Lr(),u=(s=(r=d.components)===null||r===void 0?void 0:r.IconDropdown)!==null&&s!==void 0?s:ZEe;return e.jsxs("div",{className:o,style:c,children:[e.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),e.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:i}),e.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[l,e.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function JEe(t){var r,s=Lr(),n=s.fromDate,a=s.toDate,i=s.styles,l=s.locale,o=s.formatters.formatMonthCaption,c=s.classNames,d=s.components,u=s.labels.labelMonthDropdown;if(!n)return e.jsx(e.Fragment,{});if(!a)return e.jsx(e.Fragment,{});var m=[];if(sEe(n,a))for(var h=Kn(n),g=n.getMonth();g<=a.getMonth();g++)m.push(vN(h,g));else for(var h=Kn(new Date),g=0;g<=11;g++)m.push(vN(h,g));var x=function(y){var v=Number(y.target.value),f=vN(Kn(t.displayMonth),v);t.onChange(f)},p=(r=d==null?void 0:d.Dropdown)!==null&&r!==void 0?r:P7;return e.jsx(p,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:x,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:l}),children:m.map(function(y){return e.jsx("option",{value:y.getMonth(),children:o(y,{locale:l})},y.getMonth())})})}function eDe(t){var r,s=t.displayMonth,n=Lr(),a=n.fromDate,i=n.toDate,l=n.locale,o=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,m=n.labels.labelYearDropdown,h=[];if(!a)return e.jsx(e.Fragment,{});if(!i)return e.jsx(e.Fragment,{});for(var g=a.getFullYear(),x=i.getFullYear(),p=g;p<=x;p++)h.push(RD(n7(new Date),p));var y=function(f){var b=RD(Kn(s),Number(f.target.value));t.onChange(b)},v=(r=d==null?void 0:d.Dropdown)!==null&&r!==void 0?r:P7;return e.jsx(v,{name:"years","aria-label":m(),className:c.dropdown_year,style:o.dropdown_year,onChange:y,value:s.getFullYear(),caption:u(s,{locale:l}),children:h.map(function(f){return e.jsx("option",{value:f.getFullYear(),children:u(f,{locale:l})},f.getFullYear())})})}function tDe(t,r){var s=j.useState(t),n=s[0],a=s[1],i=r===void 0?n:r;return[i,a]}function rDe(t){var r=t.month,s=t.defaultMonth,n=t.today,a=r||s||n||new Date,i=t.toDate,l=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(i&&um(i,a)<0){var d=-1*(c-1);a=pi(i,d)}return l&&um(a,l)<0&&(a=l),Kn(a)}function sDe(){var t=Lr(),r=rDe(t),s=tDe(r,t.month),n=s[0],a=s[1],i=function(l){var o;if(!t.disableNavigation){var c=Kn(l);a(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[n,i]}function nDe(t,r){for(var s=r.reverseMonths,n=r.numberOfMonths,a=Kn(t),i=Kn(pi(a,n)),l=um(i,a),o=[],c=0;c<l;c++){var d=pi(a,c);o.push(d)}return s&&(o=o.reverse()),o}function aDe(t,r){if(!r.disableNavigation){var s=r.toDate,n=r.pagedNavigation,a=r.numberOfMonths,i=a===void 0?1:a,l=n?i:1,o=Kn(t);if(!s)return pi(o,l);var c=um(s,t);if(!(c<i))return pi(o,l)}}function iDe(t,r){if(!r.disableNavigation){var s=r.fromDate,n=r.pagedNavigation,a=r.numberOfMonths,i=a===void 0?1:a,l=n?i:1,o=Kn(t);if(!s)return pi(o,-l);var c=um(o,s);if(!(c<=0))return pi(o,-l)}}var k7=j.createContext(void 0);function lDe(t){var r=Lr(),s=sDe(),n=s[0],a=s[1],i=nDe(n,r),l=aDe(n,r),o=iDe(n,r),c=function(m){return i.some(function(h){return mk(m,h)})},d=function(m,h){c(m)||(h&&d7(m,h)?a(pi(m,1+r.numberOfMonths*-1)):a(m))},u={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:o,nextMonth:l,isDateDisplayed:c};return e.jsx(k7.Provider,{value:u,children:t.children})}function tx(){var t=j.useContext(k7);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function FD(t){var r,s=Lr(),n=s.classNames,a=s.styles,i=s.components,l=tx().goToMonth,o=function(u){l(pi(u,t.displayIndex?-t.displayIndex:0))},c=(r=i==null?void 0:i.CaptionLabel)!==null&&r!==void 0?r:C7,d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth});return e.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[e.jsx("div",{className:n.vhidden,children:d}),e.jsx(JEe,{onChange:o,displayMonth:t.displayMonth}),e.jsx(eDe,{onChange:o,displayMonth:t.displayMonth})]})}function oDe(t){return e.jsx("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function cDe(t){return e.jsx("svg",It({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:e.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Oy=j.forwardRef(function(t,r){var s=Lr(),n=s.classNames,a=s.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var l=i.join(" "),o=It(It({},a.button_reset),a.button);return t.style&&Object.assign(o,t.style),e.jsx("button",It({},t,{ref:r,type:"button",className:l,style:o}))});function dDe(t){var r,s,n=Lr(),a=n.dir,i=n.locale,l=n.classNames,o=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,m=n.components;if(!t.nextMonth&&!t.previousMonth)return e.jsx(e.Fragment,{});var h=d(t.previousMonth,{locale:i}),g=[l.nav_button,l.nav_button_previous].join(" "),x=u(t.nextMonth,{locale:i}),p=[l.nav_button,l.nav_button_next].join(" "),y=(r=m==null?void 0:m.IconRight)!==null&&r!==void 0?r:cDe,v=(s=m==null?void 0:m.IconLeft)!==null&&s!==void 0?s:oDe;return e.jsxs("div",{className:l.nav,style:o.nav,children:[!t.hidePrevious&&e.jsx(Oy,{name:"previous-month","aria-label":h,className:g,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?e.jsx(y,{className:l.nav_icon,style:o.nav_icon}):e.jsx(v,{className:l.nav_icon,style:o.nav_icon})}),!t.hideNext&&e.jsx(Oy,{name:"next-month","aria-label":x,className:p,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?e.jsx(v,{className:l.nav_icon,style:o.nav_icon}):e.jsx(y,{className:l.nav_icon,style:o.nav_icon})})]})}function $D(t){var r=Lr().numberOfMonths,s=tx(),n=s.previousMonth,a=s.nextMonth,i=s.goToMonth,l=s.displayMonths,o=l.findIndex(function(x){return mk(t.displayMonth,x)}),c=o===0,d=o===l.length-1,u=r>1&&(c||!d),m=r>1&&(d||!c),h=function(){n&&i(n)},g=function(){a&&i(a)};return e.jsx(dDe,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:m,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:g})}function uDe(t){var r,s=Lr(),n=s.classNames,a=s.disableNavigation,i=s.styles,l=s.captionLayout,o=s.components,c=(r=o==null?void 0:o.CaptionLabel)!==null&&r!==void 0?r:C7,d;return a?d=e.jsx(c,{id:t.id,displayMonth:t.displayMonth}):l==="dropdown"?d=e.jsx(FD,{displayMonth:t.displayMonth,id:t.id}):l==="dropdown-buttons"?d=e.jsxs(e.Fragment,{children:[e.jsx(FD,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),e.jsx($D,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=e.jsxs(e.Fragment,{children:[e.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx($D,{displayMonth:t.displayMonth,id:t.id})]}),e.jsx("div",{className:n.caption,style:i.caption,children:d})}function mDe(t){var r=Lr(),s=r.footer,n=r.styles,a=r.classNames.tfoot;return s?e.jsx("tfoot",{className:a,style:n.tfoot,children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,children:s})})}):e.jsx(e.Fragment,{})}function hDe(t,r,s){for(var n=s?Zc(new Date):Hi(new Date,{locale:t,weekStartsOn:r}),a=[],i=0;i<7;i++){var l=yn(n,i);a.push(l)}return a}function pDe(){var t=Lr(),r=t.classNames,s=t.styles,n=t.showWeekNumber,a=t.locale,i=t.weekStartsOn,l=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=hDe(a,i,l);return e.jsxs("tr",{style:s.head_row,className:r.head_row,children:[n&&e.jsx("td",{style:s.head_cell,className:r.head_cell}),d.map(function(u,m){return e.jsx("th",{scope:"col",className:r.head_cell,style:s.head_cell,"aria-label":c(u,{locale:a}),children:o(u,{locale:a})},m)})]})}function fDe(){var t,r=Lr(),s=r.classNames,n=r.styles,a=r.components,i=(t=a==null?void 0:a.HeadRow)!==null&&t!==void 0?t:pDe;return e.jsx("thead",{style:n.head,className:s.head,children:e.jsx(i,{})})}function xDe(t){var r=Lr(),s=r.locale,n=r.formatters.formatDay;return e.jsx(e.Fragment,{children:n(t.date,{locale:s})})}var pk=j.createContext(void 0);function gDe(t){if(!Jf(t.initialProps)){var r={selected:void 0,modifiers:{disabled:[]}};return e.jsx(pk.Provider,{value:r,children:t.children})}return e.jsx(vDe,{initialProps:t.initialProps,children:t.children})}function vDe(t){var r=t.initialProps,s=t.children,n=r.selected,a=r.min,i=r.max,l=function(d,u,m){var h,g;(h=r.onDayClick)===null||h===void 0||h.call(r,d,u,m);var x=!!(u.selected&&a&&(n==null?void 0:n.length)===a);if(!x){var p=!!(!u.selected&&i&&(n==null?void 0:n.length)===i);if(!p){var y=n?w7([],n):[];if(u.selected){var v=y.findIndex(function(f){return Bn(d,f)});y.splice(v,1)}else y.push(d);(g=r.onSelect)===null||g===void 0||g.call(r,y,d,u,m)}}},o={disabled:[]};n&&o.disabled.push(function(d){var u=i&&n.length>i-1,m=n.some(function(h){return Bn(h,d)});return!!(u&&!m)});var c={selected:n,onDayClick:l,modifiers:o};return e.jsx(pk.Provider,{value:c,children:s})}function fk(){var t=j.useContext(pk);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function yDe(t,r){var s=r||{},n=s.from,a=s.to;return n&&a?Bn(a,t)&&Bn(n,t)?void 0:Bn(a,t)?{from:a,to:void 0}:Bn(n,t)?void 0:qS(n,t)?{from:t,to:a}:{from:n,to:t}:a?qS(t,a)?{from:a,to:t}:{from:t,to:a}:n?d7(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var xk=j.createContext(void 0);function jDe(t){if(!ex(t.initialProps)){var r={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return e.jsx(xk.Provider,{value:r,children:t.children})}return e.jsx(bDe,{initialProps:t.initialProps,children:t.children})}function bDe(t){var r=t.initialProps,s=t.children,n=r.selected,a=n||{},i=a.from,l=a.to,o=r.min,c=r.max,d=function(g,x,p){var y,v;(y=r.onDayClick)===null||y===void 0||y.call(r,g,x,p);var f=yDe(g,n);(v=r.onSelect)===null||v===void 0||v.call(r,f,g,x,p)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],l?(u.range_end=[l],Bn(i,l)||(u.range_middle=[{after:i,before:l}])):u.range_end=[i]):l&&(u.range_start=[l],u.range_end=[l]),o&&(i&&!l&&u.disabled.push({after:Cg(i,o-1),before:yn(i,o-1)}),i&&l&&u.disabled.push({after:i,before:yn(i,o-1)}),!i&&l&&u.disabled.push({after:Cg(l,o-1),before:yn(l,o-1)})),c){if(i&&!l&&(u.disabled.push({before:yn(i,-c+1)}),u.disabled.push({after:yn(i,c-1)})),i&&l){var m=si(l,i)+1,h=c-m;u.disabled.push({before:Cg(i,h)}),u.disabled.push({after:yn(l,h)})}!i&&l&&(u.disabled.push({before:yn(l,-c+1)}),u.disabled.push({after:yn(l,c-1)}))}return e.jsx(xk.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:s})}function gk(){var t=j.useContext(xk);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Pg(t){return Array.isArray(t)?w7([],t):t!==void 0?[t]:[]}function NDe(t){var r={};return Object.entries(t).forEach(function(s){var n=s[0],a=s[1];r[n]=Pg(a)}),r}var fi;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(fi||(fi={}));var wDe=fi.Selected,tl=fi.Disabled,SDe=fi.Hidden,CDe=fi.Today,yN=fi.RangeEnd,jN=fi.RangeMiddle,bN=fi.RangeStart,PDe=fi.Outside;function kDe(t,r,s){var n,a=(n={},n[wDe]=Pg(t.selected),n[tl]=Pg(t.disabled),n[SDe]=Pg(t.hidden),n[CDe]=[t.today],n[yN]=[],n[jN]=[],n[bN]=[],n[PDe]=[],n);return t.fromDate&&a[tl].push({before:t.fromDate}),t.toDate&&a[tl].push({after:t.toDate}),Jf(t)?a[tl]=a[tl].concat(r.modifiers[tl]):ex(t)&&(a[tl]=a[tl].concat(s.modifiers[tl]),a[bN]=s.modifiers[bN],a[jN]=s.modifiers[jN],a[yN]=s.modifiers[yN]),a}var A7=j.createContext(void 0);function ADe(t){var r=Lr(),s=fk(),n=gk(),a=kDe(r,s,n),i=NDe(r.modifiers),l=It(It({},a),i);return e.jsx(A7.Provider,{value:l,children:t.children})}function _7(){var t=j.useContext(A7);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function _De(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function TDe(t){return!!(t&&typeof t=="object"&&"from"in t)}function ODe(t){return!!(t&&typeof t=="object"&&"after"in t)}function EDe(t){return!!(t&&typeof t=="object"&&"before"in t)}function DDe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function MDe(t,r){var s,n=r.from,a=r.to;if(n&&a){var i=si(a,n)<0;i&&(s=[a,n],n=s[0],a=s[1]);var l=si(t,n)>=0&&si(a,t)>=0;return l}return a?Bn(a,t):n?Bn(n,t):!1}function IDe(t){return ok(t)}function RDe(t){return Array.isArray(t)&&t.every(ok)}function FDe(t,r){return r.some(function(s){if(typeof s=="boolean")return s;if(IDe(s))return Bn(t,s);if(RDe(s))return s.includes(t);if(TDe(s))return MDe(t,s);if(DDe(s))return s.dayOfWeek.includes(t.getDay());if(_De(s)){var n=si(s.before,t),a=si(s.after,t),i=n>0,l=a<0,o=qS(s.before,s.after);return o?l&&i:i||l}return ODe(s)?si(t,s.after)>0:EDe(s)?si(s.before,t)>0:typeof s=="function"?s(t):!1})}function vk(t,r,s){var n=Object.keys(r).reduce(function(i,l){var o=r[l];return FDe(t,o)&&i.push(l),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),s&&!mk(t,s)&&(a.outside=!0),a}function $De(t,r){for(var s=Kn(t[0]),n=Sb(t[t.length-1]),a,i,l=s;l<=n;){var o=vk(l,r),c=!o.disabled&&!o.hidden;if(!c){l=yn(l,1);continue}if(o.selected)return l;o.today&&!i&&(i=l),a||(a=l),l=yn(l,1)}return i||a}var LDe=365;function T7(t,r){var s=r.moveBy,n=r.direction,a=r.context,i=r.modifiers,l=r.retry,o=l===void 0?{count:0,lastFocused:t}:l,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,m=a.locale,h={day:yn,week:VS,month:pi,year:H4e,startOfWeek:function(y){return a.ISOWeek?Zc(y):Hi(y,{locale:m,weekStartsOn:c})},endOfWeek:function(y){return a.ISOWeek?a7(y):ck(y,{locale:m,weekStartsOn:c})}},g=h[s](t,n==="after"?1:-1);n==="before"&&d?g=W4e([d,g]):n==="after"&&u&&(g=G4e([u,g]));var x=!0;if(i){var p=vk(g,i);x=!p.disabled&&!p.hidden}return x?g:o.count>LDe?o.lastFocused:T7(g,{moveBy:s,direction:n,context:a,modifiers:i,retry:It(It({},o),{count:o.count+1})})}var O7=j.createContext(void 0);function BDe(t){var r=tx(),s=_7(),n=j.useState(),a=n[0],i=n[1],l=j.useState(),o=l[0],c=l[1],d=$De(r.displayMonths,s),u=a??(o&&r.isDateDisplayed(o))?o:d,m=function(){c(a),i(void 0)},h=function(y){i(y)},g=Lr(),x=function(y,v){if(a){var f=T7(a,{moveBy:y,direction:v,context:g,modifiers:s});Bn(a,f)||(r.goToDate(f,a),h(f))}},p={focusedDay:a,focusTarget:u,blur:m,focus:h,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return e.jsx(O7.Provider,{value:p,children:t.children})}function yk(){var t=j.useContext(O7);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function VDe(t,r){var s=_7(),n=vk(t,s,r);return n}var jk=j.createContext(void 0);function UDe(t){if(!Pb(t.initialProps)){var r={selected:void 0};return e.jsx(jk.Provider,{value:r,children:t.children})}return e.jsx(qDe,{initialProps:t.initialProps,children:t.children})}function qDe(t){var r=t.initialProps,s=t.children,n=function(i,l,o){var c,d,u;if((c=r.onDayClick)===null||c===void 0||c.call(r,i,l,o),l.selected&&!r.required){(d=r.onSelect)===null||d===void 0||d.call(r,void 0,i,l,o);return}(u=r.onSelect)===null||u===void 0||u.call(r,i,i,l,o)},a={selected:r.selected,onDayClick:n};return e.jsx(jk.Provider,{value:a,children:s})}function E7(){var t=j.useContext(jk);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function zDe(t,r){var s=Lr(),n=E7(),a=fk(),i=gk(),l=yk(),o=l.focusDayAfter,c=l.focusDayBefore,d=l.focusWeekAfter,u=l.focusWeekBefore,m=l.blur,h=l.focus,g=l.focusMonthBefore,x=l.focusMonthAfter,p=l.focusYearBefore,y=l.focusYearAfter,v=l.focusStartOfWeek,f=l.focusEndOfWeek,b=function(X){var K,Z,ue,Ne;Pb(s)?(K=n.onDayClick)===null||K===void 0||K.call(n,t,r,X):Jf(s)?(Z=a.onDayClick)===null||Z===void 0||Z.call(a,t,r,X):ex(s)?(ue=i.onDayClick)===null||ue===void 0||ue.call(i,t,r,X):(Ne=s.onDayClick)===null||Ne===void 0||Ne.call(s,t,r,X)},N=function(X){var K;h(t),(K=s.onDayFocus)===null||K===void 0||K.call(s,t,r,X)},w=function(X){var K;m(),(K=s.onDayBlur)===null||K===void 0||K.call(s,t,r,X)},C=function(X){var K;(K=s.onDayMouseEnter)===null||K===void 0||K.call(s,t,r,X)},P=function(X){var K;(K=s.onDayMouseLeave)===null||K===void 0||K.call(s,t,r,X)},S=function(X){var K;(K=s.onDayPointerEnter)===null||K===void 0||K.call(s,t,r,X)},A=function(X){var K;(K=s.onDayPointerLeave)===null||K===void 0||K.call(s,t,r,X)},k=function(X){var K;(K=s.onDayTouchCancel)===null||K===void 0||K.call(s,t,r,X)},D=function(X){var K;(K=s.onDayTouchEnd)===null||K===void 0||K.call(s,t,r,X)},q=function(X){var K;(K=s.onDayTouchMove)===null||K===void 0||K.call(s,t,r,X)},z=function(X){var K;(K=s.onDayTouchStart)===null||K===void 0||K.call(s,t,r,X)},I=function(X){var K;(K=s.onDayKeyUp)===null||K===void 0||K.call(s,t,r,X)},F=function(X){var K;switch(X.key){case"ArrowLeft":X.preventDefault(),X.stopPropagation(),s.dir==="rtl"?o():c();break;case"ArrowRight":X.preventDefault(),X.stopPropagation(),s.dir==="rtl"?c():o();break;case"ArrowDown":X.preventDefault(),X.stopPropagation(),d();break;case"ArrowUp":X.preventDefault(),X.stopPropagation(),u();break;case"PageUp":X.preventDefault(),X.stopPropagation(),X.shiftKey?p():g();break;case"PageDown":X.preventDefault(),X.stopPropagation(),X.shiftKey?y():x();break;case"Home":X.preventDefault(),X.stopPropagation(),v();break;case"End":X.preventDefault(),X.stopPropagation(),f();break}(K=s.onDayKeyDown)===null||K===void 0||K.call(s,t,r,X)},W={onClick:b,onFocus:N,onBlur:w,onKeyDown:F,onKeyUp:I,onMouseEnter:C,onMouseLeave:P,onPointerEnter:S,onPointerLeave:A,onTouchCancel:k,onTouchEnd:D,onTouchMove:q,onTouchStart:z};return W}function KDe(){var t=Lr(),r=E7(),s=fk(),n=gk(),a=Pb(t)?r.selected:Jf(t)?s.selected:ex(t)?n.selected:void 0;return a}function HDe(t){return Object.values(fi).includes(t)}function WDe(t,r){var s=[t.classNames.day];return Object.keys(r).forEach(function(n){var a=t.modifiersClassNames[n];if(a)s.push(a);else if(HDe(n)){var i=t.classNames["day_".concat(n)];i&&s.push(i)}}),s}function GDe(t,r){var s=It({},t.styles.day);return Object.keys(r).forEach(function(n){var a;s=It(It({},s),(a=t.modifiersStyles)===null||a===void 0?void 0:a[n])}),s}function YDe(t,r,s){var n,a,i,l=Lr(),o=yk(),c=VDe(t,r),d=zDe(t,c),u=KDe(),m=!!(l.onDayClick||l.mode!=="default");j.useEffect(function(){var C;c.outside||o.focusedDay&&m&&Bn(o.focusedDay,t)&&((C=s.current)===null||C===void 0||C.focus())},[o.focusedDay,t,s,m,c.outside]);var h=WDe(l,c).join(" "),g=GDe(l,c),x=!!(c.outside&&!l.showOutsideDays||c.hidden),p=(i=(a=l.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:xDe,y=e.jsx(p,{date:t,displayMonth:r,activeModifiers:c}),v={style:g,className:h,children:y,role:"gridcell"},f=o.focusTarget&&Bn(o.focusTarget,t)&&!c.outside,b=o.focusedDay&&Bn(o.focusedDay,t),N=It(It(It({},v),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=b||f?0:-1,n)),d),w={isButton:m,isHidden:x,activeModifiers:c,selectedDays:u,buttonProps:N,divProps:v};return w}function QDe(t){var r=j.useRef(null),s=YDe(t.date,t.displayMonth,r);return s.isHidden?e.jsx("div",{role:"gridcell"}):s.isButton?e.jsx(Oy,It({name:"day",ref:r},s.buttonProps)):e.jsx("div",It({},s.divProps))}function XDe(t){var r=t.number,s=t.dates,n=Lr(),a=n.onWeekNumberClick,i=n.styles,l=n.classNames,o=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(r),{locale:o});if(!a)return e.jsx("span",{className:l.weeknumber,style:i.weeknumber,children:u});var m=c(Number(r),{locale:o}),h=function(g){a(r,s,g)};return e.jsx(Oy,{name:"week-number","aria-label":m,className:l.weeknumber,style:i.weeknumber,onClick:h,children:u})}function ZDe(t){var r,s,n=Lr(),a=n.styles,i=n.classNames,l=n.showWeekNumber,o=n.components,c=(r=o==null?void 0:o.Day)!==null&&r!==void 0?r:QDe,d=(s=o==null?void 0:o.WeekNumber)!==null&&s!==void 0?s:XDe,u;return l&&(u=e.jsx("td",{className:i.cell,style:a.cell,children:e.jsx(d,{number:t.weekNumber,dates:t.dates})})),e.jsxs("tr",{className:i.row,style:a.row,children:[u,t.dates.map(function(m){return e.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:e.jsx(c,{displayMonth:t.displayMonth,date:m})},eEe(m))})]})}function LD(t,r,s){for(var n=s!=null&&s.ISOWeek?a7(r):ck(r,s),a=s!=null&&s.ISOWeek?Zc(t):Hi(t,s),i=si(n,a),l=[],o=0;o<=i;o++)l.push(yn(a,o));var c=l.reduce(function(d,u){var m=s!=null&&s.ISOWeek?i7(u):o7(u,s),h=d.find(function(g){return g.weekNumber===m});return h?(h.dates.push(u),d):(d.push({weekNumber:m,dates:[u]}),d)},[]);return c}function JDe(t,r){var s=LD(Kn(t),Sb(t),r);if(r!=null&&r.useFixedWeeks){var n=rEe(t,r);if(n<6){var a=s[s.length-1],i=a.dates[a.dates.length-1],l=VS(i,6-n),o=LD(VS(i,1),l,r);s.push.apply(s,o)}}return s}function eMe(t){var r,s,n,a=Lr(),i=a.locale,l=a.classNames,o=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,m=a.weekStartsOn,h=a.firstWeekContainsDate,g=a.ISOWeek,x=JDe(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:g,locale:i,weekStartsOn:m,firstWeekContainsDate:h}),p=(r=u==null?void 0:u.Head)!==null&&r!==void 0?r:fDe,y=(s=u==null?void 0:u.Row)!==null&&s!==void 0?s:ZDe,v=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:mDe;return e.jsxs("table",{id:t.id,className:l.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&e.jsx(p,{}),e.jsx("tbody",{className:l.tbody,style:o.tbody,children:x.map(function(f){return e.jsx(y,{displayMonth:t.displayMonth,dates:f.dates,weekNumber:f.weekNumber},f.weekNumber)})}),e.jsx(v,{displayMonth:t.displayMonth})]})}function tMe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var rMe=tMe()?j.useLayoutEffect:j.useEffect,NN=!1,sMe=0;function BD(){return"react-day-picker-".concat(++sMe)}function nMe(t){var r,s=t??(NN?BD():null),n=j.useState(s),a=n[0],i=n[1];return rMe(function(){a===null&&i(BD())},[]),j.useEffect(function(){NN===!1&&(NN=!0)},[]),(r=t??a)!==null&&r!==void 0?r:void 0}function aMe(t){var r,s,n=Lr(),a=n.dir,i=n.classNames,l=n.styles,o=n.components,c=tx().displayMonths,d=nMe(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,m=[i.month],h=l.month,g=t.displayIndex===0,x=t.displayIndex===c.length-1,p=!g&&!x;a==="rtl"&&(r=[g,x],x=r[0],g=r[1]),g&&(m.push(i.caption_start),h=It(It({},h),l.caption_start)),x&&(m.push(i.caption_end),h=It(It({},h),l.caption_end)),p&&(m.push(i.caption_between),h=It(It({},h),l.caption_between));var y=(s=o==null?void 0:o.Caption)!==null&&s!==void 0?s:uDe;return e.jsxs("div",{className:m.join(" "),style:h,children:[e.jsx(y,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),e.jsx(eMe,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function iMe(t){var r=Lr(),s=r.classNames,n=r.styles;return e.jsx("div",{className:s.months,style:n.months,children:t.children})}function lMe(t){var r,s,n=t.initialProps,a=Lr(),i=yk(),l=tx(),o=j.useState(!1),c=o[0],d=o[1];j.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var m=It(It({},a.styles.root),a.style),h=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,p){var y;return It(It({},x),(y={},y[p]=n[p],y))},{}),g=(s=(r=n.components)===null||r===void 0?void 0:r.Months)!==null&&s!==void 0?s:iMe;return e.jsx("div",It({className:u.join(" "),style:m,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:e.jsx(g,{children:l.displayMonths.map(function(x,p){return e.jsx(aMe,{displayIndex:p,displayMonth:x},p)})})}))}function oMe(t){var r=t.children,s=EEe(t,["children"]);return e.jsx(XEe,{initialProps:s,children:e.jsx(lDe,{children:e.jsx(UDe,{initialProps:s,children:e.jsx(gDe,{initialProps:s,children:e.jsx(jDe,{initialProps:s,children:e.jsx(ADe,{children:e.jsx(BDe,{children:r})})})})})})})}function cMe(t){return e.jsx(oMe,It({},t,{children:e.jsx(lMe,{initialProps:t})}))}function un({className:t,classNames:r,showOutsideDays:s=!0,...n}){return e.jsx(cMe,{showOutsideDays:s,className:De("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:De(Op({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:De(Op({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...a})=>e.jsx(gp,{className:"h-4 w-4"}),IconRight:({...a})=>e.jsx(ia,{className:"h-4 w-4"})},...n})}un.displayName="Calendar";function Kl({className:t,...r}){return e.jsx("div",{className:De("animate-pulse rounded-md bg-muted",t),...r})}function dMe(){const{user:t}=dt(),[r,s]=j.useState({startDate:Cg(new Date,30),endDate:new Date}),[n,a]=j.useState(["active_users","page_views","service_usage_recharge","service_usage_booking"]),[i,l]=j.useState(""),[o,c]=j.useState(""),[d,u]=j.useState("overview"),{data:m,isLoading:h}=fe({queryKey:["/api/analytics/metrics",{startDate:r.startDate.toISOString(),endDate:r.endDate.toISOString(),metrics:n,district:i,taluk:o}],queryFn:async()=>{if(!t)return[];const f=new URLSearchParams;return f.append("startDate",r.startDate.toISOString()),f.append("endDate",r.endDate.toISOString()),n.forEach(N=>{f.append("metrics",N)}),i&&f.append("district",i),o&&f.append("taluk",o),await(await ie("GET",`/api/analytics/metrics?${f.toString()}`)).json()},enabled:!!t&&t.userType!=="customer"&&US(r.startDate)&&US(r.endDate)}),{data:g=[],isLoading:x}=fe({queryKey:["/api/reports"],queryFn:async()=>t?await(await ie("GET","/api/reports")).json():[],enabled:!!t&&t.userType!=="customer"});if(!t||t.userType!=="admin"&&t.userType!=="branch_manager"&&t.userType!=="taluk_manager")return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to view this page."})]})});const p=()=>!m||!Array.isArray(m)?[]:m.map(f=>({date:vt(new Date(f.date),"MMM dd"),value:f.value,metric:f.metric})),y=f=>!m||!Array.isArray(m)?0:m.filter(b=>b.metric===f).reduce((b,N)=>b+N.value,0),v=f=>{if(!m||!Array.isArray(m))return 0;const b=m.filter(N=>N.metric===f).sort((N,w)=>new Date(w.date).getTime()-new Date(N.date).getTime());return b.length>0?b[0].value:0};return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"View key metrics and performance indicators for the Nalamini service platform."}),e.jsxs(nr,{value:d,onValueChange:u,className:"mb-8",children:[e.jsxs(sr,{className:"mb-4",children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"reports",children:"Reports"}),e.jsx(Ae,{value:"detailed",children:"Detailed Analysis"})]}),e.jsxs(Ve,{value:"overview",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{htmlFor:"date-range",className:"mr-2",children:"Date Range:"}),e.jsx("div",{className:"grid gap-2",children:e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{id:"date-range",variant:"outline",className:"w-[300px] justify-start text-left font-normal",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),vt(r.startDate,"PPP")," - ",vt(r.endDate,"PPP")]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"border-r p-2",children:[e.jsx("div",{className:"px-3 py-2 font-medium",children:"Start Date"}),e.jsx(un,{mode:"single",selected:r.startDate,onSelect:f=>f&&s({...r,startDate:f}),initialFocus:!0})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"px-3 py-2 font-medium",children:"End Date"}),e.jsx(un,{mode:"single",selected:r.endDate,onSelect:f=>f&&s({...r,endDate:f}),initialFocus:!0})]})]})})]})})]}),t.userType==="admin"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{htmlFor:"district",className:"mr-2",children:"District:"}),e.jsxs(je,{value:i,onValueChange:l,children:[e.jsx(ge,{id:"district",className:"w-[200px]",children:e.jsx(be,{placeholder:"All Districts"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"",children:"All Districts"}),e.jsx(T,{value:"Chennai",children:"Chennai"}),e.jsx(T,{value:"Coimbatore",children:"Coimbatore"}),e.jsx(T,{value:"Madurai",children:"Madurai"})]})]})]}),(t.userType==="admin"||t.userType==="branch_manager")&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{htmlFor:"taluk",className:"mr-2",children:"Taluk:"}),e.jsxs(je,{value:o,onValueChange:c,children:[e.jsx(ge,{id:"taluk",className:"w-[200px]",children:e.jsx(be,{placeholder:"All Taluks"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"",children:"All Taluks"}),e.jsx(T,{value:"Chennai North",children:"Chennai North"}),e.jsx(T,{value:"Chennai South",children:"Chennai South"}),e.jsx(T,{value:"Coimbatore North",children:"Coimbatore North"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:h?e.jsx(Kl,{className:"h-8 w-20"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:v("active_users")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",y("active_users")]})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Page Views"}),e.jsx(zX,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:h?e.jsx(Kl,{className:"h-8 w-20"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:v("page_views")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",y("page_views")]})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Recharges"}),e.jsx(fa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:h?e.jsx(Kl,{className:"h-8 w-20"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:v("service_usage_recharge")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",y("service_usage_recharge")]})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Bookings"}),e.jsx(N$,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:h?e.jsx(Kl,{className:"h-8 w-20"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl font-bold",children:v("service_usage_booking")}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",y("service_usage_booking")]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"User Activity Overview"}),e.jsx(he,{children:"Daily active users and page views over time"})]}),e.jsx(E,{className:"pt-2",children:h?e.jsx("div",{className:"h-[350px] w-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx(Uv,{width:"100%",height:350,children:e.jsxs(e7,{data:p(),margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(Py,{strokeDasharray:"3 3"}),e.jsx(Xc,{dataKey:"date",minTickGap:15}),e.jsx($o,{}),e.jsx(ea,{}),e.jsx(vl,{}),e.jsx(Fo,{name:"Active Users",type:"monotone",dataKey:f=>f.metric==="active_users"?f.value:null,stroke:"#8884d8",activeDot:{r:8},connectNulls:!0}),e.jsx(Fo,{name:"Page Views",type:"monotone",dataKey:f=>f.metric==="page_views"?f.value:null,stroke:"#82ca9d",connectNulls:!0})]})})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Service Usage"}),e.jsx(he,{children:"Comparison of different service usages over time"})]}),e.jsx(E,{className:"pt-2",children:h?e.jsx("div",{className:"h-[350px] w-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx(Uv,{width:"100%",height:350,children:e.jsxs(V4e,{data:p(),margin:{top:20,right:30,left:20,bottom:10},children:[e.jsx(Py,{strokeDasharray:"3 3"}),e.jsx(Xc,{dataKey:"date",minTickGap:15}),e.jsx($o,{}),e.jsx(ea,{}),e.jsx(vl,{}),e.jsx(Ro,{name:"Recharges",dataKey:f=>f.metric==="service_usage_recharge"?f.value:null,fill:"#8884d8",connectNulls:!0}),e.jsx(Ro,{name:"Bookings",dataKey:f=>f.metric==="service_usage_booking"?f.value:null,fill:"#82ca9d",connectNulls:!0})]})})})]})]})]}),e.jsx(Ve,{value:"reports",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Saved Reports"}),e.jsx(_,{children:"Create New Report"})]}),x?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(f=>e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Kl,{className:"h-4 w-2/3 mb-2"}),e.jsx(Kl,{className:"h-3 w-full"})]}),e.jsxs(E,{children:[e.jsx(Kl,{className:"h-3 w-full mb-2"}),e.jsx(Kl,{className:"h-3 w-3/4"})]})]},f))}):g.length===0?e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"No reports found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new report to get started"})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(f=>e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:f.name}),e.jsx(he,{children:f.description})]}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last run: ",f.lastRun?vt(new Date(f.lastRun),"MMM d, yyyy"):"Never"]}),e.jsxs(_,{size:"sm",variant:"outline",children:[e.jsx(tZ,{className:"mr-2 h-4 w-4"}),"Run Report"]})]})})]},f.id))})]})}),e.jsx(Ve,{value:"detailed",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Detailed Metrics"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",children:"Export Data"}),e.jsx(_,{variant:"outline",children:"Configure Metrics"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Detailed metrics are currently in development. This feature will provide in-depth analysis of service usage patterns, user engagement, and regional performance data."}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Coming Soon"}),e.jsx(he,{children:"Detailed analytics features will be available in the next update"})]}),e.jsxs(E,{children:[e.jsx("p",{className:"text-muted-foreground",children:"The detailed analytics dashboard will include:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"Service-specific performance metrics"}),e.jsx("li",{children:"Geographic distribution visualization"}),e.jsx("li",{children:"User acquisition and retention analysis"}),e.jsx("li",{children:"Revenue and transaction performance tracking"}),e.jsx("li",{children:"Custom report builder"})]})]})]})]})})]})]})}function VD(){const{user:t}=dt(),{toast:r}=Ue(),s=Ml(),[n,a]=j.useState(!1),[i,l]=j.useState(null),{data:o=[],isLoading:c}=fe({queryKey:["/api/notifications"],queryFn:async()=>t?await(await ie("GET","/api/notifications?limit=20")).json():[],enabled:!!t,refetchInterval:6e4}),{data:d}=fe({queryKey:["/api/notifications/unread-count"],queryFn:async()=>t?await(await ie("GET","/api/notifications/unread-count")).json():{count:0},enabled:!!t,refetchInterval:3e4}),u=(d==null?void 0:d.count)||0,m=Se({mutationFn:async p=>await(await ie("POST",`/api/notifications/mark-read/${p}`)).json(),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/notifications/unread-count"]})},onError:p=>{r({variant:"destructive",title:"Error",description:`Failed to mark notification as read: ${p.message}`})}}),h=Se({mutationFn:async()=>await(await ie("POST","/api/notifications/mark-all-read")).json(),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/notifications/unread-count"]}),r({title:"Success",description:"All notifications marked as read"})},onError:p=>{r({variant:"destructive",title:"Error",description:`Failed to mark all notifications as read: ${p.message}`})}}),g=Se({mutationFn:async p=>await(await ie("DELETE",`/api/notifications/${p}`)).json(),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/notifications/unread-count"]})},onError:p=>{r({variant:"destructive",title:"Error",description:`Failed to delete notification: ${p.message}`})}});j.useEffect(()=>{if(!t)return;const y=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/notifications?userId=${t.id}`,v=new WebSocket(y);return v.onopen=()=>{console.log("WebSocket connection established"),a(!0)},v.onmessage=f=>{const b=JSON.parse(f.data);b.type==="notification"?(s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/notifications/unread-count"]}),r({title:b.data.title,description:b.data.content})):b.type==="unread_notifications"&&(s.invalidateQueries({queryKey:["/api/notifications"]}),s.invalidateQueries({queryKey:["/api/notifications/unread-count"]}))},v.onclose=()=>{console.log("WebSocket connection closed"),a(!1)},v.onerror=f=>{console.error("WebSocket error:",f),a(!1)},l(v),()=>{v.readyState===WebSocket.OPEN&&v.close()}},[t,s,r]);const x=p=>{p.isRead||m.mutate(p.id),p.actionUrl&&(window.location.href=p.actionUrl)};return t?e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"ghost",size:"icon",className:"relative",children:[n?e.jsx(QX,{className:"h-5 w-5"}):e.jsx(YX,{className:"h-5 w-5"}),u>0&&e.jsx(ae,{className:"absolute -top-1 -right-1 px-1.5 py-0.5 min-w-[1.2rem] h-5 flex items-center justify-center",variant:"destructive",children:u>99?"99+":u})]})}),e.jsxs(dn,{className:"w-80 max-h-96 overflow-y-auto p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),u>0&&e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>h.mutate(),disabled:h.isPending,children:"Mark all as read"})]}),c?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):o.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No notifications"}):e.jsx("div",{className:"divide-y",children:o.map(p=>e.jsxs("div",{className:`p-3 hover:bg-accent cursor-pointer ${p.isRead?"":"bg-accent/30"}`,onClick:()=>x(p),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:p.title}),e.jsxs("div",{className:"flex items-center gap-1",children:[!p.isRead&&e.jsx("button",{onClick:y=>{y.stopPropagation(),m.mutate(p.id)},className:"text-xs text-primary/70 hover:text-primary",children:e.jsx(Ks,{className:"h-4 w-4"})}),e.jsx("button",{onClick:y=>{y.stopPropagation(),g.mutate(p.id)},className:"text-xs text-destructive/70 hover:text-destructive",children:""})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.content}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:p.createdAt&&vt(new Date(p.createdAt),"MMM d, yyyy  HH:mm")})]},p.id))})]})]}):null}var zS=["Enter"," "],uMe=["ArrowDown","PageUp","Home"],D7=["ArrowUp","PageDown","End"],mMe=[...uMe,...D7],hMe={ltr:[...zS,"ArrowRight"],rtl:[...zS,"ArrowLeft"]},pMe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rx="Menu",[xf,fMe,xMe]=Af(rx),[dd,M7]=ws(rx,[xMe,Pm,Am]),kb=Pm(),I7=Am(),[gMe,ud]=dd(rx),[vMe,sx]=dd(rx),R7=t=>{const{__scopeMenu:r,open:s=!1,children:n,dir:a,onOpenChange:i,modal:l=!0}=t,o=kb(r),[c,d]=j.useState(null),u=j.useRef(!1),m=ds(i),h=nd(a);return j.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),e.jsx(RC,{...o,children:e.jsx(gMe,{scope:r,open:s,onOpenChange:m,content:c,onContentChange:d,children:e.jsx(vMe,{scope:r,onClose:j.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:h,modal:l,children:n})})})};R7.displayName=rx;var yMe="MenuAnchor",bk=j.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t,a=kb(s);return e.jsx(yj,{...a,...n,ref:r})});bk.displayName=yMe;var Nk="MenuPortal",[jMe,F7]=dd(Nk,{forceMount:void 0}),$7=t=>{const{__scopeMenu:r,forceMount:s,children:n,container:a}=t,i=ud(Nk,r);return e.jsx(jMe,{scope:r,forceMount:s,children:e.jsx(Rs,{present:s||i.open,children:e.jsx(bm,{asChild:!0,container:a,children:n})})})};$7.displayName=Nk;var Ea="MenuContent",[bMe,wk]=dd(Ea),L7=j.forwardRef((t,r)=>{const s=F7(Ea,t.__scopeMenu),{forceMount:n=s.forceMount,...a}=t,i=ud(Ea,t.__scopeMenu),l=sx(Ea,t.__scopeMenu);return e.jsx(xf.Provider,{scope:t.__scopeMenu,children:e.jsx(Rs,{present:n||i.open,children:e.jsx(xf.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(NMe,{...a,ref:r}):e.jsx(wMe,{...a,ref:r})})})})}),NMe=j.forwardRef((t,r)=>{const s=ud(Ea,t.__scopeMenu),n=j.useRef(null),a=$t(r,n);return j.useEffect(()=>{const i=n.current;if(i)return bj(i)},[]),e.jsx(Sk,{...t,ref:a,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:We(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),wMe=j.forwardRef((t,r)=>{const s=ud(Ea,t.__scopeMenu);return e.jsx(Sk,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),SMe=Ao("MenuContent.ScrollLock"),Sk=j.forwardRef((t,r)=>{const{__scopeMenu:s,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:g,disableOutsideScroll:x,...p}=t,y=ud(Ea,s),v=sx(Ea,s),f=kb(s),b=I7(s),N=fMe(s),[w,C]=j.useState(null),P=j.useRef(null),S=$t(r,P,y.onContentChange),A=j.useRef(0),k=j.useRef(""),D=j.useRef(0),q=j.useRef(null),z=j.useRef("right"),I=j.useRef(0),F=x?If:j.Fragment,W=x?{as:SMe,allowPinchZoom:!0}:void 0,X=Z=>{var ke,Be;const ue=k.current+Z,Ne=N().filter(Me=>!Me.disabled),J=document.activeElement,Re=(ke=Ne.find(Me=>Me.ref.current===J))==null?void 0:ke.textValue,Ee=Ne.map(Me=>Me.textValue),ut=RMe(Ee,ue,Re),ce=(Be=Ne.find(Me=>Me.textValue===ut))==null?void 0:Be.ref.current;(function Me(He){k.current=He,window.clearTimeout(A.current),He!==""&&(A.current=window.setTimeout(()=>Me(""),1e3))})(ue),ce&&setTimeout(()=>ce.focus())};j.useEffect(()=>()=>window.clearTimeout(A.current),[]),pj();const K=j.useCallback(Z=>{var Ne,J;return z.current===((Ne=q.current)==null?void 0:Ne.side)&&$Me(Z,(J=q.current)==null?void 0:J.area)},[]);return e.jsx(bMe,{scope:s,searchRef:k,onItemEnter:j.useCallback(Z=>{K(Z)&&Z.preventDefault()},[K]),onItemLeave:j.useCallback(Z=>{var ue;K(Z)||((ue=P.current)==null||ue.focus(),C(null))},[K]),onTriggerLeave:j.useCallback(Z=>{K(Z)&&Z.preventDefault()},[K]),pointerGraceTimerRef:D,onPointerGraceIntentChange:j.useCallback(Z=>{q.current=Z},[]),children:e.jsx(F,{...W,children:e.jsx(Df,{asChild:!0,trapped:a,onMountAutoFocus:We(i,Z=>{var ue;Z.preventDefault(),(ue=P.current)==null||ue.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(jm,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:g,children:e.jsx(BC,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:w,onCurrentTabStopIdChange:C,onEntryFocus:We(c,Z=>{v.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(FC,{role:"menu","aria-orientation":"vertical","data-state":tK(y.open),"data-radix-menu-content":"",dir:v.dir,...f,...p,ref:S,style:{outline:"none",...p.style},onKeyDown:We(p.onKeyDown,Z=>{const Ne=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,J=Z.ctrlKey||Z.altKey||Z.metaKey,Re=Z.key.length===1;Ne&&(Z.key==="Tab"&&Z.preventDefault(),!J&&Re&&X(Z.key));const Ee=P.current;if(Z.target!==Ee||!mMe.includes(Z.key))return;Z.preventDefault();const ce=N().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);D7.includes(Z.key)&&ce.reverse(),MMe(ce)}),onBlur:We(t.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(A.current),k.current="")}),onPointerMove:We(t.onPointerMove,gf(Z=>{const ue=Z.target,Ne=I.current!==Z.clientX;if(Z.currentTarget.contains(ue)&&Ne){const J=Z.clientX>I.current?"right":"left";z.current=J,I.current=Z.clientX}}))})})})})})})});L7.displayName=Ea;var CMe="MenuGroup",Ck=j.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t;return e.jsx(it.div,{role:"group",...n,ref:r})});Ck.displayName=CMe;var PMe="MenuLabel",B7=j.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t;return e.jsx(it.div,{...n,ref:r})});B7.displayName=PMe;var Ey="MenuItem",UD="menu.itemSelect",Ab=j.forwardRef((t,r)=>{const{disabled:s=!1,onSelect:n,...a}=t,i=j.useRef(null),l=sx(Ey,t.__scopeMenu),o=wk(Ey,t.__scopeMenu),c=$t(r,i),d=j.useRef(!1),u=()=>{const m=i.current;if(!s&&m){const h=new CustomEvent(UD,{bubbles:!0,cancelable:!0});m.addEventListener(UD,g=>n==null?void 0:n(g),{once:!0}),oC(m,h),h.defaultPrevented?d.current=!1:l.onClose()}};return e.jsx(V7,{...a,ref:c,disabled:s,onClick:We(t.onClick,u),onPointerDown:m=>{var h;(h=t.onPointerDown)==null||h.call(t,m),d.current=!0},onPointerUp:We(t.onPointerUp,m=>{var h;d.current||(h=m.currentTarget)==null||h.click()}),onKeyDown:We(t.onKeyDown,m=>{const h=o.searchRef.current!=="";s||h&&m.key===" "||zS.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Ab.displayName=Ey;var V7=j.forwardRef((t,r)=>{const{__scopeMenu:s,disabled:n=!1,textValue:a,...i}=t,l=wk(Ey,s),o=I7(s),c=j.useRef(null),d=$t(r,c),[u,m]=j.useState(!1),[h,g]=j.useState("");return j.useEffect(()=>{const x=c.current;x&&g((x.textContent??"").trim())},[i.children]),e.jsx(xf.ItemSlot,{scope:s,disabled:n,textValue:a??h,children:e.jsx(VC,{asChild:!0,...o,focusable:!n,children:e.jsx(it.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:d,onPointerMove:We(t.onPointerMove,gf(x=>{n?l.onItemLeave(x):(l.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:We(t.onPointerLeave,gf(x=>l.onItemLeave(x))),onFocus:We(t.onFocus,()=>m(!0)),onBlur:We(t.onBlur,()=>m(!1))})})})}),kMe="MenuCheckboxItem",U7=j.forwardRef((t,r)=>{const{checked:s=!1,onCheckedChange:n,...a}=t;return e.jsx(W7,{scope:t.__scopeMenu,checked:s,children:e.jsx(Ab,{role:"menuitemcheckbox","aria-checked":Dy(s)?"mixed":s,...a,ref:r,"data-state":kk(s),onSelect:We(a.onSelect,()=>n==null?void 0:n(Dy(s)?!0:!s),{checkForDefaultPrevented:!1})})})});U7.displayName=kMe;var q7="MenuRadioGroup",[AMe,_Me]=dd(q7,{value:void 0,onValueChange:()=>{}}),z7=j.forwardRef((t,r)=>{const{value:s,onValueChange:n,...a}=t,i=ds(n);return e.jsx(AMe,{scope:t.__scopeMenu,value:s,onValueChange:i,children:e.jsx(Ck,{...a,ref:r})})});z7.displayName=q7;var K7="MenuRadioItem",H7=j.forwardRef((t,r)=>{const{value:s,...n}=t,a=_Me(K7,t.__scopeMenu),i=s===a.value;return e.jsx(W7,{scope:t.__scopeMenu,checked:i,children:e.jsx(Ab,{role:"menuitemradio","aria-checked":i,...n,ref:r,"data-state":kk(i),onSelect:We(n.onSelect,()=>{var l;return(l=a.onValueChange)==null?void 0:l.call(a,s)},{checkForDefaultPrevented:!1})})})});H7.displayName=K7;var Pk="MenuItemIndicator",[W7,TMe]=dd(Pk,{checked:!1}),G7=j.forwardRef((t,r)=>{const{__scopeMenu:s,forceMount:n,...a}=t,i=TMe(Pk,s);return e.jsx(Rs,{present:n||Dy(i.checked)||i.checked===!0,children:e.jsx(it.span,{...a,ref:r,"data-state":kk(i.checked)})})});G7.displayName=Pk;var OMe="MenuSeparator",Y7=j.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t;return e.jsx(it.div,{role:"separator","aria-orientation":"horizontal",...n,ref:r})});Y7.displayName=OMe;var EMe="MenuArrow",Q7=j.forwardRef((t,r)=>{const{__scopeMenu:s,...n}=t,a=kb(s);return e.jsx($C,{...a,...n,ref:r})});Q7.displayName=EMe;var DMe="MenuSub",[XFe,X7]=dd(DMe),Ah="MenuSubTrigger",Z7=j.forwardRef((t,r)=>{const s=ud(Ah,t.__scopeMenu),n=sx(Ah,t.__scopeMenu),a=X7(Ah,t.__scopeMenu),i=wk(Ah,t.__scopeMenu),l=j.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:c}=i,d={__scopeMenu:t.__scopeMenu},u=j.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return j.useEffect(()=>u,[u]),j.useEffect(()=>{const m=o.current;return()=>{window.clearTimeout(m),c(null)}},[o,c]),e.jsx(bk,{asChild:!0,...d,children:e.jsx(V7,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":a.contentId,"data-state":tK(s.open),...t,ref:nj(r,a.onTriggerChange),onClick:m=>{var h;(h=t.onClick)==null||h.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:We(t.onPointerMove,gf(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!s.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{s.onOpenChange(!0),u()},100))})),onPointerLeave:We(t.onPointerLeave,gf(m=>{var g,x;u();const h=(g=s.content)==null?void 0:g.getBoundingClientRect();if(h){const p=(x=s.content)==null?void 0:x.dataset.side,y=p==="right",v=y?-5:5,f=h[y?"left":"right"],b=h[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+v,y:m.clientY},{x:f,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:f,y:h.bottom}],side:p}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:We(t.onKeyDown,m=>{var g;const h=i.searchRef.current!=="";t.disabled||h&&m.key===" "||hMe[n.dir].includes(m.key)&&(s.onOpenChange(!0),(g=s.content)==null||g.focus(),m.preventDefault())})})})});Z7.displayName=Ah;var J7="MenuSubContent",eK=j.forwardRef((t,r)=>{const s=F7(Ea,t.__scopeMenu),{forceMount:n=s.forceMount,...a}=t,i=ud(Ea,t.__scopeMenu),l=sx(Ea,t.__scopeMenu),o=X7(J7,t.__scopeMenu),c=j.useRef(null),d=$t(r,c);return e.jsx(xf.Provider,{scope:t.__scopeMenu,children:e.jsx(Rs,{present:n||i.open,children:e.jsx(xf.Slot,{scope:t.__scopeMenu,children:e.jsx(Sk,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:d,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var m;l.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:We(t.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:We(t.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:We(t.onKeyDown,u=>{var g;const m=u.currentTarget.contains(u.target),h=pMe[l.dir].includes(u.key);m&&h&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),u.preventDefault())})})})})})});eK.displayName=J7;function tK(t){return t?"open":"closed"}function Dy(t){return t==="indeterminate"}function kk(t){return Dy(t)?"indeterminate":t?"checked":"unchecked"}function MMe(t){const r=document.activeElement;for(const s of t)if(s===r||(s.focus(),document.activeElement!==r))return}function IMe(t,r){return t.map((s,n)=>t[(r+n)%t.length])}function RMe(t,r,s){const a=r.length>1&&Array.from(r).every(d=>d===r[0])?r[0]:r,i=s?t.indexOf(s):-1;let l=IMe(t,Math.max(i,0));a.length===1&&(l=l.filter(d=>d!==s));const c=l.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==s?c:void 0}function FMe(t,r){const{x:s,y:n}=t;let a=!1;for(let i=0,l=r.length-1;i<r.length;l=i++){const o=r[i],c=r[l],d=o.x,u=o.y,m=c.x,h=c.y;u>n!=h>n&&s<(m-d)*(n-u)/(h-u)+d&&(a=!a)}return a}function $Me(t,r){if(!r)return!1;const s={x:t.clientX,y:t.clientY};return FMe(s,r)}function gf(t){return r=>r.pointerType==="mouse"?t(r):void 0}var LMe=R7,BMe=bk,VMe=$7,UMe=L7,qMe=Ck,zMe=B7,KMe=Ab,HMe=U7,WMe=z7,GMe=H7,YMe=G7,QMe=Y7,XMe=Q7,ZMe=Z7,JMe=eK,_b="DropdownMenu",[eIe,ZFe]=ws(_b,[M7]),En=M7(),[tIe,rK]=eIe(_b),sK=t=>{const{__scopeDropdownMenu:r,children:s,dir:n,open:a,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,c=En(r),d=j.useRef(null),[u,m]=Hn({prop:a,defaultProp:i??!1,onChange:l,caller:_b});return e.jsx(tIe,{scope:r,triggerId:da(),triggerRef:d,contentId:da(),open:u,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(h=>!h),[m]),modal:o,children:e.jsx(LMe,{...c,open:u,onOpenChange:m,dir:n,modal:o,children:s})})};sK.displayName=_b;var nK="DropdownMenuTrigger",aK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,disabled:n=!1,...a}=t,i=rK(nK,s),l=En(s);return e.jsx(BMe,{asChild:!0,...l,children:e.jsx(it.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:nj(r,i.triggerRef),onPointerDown:We(t.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:We(t.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});aK.displayName=nK;var rIe="DropdownMenuPortal",iK=t=>{const{__scopeDropdownMenu:r,...s}=t,n=En(r);return e.jsx(VMe,{...n,...s})};iK.displayName=rIe;var lK="DropdownMenuContent",oK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=rK(lK,s),i=En(s),l=j.useRef(!1);return e.jsx(UMe,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:r,onCloseAutoFocus:We(t.onCloseAutoFocus,o=>{var c;l.current||(c=a.triggerRef.current)==null||c.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:We(t.onInteractOutside,o=>{const c=o.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oK.displayName=lK;var sIe="DropdownMenuGroup",nIe=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(qMe,{...a,...n,ref:r})});nIe.displayName=sIe;var aIe="DropdownMenuLabel",cK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(zMe,{...a,...n,ref:r})});cK.displayName=aIe;var iIe="DropdownMenuItem",dK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(KMe,{...a,...n,ref:r})});dK.displayName=iIe;var lIe="DropdownMenuCheckboxItem",uK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(HMe,{...a,...n,ref:r})});uK.displayName=lIe;var oIe="DropdownMenuRadioGroup",cIe=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(WMe,{...a,...n,ref:r})});cIe.displayName=oIe;var dIe="DropdownMenuRadioItem",mK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(GMe,{...a,...n,ref:r})});mK.displayName=dIe;var uIe="DropdownMenuItemIndicator",hK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(YMe,{...a,...n,ref:r})});hK.displayName=uIe;var mIe="DropdownMenuSeparator",pK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(QMe,{...a,...n,ref:r})});pK.displayName=mIe;var hIe="DropdownMenuArrow",pIe=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(XMe,{...a,...n,ref:r})});pIe.displayName=hIe;var fIe="DropdownMenuSubTrigger",fK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(ZMe,{...a,...n,ref:r})});fK.displayName=fIe;var xIe="DropdownMenuSubContent",xK=j.forwardRef((t,r)=>{const{__scopeDropdownMenu:s,...n}=t,a=En(s);return e.jsx(JMe,{...a,...n,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xK.displayName=xIe;var gIe=sK,vIe=aK,yIe=iK,gK=oK,vK=cK,yK=dK,jK=uK,bK=mK,NK=hK,wK=pK,SK=fK,CK=xK;const KS=gIe,HS=vIe,jIe=j.forwardRef(({className:t,inset:r,children:s,...n},a)=>e.jsxs(SK,{ref:a,className:De("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...n,children:[s,e.jsx(ia,{className:"ml-auto h-4 w-4"})]}));jIe.displayName=SK.displayName;const bIe=j.forwardRef(({className:t,...r},s)=>e.jsx(CK,{ref:s,className:De("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));bIe.displayName=CK.displayName;const My=j.forwardRef(({className:t,sideOffset:r=4,...s},n)=>e.jsx(yIe,{children:e.jsx(gK,{ref:n,sideOffset:r,className:De("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));My.displayName=gK.displayName;const ol=j.forwardRef(({className:t,inset:r,...s},n)=>e.jsx(yK,{ref:n,className:De("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...s}));ol.displayName=yK.displayName;const NIe=j.forwardRef(({className:t,children:r,checked:s,...n},a)=>e.jsxs(jK,{ref:a,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(NK,{children:e.jsx(Ks,{className:"h-4 w-4"})})}),r]}));NIe.displayName=jK.displayName;const wIe=j.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(bK,{ref:n,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(NK,{children:e.jsx(b$,{className:"h-2 w-2 fill-current"})})}),r]}));wIe.displayName=bK.displayName;const WS=j.forwardRef(({className:t,inset:r,...s},n)=>e.jsx(vK,{ref:n,className:De("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...s}));WS.displayName=vK.displayName;const GS=j.forwardRef(({className:t,...r},s)=>e.jsx(wK,{ref:s,className:De("-mx-1 my-1 h-px bg-muted",t),...r}));GS.displayName=wK.displayName;function SIe(){return NF.useSyncExternalStore(CIe,()=>!0,()=>!1)}function CIe(){return()=>{}}var Ak="Avatar",[PIe,JFe]=ws(Ak),[kIe,PK]=PIe(Ak),kK=j.forwardRef((t,r)=>{const{__scopeAvatar:s,...n}=t,[a,i]=j.useState("idle");return e.jsx(kIe,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(it.span,{...n,ref:r})})});kK.displayName=Ak;var AK="AvatarImage",_K=j.forwardRef((t,r)=>{const{__scopeAvatar:s,src:n,onLoadingStatusChange:a=()=>{},...i}=t,l=PK(AK,s),o=AIe(n,i),c=ds(d=>{a(d),l.onImageLoadingStatusChange(d)});return ms(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?e.jsx(it.img,{...i,ref:r,src:n}):null});_K.displayName=AK;var TK="AvatarFallback",OK=j.forwardRef((t,r)=>{const{__scopeAvatar:s,delayMs:n,...a}=t,i=PK(TK,s),[l,o]=j.useState(n===void 0);return j.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(c)}},[n]),l&&i.imageLoadingStatus!=="loaded"?e.jsx(it.span,{...a,ref:r}):null});OK.displayName=TK;function qD(t,r){return t?r?(t.src!==r&&(t.src=r),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function AIe(t,{referrerPolicy:r,crossOrigin:s}){const n=SIe(),a=j.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[l,o]=j.useState(()=>qD(i,t));return ms(()=>{o(qD(i,t))},[i,t]),ms(()=>{const c=m=>()=>{o(m)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),r&&(i.referrerPolicy=r),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,s,r]),l}var EK=kK,DK=_K,MK=OK;const hm=j.forwardRef(({className:t,...r},s)=>e.jsx(EK,{ref:s,className:De("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r}));hm.displayName=EK.displayName;const _Ie=j.forwardRef(({className:t,...r},s)=>e.jsx(DK,{ref:s,className:De("aspect-square h-full w-full",t),...r}));_Ie.displayName=DK.displayName;const pm=j.forwardRef(({className:t,...r},s)=>e.jsx(MK,{ref:s,className:De("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r}));pm.displayName=MK.displayName;function TIe(){const{user:t,logoutMutation:r}=dt(),s=n=>n.split(" ").map(a=>a.charAt(0)).join("").toUpperCase();return e.jsx("header",{className:"bg-white border-b border-neutral-200 shadow-sm fixed top-0 left-0 right-0 z-40",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"lg:hidden text-neutral-600 hover:text-neutral-900 focus:outline-none mr-2","aria-label":"Open sidebar",onClick:()=>{const n=document.querySelector("aside");n&&n.classList.toggle("hidden")},children:e.jsx(C$,{})}),e.jsx(Ot,{href:"/",children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center text-white font-bold",children:"TN"}),e.jsx("h1",{className:"ml-2 font-bold text-xl text-primary",children:"TN Services"})]})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(VD,{}),e.jsx(_,{variant:"ghost",size:"icon",className:"text-neutral-600 hover:text-neutral-900","aria-label":"Messages",children:e.jsx(Tu,{})}),e.jsxs(KS,{children:[e.jsx(HS,{asChild:!0,children:e.jsxs(_,{variant:"ghost",className:"flex items-center space-x-2 focus:outline-none",children:[e.jsx(hm,{className:"h-8 w-8",children:e.jsx(pm,{children:t!=null&&t.fullName?s(t.fullName):"U"})}),e.jsx("span",{className:"hidden md:block text-sm font-medium text-neutral-700",children:(t==null?void 0:t.fullName)||"User"}),e.jsx(ij,{className:"h-4 w-4 text-neutral-500"})]})}),e.jsxs(My,{align:"end",children:[e.jsx(WS,{children:"My Account"}),e.jsx(ol,{asChild:!0,children:e.jsx(Ot,{href:"/settings",children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(tn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]})})}),e.jsx(ol,{asChild:!0,children:e.jsx(Ot,{href:"/settings",children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(Fc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})})}),e.jsx(GS,{}),e.jsxs(ol,{className:"flex items-center cursor-pointer",onClick:()=>r.mutate(),children:[e.jsx(nv,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sign out"})]})]})]})]}),e.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[e.jsx(VD,{}),e.jsxs(KS,{children:[e.jsx(HS,{asChild:!0,children:e.jsx(_,{variant:"ghost",size:"icon",children:e.jsx(hm,{className:"h-8 w-8",children:e.jsx(pm,{children:t!=null&&t.fullName?s(t.fullName):"U"})})})}),e.jsxs(My,{align:"end",children:[e.jsx(WS,{children:"My Account"}),e.jsx(ol,{asChild:!0,children:e.jsx(Ot,{href:"/settings",children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(tn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]})})}),e.jsx(ol,{asChild:!0,children:e.jsx(Ot,{href:"/settings",children:e.jsxs("div",{className:"flex items-center cursor-pointer",children:[e.jsx(Fc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]})})}),e.jsx(GS,{}),e.jsxs(ol,{className:"flex items-center cursor-pointer",onClick:()=>r.mutate(),children:[e.jsx(nv,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sign out"})]})]})]})]})]})]})})})}const IK=j.createContext({isCollapsed:!1,setIsCollapsed:()=>{}}),Tb=()=>j.useContext(IK);function nt({href:t,icon:r,children:s,show:n=!0,tooltip:a}){const[i]=br(),{isCollapsed:l}=Tb(),o=i===t;return n?e.jsx(Ot,{href:t,children:e.jsxs("div",{className:De("relative px-3 py-2 rounded-md flex items-center text-sm font-medium cursor-pointer transition-all duration-200 group",o?"bg-primary text-white":"text-neutral-700 hover:bg-neutral-100",l?"justify-center":""),title:l?a||(s==null?void 0:s.toString()):"",children:[e.jsx("span",{className:De("text-lg flex-shrink-0",l?"":"mr-3"),children:r}),e.jsx("span",{className:De("transition-all duration-200 whitespace-nowrap",l?"opacity-0 w-0 overflow-hidden":"opacity-100"),children:s}),l&&e.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:a||s})]})}):null}function OIe({children:t}){const[r,s]=j.useState(!1);return e.jsx(IK.Provider,{value:{isCollapsed:r,setIsCollapsed:s},children:t})}function EIe(){const{isCollapsed:t,setIsCollapsed:r}=Tb();return e.jsx("button",{onClick:()=>r(!t),className:De("fixed top-20 z-50 bg-white border border-gray-200 rounded-md p-2 shadow-lg hover:shadow-xl transition-all duration-200",t?"left-20":"left-60"),title:t?"Expand sidebar":"Collapse sidebar",children:t?e.jsx(ia,{className:"h-4 w-4 text-gray-600"}):e.jsx(gp,{className:"h-4 w-4 text-gray-600"})})}function DIe(){const{user:t,logoutMutation:r}=dt(),s=hj(),{isCollapsed:n}=Tb(),[a,i]=j.useState(!1),[l]=br();j.useEffect(()=>{i(!1)},[l]);const o=(t==null?void 0:t.userType)==="admin",c=(t==null?void 0:t.userType)==="branch_manager",d=(t==null?void 0:t.userType)==="taluk_manager",u=(t==null?void 0:t.userType)==="service_provider",m=o||c||d,h=u&&s.isApproved&&s.providerType==="farmer",g=u&&s.isApproved&&s.providerType==="manufacturer",x=o||m,p=y=>y?{farmer:"Farmer",manufacturer:"Manufacturer",recycling_agent:"Recycling Agent",booking_agent:"Booking Agent",rental_provider:"Rental Provider",transport_service:"Transport Service",taxi_service:"Taxi Service"}[y]||y:"Provider";return e.jsxs(e.Fragment,{children:[e.jsx(EIe,{}),e.jsx("aside",{className:De("fixed inset-y-0 left-0 z-40 bg-white border-r border-neutral-200 pt-16 hidden lg:block transition-all duration-300 ease-in-out",n?"w-16":"w-64"),children:e.jsx("div",{className:"h-full flex flex-col overflow-y-auto",children:e.jsxs("nav",{className:De("flex-1 py-4 space-y-1",n?"px-2":"px-4"),children:[!n&&e.jsxs("div",{className:"mb-6 px-3 py-3 bg-primary/10 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-primary-foreground",children:o?"Admin":c?"Branch Manager":d?"Taluk Manager":(t==null?void 0:t.userType)==="service_agent"?"Service Agent":u&&s.isApproved?p(s.providerType):u?"Provider (Pending)":"Customer"}),e.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[o&&"Tamil Nadu (All Districts)",c&&(t==null?void 0:t.district),d&&`${t==null?void 0:t.district} - ${t==null?void 0:t.taluk}`,(t==null?void 0:t.userType)==="service_agent"&&`${t==null?void 0:t.pincode} Pincode Area`,u&&s.isApproved&&"Approved Service Provider",u&&!s.isApproved&&"Registration Under Review",(t==null?void 0:t.userType)==="customer"&&(t==null?void 0:t.username)]})]}),e.jsx(nt,{href:"/",icon:e.jsx(sv,{}),children:"Dashboard"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Grocery Services"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/customer/grocery-browse",icon:e.jsx(Qa,{}),children:"Browse Groceries"}),e.jsx(nt,{href:"/admin/grocery/categories",icon:e.jsx(Ii,{}),show:o,tooltip:"Grocery Categories",children:"Grocery Categories"}),e.jsx(nt,{href:"/admin/grocery/products",icon:e.jsx(ft,{}),show:o,tooltip:"Grocery Products",children:"Grocery Products"}),e.jsx(nt,{href:"/admin/grocery/farmer-product-approvals",icon:e.jsx(gd,{}),show:o,tooltip:"Product Approvals",children:"Product Approvals"}),e.jsx(nt,{href:"/provider/add-grocery-product",icon:e.jsx(Ft,{}),show:h,tooltip:"Add Product",children:"Add Product"}),e.jsx(nt,{href:"/provider/my-grocery-products",icon:e.jsx(Vs,{}),show:h,tooltip:"My Products",children:"My Products"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Local Products"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/local-products",icon:e.jsx(Ii,{}),children:"Browse Local Products"}),e.jsx(nt,{href:"/admin/local-products",icon:e.jsx(vg,{}),show:o,tooltip:"Manage Local Products",children:"Manage Products"}),e.jsx(nt,{href:"/provider/local-products/new",icon:e.jsx(Ft,{}),show:g,tooltip:"Add Local Product",children:"Add Product"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Rental Services"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/rental-browse",icon:e.jsx(Os,{}),children:"Browse Equipment"}),e.jsx(nt,{href:"/admin/rental-categories",icon:e.jsx(ft,{}),show:o,tooltip:"Rental Categories",children:"Rental Categories"}),e.jsx(nt,{href:"/admin/rental-management",icon:e.jsx(Os,{}),show:o,tooltip:"Manage Equipment",children:"Manage Equipment"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Transport Services"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/travel-services",icon:e.jsx(ki,{}),children:"Travel Services"}),e.jsx(nt,{href:"/taxi-browse",icon:e.jsx(Et,{}),children:"Taxi Services"}),e.jsx(nt,{href:"/delivery-browse",icon:e.jsx($n,{}),children:"Delivery Services"}),e.jsx(nt,{href:"/taxi",icon:e.jsx(Et,{}),show:o,tooltip:"Taxi Management",children:"Taxi Management"}),e.jsx(nt,{href:"/delivery",icon:e.jsx($n,{}),show:o,tooltip:"Delivery Management",children:"Delivery Management"}),e.jsx(nt,{href:"/provider/taxi-vehicles",icon:e.jsx(Et,{}),show:u,tooltip:"My Vehicles",children:"My Taxi Vehicles"}),e.jsx(nt,{href:"/provider/delivery-registration",icon:e.jsx($n,{}),show:u,tooltip:"Delivery Registration",children:"Delivery Agent Registration"}),e.jsx(nt,{href:"/admin/taxi-vehicle-approvals",icon:e.jsx(gd,{}),show:o,tooltip:"Vehicle Approvals",children:"Vehicle Approvals"}),e.jsx(nt,{href:"/admin/delivery-categories",icon:e.jsx(ft,{}),show:o,tooltip:"Delivery Categories",children:"Delivery Categories"}),e.jsx(nt,{href:"/admin/delivery-agent-approvals",icon:e.jsx(gd,{}),show:o,tooltip:"Agent Approvals",children:"Delivery Agent Approvals"}),m&&!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"System Management"})}),m&&n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/branch-managers",icon:e.jsx(rr,{}),show:o,tooltip:"Branch Managers",children:"Branch Managers"}),e.jsx(nt,{href:"/taluk-managers",icon:e.jsx(E_,{}),show:o||c,tooltip:"Taluk Managers",children:"Taluk Managers"}),e.jsx(nt,{href:"/service-agents",icon:e.jsx(Kw,{}),show:m,tooltip:"Service Agents",children:"Service Agents"}),e.jsx(nt,{href:"/admin/service-providers",icon:e.jsx(vg,{}),show:o,tooltip:"Service Providers",children:"Service Providers"}),e.jsx(nt,{href:"/commission-config",icon:e.jsx(iv,{}),show:o,tooltip:"Commission Setup",children:"Commission Setup"}),e.jsx(nt,{href:"/analytics",icon:e.jsx(kx,{}),show:m,tooltip:"Analytics",children:"Analytics Dashboard"}),e.jsx(nt,{href:"/hierarchy",icon:e.jsx(__,{}),show:m,tooltip:"Organization",children:"Organization Hierarchy"}),!n&&m&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Video Management"})}),n&&m&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/video-upload",icon:e.jsx(Eu,{}),show:m,tooltip:"Upload Videos",children:"Upload Videos"}),e.jsx(nt,{href:"/video-analytics",icon:e.jsx(kx,{}),show:m,tooltip:"Video Analytics",children:"Video Analytics"}),e.jsx(nt,{href:"/video-library",icon:e.jsx(Ou,{}),show:m,tooltip:"Video Library",children:"Video Library"}),e.jsx(nt,{href:"/admin/video-approvals",icon:e.jsx(Mt,{}),show:o,tooltip:"Video Approvals",children:"Video Approvals"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Utilities & Others"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/recharge",icon:e.jsx(oa,{}),children:"Recharge Services"}),e.jsx(nt,{href:"/recharge/electricity",icon:e.jsx(k_,{}),children:"Utility Services"}),e.jsx(nt,{href:"/recycling",icon:e.jsx(zn,{}),children:"Recycling Services"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Personal Services"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/chat",icon:e.jsx(Tu,{}),children:"Chat & Support"}),e.jsx(nt,{href:"/wallet",icon:e.jsx(Hw,{}),children:"Wallet"}),e.jsx(nt,{href:"/commissions",icon:e.jsx(fa,{}),tooltip:"My Commissions",children:"My Commissions"}),!n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Video Center"})}),n&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("div",{className:"w-8 h-px bg-neutral-300 mx-auto"})}),e.jsx(nt,{href:"/video-library",icon:e.jsx(Ou,{}),children:"Video Library"}),e.jsx(nt,{href:"/video-management",icon:e.jsx(Eu,{}),show:x,tooltip:"Video Management",children:"Video Management"}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-neutral-200",children:[e.jsx(nt,{href:"/profile",icon:e.jsx(Fc,{}),children:"Profile Settings"}),e.jsxs("button",{onClick:()=>r.mutate(),className:De("w-full px-3 py-2 rounded-md flex items-center text-sm font-medium cursor-pointer transition-all duration-200 text-red-600 hover:bg-red-50",n?"justify-center":""),disabled:r.isPending,title:n?"Logout":"",children:[e.jsx("span",{className:De("text-lg flex-shrink-0",n?"":"mr-3"),children:e.jsx(nv,{})}),e.jsx("span",{className:De("transition-all duration-200 whitespace-nowrap",n?"opacity-0 w-0 overflow-hidden":"opacity-100"),children:r.isPending?"Logging out...":"Logout"})]})]})]})})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-neutral-900/50 lg:hidden",onClick:()=>i(!1)}),e.jsx("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-neutral-200 pt-16 lg:hidden",children:e.jsxs("div",{className:"h-full flex flex-col overflow-y-auto",children:[e.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1",children:[e.jsxs("div",{className:"mb-6 px-3 py-3 bg-primary/10 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-primary-foreground",children:o?"Admin":c?"Branch Manager":d?"Taluk Manager":(t==null?void 0:t.userType)==="service_agent"?"Service Agent":u&&s.isApproved?p(s.providerType):u?"Provider (Pending)":"Customer"}),e.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[o&&"Tamil Nadu (All Districts)",c&&(t==null?void 0:t.district),d&&`${t==null?void 0:t.district} - ${t==null?void 0:t.taluk}`,(t==null?void 0:t.userType)==="service_agent"&&`${t==null?void 0:t.pincode} Pincode Area`,(t==null?void 0:t.userType)==="customer"&&(t==null?void 0:t.username)]})]}),e.jsx(nt,{href:"/",icon:e.jsx(sv,{}),children:"Dashboard"}),m&&e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Management"})}),e.jsx(nt,{href:"/branch-managers",icon:e.jsx(rr,{}),show:o,children:"Branch Managers"}),e.jsx(nt,{href:"/taluk-managers",icon:e.jsx(E_,{}),show:o||c,children:"Taluk Managers"}),e.jsx(nt,{href:"/service-agents",icon:e.jsx(Kw,{}),show:m,children:"Service Agents"}),e.jsx(nt,{href:"/commission-config",icon:e.jsx(iv,{}),show:o,children:"Commission Setup"}),e.jsx(nt,{href:"/commissions",icon:e.jsx(fa,{}),show:!0,children:"My Commissions"}),e.jsx(nt,{href:"/commission-dashboard",icon:e.jsx(kx,{}),show:o,children:"Commission Dashboard"}),e.jsx(nt,{href:"/analytics",icon:e.jsx(kx,{}),show:m,children:"Analytics Dashboard"}),e.jsx(nt,{href:"/hierarchy",icon:e.jsx(__,{}),show:m,children:"Organization Hierarchy"}),e.jsx(nt,{href:"/manager-applications",icon:e.jsx(gd,{}),show:o,children:"Manager Applications"}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Product Management"})}),e.jsx(nt,{href:"/admin/grocery/categories",icon:e.jsx(Ii,{}),show:o,children:"Grocery Categories"}),e.jsx(nt,{href:"/admin/grocery/products",icon:e.jsx(Qa,{}),show:o,children:"Grocery Products"}),e.jsx(nt,{href:"/admin/grocery/product-requests",icon:e.jsx(gd,{}),show:o,children:"Product Requests"}),e.jsx(nt,{href:"/admin/grocery/farmer-listings",icon:e.jsx(Vs,{}),show:o,children:"Farmer Product Listings"}),e.jsx(nt,{href:"/admin/local-products",icon:e.jsx(vg,{}),show:o,children:"Local Products"})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Farmer Portal"})}),e.jsx(nt,{href:"/farmer/add-product",icon:e.jsx(Qa,{}),show:h,children:"Add Product Listing"}),e.jsx(nt,{href:"/farmer/request-product",icon:e.jsx(gd,{}),show:h,children:"Request New Product"}),e.jsx(nt,{href:"/farmer/my-listings",icon:e.jsx(Vs,{}),show:h,children:"My Product Listings"}),e.jsx(nt,{href:"/provider/add-grocery-product",icon:e.jsx(Qa,{}),show:h,children:"Add Grocery Product"}),e.jsx(nt,{href:"/provider/my-grocery-products",icon:e.jsx(Qa,{}),show:h,children:"My Grocery Products"})]}),((t==null?void 0:t.userType)==="customer"||(t==null?void 0:t.userType)!=="service_provider"&&!o)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Services"})}),e.jsx(nt,{href:"/recharge/",icon:e.jsx(oa,{}),children:"Recharges & Bills"}),e.jsx(nt,{href:"/travel",icon:e.jsx(ki,{}),children:"Travel Bookings"}),e.jsx(nt,{href:"/rental",icon:e.jsx(Os,{}),children:"Rental Services"}),e.jsx(nt,{href:"/taxi",icon:e.jsx(Et,{}),children:"Taxi Services"}),e.jsx(nt,{href:"/delivery",icon:e.jsx($n,{}),children:"Delivery Management"}),e.jsx(nt,{href:"/customer/grocery-browse",icon:e.jsx(Qa,{}),children:"Browse Grocery Products"}),e.jsx(nt,{href:"/farm-listings",icon:e.jsx(Vs,{}),children:"Farm Products"})]}),e.jsx("div",{className:"pt-5 pb-2",children:e.jsx("p",{className:"px-3 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Additional"})}),e.jsx(nt,{href:"/wallet",icon:e.jsx(Hw,{}),children:"Wallet Management"}),e.jsx(nt,{href:"/utility",icon:e.jsx(k_,{}),children:"Utility Bills"}),e.jsx(nt,{href:"/chat",icon:e.jsx(Tu,{}),children:"Chat System"}),e.jsx(nt,{href:"/recycling",icon:e.jsx(zn,{}),children:"Recycling"})]}),e.jsx("div",{className:"p-4 border-t border-neutral-200",children:e.jsxs("button",{onClick:()=>r.mutate(),className:"text-sm font-medium text-neutral-700 hover:text-primary flex items-center",children:[e.jsx(nv,{size:18,className:"mr-2"}),e.jsx("span",{children:"Sign out"})]})})]})})]})]})}function MIe(){const[t]=br(),{user:r}=dt(),s=l=>t===l,n=(r==null?void 0:r.userType)==="admin",a=()=>{const l=new CustomEvent("toggle-sidebar");window.dispatchEvent(l)},i=()=>n?e.jsxs(e.Fragment,{children:[e.jsx(Ot,{href:"/",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/")?"text-primary":"text-neutral-500"),children:[e.jsx(sv,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Dashboard"})]})}),e.jsx(Ot,{href:"/admin/grocery/categories",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/admin/grocery/categories")?"text-primary":"text-neutral-500"),children:[e.jsx(Ii,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Categories"})]})}),e.jsx(Ot,{href:"/admin/grocery/products",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/admin/grocery/products")?"text-primary":"text-neutral-500"),children:[e.jsx(Qa,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Products"})]})}),e.jsx(Ot,{href:"/admin/local-products",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/admin/local-products")?"text-primary":"text-neutral-500"),children:[e.jsx(vg,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Local Prods"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ot,{href:"/",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/")?"text-primary":"text-neutral-500"),children:[e.jsx(sv,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Dashboard"})]})}),e.jsx(Ot,{href:"/recharge",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/recharge")?"text-primary":"text-neutral-500"),children:[e.jsx(oa,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Recharge"})]})}),e.jsx(Ot,{href:"/grocery",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/grocery")?"text-primary":"text-neutral-500"),children:[e.jsx(Ii,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Grocery"})]})}),e.jsx(Ot,{href:"/delivery",children:e.jsxs("div",{className:De("flex flex-col items-center py-1 cursor-pointer",s("/delivery")?"text-primary":"text-neutral-500"),children:[e.jsx($n,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"Delivery"})]})})]});return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 p-2 lg:hidden z-30",children:e.jsxs("div",{className:"grid grid-cols-5 gap-1",children:[i(),e.jsxs("button",{onClick:a,className:"flex flex-col items-center py-1 text-neutral-500",children:[e.jsx(C$,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs mt-1",children:"More"})]})]})})}function IIe(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(O,{className:"w-full max-w-md mx-4",children:e.jsxs(E,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(lr,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const RIe=Kt({username:R().min(1,"Username is required"),password:R().min(1,"Password is required")}),FIe=Kt({username:R().min(3,"Username must be at least 3 characters"),password:R().min(6,"Password must be at least 6 characters"),confirmPassword:R().min(6,"Password must be at least 6 characters"),fullName:R().min(1,"Full name is required"),district:R().min(1,"District is required"),taluk:R().min(1,"Taluk is required"),pincode:R().min(6,"Pincode must be 6 digits").max(6,"Pincode must be 6 digits"),userType:R().default("customer"),providerType:R().optional(),businessName:R().optional(),businessDescription:R().optional()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}).refine(t=>t.userType==="service_provider"?t.providerType&&t.businessName:!0,{message:"Provider type and business name are required for service providers",path:["providerType"]});function $Ie(){const[t,r]=j.useState("login"),{user:s,loginMutation:n,registerMutation:a}=dt(),[,i]=br(),[l,o]=j.useState("customer"),[c,d]=j.useState("branch_manager");j.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("registerAs");p==="provider"?(o("provider"),r("register")):p==="manager"&&(o("manager"),r("register"))},[]),j.useEffect(()=>{s&&(s.userType==="provider"?i("/provider-dashboard"):i("/dashboard"))},[s,i]);const u=Gt({resolver:Yt(RIe),defaultValues:{username:"",password:""}}),m=Gt({resolver:Yt(FIe),defaultValues:{username:"",password:"",confirmPassword:"",fullName:"",district:"",taluk:"",pincode:"",userType:"customer",providerType:"",businessName:"",businessDescription:""}});function h(x){n.mutate(x)}function g(x){const p={...x,email:"",phone:""};if(l==="manager"){i("/manager-registration");return}else{const y={...p,userType:l==="provider"?"service_provider":l};a.mutate(y)}}return e.jsxs("div",{className:"min-h-screen flex flex-col lg:flex-row bg-neutral-50",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 lg:p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-6 text-center lg:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"NALAMINI Service Platform"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:"One platform for all services across Tamil Nadu"})]}),e.jsxs(nr,{value:t,onValueChange:r,className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsx(Ae,{value:"login",children:"Login"}),e.jsx(Ae,{value:"register",children:"Register"})]}),e.jsx(Ve,{value:"login",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Sign In"}),e.jsx(he,{children:"Enter your credentials to access your account"})]}),e.jsx(E,{children:e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(h),className:"space-y-4",children:[e.jsx(U,{control:u.control,name:"username",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your username",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"password",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password"}),e.jsx(V,{children:e.jsx($,{type:"password",placeholder:"Enter your password",...x})}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})}),e.jsx(pr,{className:"flex flex-col",children:e.jsxs("p",{className:"text-sm text-neutral-500 text-center",children:["Don't have an account?"," ",e.jsx(_,{variant:"link",onClick:()=>r("register"),className:"p-0",children:"Register here"})]})})]})}),e.jsx(Ve,{value:"register",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Create Account"}),e.jsx(he,{children:"Register for a new account to access TN Services"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"I want to register as:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer flex flex-col items-center transition-all ${l==="customer"?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o("customer"),children:[e.jsx("div",{className:"p-3 rounded-full bg-primary/10 mb-2",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-primary",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsx("span",{className:"font-medium",children:"Customer"}),e.jsx("span",{className:"text-xs text-gray-500 text-center mt-1",children:"Use services and make payments"})]}),e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer flex flex-col items-center transition-all ${l==="provider"?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o("provider"),children:[e.jsx("div",{className:"p-3 rounded-full bg-primary/10 mb-2",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-primary",children:[e.jsx("path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"}),e.jsx("path",{d:"M13 5v2"}),e.jsx("path",{d:"M13 17v2"}),e.jsx("path",{d:"M13 11v2"})]})}),e.jsx("span",{className:"font-medium",children:"Service Provider"}),e.jsx("span",{className:"text-xs text-gray-500 text-center mt-1",children:"Offer services on the platform"})]}),e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer flex flex-col items-center transition-all ${l==="manager"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o("manager"),children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100 mb-2",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),e.jsx("span",{className:"font-medium",children:"Managerial Associate"}),e.jsx("span",{className:"text-xs text-gray-500 text-center mt-1",children:"Join our management team"})]})]})]}),l==="manager"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Enhanced Managerial Registration"}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"text-blue-800 mb-3 font-medium",children:"We've enhanced our managerial associate registration process!"}),e.jsx("p",{className:"text-blue-700 mb-4",children:"To provide a better experience and collect all the necessary information, we've created a dedicated registration process for managerial associates."}),e.jsx(_,{onClick:()=>{i("/manager-registration")},className:"bg-blue-600 hover:bg-blue-700",children:"Continue to Manager Registration"})]})]}),e.jsx(Qt,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-4",children:[e.jsx(U,{control:m.control,name:"fullName",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your full name",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"username",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username"}),e.jsx(V,{children:e.jsx($,{placeholder:"Choose a username",...x})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"mt-6 mb-4 border-t pt-4",children:[e.jsx("h3",{className:"text-md font-semibold mb-2",children:"Location Information"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"This information helps us connect you with the right service agents in your area"})]}),e.jsx(U,{control:m.control,name:"district",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsx(V,{children:e.jsx($,{placeholder:"Your district (e.g., Chennai, Coimbatore)",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"taluk",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk"}),e.jsx(V,{children:e.jsx($,{placeholder:"Your taluk",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"pincode",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{placeholder:"6-digit pincode",maxLength:6,...x})}),e.jsx(H,{})]})}),l==="provider"&&e.jsxs("div",{className:"mt-6 mb-4 border-t pt-4",children:[e.jsx("h3",{className:"text-md font-semibold mb-2",children:"Business Information"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tell us about your business to get started as a service provider"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{control:m.control,name:"providerType",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Provider Type"}),e.jsx(V,{children:e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...x,children:[e.jsx("option",{value:"",children:"Select provider type"}),e.jsx("option",{value:"farmer",children:"Farmer"}),e.jsx("option",{value:"manufacturer",children:"Manufacturer"}),e.jsx("option",{value:"booking_agent",children:"Booking Agent"}),e.jsx("option",{value:"rental_agent",children:"Rental Agent"}),e.jsx("option",{value:"transport_service",children:"Transport Service"}),e.jsx("option",{value:"taxi_service",children:"Taxi Service"}),e.jsx("option",{value:"recycling_agent",children:"Recycling Agent"})]})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"businessName",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your business name",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"businessDescription",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Description (Optional)"}),e.jsx(V,{children:e.jsx($,{placeholder:"Briefly describe your business",...x})}),e.jsx(H,{})]})})]})]}),e.jsx(U,{control:m.control,name:"password",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password"}),e.jsx(V,{children:e.jsx($,{type:"password",placeholder:"Create a password",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"confirmPassword",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Confirm Password"}),e.jsx(V,{children:e.jsx($,{type:"password",placeholder:"Confirm your password",...x})}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:`w-full ${l==="manager"?"bg-blue-600 hover:bg-blue-700":""}`,disabled:a.isPending,children:a.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):l==="customer"?"Create Customer Account":l==="provider"?"Create Service Provider Account":"Submit Managerial Application"}),l==="provider"&&e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"After registration, you'll be directed to set up your service provider profile"}),l==="manager"&&e.jsx("div",{className:"mt-2 text-xs text-gray-500 text-center",children:"Your application will be reviewed by our admin team. Once approved, you will receive your login credentials via email."})]})})]}),e.jsx(pr,{className:"flex flex-col",children:e.jsxs("p",{className:"text-sm text-neutral-500 text-center",children:["Already have an account?"," ",e.jsx(_,{variant:"link",onClick:()=>r("login"),className:"p-0",children:"Sign in"})]})})]})})]})]})}),e.jsx("div",{className:"flex-1 hidden lg:flex bg-gradient-to-br from-primary to-primary/80 p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto self-center w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"Welcome to NALAMINI Service Platform"}),e.jsx("p",{className:"text-lg text-white/90 mb-6",children:"Watch our platform overview to understand how NALAMINI connects communities across Tamil Nadu with essential services"})]}),e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-2xl mb-6",children:[e.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:"https://www.youtube.com/embed/dQw4w9WgXcQ",title:"NALAMINI Service Platform Overview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,referrerPolicy:"strict-origin-when-cross-origin"})}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Platform Demo"}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm",children:"Mobile Recharge"}),e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm",children:"Travel Services"}),e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm",children:"Grocery Shopping"}),e.jsx("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm",children:"Local Products"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-white/80 text-sm",children:"Experience seamless service delivery across Tamil Nadu with our comprehensive platform"})})]})})]})}const zD="/assets/banner_1749951384861-4OWfSDf4.png";class LIe{constructor(){this.sessions=new Map,this.updateIntervals=new Map,this.UPDATE_INTERVAL=5e3,this.MIN_WATCH_TIME=3}generateSessionId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getDeviceInfo(){const r=navigator.userAgent;let s="desktop",n="unknown";return/Mobile|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r)&&(s=/iPad|tablet/i.test(r)?"tablet":"mobile"),r.includes("Chrome")?n="chrome":r.includes("Firefox")?n="firefox":r.includes("Safari")&&!r.includes("Chrome")?n="safari":r.includes("Edge")&&(n="edge"),{deviceType:s,browserType:n}}startSession(r,s,n){const a=this.generateSessionId(),{deviceType:i,browserType:l}=this.getDeviceInfo(),o={sessionId:a,videoId:r,startTime:Date.now(),lastUpdateTime:Date.now(),totalWatchTime:0,pauseCount:0,seekCount:0,volumeChanges:0,playbackSpeed:1,videoDuration:s,isCompleted:!1};return this.sessions.set(a,o),this.recordView(a,n),this.startPeriodicUpdates(a),a}async recordView(r,s){const n=this.sessions.get(r);if(!n)return;const{deviceType:a,browserType:i}=this.getDeviceInfo();try{await ie("POST","/api/videos/analytics/view",{videoId:n.videoId,viewerId:s,sessionId:r,videoDuration:n.videoDuration,deviceType:a,browserType:i,ipAddress:"",referrer:document.referrer||window.location.href})}catch(l){console.error("Failed to record video view:",l)}}handleEvent(r,s){const n=this.sessions.get(r);if(!n)return;const a=Date.now(),i=(a-n.lastUpdateTime)/1e3;switch(s.type){case"play":n.lastUpdateTime=a;break;case"pause":n.totalWatchTime+=i,n.pauseCount++,n.lastUpdateTime=a;break;case"seek":n.seekCount++,n.lastUpdateTime=a;break;case"volumechange":n.volumeChanges++;break;case"ratechange":n.playbackSpeed=s.playbackRate||1;break;case"ended":n.totalWatchTime+=i,n.isCompleted=!0,n.lastUpdateTime=a,this.endSession(r);break;case"timeupdate":i>0&&i<2&&(n.totalWatchTime+=i),n.lastUpdateTime=a;break}}startPeriodicUpdates(r){const s=setInterval(()=>{this.sendUpdate(r)},this.UPDATE_INTERVAL);this.updateIntervals.set(r,s)}async sendUpdate(r){const s=this.sessions.get(r);if(!s||s.totalWatchTime<this.MIN_WATCH_TIME)return;const n=Math.min(s.totalWatchTime/s.videoDuration*100,100);try{await ie("PUT","/api/videos/analytics/session",{sessionId:r,totalWatchTime:Math.round(s.totalWatchTime),completionPercentage:n,pauseCount:s.pauseCount,seekCount:s.seekCount,volumeChanges:s.volumeChanges,playbackSpeed:s.playbackSpeed,isCompleted:s.isCompleted})}catch(a){console.error("Failed to send video analytics update:",a)}}endSession(r){if(!this.sessions.get(r))return;this.sendUpdate(r);const n=this.updateIntervals.get(r);n&&(clearInterval(n),this.updateIntervals.delete(r)),this.sessions.delete(r)}attachToYouTubePlayer(r,s,n){const a=this.startSession(s,0,n),i=o=>{var c,d;if(o.origin==="https://www.youtube.com")try{const u=JSON.parse(o.data);if(u.event==="video-progress"&&this.handleEvent(a,{type:"timeupdate",currentTime:((c=u.info)==null?void 0:c.currentTime)||0,timestamp:Date.now()}),(d=u.info)!=null&&d.duration&&u.info.duration>0){const m=this.sessions.get(a);m&&(m.videoDuration=u.info.duration)}}catch{}};window.addEventListener("message",i);const l=this.endSession.bind(this);return this.endSession=o=>{o===a&&window.removeEventListener("message",i),l(o)},a}attachToVideoElement(r,s,n){const a=this.startSession(s,r.duration||0,n),i=["play","pause","seeked","volumechange","ratechange","ended","timeupdate"],l=c=>{const d=c.type==="seeked"?"seek":c.type;this.handleEvent(a,{type:d,currentTime:r.currentTime,timestamp:Date.now()})};if(i.forEach(c=>{r.addEventListener(c,l)}),r.duration&&r.duration>0){const c=this.sessions.get(a);c&&(c.videoDuration=r.duration)}const o=this.endSession.bind(this);return this.endSession=c=>{c===a&&i.forEach(d=>{r.removeEventListener(d,l)}),o(c)},a}getSessionStats(r){const s=this.sessions.get(r);if(!s)return null;const n=s.videoDuration>0?s.totalWatchTime/s.videoDuration*100:0;return{totalWatchTime:s.totalWatchTime,completionPercentage:n,pauseCount:s.pauseCount,seekCount:s.seekCount,isCompleted:s.isCompleted}}}const BIe=new LIe;function VIe(t,r,s){return BIe.attachToYouTubePlayer(t,r,s)}function UIe(){const{user:t}=dt(),[,r]=br(),[s,n]=j.useState([]),[a,i]=j.useState(""),[l,o]=j.useState(""),[c,d]=j.useState({tamil:[],english:[]}),[u,m]=j.useState(null),[h,g]=j.useState(!0),[x,p]=j.useState(""),[y,v]=j.useState("tamil"),[f,b]=j.useState(0),[N,w]=j.useState([]),[C,P]=j.useState(!1),[S,A]=j.useState(!1),k=(I,F)=>{const W=Math.max(I.length,F.length),X=[];for(let K=0;K<W;K++)K<I.length&&X.push({...I[K],language:"tamil"}),K<F.length&&X.push({...F[K],language:"english"});return X},D=async()=>{try{const I=await ie("GET","/api/youtube/playlists");if(I.ok){const F=await I.json();n(F);const W=F.find(K=>K.title.toLowerCase().includes("tamil")||K.title.toLowerCase().includes("")||K.title.includes("")||K.title.toLowerCase().includes(" ")),X=F.find(K=>K.title.toLowerCase().includes("english")||K.title.toLowerCase().includes("eng")||K.title.toLowerCase().includes("introduction")||K.title.toLowerCase().includes("nalamini introduction"));W&&i(W.id),X&&o(X.id),console.log("Available playlists:",F),console.log("Tamil playlist:",W),console.log("English playlist:",X)}}catch(I){console.error("Error fetching playlists:",I)}},q=async I=>{try{const F=await ie("GET",`/api/youtube/playlist/${I}/videos`);if(F.ok)return await F.json()}catch(F){console.error(`Error fetching videos for playlist ${I}:`,F)}return[]},z=async()=>{if(!a&&!l)return;const[I,F]=await Promise.all([a?q(a):Promise.resolve([]),l?q(l):Promise.resolve([])]),W=I.map(Z=>({...Z,language:"tamil"})),X=F.map(Z=>({...Z,language:"english"}));d({tamil:W,english:X});const K=k(W,X);w(K),console.log("Tamil videos:",W.length),console.log("English videos:",X.length),console.log("Sequential playlist:",K.length)};return j.useEffect(()=>{(async()=>{try{console.log("Starting YouTube data fetch..."),await D();const X=await(await ie("GET","/api/youtube/channel-info")).json();m(X),console.log("YouTube data fetch completed")}catch(W){console.error("Error fetching YouTube data:",W)}finally{setTimeout(()=>g(!1),2e3)}})();const F=setTimeout(()=>{g(!1)},3e3);return()=>clearTimeout(F)},[]),j.useEffect(()=>{(a||l)&&z()},[a,l]),j.useEffect(()=>{N.length>0&&!x&&(p(N[0].id),v(N[0].language||"tamil"))},[N,x]),j.useEffect(()=>{if(!C||!S)return;const I=()=>{const W=(f+1)%N.length,X=N[W];X&&(b(W),p(X.id),v(X.language||"tamil"),setTimeout(()=>{const K=document.querySelector("iframe[data-session-id]");K&&K.contentWindow&&K.contentWindow.postMessage(`{"event":"command","func":"loadVideoById","args":["${X.id}"]}`,"*")},1e3))},F=W=>{if(W.origin==="https://www.youtube.com")try{const X=JSON.parse(W.data);(X.event==="video-ended"||X.info===0)&&I()}catch{}};return window.addEventListener("message",F),()=>window.removeEventListener("message",F)},[C,S,f,N]),j.useEffect(()=>{t&&(t.userType==="service_provider"?r("/provider-dashboard"):r("/dashboard"))},[t,r]),e.jsxs("div",{className:"min-h-screen flex flex-col relative",children:[e.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-50",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-xl font-bold text-primary",children:"Nalamini"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#about",className:"text-gray-600 hover:text-primary transition-colors",children:"About Us"}),e.jsx("a",{href:"#contact",className:"text-gray-600 hover:text-primary transition-colors",children:"Contact Us"}),e.jsx(_,{variant:"outline",onClick:()=>r("/auth"),className:"border-primary text-primary hover:bg-primary hover:text-white",children:"Sign In"}),e.jsx(_,{onClick:()=>r("/auth"),className:"bg-primary hover:bg-primary/90 text-white",children:"Get Started"})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>{const I=document.getElementById("mobile-menu");I&&I.classList.toggle("hidden")},children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),e.jsx("div",{id:"mobile-menu",className:"hidden md:hidden pb-4",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("a",{href:"#about",className:"text-gray-600 hover:text-primary transition-colors py-2",children:"About Us"}),e.jsx("a",{href:"#contact",className:"text-gray-600 hover:text-primary transition-colors py-2",children:"Contact Us"}),e.jsx(_,{variant:"outline",onClick:()=>r("/auth"),className:"border-primary text-primary hover:bg-primary hover:text-white w-full mt-2",children:"Sign In"}),e.jsx(_,{onClick:()=>r("/auth"),className:"bg-primary hover:bg-primary/90 text-white w-full",children:"Get Started"})]})})]})}),e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary/80 text-white pt-24",children:e.jsx("div",{className:"container mx-auto px-4 py-12 md:py-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto text-center",children:[e.jsx("div",{className:"inline-block p-2 px-4 bg-white/10 rounded-full mb-4",children:e.jsx("span",{className:"text-white/90 text-sm font-medium",children:"Tamil Nadu's Premier Service Platform"})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white to-white/90",children:"Nalamini Service Platform"}),e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-white/90 max-w-3xl mx-auto",children:"Connecting communities with essential services across Tamil Nadu"})]})})}),e.jsx("div",{className:"hidden",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-5xl mx-auto text-center"})})}),h&&e.jsx("div",{className:"py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading platform videos..."})]})})}),!h&&e.jsx("div",{className:"py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Platform Services"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Discover all 7 services through our educational videos and platform overview"})]}),e.jsx("div",{className:"mb-12 bg-white rounded-2xl shadow-xl p-6",children:e.jsx("div",{className:"max-w-full mx-auto relative",children:e.jsx("div",{className:"relative rounded-xl overflow-hidden",children:e.jsx("img",{src:zD,alt:"Nalamini Platform Services",className:"w-full h-auto",style:{minHeight:"300px",objectFit:"contain"}})})})}),e.jsxs("div",{className:"mb-12 bg-white rounded-2xl shadow-xl p-6",children:[e.jsx("div",{className:"max-w-full mx-auto",children:e.jsxs("div",{className:"relative rounded-xl overflow-hidden",children:[e.jsx("img",{src:zD,alt:"Nalamini Platform Services - Farm to Market, Manufacturers Hub, Transport, Taxi, Rental, Recharge & Booking, Recycling",className:"w-full h-auto",style:{minHeight:"300px",objectFit:"contain"}}),x&&e.jsx("div",{className:"absolute inset-0 bg-black/95 rounded-xl flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full h-full relative",style:{maxHeight:"400px"},children:[e.jsx("iframe",{ref:I=>{if(I){const F=VIe(I,x,t==null?void 0:t.id);I.setAttribute("data-session-id",F),I.onload=()=>{setTimeout(()=>A(!0),1e3)}}},className:"w-full h-full rounded-lg",style:{aspectRatio:"16/9"},src:`https://www.youtube.com/embed/${x}?modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&fs=1&controls=1&enablejsapi=1&autoplay=1&origin=${window.location.origin}`,title:"Nalamini Platform Services Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0},x),e.jsx("button",{onClick:()=>p(""),className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white p-2 rounded-full z-20 shadow-lg",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6 mb-4",children:[e.jsxs("button",{onClick:()=>{c.english.length>0&&(p(c.english[0].id),v("english"),b(0))},className:"px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all shadow-lg",children:["English Videos (",c.english.length,")"]}),e.jsxs("button",{onClick:()=>{c.tamil.length>0&&(p(c.tamil[0].id),v("tamil"),b(0))},className:"px-8 py-3 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium transition-all shadow-lg",children:[" Videos (",c.tamil.length,")"]})]}),x&&e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:y==="english"?"English Videos Playlist":" Videos Playlist"}),e.jsx("div",{className:"grid gap-2 max-h-64 overflow-y-auto",children:(y==="english"?c.english:c.tamil).map((I,F)=>e.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-all border ${I.id===x?"bg-white border-blue-300 shadow-md":"bg-white border-gray-200 hover:border-gray-300"}`,onClick:()=>{p(I.id),b(F)},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",F+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-sm text-gray-800 line-clamp-1",children:I.title}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-1",children:I.description})]}),I.id===x&&e.jsx("div",{className:"text-blue-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})]})},I.id))})]})]})]})})}),e.jsx("div",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-primary/10 rounded-3xl transform -rotate-1 scale-105"}),e.jsxs("div",{className:"relative bg-white p-10 rounded-2xl shadow-xl border border-primary/10",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("span",{className:"inline-block py-1 px-4 rounded-full text-sm font-medium bg-primary/10 text-primary mb-2",children:"Join Our Community"}),e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Get Started Today"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Choose your journey with Nalamini Service Platform and be part of a growing ecosystem that's transforming service delivery across Tamil Nadu"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center p-6 rounded-xl border border-gray-200 hover:border-primary/30 hover:shadow-lg transition-all",children:[e.jsx("div",{className:"mb-4 bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"I'm a Customer"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Access services like mobile recharges, travel bookings, local products, and more"}),e.jsx(_,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>r("/auth"),children:"Get Started"})]}),e.jsxs("div",{className:"text-center p-6 rounded-xl border border-gray-200 hover:border-primary/30 hover:shadow-lg transition-all",children:[e.jsx("div",{className:"mb-4 bg-primary/10 w-16 h-16 rounded-full flex items-center justify-center mx-auto",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-primary",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"m22 21-3-3"}),e.jsx("path",{d:"m16 8 2-2"}),e.jsx("path",{d:"m18 6 2-2"})]})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Management Team"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Admin access for platform management, analytics, and service oversight"}),e.jsx(_,{className:"w-full bg-primary hover:bg-primary/90",onClick:()=>r("/auth"),children:"Team Login"})]})]})]})]})})})}),e.jsx("div",{id:"about",className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("span",{className:"inline-block py-1 px-4 rounded-full text-sm font-medium bg-primary/10 text-primary mb-2",children:"About Nalamini"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Transforming Tamil Nadu's Service Ecosystem"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Nalamini Service Platform is Tamil Nadu's comprehensive digital ecosystem, connecting communities with essential services through innovative technology."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 mb-16",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Our Mission"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"To bridge the digital divide across Tamil Nadu by creating a unified platform that makes essential services accessible to every citizen, while empowering local businesses and service providers with the tools they need to thrive in the digital economy."}),e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Our Vision"}),e.jsx("p",{className:"text-gray-600",children:"To become the leading service platform in Tamil Nadu, fostering economic growth, community development, and digital inclusion across all districts and rural areas."})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Platform Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"7"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Core Services"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"38"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Districts Covered"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"400+"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Taluks Served"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"24/7"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Service Support"})]})]})]})]})]})})}),e.jsx("div",{id:"contact",className:"py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("span",{className:"inline-block py-1 px-4 rounded-full text-sm font-medium bg-primary/10 text-primary mb-2",children:"Contact Us"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Get in Touch"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Have questions about our services? Need support? Want to partner with us? We're here to help you connect with the right solutions."})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 mb-12",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:e.jsxs("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Headquarters"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Coimbatore, Tamil Nadu, India"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Phone Support"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"+91 9513430615"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Mon-Sat, 9 AM - 6 PM IST"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Email Support"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"support@nalamini.com"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Response within 24 hours"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Business Partnerships"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"admin@nalamini.com"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"For collaboration opportunities"})]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Follow Us"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("a",{href:"#",className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),e.jsx("a",{href:"#",className:"bg-blue-800 text-white p-2 rounded-lg hover:bg-blue-900 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),e.jsx("a",{href:"#",className:"bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})})]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Send us a Message"}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"your@email.com"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"+91 XXXXX XXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[e.jsx("option",{children:"General Inquiry"}),e.jsx("option",{children:"Service Support"}),e.jsx("option",{children:"Partnership Opportunity"}),e.jsx("option",{children:"Technical Issue"}),e.jsx("option",{children:"Feedback"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),e.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",placeholder:"Tell us how we can help you..."})]}),e.jsx(_,{className:"w-full bg-primary hover:bg-primary/90 text-white",children:"Send Message"})]})]})})]})]})})}),e.jsx("div",{className:"py-16 bg-white",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto text-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 rounded-2xl p-8 border border-primary/20",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"inline-block py-1 px-4 rounded-full text-sm font-medium bg-primary/10 text-primary mb-2",children:"Career Opportunities"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nalamini Opportunities Forum"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Be part of Tamil Nadu's digital transformation. Apply for management positions, service agent roles, or become a service provider."})]}),e.jsx(_,{className:"bg-primary hover:bg-primary/90 text-white font-semibold px-8 py-3 text-lg",onClick:()=>r("/opportunities"),children:"Explore & Get Associated"})]})})})}),e.jsx("footer",{className:"bg-gray-900 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Nalamini Service Platform"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Tamil Nadu's comprehensive digital ecosystem for essential services."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("a",{href:"#",className:"bg-gray-800 text-gray-400 hover:text-white p-2 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),e.jsx("a",{href:"#",className:"bg-gray-800 text-gray-400 hover:text-white p-2 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})})}),e.jsx("a",{href:"#",className:"bg-gray-800 text-gray-400 hover:text-white p-2 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Our Services"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Farmer's Market"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Manufacturers Hub"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Transport Services"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Taxi Services"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Rental Services"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Recharge & Utilities"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Recycling Services"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:e.jsx("a",{href:"#about",className:"hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#contact",className:"hover:text-white transition-colors",children:"Contact Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/auth",className:"hover:text-white transition-colors",onClick:I=>{I.preventDefault(),r("/auth")},children:"Get Started"})}),e.jsx("li",{children:e.jsx("a",{href:"/opportunities",className:"hover:text-white transition-colors",onClick:I=>{I.preventDefault(),r("/opportunities")},children:"Careers"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),e.jsxs("ul",{className:"space-y-2 text-gray-400",children:[e.jsx("li",{children:"Coimbatore, Tamil Nadu"}),e.jsx("li",{children:"support@nalamini.com"}),e.jsx("li",{children:"admin@nalamini.com"}),e.jsx("li",{children:"+91 9513430615"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Serving all 38 districts of Tamil Nadu"})})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:e.jsx("p",{children:" 2025 Nalamini Service Platform. All rights reserved."})})]})})]})}function qIe(){const{user:t}=dt(),[r,s]=j.useState("overview"),n=()=>(t==null?void 0:t.type)==="admin"||(t==null?void 0:t.userType)==="admin"?"/api/service-requests/all":(t==null?void 0:t.type)==="service_provider"||(t==null?void 0:t.userType)==="service_provider"?"/api/service-requests/provider":(t==null?void 0:t.type)==="branch_manager"||(t==null?void 0:t.userType)==="branch_manager"?"/api/service-requests/branch-manager":(t==null?void 0:t.type)==="taluk_manager"||(t==null?void 0:t.userType)==="taluk_manager"?"/api/service-requests/taluk-manager":(t==null?void 0:t.type)==="pincode_agent"||(t==null?void 0:t.userType)==="pincode_agent"?"/api/service-requests/agent":"/api/service-requests/customer",{data:a=[],isLoading:i}=fe({queryKey:[n()]}),{data:l,isLoading:o}=fe({queryKey:["/api/dashboard/stats"]}),c=g=>{switch(g){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},d=g=>{switch(g.toLowerCase()){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"approved":return"bg-purple-100 text-purple-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},u=()=>{switch((t==null?void 0:t.type)||(t==null?void 0:t.userType)){case"admin":return"Administrator";case"service_provider":return"Service Provider";case"branch_manager":return"Branch Manager";case"taluk_manager":return"Taluk Manager";case"pincode_agent":return"Pincode Agent";case"customer":return"Customer";case"farmer":return"Farmer";default:return"User"}},m=()=>{const g=(t==null?void 0:t.type)||(t==null?void 0:t.userType),x=[{label:"New Taxi Booking",icon:Et,href:"/taxi",color:"bg-blue-500"},{label:"Schedule Delivery",icon:ft,href:"/delivery",color:"bg-green-500"},{label:"Rent Equipment",icon:Os,href:"/rental",color:"bg-orange-500"},{label:"Order Groceries",icon:_r,href:"/grocery",color:"bg-purple-500"},{label:"Mobile Recharge",icon:oa,href:"/recharge",color:"bg-red-500"},{label:"Recycling Service",icon:zn,href:"/recycling",color:"bg-teal-500"}],p=[{label:"Manage Users",icon:rr,href:"/admin/users",color:"bg-indigo-500"},{label:"Branch Managers",icon:An,href:"/branch-managers",color:"bg-gray-500"},{label:"Analytics",icon:Bw,href:"/analytics",color:"bg-pink-500"},{label:"Commission Config",icon:Fc,href:"/commission-config",color:"bg-yellow-500"}],y=[{label:"Add Local Product",icon:Ft,href:"/provider/add-local-product",color:"bg-emerald-500"},{label:"My Products",icon:gr,href:"/provider/my-local-products",color:"bg-cyan-500"},{label:"Taxi Vehicles",icon:Et,href:"/provider/taxi-vehicles",color:"bg-blue-500"},{label:"Rental Items",icon:Os,href:"/provider/rental-items",color:"bg-orange-500"}];return g==="admin"?[...x,...p]:g==="service_provider"?[...x,...y]:x},h=a.slice(0,5);return i||o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",t==null?void 0:t.username,"!"]}),e.jsxs("p",{className:"text-muted-foreground",children:[u()," Dashboard - Manage your services and requests"]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(_,{asChild:!0,children:e.jsxs(Ot,{href:"/wallet",children:[e.jsx(en,{className:"h-4 w-4 mr-2"}),"Wallet"]})})})]}),e.jsxs(nr,{value:r,onValueChange:s,children:[e.jsxs(sr,{className:"grid w-full grid-cols-4",children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"services",children:"Services"}),e.jsx(Ae,{value:"requests",children:"My Requests"}),e.jsx(Ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(Ve,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Requests"}),e.jsx(Bw,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.totalServiceRequests)||a.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",(l==null?void 0:l.monthlyGrowth)||0,"% from last month"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Pending"}),e.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.pendingRequests)||a.filter(g=>g.status==="new"||g.status==="in_progress").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting processing"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.completedRequests)||a.filter(g=>g.status==="completed"||g.status==="approved").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully processed"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(en,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",((l==null?void 0:l.totalRevenue)||a.reduce((g,x)=>g+(x.amount||0),0)).toLocaleString("en-IN")]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total earnings"})]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Quick Actions"}),e.jsx(he,{children:"Access frequently used services and features"})]}),e.jsx(E,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-4",children:m().map((g,x)=>e.jsx(_,{asChild:!0,variant:"outline",className:"h-auto p-4 flex flex-col space-y-2",children:e.jsxs(Ot,{href:g.href,children:[e.jsx("div",{className:`p-2 rounded-lg ${g.color} text-white`,children:e.jsx(g.icon,{className:"h-6 w-6"})}),e.jsx("span",{className:"text-sm font-medium",children:g.label})]})},x))})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recent Service Requests"}),e.jsx(he,{children:"Your latest service requests and their status"})]}),e.jsx(E,{children:h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Start by booking a service above"})]}):e.jsx("div",{className:"space-y-4",children:h.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:c(g.serviceType)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["#",g.srNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[g.serviceType," Service"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:vt(new Date(g.createdAt),"PPp")})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["",g.amount.toLocaleString()]}),e.jsx(ae,{className:`text-xs ${d(g.status)}`,children:g.status.replace(/_/g," ")})]}),e.jsx(_,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(Ot,{href:`/booking/${g.id}`,children:e.jsx(gr,{className:"h-4 w-4"})})})]})]},g.id))})})]})]}),e.jsx(Ve,{value:"services",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",asChild:!0,children:e.jsxs(Ot,{href:"/taxi-browse",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-blue-500 text-white rounded-lg",children:e.jsx(Et,{className:"h-6 w-6"})}),e.jsx(Y,{children:"Taxi Service"})]})}),e.jsx(E,{children:e.jsx(he,{children:"Book reliable taxi rides for your daily commute and travel needs"})})]})}),e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",asChild:!0,children:e.jsxs(Ot,{href:"/delivery-browse",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-green-500 text-white rounded-lg",children:e.jsx(ft,{className:"h-6 w-6"})}),e.jsx(Y,{children:"Delivery Service"})]})}),e.jsx(E,{children:e.jsx(he,{children:"Fast and secure package delivery across Tamil Nadu"})})]})}),e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",asChild:!0,children:e.jsxs(Ot,{href:"/rental-browse",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-orange-500 text-white rounded-lg",children:e.jsx(Os,{className:"h-6 w-6"})}),e.jsx(Y,{children:"Equipment Rental"})]})}),e.jsx(E,{children:e.jsx(he,{children:"Rent tools, vehicles, and equipment for your projects"})})]})}),e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",asChild:!0,children:e.jsxs(Ot,{href:"/grocery-fixed",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-purple-500 text-white rounded-lg",children:e.jsx(_r,{className:"h-6 w-6"})}),e.jsx(Y,{children:"Grocery Shopping"})]})}),e.jsx(E,{children:e.jsx(he,{children:"Order fresh groceries and daily essentials for home delivery"})})]})}),e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",asChild:!0,children:e.jsxs(Ot,{href:"/recharge",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-red-500 text-white rounded-lg",children:e.jsx(oa,{className:"h-6 w-6"})}),e.jsx(Y,{children:"Recharge & Bills"})]})}),e.jsx(E,{children:e.jsx(he,{children:"Mobile recharge, DTH, electricity bills, and more"})})]})}),e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",asChild:!0,children:e.jsxs(Ot,{href:"/recycling",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-2 bg-teal-500 text-white rounded-lg",children:e.jsx(zn,{className:"h-6 w-6"})}),e.jsx(Y,{children:"Recycling Service"})]})}),e.jsx(E,{children:e.jsx(he,{children:"Eco-friendly waste collection and recycling solutions"})})]})})]})}),e.jsx(Ve,{value:"requests",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"All Service Requests"}),e.jsx(he,{children:"View and manage all your service requests"})]}),e.jsx(E,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Start by booking a service"})]}):e.jsx("div",{className:"space-y-4",children:a.map(g=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:c(g.serviceType)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["#",g.srNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[g.serviceType," Service"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:vt(new Date(g.createdAt),"PPp")})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["",g.amount.toLocaleString()]}),e.jsx(ae,{className:`text-xs ${d(g.status)}`,children:g.status.replace(/_/g," ")})]}),e.jsx(_,{size:"sm",variant:"outline",asChild:!0,children:e.jsx(Ot,{href:`/booking/${g.id}`,children:e.jsx(gr,{className:"h-4 w-4"})})})]})]},g.id))})})]})}),e.jsx(Ve,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Service Usage"}),e.jsx(he,{children:"Breakdown of services you use most"})]}),e.jsx(E,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(a.reduce((g,x)=>(g[x.serviceType]=(g[x.serviceType]||0)+1,g),{})).map(([g,x])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[c(g),e.jsx("span",{className:"capitalize",children:g})]}),e.jsx(ae,{variant:"secondary",children:x})]},g))})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Monthly Spending"}),e.jsx(he,{children:"Your service expenses this month"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-3xl font-bold mb-2",children:["",a.reduce((g,x)=>g+(x.amount||0),0).toLocaleString("en-IN")]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total spent on all services"})]})]})]})})]})]})}const Hr=j.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:De("w-full caption-bottom text-sm",t),...r})}));Hr.displayName="Table";const Wr=j.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:De("[&_tr]:border-b",t),...r}));Wr.displayName="TableHeader";const Gr=j.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:De("[&_tr:last-child]:border-0",t),...r}));Gr.displayName="TableBody";const zIe=j.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:De("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));zIe.displayName="TableFooter";const ht=j.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:De("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));ht.displayName="TableRow";const xe=j.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:De("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));xe.displayName="TableHead";const se=j.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:De("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));se.displayName="TableCell";const Zh=j.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:De("mt-4 text-sm text-muted-foreground",t),...r}));Zh.displayName="TableCaption";const KD=["Ariyalur","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Salem","Sivaganga","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Viluppuram","Virudhunagar","Tenkasi","Kallakurichi","Ranipet","Chengalpattu","Mayiladuthurai","Tirupattur"],KIe=Kt({username:R().min(3,"Username must be at least 3 characters"),password:R().min(6,"Password must be at least 6 characters"),fullName:R().min(1,"Full name is required"),email:R().email("Invalid email address"),phone:R().optional(),district:R().min(1,"District is required")});function HIe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(!1),{data:c,isLoading:d}=fe({queryKey:["/api/managers/branch"],enabled:(t==null?void 0:t.userType)==="admin"}),u=Gt({resolver:Yt(KIe),defaultValues:{username:"",password:"",fullName:"",email:"",phone:"",district:""}}),m=Se({mutationFn:async p=>await(await ie("POST","/api/managers/branch",{...p,userType:"branch_manager"})).json(),onSuccess:()=>{r({title:"Branch Manager Added",description:"The branch manager has been successfully added."}),pe.invalidateQueries({queryKey:["/api/managers/branch"]}),o(!1),u.reset()},onError:p=>{r({title:"Failed to add Branch Manager",description:p.message,variant:"destructive"})}});function h(p){m.mutate(p)}const g=c==null?void 0:c.filter(p=>(s===""||p.fullName.toLowerCase().includes(s.toLowerCase())||p.username.toLowerCase().includes(s.toLowerCase()))&&(a===""||a==="all"||p.district===a)),x=p=>{r({title:"Delete Operation",description:"This function is not implemented in the demo.",variant:"destructive"})};return(t==null?void 0:t.userType)!=="admin"?e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(O,{children:e.jsx(E,{className:"py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-neutral-600",children:"You don't have permission to manage branch managers. This section is only available to administrators."})]})})})}):e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Branch Managers"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Manage the 38 branch managers across Tamil Nadu districts."})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(as,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-neutral-400"}),e.jsx($,{type:"text",placeholder:"Search managers...",className:"pl-8 w-full",value:s,onChange:p=>n(p.target.value)})]}),e.jsxs(je,{value:a,onValueChange:p=>i(p),children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"All Districts"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Districts"}),KD.map(p=>e.jsx(T,{value:p,children:p},p))]})]})]}),e.jsxs(Tt,{open:l,onOpenChange:o,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{className:"w-full sm:w-auto",children:[e.jsx(pC,{className:"mr-2 h-4 w-4"}),"Add Branch Manager"]})}),e.jsxs(Ct,{className:"sm:max-w-[500px]",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Add Branch Manager"}),e.jsx(Xt,{children:"Create a new branch manager for a district in Tamil Nadu."})]}),e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(h),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"fullName",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"district",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsx(ve,{children:KD.map(y=>e.jsx(T,{value:y,children:y},y))})]}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"username",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"password",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password"}),e.jsx(V,{children:e.jsx($,{type:"password",...p})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"email",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Email"}),e.jsx(V,{children:e.jsx($,{type:"email",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"phone",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone (Optional)"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})})]}),e.jsxs(zs,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Add Manager"})]})]})})]})]})]}),e.jsx(O,{children:d?e.jsx(E,{className:"flex justify-center items-center p-6",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):g&&g.length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Manager"}),e.jsx(xe,{children:"District"}),e.jsx(xe,{children:"Taluk Managers"}),e.jsx(xe,{children:"Performance"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:g.map(p=>e.jsxs(ht,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:p.fullName.charAt(0)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900",children:p.fullName}),e.jsxs("div",{className:"text-xs text-neutral-500",children:["ID: BM",p.id.toString().padStart(5,"0")]})]})]})}),e.jsxs(se,{children:[e.jsx("div",{className:"text-sm text-neutral-900",children:p.district}),e.jsx("div",{className:"text-xs text-neutral-500",children:"12 blocks"})]}),e.jsx(se,{children:e.jsx("div",{className:"text-sm text-neutral-900",children:"8 active"})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-neutral-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"95%"}})}),e.jsx("span",{className:"text-xs text-neutral-500",children:"95%"})]})}),e.jsx(se,{children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-600",children:"Active"})}),e.jsxs(se,{className:"text-right",children:[e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(gr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>x(p.id),children:e.jsx(Ir,{className:"h-4 w-4"})})]})]},p.id))})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-neutral-200 sm:px-6 flex items-center justify-between",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs("p",{className:"text-sm text-neutral-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to"," ",e.jsx("span",{className:"font-medium",children:g.length})," of"," ",e.jsx("span",{className:"font-medium",children:(c==null?void 0:c.length)||0})," results"]})}),e.jsxs("div",{className:"flex-1 flex justify-between sm:justify-end",children:[e.jsx(_,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-3",disabled:!0,children:"Next"})]})]})]}):e.jsx(E,{className:"py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No branch managers found"}),e.jsx("p",{className:"text-neutral-500 mb-4",children:s||a?"Try adjusting your search or filter criteria.":"Start by adding a branch manager to the system."}),(s||a)&&e.jsx(_,{variant:"outline",onClick:()=>{n(""),i("")},children:"Clear Filters"})]})})})]})}const RK={Chennai:["Chennai North","Chennai South","Chennai East","Chennai West","Chennai Central"],Coimbatore:["Coimbatore North","Coimbatore South","Mettupalayam","Pollachi","Sulur","Valparai"],Madurai:["Madurai North","Madurai South","Melur","Peraiyur","Tirumangalam","Usilampatti","Vadipatti"],Salem:["Salem","Attur","Edappadi","Gangavalli","Mettur","Omalur","Sangagiri","Valapady","Yercaud"],Trichy:["Lalgudi","Manachanallur","Manapparai","Musiri","Srirangam","Thiruverumbur","Thottiyam","Thuraiyur"]},HD=Object.keys(RK),WIe=Kt({username:R().min(3,"Username must be at least 3 characters"),password:R().min(6,"Password must be at least 6 characters"),fullName:R().min(1,"Full name is required"),email:R().email("Invalid email address"),phone:R().optional(),district:R().min(1,"District is required"),taluk:R().min(1,"Taluk is required")});function GIe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(!1),[c,d]=j.useState(""),u=(t==null?void 0:t.userType)==="admin",m=(t==null?void 0:t.userType)==="branch_manager",{data:h,isLoading:g}=fe({queryKey:["/api/managers/taluk"],enabled:u||m}),x=Gt({resolver:Yt(WIe),defaultValues:{username:"",password:"",fullName:"",email:"",phone:"",district:m&&(t==null?void 0:t.district)||"",taluk:""}}),p=x.watch("district");p!==c&&(d(p),x.setValue("taluk",""));const y=Se({mutationFn:async N=>await(await ie("POST","/api/managers/taluk",{...N,userType:"taluk_manager"})).json(),onSuccess:()=>{r({title:"Taluk Manager Added",description:"The taluk manager has been successfully added."}),pe.invalidateQueries({queryKey:["/api/managers/taluk"]}),o(!1),x.reset()},onError:N=>{r({title:"Failed to add Taluk Manager",description:N.message,variant:"destructive"})}});function v(N){y.mutate(N)}const f=h==null?void 0:h.filter(N=>(s===""||N.fullName.toLowerCase().includes(s.toLowerCase())||N.username.toLowerCase().includes(s.toLowerCase()))&&(a===""||a==="all"||N.district===a)),b=N=>{r({title:"Delete Operation",description:"This function is not implemented in the demo.",variant:"destructive"})};return!u&&!m?e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(O,{children:e.jsx(E,{className:"py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-neutral-600",children:"You don't have permission to manage taluk managers. This section is only available to administrators and branch managers."})]})})})}):e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Taluk Managers"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:u?"Manage the 262 taluk managers across Tamil Nadu":`Manage taluk managers in ${t==null?void 0:t.district} district`})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(as,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-neutral-400"}),e.jsx($,{type:"text",placeholder:"Search managers...",className:"pl-8 w-full",value:s,onChange:N=>n(N.target.value)})]}),u&&e.jsxs(je,{value:a,onValueChange:N=>i(N),children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"All Districts"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Districts"}),HD.map(N=>e.jsx(T,{value:N,children:N},N))]})]})]}),e.jsxs(Tt,{open:l,onOpenChange:o,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{className:"w-full sm:w-auto",children:[e.jsx(pC,{className:"mr-2 h-4 w-4"}),"Add Taluk Manager"]})}),e.jsxs(Ct,{className:"sm:max-w-[500px]",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Add Taluk Manager"}),e.jsx(Xt,{children:"Create a new taluk manager for a taluk in Tamil Nadu."})]}),e.jsx(Qt,{...x,children:e.jsxs("form",{onSubmit:x.handleSubmit(v),className:"space-y-4",children:[e.jsx(U,{control:x.control,name:"fullName",render:({field:N})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{...N})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:x.control,name:"district",render:({field:N})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:N.onChange,defaultValue:N.value,disabled:m,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsx(ve,{children:HD.map(w=>e.jsx(T,{value:w,children:w},w))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:x.control,name:"taluk",render:({field:N})=>{var w;return e.jsxs(L,{children:[e.jsx(B,{children:"Taluk"}),e.jsxs(je,{onValueChange:N.onChange,defaultValue:N.value,disabled:!c,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select taluk"})})}),e.jsx(ve,{children:c&&((w=RK[c])==null?void 0:w.map(C=>e.jsx(T,{value:C,children:C},C)))})]}),e.jsx(H,{})]})}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:x.control,name:"username",render:({field:N})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username"}),e.jsx(V,{children:e.jsx($,{...N})}),e.jsx(H,{})]})}),e.jsx(U,{control:x.control,name:"password",render:({field:N})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password"}),e.jsx(V,{children:e.jsx($,{type:"password",...N})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:x.control,name:"email",render:({field:N})=>e.jsxs(L,{children:[e.jsx(B,{children:"Email"}),e.jsx(V,{children:e.jsx($,{type:"email",...N})}),e.jsx(H,{})]})}),e.jsx(U,{control:x.control,name:"phone",render:({field:N})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone (Optional)"}),e.jsx(V,{children:e.jsx($,{...N})}),e.jsx(H,{})]})})]}),e.jsxs(zs,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Add Manager"})]})]})})]})]})]}),e.jsx(O,{children:g?e.jsx(E,{className:"flex justify-center items-center p-6",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):f&&f.length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Manager"}),e.jsx(xe,{children:"District"}),e.jsx(xe,{children:"Taluk"}),e.jsx(xe,{children:"Service Agents"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:f.map(N=>e.jsxs(ht,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:N.fullName.charAt(0)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900",children:N.fullName}),e.jsxs("div",{className:"text-xs text-neutral-500",children:["ID: TM",N.id.toString().padStart(5,"0")]})]})]})}),e.jsx(se,{children:e.jsx("div",{className:"text-sm text-neutral-900",children:N.district})}),e.jsx(se,{children:e.jsx("div",{className:"text-sm text-neutral-900",children:N.taluk})}),e.jsx(se,{children:e.jsx("div",{className:"text-sm text-neutral-900",children:"6 active"})}),e.jsx(se,{children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-600",children:"Active"})}),e.jsxs(se,{className:"text-right",children:[e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(gr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>b(N.id),children:e.jsx(Ir,{className:"h-4 w-4"})})]})]},N.id))})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-neutral-200 sm:px-6 flex items-center justify-between",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs("p",{className:"text-sm text-neutral-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to"," ",e.jsx("span",{className:"font-medium",children:f.length})," of"," ",e.jsx("span",{className:"font-medium",children:(h==null?void 0:h.length)||0})," results"]})}),e.jsxs("div",{className:"flex-1 flex justify-between sm:justify-end",children:[e.jsx(_,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-3",disabled:!0,children:"Next"})]})]})]}):e.jsx(E,{className:"py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No taluk managers found"}),e.jsx("p",{className:"text-neutral-500 mb-4",children:s||a?"Try adjusting your search or filter criteria.":"Start by adding a taluk manager to the system."}),(s||a)&&e.jsx(_,{variant:"outline",onClick:()=>{n(""),i("")},children:"Clear Filters"})]})})})]})}const YIe=Kt({username:R().min(3,"Username must be at least 3 characters"),password:R().min(6,"Password must be at least 6 characters"),fullName:R().min(1,"Full name is required"),email:R().email("Invalid email address"),phone:R().optional(),pincode:R().length(6,"Pincode must be exactly 6 digits").regex(/^\d+$/,"Pincode must contain only numbers")});function QIe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(""),[a,i]=j.useState(!1),l=(t==null?void 0:t.userType)==="admin",o=(t==null?void 0:t.userType)==="branch_manager",c=(t==null?void 0:t.userType)==="taluk_manager",d=l||o||c,{data:u,isLoading:m}=fe({queryKey:["/api/agents"],enabled:d}),h=Gt({resolver:Yt(YIe),defaultValues:{username:"",password:"",fullName:"",email:"",phone:"",pincode:""}}),g=Se({mutationFn:async v=>await(await ie("POST","/api/agents",{...v,userType:"service_agent"})).json(),onSuccess:()=>{r({title:"Service Agent Added",description:"The service agent has been successfully added."}),pe.invalidateQueries({queryKey:["/api/agents"]}),i(!1),h.reset()},onError:v=>{r({title:"Failed to add Service Agent",description:v.message,variant:"destructive"})}});function x(v){g.mutate(v)}const p=u==null?void 0:u.filter(v=>{var f;return s===""||v.fullName.toLowerCase().includes(s.toLowerCase())||v.username.toLowerCase().includes(s.toLowerCase())||((f=v.pincode)==null?void 0:f.includes(s))}),y=v=>{r({title:"Delete Operation",description:"This function is not implemented in the demo.",variant:"destructive"})};return d?e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Service Agents"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:l?"Manage service agents across all pincodes in Tamil Nadu":o?`Manage service agents in ${t==null?void 0:t.district} district`:`Manage service agents in ${t==null?void 0:t.taluk} taluk`})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(as,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-neutral-400"}),e.jsx($,{type:"text",placeholder:"Search by name or pincode...",className:"pl-8 w-full",value:s,onChange:v=>n(v.target.value)})]}),e.jsxs(Tt,{open:a,onOpenChange:i,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{className:"w-full sm:w-auto",children:[e.jsx(pC,{className:"mr-2 h-4 w-4"}),"Add Service Agent"]})}),e.jsxs(Ct,{className:"sm:max-w-[500px]",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Add Service Agent"}),e.jsx(Xt,{children:"Create a new service agent for a specific pincode area."})]}),e.jsx(Qt,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(x),className:"space-y-4",children:[e.jsx(U,{control:h.control,name:"fullName",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{...v})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:h.control,name:"username",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username"}),e.jsx(V,{children:e.jsx($,{...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:h.control,name:"password",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password"}),e.jsx(V,{children:e.jsx($,{type:"password",...v})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:h.control,name:"email",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Email"}),e.jsx(V,{children:e.jsx($,{type:"email",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:h.control,name:"phone",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone (Optional)"}),e.jsx(V,{children:e.jsx($,{...v})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:h.control,name:"pincode",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{...v,maxLength:6,placeholder:"6-digit pincode"})}),e.jsx(H,{})]})}),e.jsxs(zs,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Add Agent"})]})]})})]})]})]}),e.jsx(O,{children:m?e.jsx(E,{className:"flex justify-center items-center p-6",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):p&&p.length>0?e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Agent"}),e.jsx(xe,{children:"Pincode"}),e.jsx(xe,{children:"Email"}),e.jsx(xe,{children:"Phone"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:p.map(v=>e.jsxs(ht,{children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-primary/10 rounded-full flex items-center justify-center text-primary font-semibold",children:v.fullName.charAt(0)}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900",children:v.fullName}),e.jsxs("div",{className:"text-xs text-neutral-500",children:["ID: SA",v.id.toString().padStart(5,"0")]})]})]})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(gt,{className:"mr-1 h-4 w-4 text-neutral-400"}),v.pincode]})}),e.jsx(se,{children:e.jsx("div",{className:"text-sm text-neutral-900",children:v.email})}),e.jsx(se,{children:e.jsx("div",{className:"text-sm text-neutral-900",children:v.phone||"-"})}),e.jsx(se,{children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-600",children:"Active"})}),e.jsxs(se,{className:"text-right",children:[e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(gr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>y(v.id),children:e.jsx(Ir,{className:"h-4 w-4"})})]})]},v.id))})]}),e.jsxs("div",{className:"px-4 py-3 border-t border-neutral-200 sm:px-6 flex items-center justify-between",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsxs("p",{className:"text-sm text-neutral-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to"," ",e.jsx("span",{className:"font-medium",children:p.length})," of"," ",e.jsx("span",{className:"font-medium",children:(u==null?void 0:u.length)||0})," results"]})}),e.jsxs("div",{className:"flex-1 flex justify-between sm:justify-end",children:[e.jsx(_,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),e.jsx(_,{variant:"outline",size:"sm",className:"ml-3",disabled:!0,children:"Next"})]})]})]}):e.jsx(E,{className:"py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:"No service agents found"}),e.jsx("p",{className:"text-neutral-500 mb-4",children:s?"Try adjusting your search criteria.":"Start by adding a service agent to the system."}),s&&e.jsx(_,{variant:"outline",onClick:()=>n(""),children:"Clear Search"})]})})})]}):e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(O,{children:e.jsx(E,{className:"py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900 mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-neutral-600",children:"You don't have permission to manage service agents. This section is only available to management team members."})]})})})})}const XIe=({title:t,icon:r,path:s})=>{const[,n]=br();return e.jsxs(O,{className:"cursor-pointer hover:shadow-lg hover:border-primary/30 transition-all group overflow-hidden relative",onClick:()=>n(s),children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs(E,{className:"flex flex-col items-center justify-center p-6 relative z-10",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300",children:r}),e.jsx("h3",{className:"text-sm font-medium text-center group-hover:text-primary transition-colors",children:t})]})]})};function ZIe(){const[,t]=br(),r=[{title:"Mobile Recharge",icon:e.jsx(Uo,{className:"h-7 w-7 text-primary"}),description:"Prepaid & Postpaid mobile recharges for all operators",path:"/recharge/mobile"},{title:"DTH",icon:e.jsx(O$,{className:"h-7 w-7 text-primary"}),description:"Recharge your DTH connections across all providers",path:"/recharge/dth"},{title:"Electricity",icon:e.jsx(E$,{className:"h-7 w-7 text-primary"}),description:"Pay electricity bills for all major boards",path:"/recharge/electricity"},{title:"Gas Bill",icon:e.jsx(_o,{className:"h-7 w-7 text-primary"}),description:"Pay your gas bills quickly and securely",path:"/recharge/gas"},{title:"Broadband",icon:e.jsx(Ww,{className:"h-7 w-7 text-primary"}),description:"Pay bills for all broadband service providers",path:"/recharge/broadband"},{title:"Water Bill",icon:e.jsx(ev,{className:"h-7 w-7 text-primary"}),description:"Pay your water utility bills easily",path:"/recharge/water"},{title:"Credit Card Bill",icon:e.jsx(fa,{className:"h-7 w-7 text-primary"}),description:"Pay credit card bills for all major banks",path:"/recharge/credit-card"},{title:"All Services",icon:e.jsx(aZ,{className:"h-7 w-7 text-primary"}),description:"View all available recharge services in one place",path:"/recharge/all"}];return e.jsxs("div",{className:"container max-w-6xl py-8",children:[e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_$,{className:"h-5 w-5 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 text-transparent bg-clip-text",children:"Recharge & Bill Payments"})]}),e.jsx("p",{className:"text-muted-foreground max-w-2xl",children:"Quick and secure payments for all your utility services in one place. Get instant confirmation and save time."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(s=>e.jsx(XIe,{title:s.title,icon:s.icon,path:s.path},s.title))}),e.jsxs("div",{className:"mt-12 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O_,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Recent Transactions"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Your recent recharge history will appear here"})]}),e.jsx(O,{className:"border-dashed",children:e.jsx(E,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(O_,{className:"h-6 w-6 text-primary"})}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Your recent recharge transactions will appear here."}),e.jsx(_,{variant:"outline",onClick:()=>t("/recharge/mobile"),className:"mt-2",children:"Make Your First Recharge"})]})})})]})}function _k({plansData:t,serviceType:r,selectedPlan:s,setSelectedPlan:n,setViewMode:a,searchTerm:i,setSearchTerm:l,selectedCategory:o,setSelectedCategory:c}){var p,y;const d=((p=t==null?void 0:t.plans)==null?void 0:p.filter(v=>{const f=!o||v.category===o,b=!i||v.description.toLowerCase().includes(i.toLowerCase())||v.amount.toString().includes(i);return f&&b}))||[],u=()=>{var v,f;return e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(_,{variant:o===null?"default":"outline",size:"sm",onClick:()=>c(null),className:"text-xs h-8",children:r==="electricity"?"All Categories":r==="dth"?"All Packs":"All Plans"}),(f=(v=t==null?void 0:t.categories)==null?void 0:v.data)==null?void 0:f.map(b=>e.jsx(_,{variant:o===b.id?"default":"outline",size:"sm",onClick:()=>c(b.id),className:"text-xs h-8",children:b.name},b.id))]})},m=({plan:v})=>e.jsx(O,{className:De("cursor-pointer hover:border-primary transition-colors",(s==null?void 0:s.id)===v.id&&"border-primary bg-primary/5"),onClick:()=>n(v),children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["",v.amount]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Validity: ",v.validity]}),e.jsx("p",{className:"text-xs mt-1",children:v.description})]}),e.jsx(_,{variant:(s==null?void 0:s.id)===v.id?"default":"outline",size:"sm",onClick:f=>{f.stopPropagation(),n(v),a("form")},children:"Select"})]})})},v.id),h=({plan:v})=>e.jsx(O,{className:De("cursor-pointer hover:border-primary transition-colors",(s==null?void 0:s.id)===v.id&&"border-primary bg-primary/5"),onClick:()=>n(v),children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold",children:["",v.amount]}),e.jsx(ae,{variant:"outline",children:v.category})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Validity: ",v.validity]}),e.jsx("p",{className:"text-xs mt-1",children:v.description})]}),e.jsx(_,{variant:(s==null?void 0:s.id)===v.id?"default":"outline",size:"sm",onClick:f=>{f.stopPropagation(),n(v),a("form")},children:"Select"})]})})},v.id),g=({plan:v})=>e.jsx(O,{className:De("cursor-pointer hover:border-primary transition-colors",(s==null?void 0:s.id)===v.id&&"border-primary bg-primary/5"),onClick:()=>n(v),children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-semibold",children:["",v.amount]}),e.jsx(ae,{children:v.category})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Billing Cycle: ",v.validity]}),e.jsx("p",{className:"text-xs mt-1",children:v.description})]}),e.jsx(_,{variant:(s==null?void 0:s.id)===v.id?"default":"outline",size:"sm",onClick:f=>{f.stopPropagation(),n(v),a("form")},children:"Select"})]})})},v.id),x=v=>{switch(r){case"dth":return e.jsx(h,{plan:v});case"electricity":return e.jsx(g,{plan:v});case"mobile":default:return e.jsx(m,{plan:v})}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col space-y-2 pb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(as,{className:"h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:`Search ${r==="electricity"?"tariffs":"plans"}`,value:i,onChange:v=>l(v.target.value),className:"max-w-sm"})]}),((y=t==null?void 0:t.categories)==null?void 0:y.data)&&e.jsx(u,{})]}),d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{children:["No ",r==="electricity"?"tariffs":"plans"," found matching your criteria."]})}):e.jsx("div",{className:"space-y-2",children:d.map(v=>e.jsx("div",{children:x(v)},v.id))}),s&&e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(_,{onClick:()=>{a("form")},children:["Continue with ",s.amount," ",r==="electricity"?"tariff":"plan"]})})]})}const JIe=Kt({mobileNumber:R().min(10,"Mobile number must be at least 10 digits").max(10,"Mobile number must not exceed 10 digits"),provider:R().min(1,"Please select a provider"),amount:R().min(1,"Amount is required"),serviceType:R().default("mobile")});function FK(){const[,t]=br(),{toast:r}=Ue(),[s,n]=j.useState("form"),[a,i]=j.useState(null),[l,o]=j.useState(""),[c,d]=j.useState(null),u=Gt({resolver:Yt(JIe),defaultValues:{mobileNumber:"",provider:"",amount:"",serviceType:"mobile"}}),m=u.watch("provider");j.useEffect(()=>{a&&u.setValue("amount",a.amount.toString())},[a,u]),j.useEffect(()=>{o(""),d(null)},[s]);const{data:h,isLoading:g,isError:x,refetch:p}=fe({queryKey:[`/api/recharge/plans/${m}`,"mobile"],queryFn:({queryKey:w})=>fetch(`${w[0]}?serviceType=mobile`).then(C=>{if(!C.ok)throw new Error("Failed to fetch plans");return C.json()}),enabled:s==="plans"&&!!m}),{data:y,isLoading:v}=fe({queryKey:["/api/recharge/history"],queryFn:()=>fetch("/api/recharge/history").then(w=>{if(!w.ok)throw new Error("Failed to fetch recharge history");return w.json()})}),f=Se({mutationFn:async w=>{const P=await(await ie("POST","/api/recharge",w)).json(),S={serviceType:"recharge",amount:parseFloat(w.amount),paymentMethod:"razorpay",serviceData:{mobileNumber:w.mobileNumber,provider:w.provider,serviceType:w.serviceType,rechargeId:P.id}},k=await(await ie("POST","/api/service-requests",S)).json();return{recharge:P,serviceRequest:k}},onSuccess:w=>{r({title:"Recharge Successful",description:`Your mobile recharge for ${w.recharge.amount} was successful! Service request ${w.serviceRequest.srNumber} has been generated.`}),u.reset({mobileNumber:"",amount:"",provider:"",serviceType:"mobile"}),pe.invalidateQueries({queryKey:["/api/recharge/history"]}),pe.invalidateQueries({queryKey:["/api/service-requests/my-requests"]})},onError:w=>{r({title:"Recharge Failed",description:w.message||"Something went wrong. Please try again.",variant:"destructive"})}});function b(w){if(!/^[6-9]\d{9}$/.test(w.mobileNumber)){r({title:"Invalid Mobile Number",description:"Please enter a valid 10-digit mobile number starting with 6, 7, 8, or 9.",variant:"destructive"});return}f.mutate(w)}function N(){n(s==="form"?"plans":"form")}return e.jsxs("div",{className:"container max-w-6xl py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>t("/recharge"),children:e.jsx(us,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Mobile Recharge"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(O,{className:"h-full",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Mobile Recharge"}),e.jsx(he,{children:"Recharge your mobile phone with ease"})]}),e.jsx(E,{children:s==="form"?e.jsx(Qt,{...u,children:e.jsxs("form",{className:"space-y-4",children:[e.jsx(U,{control:u.control,name:"mobileNumber",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Mobile Number"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter 10-digit mobile number",...w,maxLength:10})}),e.jsx(qe,{children:"Enter your mobile number without any prefix"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"provider",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operator"}),e.jsxs(je,{onValueChange:w.onChange,defaultValue:w.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select mobile operator"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"Jio",children:"Reliance Jio"}),e.jsx(T,{value:"Airtel",children:"Airtel"}),e.jsx(T,{value:"Vi",children:"Vodafone Idea"}),e.jsx(T,{value:"BSNL",children:"BSNL"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"amount",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Amount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{children:e.jsx($,{placeholder:"Enter recharge amount",...w,type:"number",min:"1"})}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>{u.getValues("provider")?n("plans"):r({title:"Please select an operator first",variant:"destructive"})},children:"Browse Plans"})]}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",onClick:u.handleSubmit(b),disabled:f.isPending,children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Proceed to Pay",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:[m," Mobile Plans"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:N,children:"Back to Recharge"})]}),g?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):x?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-red-500 mb-2"}),e.jsx("p",{children:"Failed to load plans. Please try again."}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(),className:"mt-4",children:"Retry"})]}):e.jsx(_k,{plansData:h,serviceType:"mobile",selectedPlan:a,setSelectedPlan:i,setViewMode:n,searchTerm:l,setSearchTerm:o,selectedCategory:c,setSelectedCategory:d})]})})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recharge History"}),e.jsx(he,{children:"Your recent mobile recharges"})]}),e.jsx(E,{children:v?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(Qe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):!y||y.length===0?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:e.jsx("p",{children:"No recharge history found"})}):e.jsx("div",{className:"space-y-3",children:y.filter(w=>w.serviceType==="mobile").slice(0,5).map(w=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w.mobileNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.provider,"  ",new Date(w.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["",w.amount]}),e.jsx("p",{className:`text-xs ${w.status==="completed"?"text-green-500":w.status==="failed"?"text-red-500":"text-yellow-500"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]})]},w.id))})})]})})]})]})}const eRe=Kt({mobileNumber:R().min(5,"Subscriber ID must be at least 5 characters").max(15,"Subscriber ID must not exceed 15 characters"),provider:R().min(1,"Please select a provider"),amount:R().min(1,"Amount is required"),serviceType:R().default("dth")});function $K(){const[,t]=br(),{toast:r}=Ue(),[s,n]=j.useState("form"),[a,i]=j.useState(null),[l,o]=j.useState(""),[c,d]=j.useState(null),u=Gt({resolver:Yt(eRe),defaultValues:{mobileNumber:"",provider:"",amount:"",serviceType:"dth"}}),m=u.watch("provider");j.useEffect(()=>{a&&u.setValue("amount",a.amount.toString())},[a,u]),j.useEffect(()=>{o(""),d(null)},[s]);const{data:h,isLoading:g,isError:x,refetch:p}=fe({queryKey:[`/api/recharge/plans/${m}`,"dth"],queryFn:({queryKey:w})=>fetch(`${w[0]}?serviceType=dth`).then(C=>{if(!C.ok)throw new Error("Failed to fetch plans");return C.json()}),enabled:s==="plans"&&!!m}),{data:y,isLoading:v}=fe({queryKey:["/api/recharge/history"],queryFn:()=>fetch("/api/recharge/history").then(w=>{if(!w.ok)throw new Error("Failed to fetch recharge history");return w.json()})}),f=Se({mutationFn:async w=>await(await ie("POST","/api/recharge",w)).json(),onSuccess:w=>{r({title:"DTH Recharge Successful",description:`Your DTH recharge for ${w.amount} was successful.`}),u.reset({mobileNumber:"",amount:"",provider:"",serviceType:"dth"}),pe.invalidateQueries({queryKey:["/api/recharge/history"]})},onError:w=>{r({title:"DTH Recharge Failed",description:w.message||"Something went wrong. Please try again.",variant:"destructive"})}});function b(w){f.mutate(w)}function N(){n(s==="form"?"plans":"form")}return e.jsxs("div",{className:"container max-w-6xl py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>t("/recharge"),children:e.jsx(us,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"DTH Recharge"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(O,{className:"h-full",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"DTH Recharge"}),e.jsx(he,{children:"Recharge your DTH connection with ease"})]}),e.jsx(E,{children:s==="form"?e.jsx(Qt,{...u,children:e.jsxs("form",{className:"space-y-4",children:[e.jsx(U,{control:u.control,name:"mobileNumber",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Customer ID / Subscriber ID"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your DTH subscriber ID",...w,maxLength:15})}),e.jsx(qe,{children:"You can find your Subscriber ID on your DTH bill or on-screen by pressing the 'Info' button on your remote."}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"provider",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"DTH Operator"}),e.jsxs(je,{onValueChange:w.onChange,defaultValue:w.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select DTH operator"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"Tata Play",children:"Tata Play"}),e.jsx(T,{value:"Airtel Digital TV",children:"Airtel Digital TV"}),e.jsx(T,{value:"Dish TV",children:"Dish TV"}),e.jsx(T,{value:"Sun Direct",children:"Sun Direct"}),e.jsx(T,{value:"D2H",children:"D2H"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"amount",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Amount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{children:e.jsx($,{placeholder:"Enter recharge amount",...w,type:"number",min:"1"})}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>{u.getValues("provider")?n("plans"):r({title:"Please select an operator first",variant:"destructive"})},children:"Browse Plans"})]}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",onClick:u.handleSubmit(b),disabled:f.isPending,children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Proceed to Pay",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:[m," DTH Plans"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:N,children:"Back to Recharge"})]}),g?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):x?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-red-500 mb-2"}),e.jsx("p",{children:"Failed to load plans. Please try again."}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(),className:"mt-4",children:"Retry"})]}):e.jsx(_k,{plansData:h,serviceType:"dth",selectedPlan:a,setSelectedPlan:i,setViewMode:n,searchTerm:l,setSearchTerm:o,selectedCategory:c,setSelectedCategory:d})]})})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recharge History"}),e.jsx(he,{children:"Your recent DTH recharges"})]}),e.jsx(E,{children:v?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(Qe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):!y||y.length===0?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:e.jsx("p",{children:"No recharge history found"})}):e.jsx("div",{className:"space-y-3",children:y.filter(w=>w.serviceType==="dth").slice(0,5).map(w=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w.mobileNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.provider,"  ",new Date(w.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["",w.amount]}),e.jsx("p",{className:`text-xs ${w.status==="completed"?"text-green-500":w.status==="failed"?"text-red-500":"text-yellow-500"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]})]},w.id))})})]})})]})]})}const tRe=Kt({mobileNumber:R().min(5,"Consumer number must be at least 5 characters").max(20,"Consumer number must not exceed 20 characters"),provider:R().min(1,"Please select a provider"),amount:R().min(1,"Amount is required"),serviceType:R().default("electricity")});function LK(){const[,t]=br(),{toast:r}=Ue(),[s,n]=j.useState("form"),[a,i]=j.useState(null),[l,o]=j.useState(""),[c,d]=j.useState(null),u=Gt({resolver:Yt(tRe),defaultValues:{mobileNumber:"",provider:"",amount:"",serviceType:"electricity"}}),m=u.watch("provider");j.useEffect(()=>{a&&u.setValue("amount",a.amount.toString())},[a,u]),j.useEffect(()=>{o(""),d(null)},[s]);const{data:h,isLoading:g,isError:x,refetch:p}=fe({queryKey:[`/api/recharge/plans/${m}`,"electricity"],queryFn:({queryKey:w})=>fetch(`${w[0]}?serviceType=electricity`).then(C=>{if(!C.ok)throw new Error("Failed to fetch plans");return C.json()}),enabled:s==="plans"&&!!m}),{data:y,isLoading:v}=fe({queryKey:["/api/recharge/history"],queryFn:()=>fetch("/api/recharge/history").then(w=>{if(!w.ok)throw new Error("Failed to fetch recharge history");return w.json()})}),f=Se({mutationFn:async w=>await(await ie("POST","/api/recharge",w)).json(),onSuccess:w=>{r({title:"Electricity Bill Payment Successful",description:`Your electricity bill payment of ${w.amount} was successful.`}),u.reset({mobileNumber:"",amount:"",provider:"",serviceType:"electricity"}),pe.invalidateQueries({queryKey:["/api/recharge/history"]})},onError:w=>{r({title:"Electricity Bill Payment Failed",description:w.message||"Something went wrong. Please try again.",variant:"destructive"})}});function b(w){f.mutate(w)}function N(){n(s==="form"?"plans":"form")}return e.jsxs("div",{className:"container max-w-6xl py-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>t("/recharge"),children:e.jsx(us,{className:"h-4 w-4"})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Electricity Bill Payment"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(O,{className:"h-full",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Electricity Bill Payment"}),e.jsx(he,{children:"Pay your electricity bills with ease"})]}),e.jsx(E,{children:s==="form"?e.jsx(Qt,{...u,children:e.jsxs("form",{className:"space-y-4",children:[e.jsx(U,{control:u.control,name:"mobileNumber",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Consumer Number / Service Number"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your consumer number",...w,maxLength:20})}),e.jsx(qe,{children:"You can find your consumer number on your electricity bill"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"provider",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Electricity Board"}),e.jsxs(je,{onValueChange:w.onChange,defaultValue:w.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select electricity provider"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"TNEB",children:"Tamil Nadu Electricity Board (TNEB)"}),e.jsx(T,{value:"BESCOM",children:"Bangalore Electricity Supply (BESCOM)"}),e.jsx(T,{value:"KSEB",children:"Kerala State Electricity Board (KSEB)"}),e.jsx(T,{value:"APTRANSCO",children:"Andhra Pradesh Transmission Corp"}),e.jsx(T,{value:"TSSPDCL",children:"Telangana State Southern Power Distribution"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"amount",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Amount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(V,{children:e.jsx($,{placeholder:"Enter bill amount",...w,type:"number",min:"1"})}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>{u.getValues("provider")?n("plans"):r({title:"Please select an electricity provider first",variant:"destructive"})},children:"View Plans"})]}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",onClick:u.handleSubmit(b),disabled:f.isPending,children:f.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Proceed to Pay",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:[m," Payment Plans"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:N,children:"Back to Payment"})]}),g?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):x?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-red-500 mb-2"}),e.jsx("p",{children:"Failed to load plans. Please try again."}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(),className:"mt-4",children:"Retry"})]}):e.jsx(_k,{plansData:h,serviceType:"electricity",selectedPlan:a,setSelectedPlan:i,setViewMode:n,searchTerm:l,setSearchTerm:o,selectedCategory:c,setSelectedCategory:d})]})})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Payment History"}),e.jsx(he,{children:"Your recent electricity bill payments"})]}),e.jsx(E,{children:v?e.jsx("div",{className:"py-12 flex justify-center",children:e.jsx(Qe,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):!y||y.length===0?e.jsx("div",{className:"text-center py-6 text-muted-foreground",children:e.jsx("p",{children:"No payment history found"})}):e.jsx("div",{className:"space-y-3",children:y.filter(w=>w.serviceType==="electricity").slice(0,5).map(w=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:w.mobileNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.provider,"  ",new Date(w.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["",w.amount]}),e.jsx("p",{className:`text-xs ${w.status==="completed"?"text-green-500":w.status==="failed"?"text-red-500":"text-yellow-500"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]})]},w.id))})})]})})]})]})}const Yx=({title:t,icon:r,description:s})=>e.jsx(O,{className:"border border-dashed bg-card/50",children:e.jsxs(E,{className:"flex flex-col items-center justify-center py-10 px-6 text-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mb-4",children:r}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:t}),e.jsx("p",{className:"text-muted-foreground text-sm",children:s}),e.jsx("div",{className:"mt-4",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/10 px-3 py-1 text-xs font-medium text-primary",children:"Coming Soon"})})]})});function gh(){const[,t]=br();return e.jsxs("div",{className:"container max-w-6xl py-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>t("/recharge"),className:"h-9 w-9",children:e.jsx(us,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_$,{className:"h-5 w-5 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 text-transparent bg-clip-text",children:"All Recharge Services"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Pay all your utility bills from a single dashboard"})]})]}),e.jsxs(nr,{defaultValue:"mobile",className:"w-full",children:[e.jsxs(sr,{className:"mb-6 w-full flex justify-start overflow-x-auto",children:[e.jsxs(Ae,{value:"mobile",className:"flex items-center gap-2",children:[e.jsx(Uo,{className:"h-4 w-4"})," Mobile"]}),e.jsxs(Ae,{value:"dth",className:"flex items-center gap-2",children:[e.jsx(O$,{className:"h-4 w-4"})," DTH"]}),e.jsxs(Ae,{value:"electricity",className:"flex items-center gap-2",children:[e.jsx(E$,{className:"h-4 w-4"})," Electricity"]}),e.jsxs(Ae,{value:"gas",className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-4 w-4"})," Gas"]}),e.jsxs(Ae,{value:"broadband",className:"flex items-center gap-2",children:[e.jsx(Ww,{className:"h-4 w-4"})," Broadband"]}),e.jsxs(Ae,{value:"water",className:"flex items-center gap-2",children:[e.jsx(ev,{className:"h-4 w-4"})," Water"]}),e.jsxs(Ae,{value:"credit-card",className:"flex items-center gap-2",children:[e.jsx(fa,{className:"h-4 w-4"})," Credit Card"]})]}),e.jsx(Ve,{value:"mobile",children:e.jsx("div",{className:"mt-2",children:e.jsx(FK,{})})}),e.jsx(Ve,{value:"dth",children:e.jsx("div",{className:"mt-2",children:e.jsx($K,{})})}),e.jsx(Ve,{value:"electricity",children:e.jsx("div",{className:"mt-2",children:e.jsx(LK,{})})}),e.jsx(Ve,{value:"gas",children:e.jsx("div",{className:"mt-4",children:e.jsx(Yx,{title:"Gas Bill Payment",icon:e.jsx(_o,{className:"h-7 w-7 text-primary"}),description:"Pay your gas bills for all major gas providers with instant confirmation and receipts."})})}),e.jsx(Ve,{value:"broadband",children:e.jsx("div",{className:"mt-4",children:e.jsx(Yx,{title:"Broadband Bill Payment",icon:e.jsx(Ww,{className:"h-7 w-7 text-primary"}),description:"Pay your broadband and internet bills for all ISPs with attractive cashback offers."})})}),e.jsx(Ve,{value:"water",children:e.jsx("div",{className:"mt-4",children:e.jsx(Yx,{title:"Water Bill Payment",icon:e.jsx(ev,{className:"h-7 w-7 text-primary"}),description:"Pay your water utility bills for all municipalities and water boards with zero convenience fee."})})}),e.jsx(Ve,{value:"credit-card",children:e.jsx("div",{className:"mt-4",children:e.jsx(Yx,{title:"Credit Card Bill Payment",icon:e.jsx(fa,{className:"h-7 w-7 text-primary"}),description:"Pay your credit card bills for all major banks with rewards and special offers."})})})]}),e.jsx(Tr,{className:"my-8"}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Have questions about our recharge services? ",e.jsx(_,{variant:"link",className:"h-auto p-0",children:"Contact Support"})]})})]})}const rRe=Kt({bookingType:Yr(["bus","flight","hotel"]),origin:R().min(1,"Origin is required"),destination:R().min(1,"Destination is required").optional(),checkIn:R().min(1,"Check-in date is required"),checkOut:R().min(1,"Check-out date is required").optional(),passengers:R().min(1,"Number of passengers is required").refine(t=>!isNaN(parseInt(t))&&parseInt(t)>0,{message:"Passengers must be a positive number"}).optional(),amount:R().min(1,"Amount is required").refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Amount must be a positive number"})});function wN(t){const r=new Date(t);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric"}).format(r)}function sRe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("bus"),a=new Date().toISOString().split("T")[0],{data:i,isLoading:l}=fe({queryKey:["/api/booking"],enabled:!!t}),o=Gt({resolver:Yt(rRe),defaultValues:{bookingType:"bus",origin:"",destination:"",checkIn:a,checkOut:"",passengers:"1",amount:""}}),c=o.watch("bookingType"),d=x=>{n(x),o.setValue("bookingType",x),x==="hotel"?o.setValue("destination",""):o.setValue("checkOut","")},u=["Chennai","Coimbatore","Madurai","Trichy","Salem","Tirunelveli","Erode","Vellore"],m=Se({mutationFn:async x=>{const p={...x,passengers:x.passengers?parseInt(x.passengers):void 0,amount:parseFloat(x.amount),status:"pending"};return await(await ie("POST","/api/booking",p)).json()},onSuccess:()=>{r({title:"Booking Successful",description:`Your ${c} booking has been confirmed.`}),pe.invalidateQueries({queryKey:["/api/booking"]}),pe.invalidateQueries({queryKey:["/api/wallet"]}),o.reset({bookingType:c,origin:"",destination:"",checkIn:a,checkOut:"",passengers:"1",amount:""})},onError:x=>{r({title:"Booking Failed",description:x.message,variant:"destructive"})}});function h(x){m.mutate(x)}const g=x=>{switch(x){case"bus":o.setValue("amount","650");break;case"flight":o.setValue("amount","3500");break;case"hotel":o.setValue("amount","2800");break}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Travel Bookings"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Book buses, flights, and hotels across Tamil Nadu and beyond."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Book Your Travel"}),e.jsx(he,{children:"Find the best deals for your journey"})]}),e.jsx(E,{children:e.jsxs(nr,{value:s,onValueChange:d,children:[e.jsxs(sr,{className:"grid grid-cols-3 mb-6",children:[e.jsxs(Ae,{value:"bus",className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"h-4 w-4"}),e.jsx("span",{children:"Bus"})]}),e.jsxs(Ae,{value:"flight",className:"flex items-center gap-2",children:[e.jsx(ki,{className:"h-4 w-4"}),e.jsx("span",{children:"Flight"})]}),e.jsxs(Ae,{value:"hotel",className:"flex items-center gap-2",children:[e.jsx(An,{className:"h-4 w-4"}),e.jsx("span",{children:"Hotel"})]})]}),e.jsx(Ve,{value:"bus",children:e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(h),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:o.control,name:"origin",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"From"]}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select origin city"})})}),e.jsx(ve,{children:u.map(p=>e.jsx(T,{value:p,children:p},p))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"destination",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"To"]}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select destination city"})})}),e.jsx(ve,{children:u.map(p=>e.jsx(T,{value:p,children:p},p))})]}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:o.control,name:"checkIn",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Journey Date"]}),e.jsx(V,{children:e.jsx($,{type:"date",...x,min:a})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"passengers",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(rr,{className:"h-4 w-4"}),"Passengers"]}),e.jsx(V,{children:e.jsx($,{type:"number",min:"1",max:"10",...x})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:o.control,name:"amount",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Fare Amount"}),e.jsx(V,{children:e.jsx($,{...x,disabled:!0,className:"bg-neutral-50"})}),!x.value&&e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>g("bus"),children:"Check Fare"}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:m.isPending||!o.getValues("amount"),children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Book Now",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})})}),e.jsx(Ve,{value:"flight",children:e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(h),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:o.control,name:"origin",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"From"]}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select origin city"})})}),e.jsx(ve,{children:["Chennai","Coimbatore","Madurai","Trichy"].map(p=>e.jsx(T,{value:p,children:p},p))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"destination",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"To"]}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select destination city"})})}),e.jsx(ve,{children:["Delhi","Mumbai","Bangalore","Hyderabad","Kolkata"].map(p=>e.jsx(T,{value:p,children:p},p))})]}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:o.control,name:"checkIn",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Journey Date"]}),e.jsx(V,{children:e.jsx($,{type:"date",...x,min:a})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"passengers",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(rr,{className:"h-4 w-4"}),"Passengers"]}),e.jsx(V,{children:e.jsx($,{type:"number",min:"1",max:"10",...x})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:o.control,name:"amount",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Fare Amount"}),e.jsx(V,{children:e.jsx($,{...x,disabled:!0,className:"bg-neutral-50"})}),!x.value&&e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>g("flight"),children:"Check Fare"}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:m.isPending||!o.getValues("amount"),children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Book Flight",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})})}),e.jsx(Ve,{value:"hotel",children:e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(h),className:"space-y-4",children:[e.jsx(U,{control:o.control,name:"origin",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"City"]}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select city"})})}),e.jsx(ve,{children:u.map(p=>e.jsx(T,{value:p,children:p},p))})]}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:o.control,name:"checkIn",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Check-in Date"]}),e.jsx(V,{children:e.jsx($,{type:"date",...x,min:a})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"checkOut",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Check-out Date"]}),e.jsx(V,{children:e.jsx($,{type:"date",...x,min:o.getValues("checkIn")||a})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:o.control,name:"passengers",render:({field:x})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(rr,{className:"h-4 w-4"}),"Guests"]}),e.jsx(V,{children:e.jsx($,{type:"number",min:"1",max:"10",...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"amount",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Room Rate"}),e.jsx(V,{children:e.jsx($,{...x,disabled:!0,className:"bg-neutral-50"})}),!x.value&&e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:()=>g("hotel"),children:"Check Rate"}),e.jsx(H,{})]})})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:m.isPending||!o.getValues("amount"),children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Book Hotel",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})})})]})})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Bookings"}),e.jsx(he,{children:"View your recent travel bookings"})]}),e.jsx(E,{children:l?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):i&&i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(x=>e.jsxs("div",{className:"flex items-start border-b border-neutral-200 pb-4 last:border-0",children:[e.jsx("div",{className:`p-2 rounded-full ${x.status==="confirmed"?"bg-green-100 text-green-600":x.status==="cancelled"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:x.bookingType==="bus"?e.jsx(Mi,{className:"h-4 w-4"}):x.bookingType==="flight"?e.jsx(ki,{className:"h-4 w-4"}):e.jsx(An,{className:"h-4 w-4"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:[x.bookingType.charAt(0).toUpperCase()+x.bookingType.slice(1)," Booking"]}),e.jsxs("p",{className:"text-sm font-semibold text-neutral-900",children:["",x.amount]})]}),x.bookingType!=="hotel"&&e.jsxs("p",{className:"text-xs text-neutral-500",children:[x.origin," to ",x.destination]}),x.bookingType==="hotel"&&e.jsxs("p",{className:"text-xs text-neutral-500",children:[x.origin," - ",x.checkIn&&wN(x.checkIn)," to ",x.checkOut&&wN(x.checkOut)]}),x.bookingType!=="hotel"&&e.jsxs("p",{className:"text-xs text-neutral-500",children:[x.checkIn&&wN(x.checkIn),x.passengers&&`  ${x.passengers} ${x.passengers===1?"passenger":"passengers"}`]}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${x.status==="confirmed"?"bg-green-100 text-green-600":x.status==="cancelled"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)})})]})]},x.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-neutral-400 mb-2"}),e.jsx("p",{className:"text-neutral-500",children:"No bookings found"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Your travel bookings will appear here"})]})}),i&&i.length>5&&e.jsx(pr,{children:e.jsx(_,{variant:"ghost",className:"w-full text-primary",children:"View All Bookings"})})]})})]})]})}const nRe=Kt({itemName:R().min(1,"Item name is required"),category:Yr(["power_tools","construction","cleaning","medical","ornament"]),startDate:R().min(1,"Start date is required"),endDate:R().min(1,"End date is required"),amount:R().min(1,"Amount is required").refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Amount must be a positive number"})});function WD(t){const r=new Date(t);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric"}).format(r)}function SN(t,r){const s=new Date(t),n=new Date(r),a=Math.abs(n.getTime()-s.getTime());return Math.ceil(a/(1e3*60*60*24))}function aRe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("power_tools"),a=new Date().toISOString().split("T")[0],i=new Date;i.setDate(i.getDate()+1);const l=i.toISOString().split("T")[0],{data:o,isLoading:c}=fe({queryKey:["/api/rental"],enabled:!!t}),d=Gt({resolver:Yt(nRe),defaultValues:{itemName:"",category:"power_tools",startDate:a,endDate:l,amount:""}}),u=d.watch("startDate"),m=d.watch("endDate"),h=d.watch("itemName"),g=b=>{n(b),d.setValue("category",b),d.setValue("itemName",""),d.setValue("amount","")},x={power_tools:[{name:"Drill Machine",rate:200},{name:"Circular Saw",rate:250},{name:"Angle Grinder",rate:180},{name:"Jigsaw",rate:220},{name:"Router",rate:260}],construction:[{name:"Concrete Mixer",rate:800},{name:"Scaffolding Set",rate:600},{name:"Tile Cutter",rate:350},{name:"Compactor",rate:700},{name:"Ladder (8ft)",rate:120}],cleaning:[{name:"Pressure Washer",rate:400},{name:"Industrial Vacuum",rate:300},{name:"Floor Polisher",rate:350},{name:"Carpet Cleaner",rate:450},{name:"Steam Cleaner",rate:380}],medical:[{name:"Wheelchair",rate:150},{name:"Hospital Bed",rate:500},{name:"Oxygen Concentrator",rate:700},{name:"Blood Pressure Monitor",rate:80},{name:"Nebulizer",rate:120}],ornament:[{name:"Bridal Jewelry Set",rate:1200},{name:"Wedding Necklace",rate:800},{name:"Traditional Earrings",rate:400},{name:"Designer Bangles",rate:350},{name:"Statement Rings",rate:300}]},p={power_tools:e.jsx(Os,{className:"h-5 w-5"}),construction:e.jsx(S0,{className:"h-5 w-5"}),cleaning:e.jsx(b0,{className:"h-5 w-5"}),medical:e.jsx(C0,{className:"h-5 w-5"}),ornament:e.jsx(w0,{className:"h-5 w-5"})},y=()=>{if(h&&u&&m){const b=x[s].find(N=>N.name===h);if(b){const N=SN(u,m),w=b.rate*N;d.setValue("amount",w.toString())}}},v=Se({mutationFn:async b=>{const N={...b,amount:parseFloat(b.amount),status:"pending"},C=await(await ie("POST","/api/rental",N)).json(),P={serviceType:"rental",amount:parseFloat(b.amount),paymentMethod:"razorpay",serviceData:{itemName:b.itemName,category:b.category,startDate:b.startDate,endDate:b.endDate,rentalId:C.id}},A=await(await ie("POST","/api/service-requests",P)).json();return{rental:C,serviceRequest:A}},onSuccess:b=>{r({title:"Rental Successful",description:`Your ${h} has been rented successfully! Service request ${b.serviceRequest.srNumber} has been generated.`}),pe.invalidateQueries({queryKey:["/api/rental"]}),pe.invalidateQueries({queryKey:["/api/wallet"]}),pe.invalidateQueries({queryKey:["/api/service-requests/my-requests"]}),d.reset({itemName:"",category:s,startDate:a,endDate:l,amount:""})},onError:b=>{r({title:"Rental Failed",description:b.message,variant:"destructive"})}});function f(b){v.mutate(b)}return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Rental Services"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Rent tools and equipment for your needs at affordable prices."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Rent Equipment"}),e.jsx(he,{children:"Select from our wide range of rental items"})]}),e.jsx(E,{children:e.jsxs(nr,{value:s,onValueChange:g,children:[e.jsxs(sr,{className:"grid grid-cols-5 mb-6",children:[e.jsxs(Ae,{value:"power_tools",className:"flex flex-col py-2 px-1 h-auto",children:[e.jsx(Os,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Power Tools"})]}),e.jsxs(Ae,{value:"construction",className:"flex flex-col py-2 px-1 h-auto",children:[e.jsx(S0,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Construction"})]}),e.jsxs(Ae,{value:"cleaning",className:"flex flex-col py-2 px-1 h-auto",children:[e.jsx(b0,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Cleaning"})]}),e.jsxs(Ae,{value:"medical",className:"flex flex-col py-2 px-1 h-auto",children:[e.jsx(C0,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Medical"})]}),e.jsxs(Ae,{value:"ornament",className:"flex flex-col py-2 px-1 h-auto",children:[e.jsx(w0,{className:"h-5 w-5 mb-1"}),e.jsx("span",{className:"text-xs",children:"Ornaments"})]})]}),Object.keys(x).map(b=>e.jsx(Ve,{value:b,children:e.jsx(Qt,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(f),className:"space-y-4",children:[e.jsx(U,{control:d.control,name:"itemName",render:({field:N})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[p[b],e.jsx("span",{children:"Select Item"})]}),e.jsxs(je,{onValueChange:w=>{N.onChange(w),setTimeout(y,0)},defaultValue:N.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:`Select a ${b.replace("_"," ")}`})})}),e.jsx(ve,{children:x[b].map(w=>e.jsxs(T,{value:w.name,children:[w.name," - ",w.rate,"/day"]},w.name))})]}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:d.control,name:"startDate",render:({field:N})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"Start Date"]}),e.jsx(V,{children:e.jsx($,{type:"date",...N,min:a,onChange:w=>{N.onChange(w),setTimeout(y,0)}})}),e.jsx(H,{})]})}),e.jsx(U,{control:d.control,name:"endDate",render:({field:N})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"h-4 w-4"}),"End Date"]}),e.jsx(V,{children:e.jsx($,{type:"date",...N,min:u||a,onChange:w=>{N.onChange(w),setTimeout(y,0)}})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:d.control,name:"amount",render:({field:N})=>{var w;return e.jsxs(L,{children:[e.jsx(B,{children:"Total Rental Amount"}),e.jsx(V,{children:e.jsx($,{...N,disabled:!0,className:"bg-neutral-50"})}),e.jsx(H,{}),h&&u&&m&&!N.value&&e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:y,children:"Calculate Amount"}),N.value&&e.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:[SN(u,m)," days  ",((w=x[b].find(C=>C.name===h))==null?void 0:w.rate)||0,"/day"]})]})}}),e.jsx(_,{type:"submit",className:"w-full",disabled:v.isPending||!d.getValues("amount"),children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Rent Now",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})})},b))]})})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Rentals"}),e.jsx(he,{children:"View your active and past rentals"})]}),e.jsx(E,{children:c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):o&&o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(b=>e.jsxs("div",{className:"flex items-start border-b border-neutral-200 pb-4 last:border-0",children:[e.jsx("div",{className:`p-2 rounded-full ${b.status==="active"?"bg-green-100 text-green-600":b.status==="cancelled"?"bg-red-100 text-red-600":b.status==="returned"?"bg-blue-100 text-blue-600":"bg-yellow-100 text-yellow-600"}`,children:(()=>{switch(b.category){case"power_tools":return e.jsx(Os,{className:"h-4 w-4"});case"construction":return e.jsx(S0,{className:"h-4 w-4"});case"cleaning":return e.jsx(b0,{className:"h-4 w-4"});case"medical":return e.jsx(C0,{className:"h-4 w-4"});case"ornament":return e.jsx(w0,{className:"h-4 w-4"});default:return e.jsx(Os,{className:"h-4 w-4"})}})()}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:b.itemName}),e.jsxs("p",{className:"text-sm font-semibold text-neutral-900",children:["",b.amount]})]}),e.jsxs("p",{className:"text-xs text-neutral-500",children:[WD(b.startDate)," to ",WD(b.endDate)]}),e.jsxs("p",{className:"text-xs text-neutral-500",children:[b.category.charAt(0).toUpperCase()+b.category.slice(1).replace("_"," "),"  ",SN(b.startDate,b.endDate)," days"]}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${b.status==="active"?"bg-green-100 text-green-600":b.status==="cancelled"?"bg-red-100 text-red-600":b.status==="returned"?"bg-blue-100 text-blue-600":"bg-yellow-100 text-yellow-600"}`,children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})})]}),b.status==="active"&&e.jsx(_,{variant:"outline",size:"sm",className:"ml-2 text-xs h-8",children:"Return"})]},b.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-neutral-400 mb-2"}),e.jsx("p",{className:"text-neutral-500",children:"No rentals found"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Your rental history will appear here"})]})}),o&&o.length>5&&e.jsx(pr,{children:e.jsx(_,{variant:"ghost",className:"w-full text-primary",children:"View All Rentals"})})]})})]})]})}const iRe=Kt({pickup:R().min(1,"Pickup location is required"),dropoff:R().min(1,"Dropoff location is required"),distance:R().min(1,"Distance is required").refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Distance must be a positive number"}),amount:R().min(1,"Amount is required").refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Amount must be a positive number"})});function lRe(t){const r=new Date(t);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)}function oRe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("regular"),{data:a,isLoading:i}=fe({queryKey:["/api/taxi"],enabled:!!t}),l=Gt({resolver:Yt(iRe),defaultValues:{pickup:"",dropoff:"",distance:"",amount:""}}),o=["Chennai Central","T Nagar","Anna Nagar","Adyar","Velachery","Tambaram","Guindy","Mylapore","Egmore","Porur","Vadapalani","Nungambakkam","Besant Nagar","Royapettah","Teynampet"],c=l.watch("distance"),d=()=>{if(c){const h=parseFloat(c);let g=0;switch(s){case"regular":g=12;break;case"premium":g=18;break;case"suv":g=22;break;default:g=12}const p=40+h*g;l.setValue("amount",p.toFixed(2))}},u=Se({mutationFn:async h=>{const g={...h,distance:parseFloat(h.distance),amount:parseFloat(h.amount),status:"pending"};return await(await ie("POST","/api/taxi",g)).json()},onSuccess:()=>{r({title:"Taxi Booked Successfully",description:`Your ride from ${l.getValues("pickup")} to ${l.getValues("dropoff")} has been confirmed.`}),pe.invalidateQueries({queryKey:["/api/taxi"]}),pe.invalidateQueries({queryKey:["/api/wallet"]}),l.reset({pickup:"",dropoff:"",distance:"",amount:""})},onError:h=>{r({title:"Booking Failed",description:h.message,variant:"destructive"})}});function m(h){u.mutate(h)}return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Taxi Services"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Book taxis for your travel needs within Tamil Nadu."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Book a Ride"}),e.jsx(he,{children:"Choose your cab type and enter journey details"})]}),e.jsx(E,{children:e.jsxs(nr,{value:s,onValueChange:h=>{n(h),c&&setTimeout(d,0)},children:[e.jsxs(sr,{className:"grid grid-cols-3 mb-6",children:[e.jsxs(Ae,{value:"regular",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Regular"})]}),e.jsxs(Ae,{value:"premium",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"Premium"})]}),e.jsxs(Ae,{value:"suv",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{children:"SUV"})]})]}),["regular","premium","suv"].map(h=>e.jsxs(Ve,{value:h,children:[e.jsx("div",{className:"bg-primary/5 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-full bg-primary/10 text-primary",children:e.jsx(Et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary",children:h==="regular"?"Regular Cab":h==="premium"?"Premium Sedan":"SUV"}),e.jsx("p",{className:"text-xs text-neutral-600",children:h==="regular"?"Affordable rides for daily travel":h==="premium"?"Comfortable sedans for a premium experience":"Spacious SUVs for family and group travel"})]}),e.jsxs("div",{className:"ml-auto text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:["",h==="regular"?"12":h==="premium"?"18":"22","/km"]}),e.jsx("p",{className:"text-xs text-neutral-500",children:"+ 40 base fare"})]})]})}),e.jsx(Qt,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(m),className:"space-y-4",children:[e.jsx(U,{control:l.control,name:"pickup",render:({field:g})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"Pickup Location"]}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{children:e.jsxs(je,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(ge,{className:"pl-9",children:e.jsx(be,{placeholder:"Enter pickup location"})}),e.jsx(ve,{children:o.map(x=>e.jsx(T,{value:x,children:x},x))})]})}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(gt,{className:"h-4 w-4 text-neutral-400"})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(H,{}),e.jsxs(_,{type:"button",variant:"ghost",size:"sm",className:"h-6 px-2 text-xs flex items-center gap-1 text-primary",children:[e.jsx(dZ,{className:"h-3 w-3"}),"Current Location"]})]})]})}),e.jsx(U,{control:l.control,name:"dropoff",render:({field:g})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"Dropoff Location"]}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{children:e.jsxs(je,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(ge,{className:"pl-9",children:e.jsx(be,{placeholder:"Enter dropoff location"})}),e.jsx(ve,{children:o.map(x=>e.jsx(T,{value:x,children:x},x))})]})}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(gt,{className:"h-4 w-4 text-neutral-400"})})]}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:l.control,name:"distance",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Distance (km)"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"1",step:"0.1",...g,onChange:x=>{g.onChange(x),setTimeout(d,0)}})}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"amount",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Estimated Fare"}),e.jsx(V,{children:e.jsx($,{...g,disabled:!0,className:"bg-neutral-50"})}),e.jsx(H,{})]})})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:u.isPending||!l.getValues("amount"),children:u.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Book Taxi",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})})]},h))]})})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Rides"}),e.jsx(he,{children:"View your recent taxi bookings"})]}),e.jsx(E,{children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(h=>e.jsxs("div",{className:"flex items-start border-b border-neutral-200 pb-4 last:border-0",children:[e.jsx("div",{className:`p-2 rounded-full ${h.status==="completed"?"bg-green-100 text-green-600":h.status==="cancelled"?"bg-red-100 text-red-600":h.status==="active"?"bg-blue-100 text-blue-600":"bg-yellow-100 text-yellow-600"}`,children:e.jsx(Et,{className:"h-4 w-4"})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Taxi Ride"}),e.jsxs("p",{className:"text-sm font-semibold text-neutral-900",children:["",h.amount]})]}),e.jsxs("p",{className:"text-xs text-neutral-500",children:[h.pickup,"  ",h.dropoff]}),e.jsxs("p",{className:"text-xs text-neutral-500",children:[lRe(h.createdAt),"  ",h.distance," km"]}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${h.status==="completed"?"bg-green-100 text-green-600":h.status==="cancelled"?"bg-red-100 text-red-600":h.status==="active"?"bg-blue-100 text-blue-600":"bg-yellow-100 text-yellow-600"}`,children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})})]}),h.status==="active"&&e.jsx("div",{className:"ml-2",children:e.jsx(_,{variant:"outline",size:"sm",className:"text-xs h-8 px-2",children:"Track"})})]},h.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-neutral-400 mb-2"}),e.jsx("p",{className:"text-neutral-500",children:"No rides found"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Your taxi bookings will appear here"})]})}),a&&a.length>5&&e.jsx(pr,{children:e.jsx(_,{variant:"ghost",className:"w-full text-primary",children:"View All Rides"})})]})})]})]})}const cRe=Kt({pickupAddress:R().min(1,"Pickup address is required"),deliveryAddress:R().min(1,"Delivery address is required"),packageDetails:R().min(1,"Package details are required"),amount:R().min(1,"Amount is required").refine(t=>!isNaN(parseFloat(t))&&parseFloat(t)>0,{message:"Amount must be a positive number"})});function dRe(t){const r=new Date(t);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)}function uRe(t){switch(t){case"pending":return e.jsx(yt,{className:"h-4 w-4"});case"picked_up":return e.jsx(ft,{className:"h-4 w-4"});case"in_transit":return e.jsx($n,{className:"h-4 w-4"});case"delivered":return e.jsx(Ks,{className:"h-4 w-4"});case"cancelled":return e.jsx(lr,{className:"h-4 w-4"});default:return e.jsx(ft,{className:"h-4 w-4"})}}function GD(t){switch(t){case"pending":return"bg-yellow-100 text-yellow-600";case"picked_up":return"bg-blue-100 text-blue-600";case"in_transit":return"bg-purple-100 text-purple-600";case"delivered":return"bg-green-100 text-green-600";case"cancelled":return"bg-red-100 text-red-600";default:return"bg-yellow-100 text-yellow-600"}}function mRe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("standard"),{data:a,isLoading:i}=fe({queryKey:["/api/delivery"],enabled:!!t}),l=Gt({resolver:Yt(cRe),defaultValues:{pickupAddress:"",deliveryAddress:"",packageDetails:"",amount:""}}),o=()=>{const u=l.getValues("pickupAddress"),m=l.getValues("deliveryAddress");if(u&&m){let h=80;switch(s){case"express":h+=60;break;case"premium":h+=120;break}const x=(Math.floor(Math.random()*20)+5)*5,p=h+x;l.setValue("amount",p.toString())}},c=Se({mutationFn:async u=>{const m={...u,amount:parseFloat(u.amount),status:"pending"};return await(await ie("POST","/api/delivery",m)).json()},onSuccess:()=>{r({title:"Delivery Request Successful",description:"Your package delivery request has been confirmed."}),pe.invalidateQueries({queryKey:["/api/delivery"]}),pe.invalidateQueries({queryKey:["/api/wallet"]}),l.reset({pickupAddress:"",deliveryAddress:"",packageDetails:"",amount:""})},onError:u=>{r({title:"Delivery Request Failed",description:u.message,variant:"destructive"})}});function d(u){c.mutate(u)}return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Delivery Management"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Manage package deliveries across Tamil Nadu at affordable rates."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Schedule a Delivery"}),e.jsx(he,{children:"Provide details for your package delivery"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer ${s==="standard"?"border-primary bg-primary/5":"border-neutral-200"}`,onClick:()=>n("standard"),children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx($n,{className:`h-6 w-6 mb-2 ${s==="standard"?"text-primary":"text-neutral-500"}`}),e.jsx("h3",{className:`text-sm font-medium ${s==="standard"?"text-primary":"text-neutral-700"}`,children:"Standard"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"24-48 hours"})]})}),e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer ${s==="express"?"border-primary bg-primary/5":"border-neutral-200"}`,onClick:()=>n("express"),children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(gZ,{className:`h-6 w-6 mb-2 ${s==="express"?"text-primary":"text-neutral-500"}`}),e.jsx("h3",{className:`text-sm font-medium ${s==="express"?"text-primary":"text-neutral-700"}`,children:"Express"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"12-24 hours"})]})}),e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer ${s==="premium"?"border-primary bg-primary/5":"border-neutral-200"}`,onClick:()=>n("premium"),children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(ZX,{className:`h-6 w-6 mb-2 ${s==="premium"?"text-primary":"text-neutral-500"}`}),e.jsx("h3",{className:`text-sm font-medium ${s==="premium"?"text-primary":"text-neutral-700"}`,children:"Premium"}),e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"6-12 hours"})]})})]}),e.jsx(Qt,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(d),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:l.control,name:"pickupAddress",render:({field:u})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"Pickup Address"]}),e.jsx(V,{children:e.jsx(at,{...u,placeholder:"Enter complete pickup address",className:"resize-none min-h-[100px]",onChange:m=>{u.onChange(m),l.getValues("deliveryAddress")&&o()}})}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"deliveryAddress",render:({field:u})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),"Delivery Address"]}),e.jsx(V,{children:e.jsx(at,{...u,placeholder:"Enter complete delivery address",className:"resize-none min-h-[100px]",onChange:m=>{u.onChange(m),l.getValues("pickupAddress")&&o()}})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:l.control,name:"packageDetails",render:({field:u})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(ft,{className:"h-4 w-4"}),"Package Details"]}),e.jsx(V,{children:e.jsx(at,{...u,placeholder:"Describe the package contents, dimensions, and weight",className:"resize-none"})}),e.jsx(H,{})]})}),e.jsx(U,{control:l.control,name:"amount",render:({field:u})=>e.jsxs(L,{children:[e.jsxs(B,{className:"flex items-center gap-1",children:[e.jsx(j$,{className:"h-4 w-4"}),"Delivery Charges"]}),e.jsx(V,{children:e.jsx($,{...u,disabled:!0,className:"bg-neutral-50"})}),e.jsx(H,{}),!u.value&&l.getValues("pickupAddress")&&l.getValues("deliveryAddress")&&e.jsx(_,{type:"button",variant:"outline",size:"sm",onClick:o,children:"Calculate Charges"})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:c.isPending||!l.getValues("amount"),children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Schedule Delivery",e.jsx(ii,{className:"ml-2 h-4 w-4"})]})})]})})]})]})}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Deliveries"}),e.jsx(he,{children:"Track your package delivery status"})]}),e.jsx(E,{children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(u=>e.jsxs("div",{className:"border border-neutral-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-neutral-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-full ${GD(u.status)}`,children:uRe(u.status)}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900",children:["Delivery #",u.id.toString().padStart(5,"0")]}),e.jsx("p",{className:"text-xs text-neutral-500",children:dRe(u.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-neutral-900",children:["",u.amount]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${GD(u.status)}`,children:u.status.split("_").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ")})]})]})}),e.jsxs("div",{className:"p-4 bg-neutral-50 text-xs",children:[e.jsxs("div",{className:"flex items-start mb-2",children:[e.jsx(gt,{className:"h-4 w-4 text-neutral-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-700",children:"Pickup Address:"}),e.jsx("p",{className:"text-neutral-600",children:u.pickupAddress})]})]}),e.jsxs("div",{className:"flex items-start mb-2",children:[e.jsx(gt,{className:"h-4 w-4 text-neutral-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-700",children:"Delivery Address:"}),e.jsx("p",{className:"text-neutral-600",children:u.deliveryAddress})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(N$,{className:"h-4 w-4 text-neutral-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-neutral-700",children:"Package Details:"}),e.jsx("p",{className:"text-neutral-600",children:u.packageDetails})]})]})]}),(u.status==="picked_up"||u.status==="in_transit")&&e.jsx("div",{className:"p-3 bg-white border-t border-neutral-200 flex justify-end",children:e.jsx(_,{variant:"outline",size:"sm",className:"h-8 text-xs",children:"Track Package"})})]},u.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(lr,{className:"mx-auto h-8 w-8 text-neutral-400 mb-2"}),e.jsx("p",{className:"text-neutral-500",children:"No deliveries found"}),e.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Your delivery history will appear here"})]})}),a&&a.length>3&&e.jsx(pr,{children:e.jsx(_,{variant:"ghost",className:"w-full text-primary",children:"View All Deliveries"})})]})})]})]})}const Iy={1:[{id:1,name:"Apples",imageUrl:"/api/svg/fallback/apple",parentCategoryId:1},{id:2,name:"Bananas",imageUrl:"/api/svg/fallback/banana",parentCategoryId:1},{id:3,name:"Oranges",imageUrl:"/api/svg/fallback/orange",parentCategoryId:1},{id:4,name:"Berries",imageUrl:"/api/svg/fallback/berry",parentCategoryId:1}],2:[{id:8,name:"Leafy Greens",imageUrl:"/api/svg/fallback/leafy-green",parentCategoryId:2},{id:9,name:"Root Vegetables",imageUrl:"/api/svg/fallback/root-vegetable",parentCategoryId:2},{id:10,name:"Gourds",imageUrl:"/api/svg/fallback/gourd",parentCategoryId:2}],3:[{id:12,name:"Rice",imageUrl:"/api/svg/fallback/rice",parentCategoryId:3},{id:13,name:"Wheat",imageUrl:"/api/svg/fallback/wheat",parentCategoryId:3},{id:14,name:"Millets",imageUrl:"/api/svg/fallback/millet",parentCategoryId:3}],4:[{id:5,name:"Coconut oil",imageUrl:"/uploads/fallback/coconut-oil.svg",parentCategoryId:4},{id:6,name:"Groundnut oil",imageUrl:"/uploads/fallback/groundnut-oil.svg",parentCategoryId:4},{id:7,name:"Olive oil",imageUrl:"/uploads/fallback/olive-oil.svg",parentCategoryId:4},{id:11,name:"Palm oil",imageUrl:"/uploads/fallback/palm-oil.svg",parentCategoryId:4}]};async function YD(t){try{console.log(` [CategoryHelper] Directly fetching subcategories for category ${t} from dedicated endpoint...`);const r=new Date().getTime(),s=`/api/grocery/subcategories-public?parentCategoryId=${t}&_=${r}`;console.log(` [CategoryHelper] Making request to: ${s}`);const n=await fetch(s,{headers:{Accept:"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(console.log(` [CategoryHelper] API response status: ${n.status}`),!n.ok)throw new Error(`API returned ${n.status}`);const a=await n.json();if(console.log(" [CategoryHelper] Raw API response data:",a),Array.isArray(a)&&a.length>0)return console.log(` [CategoryHelper] Found ${a.length} subcategories for category ${t} from API`),pe.setQueryData(["/api/grocery/subcategories",t.toString()],a),pe.setQueryData(["/api/grocery/subcategories",Number(t)],a),typeof window<"u"&&(window.subcategoriesMap||(window.subcategoriesMap={}),window.subcategoriesMap[t]=a,console.log(` [CategoryHelper] Updated global window.subcategoriesMap[${t}]`)),a;{console.warn(` [CategoryHelper] API returned empty or invalid subcategories data for category ${t}`);const i=Iy[t.toString()]||[];return console.log(" [CategoryHelper] Using fallback data:",i),i}}catch(r){console.error(` [CategoryHelper] Error fetching subcategories for category ${t}: ${r}`);const s=Iy[t.toString()]||[];return console.log(" [CategoryHelper] Using fallback data after error:",s),s}}async function YS(){try{console.log(" [CategoryHelper] Directly fetching oil subcategories from dedicated endpoint to bypass caching...");const t=new Date().getTime(),r=await fetch(`/api/grocery/subcategories-public?parentCategoryId=4&_=${t}`,{headers:{Accept:"application/json","Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}});if(!r.ok)throw new Error(`API returned ${r.status}`);const s=await r.json();return Array.isArray(s)&&s.length>0?(console.log(` [CategoryHelper] Found ${s.length} oil subcategories from API`),pe.setQueryData(["/api/grocery/subcategories","4"],s),pe.setQueryData(["/api/grocery/subcategories",4],s),typeof window<"u"&&(window.oilSubcategories=s,window.subcategoriesMap||(window.subcategoriesMap={}),window.subcategoriesMap[4]=s),s):(console.warn(" [CategoryHelper] API returned empty or invalid oil subcategories data"),Iy[4]||[])}catch(t){return console.error(` [CategoryHelper] Error fetching oil subcategories: ${t}`),Iy[4]||[]}}function hRe({onSelectSubcategory:t,activeSubcategory:r,isVisible:s}){j.useEffect(()=>{s&&YS().then(i=>{console.log(" Oil subcategories prefetched for display:",i.length)}).catch(i=>{console.error("Failed to prefetch oil subcategories:",i)})},[s]);const{data:n=[],isLoading:a}=fe({queryKey:["/api/grocery/subcategories","4"],enabled:s});return s?e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Oil Types"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Select an oil type to see products from that category:"}),a?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[1,2,3,4].map(i=>e.jsxs(O,{className:"p-4 h-32 animate-pulse",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]},i))}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:n.map(i=>{const l=r===i.id.toString();let o="bg-gray-50",c="";const d=i.name.toLowerCase();return d.includes("coconut")?(o="bg-amber-50",c=""):d.includes("groundnut")||d.includes("peanut")?(o="bg-yellow-50",c=""):d.includes("olive")?(o="bg-green-50",c=""):d.includes("palm")&&(o="bg-orange-50",c=""),e.jsxs(O,{className:`p-4 cursor-pointer transition-all hover:shadow-md ${l?"ring-2 ring-primary/70 shadow-sm":""}`,onClick:()=>t(l?null:i.id.toString()),children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`w-12 h-12 ${o} flex items-center justify-center rounded-full text-2xl`,children:c}),e.jsx("div",{className:`ml-2 font-medium ${l?"text-primary":"text-gray-800"}`,children:i.name})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Select to see all ",i.name.toLowerCase()," products"]}),l&&e.jsx("div",{className:"mt-2 text-xs text-primary",children:" Currently viewing"})]},i.id)})})]}):null}const QD={1:[{id:"1",name:"Apples",displayColor:"bg-red-100"},{id:"2",name:"Bananas",displayColor:"bg-yellow-100"},{id:"3",name:"Oranges",displayColor:"bg-orange-100"},{id:"4",name:"Berries",displayColor:"bg-purple-100"}],2:[{id:"8",name:"Leafy Greens",displayColor:"bg-green-100"},{id:"9",name:"Root Vegetables",displayColor:"bg-orange-100"},{id:"10",name:"Gourds",displayColor:"bg-green-100"}],3:[{id:"12",name:"Rice",displayColor:"bg-amber-100"},{id:"13",name:"Wheat",displayColor:"bg-amber-200"},{id:"14",name:"Millets",displayColor:"bg-yellow-100"}],4:[{id:"5",name:"Coconut Oil",displayColor:"bg-amber-100"},{id:"6",name:"Groundnut Oil",displayColor:"bg-yellow-100"},{id:"7",name:"Olive Oil",displayColor:"bg-green-100"},{id:"11",name:"Palm Oil",displayColor:"bg-orange-100"}]};function QS({categoryId:t,onSelect:r,activeSubcategory:s}){const[n,a]=j.useState([]);return j.useEffect(()=>{const i=t==null?void 0:t.toString();i&&QD[i]?(console.log(` Using hardcoded subcategories for category ${t}`),a(QD[i])):(console.log(` No hardcoded subcategories for category ${t}`),a([]))},[t]),!t||n.length===0?e.jsx("p",{className:"text-sm text-gray-500 p-2",children:"No subcategories available"}):e.jsx("div",{className:"space-y-2",children:n.map(i=>{const l=s===i.id.toString();return e.jsxs("button",{onClick:()=>r(l?null:i.id.toString()),className:`w-full flex items-center p-3 rounded-md transition-all
              ${l?"ring-1 ring-primary shadow-sm bg-primary/5":`${i.displayColor||"bg-gray-100"} hover:brightness-95`}
            `,children:[e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:`font-medium ${l?"text-primary":""}`,children:i.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select to view products"})]}),l&&e.jsx("div",{className:"flex-shrink-0 text-primary",children:""})]},i.id)})})}function vh(t){return t?t===4||t==="4":!1}const pRe=HC,fRe=WC,xRe=GC,BK=j.forwardRef(({className:t,...r},s)=>e.jsx(Ff,{className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s}));BK.displayName=Ff.displayName;const gRe=Nm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),VK=j.forwardRef(({side:t="right",className:r,children:s,...n},a)=>e.jsxs(xRe,{children:[e.jsx(BK,{}),e.jsxs($f,{ref:a,className:De(gRe({side:t}),r),...n,children:[s,e.jsxs(Vf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Es,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));VK.displayName=$f.displayName;const vRe=j.forwardRef(({className:t,...r},s)=>e.jsx(Lf,{ref:s,className:De("text-lg font-semibold text-foreground",t),...r}));vRe.displayName=Lf.displayName;const yRe=j.forwardRef(({className:t,...r},s)=>e.jsx(Bf,{ref:s,className:De("text-sm text-muted-foreground",t),...r}));yRe.displayName=Bf.displayName;const CN=[{src:"https://placehold.co/800x300/e4f2ff/0f59aa?text=Fresh+Groceries",alt:"Fresh groceries banner"},{src:"https://placehold.co/800x300/fcf4e6/ce7316?text=Organic+Products",alt:"Organic products banner"},{src:"https://placehold.co/800x300/f0f9e8/367c2b?text=Local+Produce",alt:"Local produce banner"}],XD=[{id:1,name:"Fresh Tomatoes",category:1,price:40,originalPrice:50,organic:!0,district:"Chennai"},{id:2,name:"Bananas",category:2,price:60,originalPrice:60,organic:!1,district:"Coimbatore"},{id:3,name:"Organic Spinach",category:1,price:35,originalPrice:45,organic:!0,district:"Madurai"},{id:4,name:"Coconut Oil",category:4,subcategory:5,price:150,originalPrice:180,organic:!1,district:"Thanjavur"},{id:5,name:"Groundnut Oil",category:4,subcategory:6,price:120,originalPrice:135,organic:!1,district:"Tiruchirappalli"},{id:6,name:"Olive Oil",category:4,subcategory:7,price:350,originalPrice:350,organic:!0,district:"Chennai"},{id:7,name:"White Rice",category:3,price:65,originalPrice:70,organic:!1,district:"Coimbatore"},{id:8,name:"Brown Rice",category:3,price:75,originalPrice:85,organic:!0,district:"Madurai"}];function ZD(){var Ee,ut;const{user:t}=dt(),{toast:r}=Ue(),[s,n]=br(),[a,i]=j.useState("all"),[l,o]=j.useState(null),[c,d]=j.useState(""),[u,m]=j.useState([]),[h,g]=j.useState(0),[x,p]=j.useState(!1),[y,v]=j.useState("featured"),[f,b]=j.useState(!1),[N,w]=j.useState([]);j.useEffect(()=>{const ce=localStorage.getItem("groceryCart");if(ce)try{m(JSON.parse(ce))}catch(Be){console.error("Failed to parse saved cart",Be)}const ke=setInterval(()=>{g(Be=>(Be+1)%CN.length)},5e3);return()=>clearInterval(ke)},[]),j.useEffect(()=>{localStorage.setItem("groceryCart",JSON.stringify(u))},[u]);const[C,P]=j.useState({}),S=ce=>(console.log(` Loading subcategories for category ${ce}...`),YD(ce).then(ke=>(console.log(` Loaded ${ke.length} subcategories for category ${ce}`),P(Be=>({...Be,[ce]:ke})),ke)).catch(ke=>(console.error(` Failed to load subcategories for category ${ce}:`,ke),null)));j.useEffect(()=>{console.log(" Loading all subcategories on page load");const ce=[1,2,3,4];setTimeout(()=>{Promise.all(ce.map(ke=>S(ke))).then(ke=>{console.log(` Preloaded subcategories for ${ce.length} categories`),typeof window<"u"&&(window.refreshSubcategories=Be=>(S(Be),`Refreshed subcategories for category ${Be}`))})},500)},[]),j.useEffect(()=>{vh(a)&&(console.log(" Oils category selected - fetching subcategories directly"),YS().then(ce=>{console.log(` Successfully loaded ${ce.length} oil subcategories`),a!=="4"&&i("4")}).catch(ce=>{console.error(" Error loading oil subcategories:",ce)}))},[a]);const{data:A=[],isLoading:k}=fe({queryKey:["/api/grocery/categories"],enabled:!0}),{data:D=[],isLoading:q}=fe({queryKey:["/api/grocery/subcategories",a],enabled:a!=="all"&&a!=="organic"}),z=()=>{i("all"),o(null),d(""),v("featured"),b(!1),w([])},I=()=>{console.log(" Refreshing grocery categories and subcategories"),pe.invalidateQueries({queryKey:["/api/grocery/categories"]}),pe.invalidateQueries({queryKey:["/api/grocery/subcategories"]}),A&&Array.isArray(A)&&A.forEach(ce=>{ce&&ce.id&&(pe.invalidateQueries({queryKey:["/api/grocery/subcategories",ce.id.toString()]}),pe.invalidateQueries({queryKey:["/api/grocery/subcategories",ce.id]}),a===ce.id.toString()&&YD(ce.id).then(ke=>{console.log(` Manual refresh: Fetched ${ke.length} subcategories for category ${ce.id}`)}).catch(ke=>console.error("Error manually refreshing subcategories:",ke)))}),vh(a)&&YS().then(ce=>{console.log(` Refresh: Loaded ${ce.length} oil subcategories`)}).catch(ce=>{console.error(" Error refreshing oil subcategories:",ce)}),pe.invalidateQueries({queryKey:["/api/grocery/products"]}),r({title:"Data refreshed",description:"Latest categories, subcategories, and products have been loaded"})},F=ce=>{N.includes(ce)?w(N.filter(ke=>ke!==ce)):w([...N,ce])},W=Array.from(new Set(XD.map(ce=>ce.district))),K=[...XD.filter(ce=>{var ke,Be,Me;if(a!=="all"&&a!=="organic"&&(typeof ce.category=="object"?(Be=(ke=ce.category)==null?void 0:ke.id)==null?void 0:Be.toString():(Me=ce.category)==null?void 0:Me.toString())!==a)return!1;if(l){if(ce.subcategory){if(ce.subcategory.toString()!==l)return!1}else if(ce.name!==l)return!1}return!(f&&!ce.organic||N.length>0&&!N.includes(ce.district)||c&&!ce.name.toLowerCase().includes(c.toLowerCase()))})].sort((ce,ke)=>{if(y==="price-low-high")return ce.price-ke.price;if(y==="price-high-low")return ke.price-ce.price;if(y==="discount"){const Be=(ce.originalPrice-ce.price)/ce.originalPrice*100;return(ke.originalPrice-ke.price)/ke.originalPrice*100-Be}return 0}),Z=ce=>{var ke;return((ke=u.find(Be=>Be.id===ce))==null?void 0:ke.quantity)||0},ue=ce=>{const ke=u.find(Be=>Be.id===ce);m(ke?u.map(Be=>Be.id===ce?{...Be,quantity:Be.quantity+1}:Be):[...u,{id:ce,quantity:1}]),r({title:"Added to cart",description:"Item added to your shopping cart."})},Ne=ce=>{const ke=u.find(Be=>Be.id===ce);ke&&(ke.quantity===1?m(u.filter(Be=>Be.id!==ce)):m(u.map(Be=>Be.id===ce?{...Be,quantity:Be.quantity-1}:Be)))},J=()=>u.reduce((ce,ke)=>ce+ke.quantity,0),Re=k;return e.jsxs("div",{className:"container mx-auto px-4 py-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col gap-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Grocery Store"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Shop for fresh produce and local goods"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"outline",className:"relative",onClick:()=>n("/grocery/cart"),children:[e.jsx(_r,{className:"h-5 w-5 mr-2"}),"Cart",J()>0&&e.jsx(ae,{className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center",children:J()})]}),e.jsxs(_,{variant:"outline",className:"text-primary hover:text-primary/80",onClick:I,title:"Refresh to see latest updates to categories, subcategories, and products",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-1",children:[e.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"}),e.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),e.jsx("path",{d:"M8 16H3v5"})]}),"Refresh Data"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-800",onClick:()=>{window.open("/subcategory-test","_blank")},title:"Open subcategory testing page",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-1",children:[e.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),e.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),"Test Subcategories"]}),e.jsxs(_,{variant:"outline",className:"text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>window.location.reload(),title:"Force a complete page reload to refresh everything",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 mr-1",children:e.jsx("path",{d:"M2 12A10 10 0 1 0 12 2v10Z"})}),"Hard Refresh"]}),e.jsxs(pRe,{children:[e.jsx(fRe,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"sm:hidden",onClick:()=>p(!x),children:[e.jsx(sd,{className:"h-5 w-5 mr-2"}),"Filters"]})}),e.jsx(VK,{side:"left",className:"w-[300px] sm:w-[400px]",children:e.jsx("div",{className:"py-4",children:e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Filters"})})})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx($,{placeholder:"Search for products...",className:"pl-10",value:c,onChange:ce=>d(ce.target.value)})]}),e.jsxs("div",{className:"relative rounded-lg overflow-hidden h-[200px]",children:[CN.map((ce,ke)=>e.jsxs("div",{className:`absolute inset-0 transition-opacity duration-500 ${ke===h?"opacity-100":"opacity-0"}`,children:[e.jsx("img",{src:ce.src,alt:ce.alt,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-transparent flex items-center",children:e.jsxs("div",{className:"text-white p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Fresh & Healthy"}),e.jsx("p",{className:"mb-4",children:"Shop from our wide range of products"}),e.jsxs(_,{variant:"default",className:"bg-white text-gray-800 hover:bg-gray-100",children:["Shop Now",e.jsx(ii,{className:"h-4 w-4 ml-2"})]})]})})]},ke)),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:CN.map((ce,ke)=>e.jsx("button",{className:`w-2 h-2 rounded-full ${ke===h?"bg-white":"bg-white/50"}`,onClick:()=>g(ke)},ke))})]}),e.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2 -mx-1 px-1",children:[e.jsx(_,{variant:a==="all"?"default":"outline",className:"rounded-full",onClick:()=>i("all"),children:"All Products"}),e.jsxs(_,{variant:a==="organic"?"default":"outline",className:"rounded-full",onClick:()=>{i("organic"),b(!0)},children:[e.jsx(Vs,{className:"h-4 w-4 mr-2 text-green-600"}),"Organic"]}),!k&&A&&A.length>0&&A.map(ce=>e.jsx(_,{variant:a===ce.id.toString()?"default":"outline",className:"rounded-full whitespace-nowrap",onClick:()=>{i(ce.id.toString()),o(null)},children:ce.name},ce.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[e.jsx("div",{className:"hidden md:block md:col-span-3 lg:col-span-2",children:e.jsx("div",{className:"sticky top-20 bg-white rounded-lg border shadow-sm p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx(lZ,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsx(_,{variant:"ghost",className:"h-7 text-xs px-2",onClick:z,children:"Reset"})]}),e.jsx(Tr,{}),a!=="all"&&a!=="organic"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-medium text-base mb-3 flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 text-primary",children:[e.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),e.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),"Subcategories"]}),vh(a)?e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:[e.jsx("div",{className:"text-sm text-primary font-medium mb-2",children:"Oil Types:"}),e.jsx(QS,{categoryId:a,onSelect:o,activeSubcategory:l})]}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-md p-3",children:[e.jsx(QS,{categoryId:a,onSelect:o,activeSubcategory:l}),e.jsxs("details",{className:"mt-3 bg-blue-50 border border-blue-200 rounded p-2 text-xs",children:[e.jsx("summary",{className:"font-medium cursor-pointer text-blue-800",children:"Troubleshooting Tools"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Category ID:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Selected Subcategory:"})," ",l||"None"]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-3 rounded text-xs",onClick:()=>{const ce=a;S(ce).then(ke=>{r(ke?{title:"Subcategories loaded",description:`Loaded ${ke.length} subcategories for category ${ce}`}:{title:"Failed to load subcategories",description:"Try the hard reload option",variant:"destructive"})})},children:"Reload Current Category"}),e.jsx("button",{className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-3 rounded text-xs",onClick:()=>{window.location.reload()},children:"Hard Reload"})]}),e.jsxs("div",{className:"mt-3 border border-blue-200 rounded p-2",children:[e.jsx("p",{className:"text-xs font-medium text-blue-800 mb-1",children:"Quick Load Specific Category:"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:[1,2,3,4].map(ce=>e.jsxs("button",{className:"bg-blue-100 hover:bg-blue-200 text-blue-800 text-xs py-1 px-2 rounded",onClick:()=>S(ce),children:["Load Category ",ce]},ce))})]})]})]})]}),e.jsx(Tr,{className:"mt-4"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Sort By"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("button",{className:`block w-full text-left px-2 py-1 text-sm rounded ${y==="featured"?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,onClick:()=>v("featured"),children:"Featured"}),e.jsx("button",{className:`block w-full text-left px-2 py-1 text-sm rounded ${y==="price-low-high"?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,onClick:()=>v("price-low-high"),children:"Price: Low to High"}),e.jsx("button",{className:`block w-full text-left px-2 py-1 text-sm rounded ${y==="price-high-low"?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,onClick:()=>v("price-high-low"),children:"Price: High to Low"}),e.jsx("button",{className:`block w-full text-left px-2 py-1 text-sm rounded ${y==="discount"?"bg-primary/10 text-primary":"hover:bg-gray-100"}`,onClick:()=>v("discount"),children:"Discount %"})]})]}),e.jsx(Tr,{}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"organic-filter",checked:f,onChange:()=>b(!f),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsxs("label",{htmlFor:"organic-filter",className:"ml-2 text-sm flex items-center",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1 text-green-600"}),"Organic Only"]})]})}),e.jsx(Tr,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Source Districts"}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:W.map(ce=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`district-${ce}`,checked:N.includes(ce),onChange:()=>F(ce),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("label",{htmlFor:`district-${ce}`,className:"ml-2 text-sm",children:ce})]},ce))})]})]})})}),e.jsxs("div",{className:"md:col-span-9 lg:col-span-10",children:[vh(a)&&e.jsx(hRe,{onSelectSubcategory:o,activeSubcategory:l,isVisible:vh(a)}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a!=="all"&&e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:["Category: ",a==="organic"?"Organic":((Ee=A==null?void 0:A.find(ce=>ce.id.toString()===a))==null?void 0:Ee.name)||a,e.jsx(_,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 p-0",onClick:()=>i("all"),children:e.jsx(Es,{className:"h-3 w-3"})})]}),l&&e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:[((ut=D==null?void 0:D.find(ce=>ce.id.toString()===l))==null?void 0:ut.name)||l,e.jsx(_,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 p-0",onClick:()=>o(null),children:e.jsx(Es,{className:"h-3 w-3"})})]}),f&&e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1 bg-green-100 text-green-800 hover:bg-green-200",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),"Organic",e.jsx(_,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 p-0",onClick:()=>b(!1),children:e.jsx(Es,{className:"h-3 w-3"})})]}),N.length>0&&e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:["Districts: ",N.length,e.jsx(_,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 p-0",onClick:()=>w([]),children:e.jsx(Es,{className:"h-3 w-3"})})]}),(a!=="all"||l||f||N.length>0)&&e.jsx(_,{variant:"ghost",className:"h-7 text-xs px-2",onClick:z,children:"Clear All"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[K==null?void 0:K.length," products"]})]}),Re?e.jsx("div",{className:"w-full flex justify-center items-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Qe,{className:"h-10 w-10 text-primary animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading products..."})]})}):K&&K.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:K.map(ce=>{var ke,Be;return e.jsxs(O,{className:"overflow-hidden hover:shadow-md transition-all flex flex-col h-full",children:[e.jsxs("div",{className:"relative bg-gray-50 pt-[100%]",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-primary/5",children:e.jsx(Ii,{className:"h-12 w-12 text-primary/40"})}),e.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[e.jsx(_,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full bg-white/80 border text-gray-700 hover:text-primary hover:bg-white",onClick:()=>n(`/grocery/product/${ce.id}`),children:e.jsx(as,{className:"h-3.5 w-3.5"})}),e.jsx(_,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full bg-white/80 border text-gray-700 hover:text-rose-500 hover:bg-white",children:e.jsx(w$,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[ce.organic&&e.jsxs(ae,{className:"bg-green-500 hover:bg-green-600 px-2 py-1",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),"Organic"]}),ce.price<ce.originalPrice&&e.jsxs(ae,{className:"bg-red-500 hover:bg-red-600 px-2 py-1",children:[Math.round((ce.originalPrice-ce.price)/ce.originalPrice*100),"% Off"]})]})]}),e.jsxs(E,{className:"py-3 px-3 flex-grow flex flex-col",children:[e.jsxs("div",{className:"mb-auto",children:[e.jsxs("div",{className:"text-sm text-gray-500 mb-1",children:[ce.district,"  ",typeof ce.category=="object"?(ke=ce.category)==null?void 0:ke.name:((Be=A==null?void 0:A.find(Me=>Me.id===ce.category))==null?void 0:Be.name)||"Category"]}),e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:ce.name}),e.jsxs("div",{className:"mt-1 flex items-baseline gap-1",children:[e.jsxs("span",{className:"font-semibold",children:["",ce.price]}),ce.price<ce.originalPrice&&e.jsxs("span",{className:"text-gray-500 text-sm line-through",children:["",ce.originalPrice]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:Z(ce.id)===0?e.jsx(_,{className:"w-full",onClick:()=>ue(ce.id),children:"Add to Cart"}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>Ne(ce.id),children:e.jsx(Rc,{className:"h-3 w-3"})}),e.jsx("span",{className:"font-medium",children:Z(ce.id)}),e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ue(ce.id),children:e.jsx(Ft,{className:"h-3 w-3"})})]})})]})]},ce.id)})}):e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"inline-flex h-12 w-12 items-center justify-center rounded-full bg-gray-100 mb-4",children:e.jsx(lr,{className:"h-6 w-6 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No products found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Try adjusting your filters or search term"}),e.jsx(_,{onClick:z,children:"Clear all filters"})]})]})]})]})}const yh=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(t),jRe=(t,r)=>Math.round((t-r)/t*100);function bRe(){const[,t]=uQ("/grocery/product/:id"),[r,s]=br(),{toast:n}=Ue(),{user:a}=dt(),[i,l]=j.useState(1),[o,c]=j.useState("details"),[d,u]=j.useState([]);j.useEffect(()=>{const N=localStorage.getItem("groceryCart");if(N)try{const w=JSON.parse(N);if(u(w),t!=null&&t.id){const C=parseInt(t.id),P=w.find(S=>S.id===C);P&&l(P.quantity)}}catch(w){console.error("Failed to parse saved cart",w)}},[t]),j.useEffect(()=>{localStorage.setItem("groceryCart",JSON.stringify(d))},[d]);const m=t!=null&&t.id?parseInt(t.id):null,{data:h,isLoading:g,isError:x,error:p}=fe({queryKey:["/api/grocery/product",m],queryFn:async()=>{if(!m)throw new Error("Product ID is required");const N=await fetch(`/api/grocery/product/${m}`);if(!N.ok)throw new Error("Failed to fetch product details");return N.json()},enabled:!!m}),{data:y}=fe({queryKey:["/api/grocery/products"],enabled:!!h,select:N=>N.filter(w=>w.id!==m&&(w.category===(h==null?void 0:h.category)||w.district===(h==null?void 0:h.district))).slice(0,4)}),v=()=>{if(!h)return;const N=d.findIndex(w=>w.id===h.id);if(N>=0){const w=[...d];w[N].quantity=i,u(w)}else u([...d,{id:h.id,quantity:i}]);n({title:"Added to cart",description:`${i} ${i>1?"items":"item"} added to your cart.`})},f=()=>{h&&i<h.stock&&l(N=>N+1)},b=()=>{i>1&&l(N=>N-1)};return g?e.jsx("div",{className:"container mx-auto px-4 py-10 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qe,{className:"h-12 w-12 mx-auto mb-4 animate-spin text-primary"}),e.jsx("h2",{className:"text-xl font-medium text-gray-900",children:"Loading product details..."})]})}):x||!h?e.jsx("div",{className:"container mx-auto px-4 py-10 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-lg",children:[e.jsx(lr,{className:"h-12 w-12 mx-auto mb-4 text-red-500"}),e.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"Product not found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"We couldn't find the product you're looking for. It may have been removed or is temporarily unavailable."}),e.jsxs(_,{onClick:()=>s("/grocery"),children:[e.jsx(gp,{className:"h-4 w-4 mr-2"}),"Back to Grocery Store"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(tv,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Home"}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"cursor-pointer hover:text-primary",onClick:()=>s("/grocery"),children:"Grocery"}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"cursor-pointer hover:text-primary",onClick:()=>s("/grocery"),children:h.category}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"font-medium text-primary line-clamp-1 max-w-[200px]",children:h.name})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(_,{variant:"ghost",className:"mb-6 pl-0 text-gray-600",onClick:()=>s("/grocery"),children:[e.jsx(gp,{className:"h-4 w-4 mr-2"}),"Back to Grocery Store"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-8 shadow-sm",children:[e.jsxs("div",{className:"relative bg-gray-50 rounded-lg overflow-hidden aspect-square flex items-center justify-center",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ii,{className:"h-24 w-24 text-gray-300"})}),h.isOrganic&&e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs(ae,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),"Organic"]})}),h.discountedPrice&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(ae,{className:"bg-red-500 hover:bg-red-600",children:[e.jsx(iv,{className:"h-3 w-3 mr-1"}),jRe(h.price,h.discountedPrice),"% OFF"]})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1 mr-2",children:[e.jsx(w$,{className:"h-4 w-4 mr-2"}),"Save"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(k$,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:h.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[e.jsx(gt,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Sourced from ",h.district]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-primary",children:yh(h.discountedPrice||h.price)}),h.discountedPrice&&e.jsx("span",{className:"text-gray-500 line-through",children:yh(h.price)}),h.discountedPrice&&e.jsxs(ae,{variant:"outline",className:"text-green-600 border-green-200 bg-green-50",children:["Save ",yh(h.price-h.discountedPrice)]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Price per ",h.unit]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`text-sm ${h.stock>10?"text-green-600":h.stock>0?"text-amber-600":"text-red-600"} font-medium flex items-center`,children:h.stock>10?e.jsxs(e.Fragment,{children:[e.jsx(bZ,{className:"h-4 w-4 mr-1"})," In Stock"]}):h.stock>0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-4 w-4 mr-1"})," Only ",h.stock," left"]}):e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-4 w-4 mr-1"})," Out of Stock"]})})})}),h.stock>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Quantity"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-l-md rounded-r-none",onClick:b,disabled:i<=1,children:e.jsx(Rc,{className:"h-4 w-4"})}),e.jsx("div",{className:"h-10 w-16 flex items-center justify-center border-y border-gray-200",children:i}),e.jsx(_,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-r-md rounded-l-none",onClick:f,disabled:i>=h.stock,children:e.jsx(Ft,{className:"h-4 w-4"})})]})]}),h.stock>0&&e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsxs(_,{className:"flex-1 md:flex-none md:w-1/2",onClick:v,children:[e.jsx(_r,{className:"h-4 w-4 mr-2"}),"Add to Cart"]}),e.jsx(_,{variant:"secondary",className:"flex-1 md:flex-none md:w-1/3",onClick:()=>{v(),s("/grocery/cart")},children:"Buy Now"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:"Delivery Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($n,{className:"h-4 w-4 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Free delivery"}),e.jsx("p",{className:"text-xs text-gray-500",children:"On orders above 400"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yt,{className:"h-4 w-4 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Same day delivery"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Order before 2 PM"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ft,{className:"h-4 w-4 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Secure packaging"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Safe and hygienic packing of all products"})]})]})]})]}),e.jsxs(nr,{defaultValue:"details",className:"w-full",onValueChange:c,children:[e.jsxs(sr,{className:"grid grid-cols-3 mb-4",children:[e.jsx(Ae,{value:"details",children:"Details"}),e.jsx(Ae,{value:"nutrition",children:"Nutrition Facts"}),e.jsx(Ae,{value:"reviews",children:"Reviews"})]}),e.jsxs(Ve,{value:"details",className:"bg-white p-4 rounded-lg border",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Product Description"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h.description}),e.jsx("h3",{className:"font-medium mb-2",children:"Product Information"}),e.jsxs("ul",{className:"text-sm space-y-2",children:[e.jsxs("li",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"Category:"}),e.jsx("span",{children:h.category})]}),e.jsxs("li",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"Weight/Volume:"}),e.jsxs("span",{children:["1 ",h.unit]})]}),e.jsxs("li",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"Organic:"}),e.jsx("span",{children:h.isOrganic?"Yes":"No"})]}),e.jsxs("li",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-gray-500",children:"Source:"}),e.jsxs("span",{children:[h.district,", Tamil Nadu"]})]})]})]}),e.jsx(Ve,{value:"nutrition",className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4 text-gray-400",children:e.jsx(ft,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Nutrition Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Nutritional information for this product will be available soon."})]})}),e.jsx(Ve,{value:"reviews",className:"bg-white p-4 rounded-lg border",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4 text-gray-400",children:e.jsx(Tf,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Be the first to review this product."})]})})]})]})]}),y&&y.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:"Similar Products"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.map(N=>e.jsxs(O,{className:"overflow-hidden hover:shadow-md transition-all cursor-pointer",onClick:()=>s(`/grocery/product/${N.id}`),children:[e.jsxs("div",{className:"relative h-40 bg-gray-50",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Ii,{className:"h-10 w-10 text-gray-300"})}),N.isOrganic&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs(ae,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200 text-xs",children:[e.jsx(Vs,{className:"h-2.5 w-2.5 mr-1"}),"Organic"]})})]}),e.jsxs(E,{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-sm line-clamp-1",children:N.name}),e.jsxs("div",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),N.district]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-primary font-medium text-sm",children:yh(N.discountedPrice||N.price)}),N.discountedPrice&&e.jsx("div",{className:"text-xs text-gray-500 line-through",children:yh(N.price)})]}),e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:w=>{w.stopPropagation();const C=[...d],P=C.find(S=>S.id===N.id);P?P.quantity+=1:C.push({id:N.id,quantity:1}),u(C),n({title:"Added to cart",description:"Item has been added to your cart."})},children:e.jsx(_r,{className:"h-4 w-4"})})]})]})]},N.id))})]})]})]})}const Ad=t=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:2}).format(t);function NRe(){const[t,r]=br(),{toast:s}=Ue(),{user:n}=dt(),[a,i]=j.useState([]),[l,o]=j.useState(""),[c,d]=j.useState(!1),[u,m]=j.useState(0);j.useEffect(()=>{const S=localStorage.getItem("groceryCart");if(S)try{i(JSON.parse(S))}catch(A){console.error("Failed to parse saved cart",A)}},[]),j.useEffect(()=>{localStorage.setItem("groceryCart",JSON.stringify(a))},[a]);const{data:h,isLoading:g,isError:x}=fe({queryKey:["/api/grocery/products"],enabled:!0}),p=a.map(S=>{const A=h==null?void 0:h.find(k=>k.id===S.id);return{...S,product:A}}).filter(S=>S.product!==void 0),y=p.reduce((S,A)=>{const k=A.product.discountedPrice||A.product.price;return S+k*A.quantity},0),v=y>400?0:40,f=()=>{d(!0),setTimeout(()=>{if(l.toUpperCase()==="WELCOME10"){const S=y*.1;m(S),s({title:"Promotion applied!",description:"10% discount has been applied to your order."})}else l.toUpperCase()==="FREESHIP"?(m(v),s({title:"Promotion applied!",description:"Free shipping has been applied to your order."})):s({title:"Invalid code",description:"The promotion code you entered is invalid or expired.",variant:"destructive"});d(!1)},1e3)},b=()=>{o(""),m(0),s({title:"Promotion removed",description:"The promotion code has been removed from your order."})},N=y+v-u,w=S=>{i(a.filter(A=>A.id!==S)),s({title:"Item removed",description:"The item has been removed from your cart."})},C=(S,A)=>{const k=h==null?void 0:h.find(D=>D.id===S);if(k){if(A<=0){w(S);return}A>k.stock&&(s({title:"Limited stock",description:`Only ${k.stock} units available.`,variant:"destructive"}),A=k.stock),i(a.map(D=>D.id===S?{...D,quantity:A}:D))}},P=()=>{if(a.length===0){s({title:"Cart is empty",description:"Add some items to your cart before checking out.",variant:"destructive"});return}s({title:"Checkout initiated",description:"This is a demo. In a real app, you would proceed to payment."})};return g?e.jsx("div",{className:"container mx-auto px-4 py-10 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_r,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("h2",{className:"text-xl font-medium text-gray-900",children:"Loading your cart..."})]})}):a.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(tv,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Home"}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"cursor-pointer hover:text-primary",onClick:()=>r("/grocery"),children:"Grocery"}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"font-medium text-primary",children:"Shopping Cart"})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsx(_r,{className:"h-16 w-16 mx-auto mb-6 text-gray-300"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Looks like you haven't added any items to your cart yet. Browse our products and find something you'd like!"}),e.jsxs(_,{size:"lg",onClick:()=>r("/grocery"),children:[e.jsx(zw,{className:"h-5 w-5 mr-2"}),"Continue Shopping"]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(tv,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"Home"}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"cursor-pointer hover:text-primary",onClick:()=>r("/grocery"),children:"Grocery"}),e.jsx(ia,{className:"h-3 w-3 mx-1"}),e.jsx("span",{className:"font-medium text-primary",children:"Shopping Cart"})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs(_,{variant:"ghost",className:"mb-6 pl-0 text-gray-600",onClick:()=>r("/grocery"),children:[e.jsx(gp,{className:"h-4 w-4 mr-2"}),"Continue Shopping"]}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-8",children:"Your Shopping Cart"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsxs(O,{children:[e.jsx(G,{className:"border-b p-4",children:e.jsxs(Y,{className:"text-lg",children:["Cart Items (",a.length,")"]})}),e.jsx(E,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{className:"w-[50%]",children:"Product"}),e.jsx(xe,{className:"text-right",children:"Price"}),e.jsx(xe,{className:"text-center",children:"Quantity"}),e.jsx(xe,{className:"text-right",children:"Total"}),e.jsx(xe,{className:"w-[5%]"})]})}),e.jsx(Gr,{children:p.map(({id:S,quantity:A,product:k})=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-md flex items-center justify-center mr-4",children:e.jsx(Ii,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium line-clamp-1",children:k.name}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),k.district]}),k.isOrganic&&e.jsxs("div",{className:"text-xs flex items-center text-green-600 mt-1",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),"Organic"]})]})]})}),e.jsx(se,{className:"text-right",children:Ad(k.discountedPrice||k.price)}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>C(S,A-1),children:e.jsx(Rc,{className:"h-3 w-3"})}),e.jsx("div",{className:"w-10 text-center",children:A}),e.jsx(_,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>C(S,A+1),disabled:A>=k.stock,children:e.jsx(Ft,{className:"h-3 w-3"})})]})}),e.jsx(se,{className:"text-right font-medium",children:Ad((k.discountedPrice||k.price)*A)}),e.jsx(se,{children:e.jsx(_,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500",onClick:()=>w(S),children:e.jsx(Ir,{className:"h-4 w-4"})})})]},S))})]})})}),e.jsxs(pr,{className:"border-t p-4 flex justify-between",children:[e.jsxs(_,{variant:"ghost",className:"text-sm",onClick:()=>i([]),children:[e.jsx(Ir,{className:"h-4 w-4 mr-1"})," Clear Cart"]}),e.jsxs(_,{variant:"ghost",className:"text-sm",onClick:()=>r("/grocery"),children:[e.jsx(Ft,{className:"h-4 w-4 mr-1"})," Add More Items"]})]})]})}),e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs(O,{children:[e.jsx(G,{className:"border-b p-4",children:e.jsx(Y,{className:"text-lg",children:"Order Summary"})}),e.jsxs(E,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Subtotal"}),e.jsx("span",{children:Ad(y)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Delivery Fee"}),e.jsx("span",{children:v===0?e.jsx("span",{className:"text-green-600",children:"Free"}):Ad(v)})]}),u>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{className:"flex items-center",children:["Discount",e.jsx(_,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 p-0",onClick:b,children:e.jsx(Es,{className:"h-3 w-3"})})]}),e.jsxs("span",{children:["-",Ad(u)]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:Ad(N)})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Including all taxes"})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Apply Promotion Code"}),e.jsxs("div",{className:"flex mb-1",children:[e.jsx($,{className:"rounded-r-none",placeholder:"Enter promotion code",value:l,onChange:S=>o(S.target.value),disabled:c||u>0}),e.jsx(_,{className:"rounded-l-none",onClick:f,disabled:!l||c||u>0,children:c?"Applying...":"Apply"})]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(fC,{className:"h-3 w-3 mr-1"}),'Try "WELCOME10" for 10% off or "FREESHIP" for free delivery']})]}),e.jsxs(_,{className:"w-full mt-6",size:"lg",onClick:P,children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Proceed to Checkout"]}),e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"By proceeding, you agree to our Terms of Service and Privacy Policy"})]})]}),e.jsx(O,{className:"mt-4 bg-green-50 border-green-200",children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white rounded-full p-2 mr-3",children:e.jsx(Vs,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800",children:"Eco-Friendly Packaging"}),e.jsx("p",{className:"text-xs text-green-700 mt-1",children:"All our deliveries are made with eco-friendly packaging materials, minimizing environmental impact."})]})]})})})]})]})]})]})}var Ob="Switch",[wRe,e$e]=ws(Ob),[SRe,CRe]=wRe(Ob),UK=j.forwardRef((t,r)=>{const{__scopeSwitch:s,name:n,checked:a,defaultChecked:i,required:l,disabled:o,value:c="on",onCheckedChange:d,form:u,...m}=t,[h,g]=j.useState(null),x=$t(r,b=>g(b)),p=j.useRef(!1),y=h?u||!!h.closest("form"):!0,[v,f]=Hn({prop:a,defaultProp:i??!1,onChange:d,caller:Ob});return e.jsxs(SRe,{scope:s,checked:v,disabled:o,children:[e.jsx(it.button,{type:"button",role:"switch","aria-checked":v,"aria-required":l,"data-state":HK(v),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:x,onClick:We(t.onClick,b=>{f(N=>!N),y&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})}),y&&e.jsx(KK,{control:h,bubbles:!p.current,name:n,value:c,checked:v,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});UK.displayName=Ob;var qK="SwitchThumb",zK=j.forwardRef((t,r)=>{const{__scopeSwitch:s,...n}=t,a=CRe(qK,s);return e.jsx(it.span,{"data-state":HK(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:r})});zK.displayName=qK;var PRe="SwitchBubbleInput",KK=j.forwardRef(({__scopeSwitch:t,control:r,checked:s,bubbles:n=!0,...a},i)=>{const l=j.useRef(null),o=$t(l,i),c=jj(s),d=vj(r);return j.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==s&&g){const x=new Event("click",{bubbles:n});g.call(u,s),u.dispatchEvent(x)}},[c,s,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});KK.displayName=PRe;function HK(t){return t?"checked":"unchecked"}var WK=UK,kRe=zK;const gs=j.forwardRef(({className:t,...r},s)=>e.jsx(WK,{className:De("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:e.jsx(kRe,{className:De("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));gs.displayName=WK.displayName;const ARe=rae.extend({adminCommission:ct().min(0).max(10),branchManagerCommission:ct().min(0).max(10),talukManagerCommission:ct().min(0).max(10),serviceAgentCommission:ct().min(0).max(10),registeredUserCommission:ct().min(0).max(10),startDate:ri().nullable().optional(),endDate:ri().nullable().optional(),isPeakRate:tr().optional().default(!1),seasonName:R().nullable().optional()});function _Re(){const{user:t}=dt(),{toast:r}=Ue(),s=Ml(),[n,a]=j.useState(!1),[i,l]=j.useState(null);if((t==null?void 0:t.userType)!=="admin")return e.jsx("div",{className:"container py-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-neutral-600",children:"You don't have permission to access this page."})]})});const{data:o,isLoading:c}=fe({queryKey:["/api/commission/config"],queryFn:async()=>(await ie("GET","/api/commission/config")).json()}),d=Se({mutationFn:async x=>(await ie("POST","/api/commission/config",x)).json(),onSuccess:()=>{r({title:"Commission configuration created",description:"The commission configuration has been successfully created."}),a(!1),s.invalidateQueries({queryKey:["/api/commission/config"]})},onError:x=>{r({title:"Failed to create commission configuration",description:x.message,variant:"destructive"})}}),u=Se({mutationFn:async({id:x,data:p})=>(await ie("PATCH",`/api/commission/config/${x}`,p)).json(),onSuccess:()=>{r({title:"Commission configuration updated",description:"The commission configuration has been successfully updated."}),s.invalidateQueries({queryKey:["/api/commission/config"]})},onError:x=>{r({title:"Failed to update commission configuration",description:x.message,variant:"destructive"})}}),m=Gt({resolver:Yt(ARe),defaultValues:{serviceType:"",provider:"",adminCommission:.5,branchManagerCommission:.5,talukManagerCommission:1,serviceAgentCommission:2,registeredUserCommission:1,startDate:null,endDate:null,isPeakRate:!1,seasonName:""}}),h=x=>{d.mutate(x)},g=x=>{u.mutate({id:x.id,data:{isActive:!x.isActive}})};return e.jsxs("div",{className:"container py-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Commission Configuration"}),e.jsx("p",{className:"text-neutral-600 mt-1",children:"Manage commission rates for different services and providers"})]}),e.jsxs(Tt,{open:n,onOpenChange:a,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add New Configuration"]})}),e.jsxs(Ct,{className:"sm:max-w-[500px]",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Create Commission Configuration"}),e.jsx(Xt,{children:"Set up commission rates for different user types in the system"})]}),e.jsx(Qt,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(h),className:"space-y-4",children:[e.jsx(U,{control:m.control,name:"serviceType",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Type"}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select service type"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"recharge",children:"Mobile Recharge"}),e.jsx(T,{value:"booking",children:"Travel Booking"}),e.jsx(T,{value:"rental",children:"Equipment Rental"}),e.jsx(T,{value:"taxi",children:"Taxi Service"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"grocery",children:"Grocery"})]})]}),e.jsx(qe,{children:"The type of service this commission applies to"}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"provider",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Provider (Optional)"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Airtel, Jio, etc.",...x,value:x.value||""})}),e.jsx(qe,{children:"Specific service provider, leave empty for all providers"}),e.jsx(H,{})]})}),e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Seasonal / Peak Pricing"}),e.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"Configure special commission rates for peak periods or seasonal events"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:m.control,name:"seasonName",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Season Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Diwali 2023",...x,value:x.value||""})}),e.jsx(qe,{children:"Name of the season or promotional period"}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"isPeakRate",render:({field:x})=>e.jsxs(L,{className:"flex flex-row items-center justify-between p-3 mt-6 rounded-lg border border-neutral-200",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{children:"Peak Rate"}),e.jsx(qe,{children:"Mark as a special rate for peak season"})]}),e.jsx(V,{children:e.jsx(gs,{checked:x.value,onCheckedChange:x.onChange})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"startDate",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Start Date"}),e.jsx(V,{children:e.jsx($,{type:"date",...x,value:x.value?new Date(x.value).toISOString().split("T")[0]:"",onChange:p=>{const y=p.target.value?new Date(p.target.value):null;x.onChange(y)}})}),e.jsx(qe,{children:"When this commission rate becomes active"}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"endDate",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"End Date"}),e.jsx(V,{children:e.jsx($,{type:"date",...x,value:x.value?new Date(x.value).toISOString().split("T")[0]:"",onChange:p=>{const y=p.target.value?new Date(p.target.value):null;x.onChange(y)}})}),e.jsx(qe,{children:"When this commission rate expires"}),e.jsx(H,{})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:m.control,name:"adminCommission",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Admin Commission (%)"}),e.jsx(V,{children:e.jsx($,{type:"number",...x,onChange:p=>x.onChange(parseFloat(p.target.value)),step:"0.1",min:"0",max:"10"})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"branchManagerCommission",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Branch Manager (%)"}),e.jsx(V,{children:e.jsx($,{type:"number",...x,onChange:p=>x.onChange(parseFloat(p.target.value)),step:"0.1",min:"0",max:"10"})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"talukManagerCommission",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk Manager (%)"}),e.jsx(V,{children:e.jsx($,{type:"number",...x,onChange:p=>x.onChange(parseFloat(p.target.value)),step:"0.1",min:"0",max:"10"})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"serviceAgentCommission",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Agent (%)"}),e.jsx(V,{children:e.jsx($,{type:"number",...x,onChange:p=>x.onChange(parseFloat(p.target.value)),step:"0.1",min:"0",max:"10"})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"registeredUserCommission",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Registered User (%)"}),e.jsx(V,{children:e.jsx($,{type:"number",...x,onChange:p=>x.onChange(parseFloat(p.target.value)),step:"0.1",min:"0",max:"10"})}),e.jsx(H,{})]})})]}),e.jsx(zs,{children:e.jsxs(_,{type:"submit",disabled:d.isPending,children:[d.isPending&&e.jsx(Ya,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Configuration"]})})]})})]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Commission Configurations"}),e.jsx(he,{children:"All commission configurations for different services and providers"})]}),e.jsx(E,{children:c?e.jsx("div",{className:"w-full flex justify-center py-5",children:e.jsx(Ya,{className:"h-6 w-6 animate-spin text-neutral-400"})}):!o||o.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-neutral-500",children:"No commission configurations found."}),e.jsx("p",{className:"mt-2 text-sm text-neutral-400",children:"Create a new configuration to get started."})]}):e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Service Type"}),e.jsx(xe,{children:"Provider"}),e.jsx(xe,{className:"text-center",children:"Admin"}),e.jsx(xe,{className:"text-center",children:"Branch Manager"}),e.jsx(xe,{className:"text-center",children:"Taluk Manager"}),e.jsx(xe,{className:"text-center",children:"Service Agent"}),e.jsx(xe,{className:"text-center",children:"Registered User"}),e.jsx(xe,{className:"text-center",children:"Total"}),e.jsx(xe,{className:"text-center",children:"Season"}),e.jsx(xe,{className:"text-center",children:"Status"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:o.map(x=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:x.serviceType.charAt(0).toUpperCase()+x.serviceType.slice(1)}),e.jsx(se,{children:x.provider||"All Providers"}),e.jsxs(se,{className:"text-center",children:[x.adminCommission,"%"]}),e.jsxs(se,{className:"text-center",children:[x.branchManagerCommission,"%"]}),e.jsxs(se,{className:"text-center",children:[x.talukManagerCommission,"%"]}),e.jsxs(se,{className:"text-center",children:[x.serviceAgentCommission,"%"]}),e.jsxs(se,{className:"text-center",children:[x.registeredUserCommission,"%"]}),e.jsxs(se,{className:"text-center font-medium",children:[x.totalCommission,"%"]}),e.jsx(se,{className:"text-center",children:x.isPeakRate&&x.seasonName?e.jsx(ae,{className:"bg-orange-100 text-orange-800 hover:bg-orange-200",children:x.seasonName}):x.startDate&&x.endDate?e.jsxs("div",{className:"text-xs text-neutral-600",children:[new Date(x.startDate).toLocaleDateString()," - ",new Date(x.endDate).toLocaleDateString()]}):e.jsx(ae,{variant:"outline",className:"bg-neutral-100 text-neutral-500",children:"Standard"})}),e.jsx(se,{className:"text-center",children:x.isActive?e.jsx(ae,{className:"bg-green-100 text-green-800 hover:bg-green-200",children:"Active"}):e.jsx(ae,{variant:"outline",className:"bg-neutral-100 text-neutral-800 hover:bg-neutral-200",children:"Inactive"})}),e.jsx(se,{className:"text-right",children:e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>g(x),title:x.isActive?"Deactivate":"Activate",children:x.isActive?e.jsx(Ir,{className:"h-4 w-4 text-red-500"}):e.jsx(Ks,{className:"h-4 w-4 text-green-500"})})})]},x.id))})]})}),e.jsx(pr,{className:"flex justify-between border-t p-4",children:e.jsxs("p",{className:"text-sm text-neutral-500",children:[e.jsx(iv,{className:"inline-block h-4 w-4 mr-1"}),"Showing all commission configurations"]})})]})]})}const TRe=Kt({serviceType:R().min(1,"Service type is required"),provider:R().optional(),adminPercentage:Us.number().min(0).max(10),branchManagerPercentage:Us.number().min(0).max(10),talukManagerPercentage:Us.number().min(0).max(10),serviceAgentPercentage:Us.number().min(0).max(15),active:tr().default(!0)});function ORe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("history"),[a,i]=j.useState(!1),[l,o]=j.useState(null),[c,d]=j.useState([]),u=(t==null?void 0:t.userType)==="admin",{data:m,isLoading:h}=fe({queryKey:["/api/commissions/stats"],queryFn:async()=>(await ie("GET","/api/commissions/stats")).json()}),{data:g,isLoading:x}=fe({queryKey:["/api/commission"],queryFn:async()=>(await ie("GET","/api/commission")).json()}),{data:p,isLoading:y}=fe({queryKey:["/api/commission-configs"],queryFn:async()=>(await ie("GET","/api/commission-configs")).json(),enabled:u}),{data:v,isLoading:f}=fe({queryKey:["/api/commissions/pending"],queryFn:async()=>(await ie("GET","/api/commissions/pending")).json(),enabled:u}),b=(g==null?void 0:g.reduce((I,F)=>I+(F.commissionAmount||0),0))||0,N=(g==null?void 0:g.reduce((I,F)=>{const W=I[F.serviceType]||[];return W.push(F),I[F.serviceType]=W,I},{}))||{},w=Object.keys(N),C=Se({mutationFn:async I=>{const F=l?`/api/commission-configs/${l.id}`:"/api/commission-configs";return(await ie(l?"PUT":"POST",F,I)).json()},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/commission-configs"]}),i(!1),o(null),r({title:"Success",description:l?"Commission configuration updated successfully":"Commission configuration created successfully"})},onError:I=>{r({title:"Error",description:`Failed to ${l?"update":"create"} commission configuration: ${I.message}`,variant:"destructive"})}}),P=Se({mutationFn:async I=>(await ie("POST","/api/commissions/mark-paid",{commissionIds:I})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/commissions/pending"]}),pe.invalidateQueries({queryKey:["/api/commissions/stats"]}),d([]),r({title:"Success",description:"Commissions marked as paid successfully"})},onError:I=>{r({title:"Error",description:`Failed to mark commissions as paid: ${I.message}`,variant:"destructive"})}}),S=Gt({resolver:Yt(TRe),defaultValues:l?{serviceType:l.serviceType,provider:l.provider||"",adminPercentage:l.adminPercentage,branchManagerPercentage:l.branchManagerPercentage,talukManagerPercentage:l.talukManagerPercentage,serviceAgentPercentage:l.serviceAgentPercentage,active:l.active}:{serviceType:"",provider:"",adminPercentage:.5,branchManagerPercentage:.5,talukManagerPercentage:1,serviceAgentPercentage:3,active:!0}}),A=I=>{C.mutate(I)},k=I=>{I?(o(I),S.reset({serviceType:I.serviceType,provider:I.provider||"",adminPercentage:I.adminPercentage,branchManagerPercentage:I.branchManagerPercentage,talukManagerPercentage:I.talukManagerPercentage,serviceAgentPercentage:I.serviceAgentPercentage,active:I.active})):(o(null),S.reset({serviceType:"",provider:"",adminPercentage:.5,branchManagerPercentage:.5,talukManagerPercentage:1,serviceAgentPercentage:3,active:!0})),i(!0)},D=()=>{c.length>0?P.mutate(c):r({title:"No commissions selected",description:"Please select at least one commission to mark as paid",variant:"destructive"})},q=I=>{d(F=>F.includes(I)?F.filter(W=>W!==I):[...F,I])},z=I=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(I);return e.jsxs("div",{className:"container py-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Commission Management"}),e.jsx("p",{className:"text-neutral-600 mt-1",children:u?"View, track, and configure commission structures across your organization":"View all your earned commissions and track your earnings"})]}),h?e.jsx(O,{className:"w-full md:w-auto",children:e.jsxs(E,{className:"p-4 flex items-center",children:[e.jsx(Ya,{className:"h-10 w-10 text-primary mr-4 animate-spin"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-neutral-500",children:"Loading..."})})]})}):m?e.jsxs("div",{className:"flex flex-wrap gap-4 w-full md:w-auto",children:[e.jsx(O,{className:"w-full md:w-auto",children:e.jsxs(E,{className:"p-4 flex items-center",children:[e.jsx(N0,{className:"h-10 w-10 text-primary mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Total Earned"}),e.jsx("p",{className:"text-2xl font-bold",children:z(m.totalEarned)})]})]})}),u&&e.jsx(O,{className:"w-full md:w-auto",children:e.jsxs(E,{className:"p-4 flex items-center",children:[e.jsx(N0,{className:"h-10 w-10 text-amber-500 mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Pending Payouts"}),e.jsx("p",{className:"text-2xl font-bold",children:z(m.pendingAmount)})]})]})})]}):e.jsx(O,{className:"w-full md:w-auto",children:e.jsxs(E,{className:"p-4 flex items-center",children:[e.jsx(N0,{className:"h-10 w-10 text-primary mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Total Earned"}),e.jsx("p",{className:"text-2xl font-bold",children:z(b)})]})]})})]}),u&&e.jsx("div",{className:"mb-6",children:e.jsx(nr,{value:s,onValueChange:n,children:e.jsxs(sr,{className:"grid w-full grid-cols-3",children:[e.jsx(Ae,{value:"history",children:"Commission History"}),e.jsx(Ae,{value:"pending",children:"Pending Payouts"}),e.jsx(Ae,{value:"config",children:"Configuration"})]})})}),u&&s==="config"&&e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Commission Configuration"}),e.jsx(he,{children:"Configure commission percentages for different services and providers"})]}),e.jsxs(_,{onClick:()=>k(),children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"})," Add Configuration"]})]}),e.jsx(E,{children:y?e.jsx("div",{className:"w-full flex justify-center py-5",children:e.jsx(Ya,{className:"h-6 w-6 animate-spin text-neutral-400"})}):!p||p.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-neutral-500",children:"No commission configurations found."}),e.jsx("p",{className:"mt-2 text-sm text-neutral-400",children:"Add a new configuration to manage commission rates."})]}):e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Service"}),e.jsx(xe,{children:"Provider"}),e.jsx(xe,{className:"text-center",children:"Admin"}),e.jsx(xe,{className:"text-center",children:"Branch Manager"}),e.jsx(xe,{className:"text-center",children:"Taluk Manager"}),e.jsx(xe,{className:"text-center",children:"Service Agent"}),e.jsx(xe,{className:"text-center",children:"Total"}),e.jsx(xe,{className:"text-center",children:"Status"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:p.map(I=>{const F=I.adminPercentage+I.branchManagerPercentage+I.talukManagerPercentage+I.serviceAgentPercentage;return e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:I.serviceType.charAt(0).toUpperCase()+I.serviceType.slice(1)}),e.jsx(se,{children:I.provider||"All Providers"}),e.jsxs(se,{className:"text-center",children:[I.adminPercentage,"%"]}),e.jsxs(se,{className:"text-center",children:[I.branchManagerPercentage,"%"]}),e.jsxs(se,{className:"text-center",children:[I.talukManagerPercentage,"%"]}),e.jsxs(se,{className:"text-center",children:[I.serviceAgentPercentage,"%"]}),e.jsxs(se,{className:"text-center font-medium",children:[F,"%"]}),e.jsx(se,{className:"text-center",children:e.jsx(ae,{variant:I.active?"default":"outline",className:I.active?"bg-green-100 text-green-800 hover:bg-green-200":"",children:I.active?"Active":"Inactive"})}),e.jsx(se,{className:"text-right",children:e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>k(I),children:e.jsx(Zr,{className:"h-4 w-4"})})})]},I.id)})})]})})]}),u&&s==="pending"&&e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Pending Commission Payouts"}),e.jsx(he,{children:"Review and process pending commission payments"})]}),e.jsxs(_,{onClick:D,disabled:P.isPending||c.length===0,children:[P.isPending?e.jsx(Ya,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Mt,{className:"mr-2 h-4 w-4"}),"Mark Selected as Paid"]})]}),e.jsx(E,{children:f?e.jsx("div",{className:"w-full flex justify-center py-5",children:e.jsx(Ya,{className:"h-6 w-6 animate-spin text-neutral-400"})}):!v||v.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-neutral-500",children:"No pending commissions found."}),e.jsx("p",{className:"mt-2 text-sm text-neutral-400",children:"All commissions have been processed."})]}):e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:I=>{I.target.checked?d(v.map(F=>F.id)):d([])},checked:c.length===v.length&&v.length>0})})}),e.jsx(xe,{children:"Date"}),e.jsx(xe,{children:"User"}),e.jsx(xe,{children:"User Type"}),e.jsx(xe,{children:"Service"}),e.jsx(xe,{children:"Transaction ID"}),e.jsx(xe,{className:"text-center",children:"Rate"}),e.jsx(xe,{className:"text-right",children:"Amount"})]})}),e.jsx(Gr,{children:v.map(I=>e.jsxs(ht,{children:[e.jsx(se,{children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300",onChange:()=>q(I.id),checked:c.includes(I.id)})}),e.jsx(se,{children:I.createdAt?vt(new Date(I.createdAt),"dd MMM yyyy"):"N/A"}),e.jsxs(se,{children:["ID: ",I.userId]}),e.jsx(se,{children:e.jsx(ae,{variant:"outline",className:I.userType==="admin"?"bg-purple-100 text-purple-800":I.userType==="branch_manager"?"bg-blue-100 text-blue-800":I.userType==="taluk_manager"?"bg-indigo-100 text-indigo-800":"bg-green-100 text-green-800",children:I.userType.split("_").map(F=>F.charAt(0).toUpperCase()+F.slice(1)).join(" ")})}),e.jsx(se,{children:e.jsx(ae,{className:"bg-primary/10 text-primary hover:bg-primary/20",children:I.serviceType.charAt(0).toUpperCase()+I.serviceType.slice(1)})}),e.jsxs(se,{children:["TRX-",I.transactionId]}),e.jsxs(se,{className:"text-center",children:[I.commissionPercentage,"%"]}),e.jsx(se,{className:"text-right font-medium",children:z(I.commissionAmount)})]},I.id))})]})}),e.jsxs(pr,{className:"flex justify-between border-t p-4",children:[e.jsxs("p",{className:"text-sm text-neutral-500",children:[e.jsx(fa,{className:"inline-block h-4 w-4 mr-1"}),v?`${v.length} pending commission${v.length!==1?"s":""} (${c.length} selected)`:"No pending commissions"]}),e.jsxs("p",{className:"text-sm text-neutral-500",children:[e.jsx(Jt,{className:"inline-block h-4 w-4 mr-1"}),"Last updated: ",new Date().toLocaleDateString()]})]})]}),(!u||s==="history")&&e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Commission History"}),e.jsx(he,{children:"All commissions earned from different services"})]}),e.jsx(E,{children:x?e.jsx("div",{className:"w-full flex justify-center py-5",children:e.jsx(Ya,{className:"h-6 w-6 animate-spin text-neutral-400"})}):!g||g.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-neutral-500",children:"No commissions found."}),e.jsx("p",{className:"mt-2 text-sm text-neutral-400",children:"Process services to earn commissions."})]}):e.jsxs(nr,{defaultValue:"all",className:"w-full",children:[e.jsxs(sr,{className:"mb-4",children:[e.jsx(Ae,{value:"all",children:"All Services"}),w.map(I=>e.jsx(Ae,{value:I,children:I.charAt(0).toUpperCase()+I.slice(1)},I))]}),e.jsx(Ve,{value:"all",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Date"}),e.jsx(xe,{children:"Service Type"}),e.jsx(xe,{children:"Transaction ID"}),e.jsx(xe,{children:"Transaction Amount"}),e.jsx(xe,{className:"text-center",children:"Rate"}),e.jsx(xe,{className:"text-right",children:"Commission"}),e.jsx(xe,{className:"text-center",children:"Status"})]})}),e.jsx(Gr,{children:g.map(I=>e.jsxs(ht,{children:[e.jsx(se,{children:I.createdAt?vt(new Date(I.createdAt),"dd MMM yyyy"):"N/A"}),e.jsx(se,{children:e.jsx(ae,{className:"bg-primary/10 text-primary hover:bg-primary/20",children:I.serviceType.charAt(0).toUpperCase()+I.serviceType.slice(1)})}),e.jsxs(se,{children:["TRX-",I.transactionId]}),e.jsx(se,{children:z(I.originalAmount)}),e.jsxs(se,{className:"text-center",children:[I.commissionPercentage,"%"]}),e.jsx(se,{className:"text-right font-medium",children:z(I.commissionAmount)}),e.jsx(se,{className:"text-center",children:e.jsx(ae,{variant:I.status==="credited"?"default":"outline",className:I.status==="credited"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800",children:I.status==="credited"?"Paid":"Pending"})})]},I.id))})]})}),w.map(I=>e.jsx(Ve,{value:I,children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Date"}),e.jsx(xe,{children:"Transaction ID"}),e.jsx(xe,{children:"Transaction Amount"}),e.jsx(xe,{className:"text-center",children:"Rate"}),e.jsx(xe,{className:"text-right",children:"Commission"}),e.jsx(xe,{className:"text-center",children:"Status"})]})}),e.jsx(Gr,{children:N[I].map(F=>e.jsxs(ht,{children:[e.jsx(se,{children:F.createdAt?vt(new Date(F.createdAt),"dd MMM yyyy"):"N/A"}),e.jsxs(se,{children:["TRX-",F.transactionId]}),e.jsx(se,{children:z(F.originalAmount)}),e.jsxs(se,{className:"text-center",children:[F.commissionPercentage,"%"]}),e.jsx(se,{className:"text-right font-medium",children:z(F.commissionAmount)}),e.jsx(se,{className:"text-center",children:e.jsx(ae,{variant:F.status==="credited"?"default":"outline",className:F.status==="credited"?"bg-green-100 text-green-800":"bg-amber-100 text-amber-800",children:F.status==="credited"?"Paid":"Pending"})})]},F.id))})]})},I))]})}),e.jsxs(pr,{className:"flex justify-between border-t p-4",children:[e.jsxs("p",{className:"text-sm text-neutral-500",children:[e.jsx(fa,{className:"inline-block h-4 w-4 mr-1"}),g?`Showing ${g.length} commission entries`:"No commissions found"]}),e.jsxs("p",{className:"text-sm text-neutral-500",children:[e.jsx(Jt,{className:"inline-block h-4 w-4 mr-1"}),"Last updated: ",new Date().toLocaleDateString()]})]})]}),e.jsx(Tt,{open:a,onOpenChange:i,children:e.jsxs(Ct,{className:"sm:max-w-[500px]",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:l?"Edit Commission Configuration":"Add Commission Configuration"}),e.jsx(Xt,{children:"Configure commission percentages for service providers in the hierarchy"})]}),e.jsx(Qt,{...S,children:e.jsxs("form",{onSubmit:S.handleSubmit(A),className:"space-y-4",children:[e.jsx(U,{control:S.control,name:"serviceType",render:({field:I})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Type"}),e.jsxs(je,{onValueChange:I.onChange,defaultValue:I.value,disabled:!!l,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select service type"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"utility",children:"Utility"}),e.jsx(T,{value:"bus",children:"Bus Booking"}),e.jsx(T,{value:"flight",children:"Flight Booking"}),e.jsx(T,{value:"hotel",children:"Hotel Booking"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"})]})]}),e.jsx(qe,{children:"The type of service this commission structure applies to"}),e.jsx(H,{})]})}),e.jsx(U,{control:S.control,name:"provider",render:({field:I})=>e.jsxs(L,{children:[e.jsx(B,{children:"Provider (Optional)"}),e.jsx(V,{children:e.jsx($,{placeholder:"Provider name (leave empty for all providers)",...I})}),e.jsx(qe,{children:"Specific provider this configuration applies to (leave empty for all)"}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:S.control,name:"adminPercentage",render:({field:I})=>e.jsxs(L,{children:[e.jsx(B,{children:"Admin %"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",max:"10",step:"0.1",...I})}),e.jsx(H,{})]})}),e.jsx(U,{control:S.control,name:"branchManagerPercentage",render:({field:I})=>e.jsxs(L,{children:[e.jsx(B,{children:"Branch Manager %"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",max:"10",step:"0.1",...I})}),e.jsx(H,{})]})}),e.jsx(U,{control:S.control,name:"talukManagerPercentage",render:({field:I})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk Manager %"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",max:"10",step:"0.1",...I})}),e.jsx(H,{})]})}),e.jsx(U,{control:S.control,name:"serviceAgentPercentage",render:({field:I})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Agent %"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",max:"15",step:"0.1",...I})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:S.control,name:"active",render:({field:I})=>e.jsxs(L,{className:"flex flex-row items-center gap-2 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx("input",{type:"checkbox",checked:I.value,onChange:I.onChange,className:"h-4 w-4"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Active"}),e.jsx(qe,{children:"Enable or disable this commission configuration"})]})]})}),e.jsxs(zs,{children:[e.jsx(_,{variant:"outline",type:"button",onClick:()=>i(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:C.isPending,children:C.isPending?e.jsx(Ya,{className:"mr-2 h-4 w-4 animate-spin"}):l?"Update":"Create"})]})]})})]})})]})}var Tk="Progress",Ok=100,[ERe,t$e]=ws(Tk),[DRe,MRe]=ERe(Tk),GK=j.forwardRef((t,r)=>{const{__scopeProgress:s,value:n=null,max:a,getValueLabel:i=IRe,...l}=t;(a||a===0)&&!JD(a)&&console.error(RRe(`${a}`,"Progress"));const o=JD(a)?a:Ok;n!==null&&!eM(n,o)&&console.error(FRe(`${n}`,"Progress"));const c=eM(n,o)?n:null,d=Ry(c)?i(c,o):void 0;return e.jsx(DRe,{scope:s,value:c,max:o,children:e.jsx(it.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Ry(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":XK(c,o),"data-value":c??void 0,"data-max":o,...l,ref:r})})});GK.displayName=Tk;var YK="ProgressIndicator",QK=j.forwardRef((t,r)=>{const{__scopeProgress:s,...n}=t,a=MRe(YK,s);return e.jsx(it.div,{"data-state":XK(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:r})});QK.displayName=YK;function IRe(t,r){return`${Math.round(t/r*100)}%`}function XK(t,r){return t==null?"indeterminate":t===r?"complete":"loading"}function Ry(t){return typeof t=="number"}function JD(t){return Ry(t)&&!isNaN(t)&&t>0}function eM(t,r){return Ry(t)&&!isNaN(t)&&t<=r&&t>=0}function RRe(t,r){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${r}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ok}\`.`}function FRe(t,r){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${r}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ok} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ZK=GK,$Re=QK;const ei=j.forwardRef(({className:t,value:r,...s},n)=>e.jsx(ZK,{ref:n,className:De("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:e.jsx($Re,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));ei.displayName=ZK.displayName;function LRe(){var K,Z,ue,Ne,J,Re,Ee,ut,ce,ke,Be,Me,He,Xe,we,Bt,jt,or,ir,Nr,Jr;const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("overview"),[a,i]=j.useState(500),[l,o]=j.useState("recharge"),[c,d]=j.useState("Airtel"),[u,m]=j.useState(""),h=(t==null?void 0:t.userType)==="admin",{data:g,isLoading:x}=fe({queryKey:["/api/commissions/stats"],enabled:h}),{data:p,isLoading:y}=fe({queryKey:["/api/commissions/hierarchy-wallet-balances"],enabled:h}),{data:v,isLoading:f}=fe({queryKey:["/api/commissions/pending"],enabled:h}),{data:b,isLoading:N}=fe({queryKey:["/api/recharges/admin"],enabled:h}),w=Se({mutationFn:async Ge=>await(await ie("POST","/api/commissions/mock-transaction",Ge)).json(),onSuccess:()=>{r({title:"Mock transaction created",description:"Commission distribution has been processed successfully"}),pe.invalidateQueries({queryKey:["/api/commissions/stats"]}),pe.invalidateQueries({queryKey:["/api/commissions/hierarchy-wallet-balances"]}),pe.invalidateQueries({queryKey:["/api/commissions/pending"]}),pe.invalidateQueries({queryKey:["/api/user"]})},onError:Ge=>{r({title:"Error creating mock transaction",description:Ge.message,variant:"destructive"})}}),C=Se({mutationFn:async Ge=>await(await ie("POST","/api/commissions/mark-as-paid",{commissionIds:Ge})).json(),onSuccess:()=>{r({title:"Commissions marked as paid",description:"The selected commissions have been marked as paid"}),pe.invalidateQueries({queryKey:["/api/commissions/stats"]}),pe.invalidateQueries({queryKey:["/api/commissions/hierarchy-wallet-balances"]}),pe.invalidateQueries({queryKey:["/api/commissions/pending"]})},onError:Ge=>{r({title:"Error marking commissions as paid",description:Ge.message,variant:"destructive"})}}),P=Se({mutationFn:async()=>await(await ie("POST","/api/commission-configs/initialize")).json(),onSuccess:Ge=>{r({title:"Commission configs initialized",description:Ge.message||"Default commission configurations have been set up"}),pe.invalidateQueries({queryKey:["/api/commission-configs"]})},onError:Ge=>{r({title:"Error initializing configs",description:Ge.message,variant:"destructive"})}}),S=Se({mutationFn:async()=>await(await ie("POST","/api/commissions/sync-wallet-balances")).json(),onSuccess:Ge=>{r({title:"Wallet balances synchronized",description:Ge.message||"All user wallet balances have been synchronized"}),pe.invalidateQueries({queryKey:["/api/commissions/hierarchy-wallet-balances"]}),pe.invalidateQueries({queryKey:["/api/user"]})},onError:Ge=>{r({title:"Error syncing wallet balances",description:Ge.message,variant:"destructive"})}}),A=Se({mutationFn:async()=>{if(!u||isNaN(parseInt(u)))throw new Error("Please enter a valid recharge ID");return await(await ie("POST","/api/commissions/manual-distribute-recharge",{rechargeId:parseInt(u)})).json()},onSuccess:Ge=>{r({title:"Commissions distributed",description:"Commissions have been distributed successfully for the recharge"}),pe.invalidateQueries({queryKey:["/api/commissions/stats"]}),pe.invalidateQueries({queryKey:["/api/commissions/hierarchy-wallet-balances"]}),pe.invalidateQueries({queryKey:["/api/commissions/pending"]}),pe.invalidateQueries({queryKey:["/api/user"]}),m("")},onError:Ge=>{r({title:"Error distributing commissions",description:Ge.message,variant:"destructive"})}}),k=()=>{w.mutate({amount:a,serviceType:l,provider:c})},D=Ge=>{C.mutate([Ge])},q=()=>{P.mutate()},z=()=>{S.mutate()},I=()=>{A.mutate()};if(!h)return e.jsx("div",{className:"container mx-auto p-8",children:e.jsx(O,{children:e.jsxs(G,{children:[e.jsx(Y,{children:"Access Denied"}),e.jsx(he,{children:"You do not have permission to view the commission dashboard. This dashboard is only accessible to administrators."})]})})});const F=p?[{name:"Admin",value:((K=p.admin)==null?void 0:K.walletBalance)||0},{name:"Branch Manager",value:((Z=p.branchManager)==null?void 0:Z.walletBalance)||0},{name:"Taluk Manager",value:((ue=p.talukManager)==null?void 0:ue.walletBalance)||0},{name:"Service Agent",value:((Ne=p.serviceAgent)==null?void 0:Ne.walletBalance)||0},{name:"Customer",value:((J=p.testUser)==null?void 0:J.walletBalance)||0}]:[],W=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8"],X=[{date:"2025-01",amount:2500,commissions:150},{date:"2025-02",amount:3200,commissions:192},{date:"2025-03",amount:4100,commissions:246},{date:"2025-04",amount:3800,commissions:228}];return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Commission Dashboard"}),e.jsx("div",{className:"mb-8",children:e.jsxs(nr,{value:s,onValueChange:n,children:[e.jsxs(sr,{className:"mb-6",children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"testing",children:"Testing Tools"}),e.jsx(Ae,{value:"pending",children:"Pending Commissions"})]}),e.jsxs(Ve,{value:"overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs(O,{children:[e.jsx(G,{className:"pb-2",children:e.jsx(Y,{className:"text-sm font-medium text-muted-foreground",children:"Total Commissions"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(rv,{className:"h-5 w-5 text-primary mr-2"}),e.jsxs("span",{className:"text-2xl font-bold",children:["",x?"...":((Re=g==null?void 0:g.totalCommissionsEarned)==null?void 0:Re.toFixed(2))||"0.00"]})]})})]}),e.jsxs(O,{children:[e.jsx(G,{className:"pb-2",children:e.jsx(Y,{className:"text-sm font-medium text-muted-foreground",children:"Total Recharges"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j$,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-2xl font-bold",children:x?"...":(g==null?void 0:g.totalRecharges)||0})]})})]}),e.jsxs(O,{children:[e.jsx(G,{className:"pb-2",children:e.jsx(Y,{className:"text-sm font-medium text-muted-foreground",children:"Total Bookings"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bw,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsx("span",{className:"text-2xl font-bold",children:x?"...":(g==null?void 0:g.totalBookings)||0})]})})]}),e.jsxs(O,{children:[e.jsx(G,{className:"pb-2",children:e.jsx(Y,{className:"text-sm font-medium text-muted-foreground",children:"Active Users"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Kw,{className:"h-5 w-5 text-purple-500 mr-2"}),e.jsx("span",{className:"text-2xl font-bold",children:"5"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Commission Distribution"}),e.jsx(he,{children:"How commissions are distributed among different roles"})]}),e.jsx(E,{className:"h-80",children:y?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"})}):e.jsx(Uv,{width:"100%",height:"100%",children:e.jsxs(U4e,{children:[e.jsx($l,{data:F,cx:"50%",cy:"50%",labelLine:!1,label:({name:Ge,percent:ee})=>`${Ge}: ${(ee*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:F.map((Ge,ee)=>e.jsx(Jj,{fill:W[ee%W.length]},`cell-${ee}`))}),e.jsx(ea,{formatter:Ge=>`${Ge}`})]})})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Transaction & Commission Trends"}),e.jsx(he,{children:"Monthly transaction volume vs commissions"})]}),e.jsx(E,{className:"h-80",children:e.jsx(Uv,{width:"100%",height:"100%",children:e.jsxs(e7,{data:X,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Py,{strokeDasharray:"3 3"}),e.jsx(Xc,{dataKey:"date"}),e.jsx($o,{yAxisId:"left",orientation:"left"}),e.jsx($o,{yAxisId:"right",orientation:"right"}),e.jsx(ea,{formatter:Ge=>`${Ge}`}),e.jsx(vl,{}),e.jsx(Fo,{yAxisId:"left",type:"monotone",dataKey:"amount",stroke:"#8884d8",name:"Transaction Amount"}),e.jsx(Fo,{yAxisId:"right",type:"monotone",dataKey:"commissions",stroke:"#82ca9d",name:"Commission Amount"})]})})})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:"Wallet Balances"}),e.jsx(he,{children:"Current commission wallet balances across the hierarchy"})]}),e.jsxs(_,{onClick:z,variant:"outline",size:"sm",className:"ml-auto",children:[e.jsx(Ya,{className:"h-4 w-4 mr-2"}),"Sync Balances"]})]}),e.jsx(E,{children:y?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Admin (",((Ee=p==null?void 0:p.admin)==null?void 0:Ee.username)||"Unknown",")"]}),e.jsxs("span",{className:"font-medium",children:["",((ce=(ut=p==null?void 0:p.admin)==null?void 0:ut.walletBalance)==null?void 0:ce.toFixed(2))||"0.00"]})]}),e.jsx(ei,{value:p!=null&&p.admin?p.admin.walletBalance/200*100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Branch Manager (",((ke=p==null?void 0:p.branchManager)==null?void 0:ke.username)||"Unknown",")"]}),e.jsxs("span",{className:"font-medium",children:["",((Me=(Be=p==null?void 0:p.branchManager)==null?void 0:Be.walletBalance)==null?void 0:Me.toFixed(2))||"0.00"]})]}),e.jsx(ei,{value:p!=null&&p.branchManager?p.branchManager.walletBalance/200*100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Taluk Manager (",((He=p==null?void 0:p.talukManager)==null?void 0:He.username)||"Unknown",")"]}),e.jsxs("span",{className:"font-medium",children:["",((we=(Xe=p==null?void 0:p.talukManager)==null?void 0:Xe.walletBalance)==null?void 0:we.toFixed(2))||"0.00"]})]}),e.jsx(ei,{value:p!=null&&p.talukManager?p.talukManager.walletBalance/200*100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Service Agent (",((Bt=p==null?void 0:p.serviceAgent)==null?void 0:Bt.username)||"Unknown",")"]}),e.jsxs("span",{className:"font-medium",children:["",((or=(jt=p==null?void 0:p.serviceAgent)==null?void 0:jt.walletBalance)==null?void 0:or.toFixed(2))||"0.00"]})]}),e.jsx(ei,{value:p!=null&&p.serviceAgent?p.serviceAgent.walletBalance/200*100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:["Test User (",((ir=p==null?void 0:p.testUser)==null?void 0:ir.username)||"Unknown",")"]}),e.jsxs("span",{className:"font-medium",children:["",((Jr=(Nr=p==null?void 0:p.testUser)==null?void 0:Nr.walletBalance)==null?void 0:Jr.toFixed(2))||"0.00"]})]}),e.jsx(ei,{value:p!=null&&p.testUser?p.testUser.walletBalance/200*100:0,className:"h-2"})]})]})})]})]}),e.jsxs(Ve,{value:"testing",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Commission Distribution Testing"}),e.jsx(he,{children:"Create mock transactions to test the commission distribution system"})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Transaction Amount"}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 border rounded-md",value:a,onChange:Ge=>i(Number(Ge.target.value)),min:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Service Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-md",value:l,onChange:Ge=>o(Ge.target.value),children:[e.jsx("option",{value:"recharge",children:"Recharge"}),e.jsx("option",{value:"booking",children:"Booking"}),e.jsx("option",{value:"grocery",children:"Grocery"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Provider"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-md",value:c,onChange:Ge=>d(Ge.target.value),children:[e.jsx("option",{value:"Airtel",children:"Airtel"}),e.jsx("option",{value:"Jio",children:"Jio"}),e.jsx("option",{value:"Vi",children:"Vi"}),e.jsx("option",{value:"BSNL",children:"BSNL"})]})]})]}),e.jsxs("div",{className:"bg-neutral-50 p-4 rounded-md",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Commission Breakdown (Preview)"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Admin (0.5%)"}),e.jsxs("span",{children:["",(a*.005).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Branch Manager (0.5%)"}),e.jsxs("span",{children:["",(a*.005).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Taluk Manager (1%)"}),e.jsxs("span",{children:["",(a*.01).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Service Agent (2%)"}),e.jsxs("span",{children:["",(a*.02).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Customer (1%)"}),e.jsxs("span",{children:["",(a*.01).toFixed(2)]})]}),e.jsx(Tr,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total Commission"}),e.jsxs("span",{children:["",(a*.05).toFixed(2)]})]})]})]}),e.jsx(_,{onClick:k,disabled:w.isPending,className:"w-full",children:w.isPending?"Processing...":"Create Mock Transaction"})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"System Maintenance Tools"}),e.jsx(he,{children:"Tools to initialize and fix commission system configuration"})]}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Commission Configuration Setup"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Initialize default commission configurations for all service types if they don't exist."}),e.jsx(_,{onClick:q,disabled:P.isPending,className:"w-full",variant:"outline",children:P.isPending?"Initializing...":"Initialize Default Commission Configs"})]}),e.jsx(Tr,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Wallet Balance Synchronization"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Recalculates and updates wallet balances for all users based on their commission transactions."}),e.jsx(_,{onClick:z,disabled:S.isPending,className:"w-full",variant:"outline",children:S.isPending?"Syncing...":"Sync Wallet Balances"})]}),e.jsx(Tr,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Manual Commission Distribution"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manually distribute commissions for recharges that weren't processed automatically."}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border rounded-md",value:u,onChange:Ge=>m(Ge.target.value),placeholder:"Enter recharge ID"}),e.jsx(_,{onClick:I,disabled:A.isPending||!u,variant:"outline",children:A.isPending?"Processing...":"Distribute"})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-2 text-xs text-amber-800",children:"This tool is for recharges that have been processed by a service agent but didn't have commissions distributed."})]})]}),e.jsx(pr,{className:"bg-muted/50 text-xs text-muted-foreground",children:"Note: These tools should only be used for maintenance and fixing system issues."})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recharge Transactions"}),e.jsx(he,{children:"List of all recharge transactions in the system. Use the ID from this list for manual commission distribution."})]}),e.jsx(E,{children:N?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):b&&b.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{className:"w-[80px]",children:"ID"}),e.jsx(xe,{children:"User ID"}),e.jsx(xe,{children:"Amount"}),e.jsx(xe,{children:"Mobile"}),e.jsx(xe,{children:"Provider"}),e.jsx(xe,{children:"Service Type"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{children:"Processed By"}),e.jsx(xe,{children:"Date"}),e.jsx(xe,{children:"Actions"})]})}),e.jsx(Gr,{children:b.map(Ge=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:Ge.id}),e.jsx(se,{children:Ge.userId}),e.jsxs(se,{children:["",Ge.amount]}),e.jsx(se,{children:Ge.mobileNumber}),e.jsx(se,{children:Ge.provider||"-"}),e.jsx(se,{children:Ge.serviceType||"mobile"}),e.jsx(se,{children:e.jsx(ae,{variant:Ge.status==="completed"?"success":Ge.status==="pending"?"outline":"secondary",children:Ge.status})}),e.jsx(se,{children:Ge.processedBy||"-"}),e.jsx(se,{children:new Date(Ge.createdAt).toLocaleDateString()}),e.jsx(se,{children:e.jsx(_,{variant:"outline",size:"sm",onClick:()=>m(Ge.id.toString()),children:"Use ID"})})]},Ge.id))})]})}):e.jsx("div",{className:"text-center p-4 border rounded-md",children:e.jsx("p",{children:"No recharge transactions found"})})})]})]}),e.jsx(Ve,{value:"pending",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Pending Commissions"}),e.jsx(he,{children:"Commission transactions that need to be approved"})]}),e.jsx(E,{children:f?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","aria-label":"Loading"})}):v&&v.length>0?e.jsx("div",{className:"space-y-4",children:v.map(Ge=>{var ee,me;return e.jsxs("div",{className:"flex items-center justify-between border p-4 rounded-md",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[Ge.serviceType.charAt(0).toUpperCase()+Ge.serviceType.slice(1)," ",Ge.provider&&`- ${Ge.provider}`]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["User: ",Ge.username," | Amount: ",(ee=Ge.transactionAmount)==null?void 0:ee.toFixed(2)," | Commission: ",(me=Ge.commissionAmount)==null?void 0:me.toFixed(2)," (",Ge.commissionRate,"%)"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Date: ",new Date(Ge.createdAt).toLocaleString()]})]}),e.jsxs(_,{size:"sm",variant:"outline",onClick:()=>D(Ge.id),children:[e.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Mark as Paid"]})]},Ge.id)})}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No pending commissions found"})})]})})]})})]})}function BRe(){const{toast:t}=Ue(),[r,s]=j.useState(500),[n,a]=j.useState(500),[i,l]=j.useState(null),[o,c]=j.useState(!1),{data:d,isLoading:u,error:m}=fe({queryKey:["/api/wallet"],staleTime:3e4}),h=Se({mutationFn:async f=>(await ie("POST","/api/wallet/recharge",{amount:f})).json(),onSuccess:f=>{l(f),p(f)},onError:f=>{t({title:"Failed to create order",description:f instanceof Error?f.message:"Unknown error",variant:"destructive"})}}),g=Se({mutationFn:async f=>(await ie("POST","/api/wallet/verify-payment",f)).json(),onSuccess:()=>{t({title:"Payment successful",description:"Your wallet has been recharged"}),c(!1),l(null),pe.invalidateQueries({queryKey:["/api/wallet"]})},onError:f=>{t({title:"Payment verification failed",description:f instanceof Error?f.message:"Unknown error",variant:"destructive"}),c(!1)}}),x=Se({mutationFn:async f=>(await ie("POST","/api/wallet/add-test-funds",{amount:f})).json(),onSuccess:f=>{t({title:"Funds added successfully",description:`${f.balance.toFixed(2)} is your new wallet balance`}),pe.invalidateQueries({queryKey:["/api/wallet"]})},onError:f=>{t({title:"Failed to add funds",description:f instanceof Error?f.message:"Unknown error",variant:"destructive"})}}),p=f=>{if(!f.key){t({title:"Payment Error",description:"API key not available. Please contact support.",variant:"destructive"});return}if(c(!0),window.Razorpay){const b={key:f.key,amount:f.amount,currency:f.currency,name:"TN Services",description:"Wallet Recharge",order_id:f.orderId,handler:function(N){g.mutate({razorpay_payment_id:N.razorpay_payment_id,razorpay_order_id:N.razorpay_order_id,razorpay_signature:N.razorpay_signature})},prefill:{name:"TN User"},theme:{color:"#6366F1"},modal:{ondismiss:function(){c(!1)}}};try{new window.Razorpay(b).open()}catch(N){console.error("Razorpay error:",N),t({title:"Payment Error",description:"Failed to initialize payment. Please try again.",variant:"destructive"}),c(!1)}}else t({title:"Payment Error",description:"Payment gateway not available. Please try again later.",variant:"destructive"}),c(!1)},y=()=>{if(r<100){t({title:"Invalid amount",description:"Minimum recharge amount is 100",variant:"destructive"});return}h.mutate(r)},v=()=>{if(n<=0||n>1e4){t({title:"Invalid amount",description:"Amount must be between 1 and 10,000",variant:"destructive"});return}x.mutate(n)};return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):m?e.jsx("div",{className:"container py-10",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Error"}),e.jsx(he,{children:"Failed to load wallet data"})]}),e.jsxs(E,{children:[e.jsx("p",{children:m instanceof Error?m.message:"Unknown error"}),e.jsx(_,{className:"mt-4",onClick:()=>pe.invalidateQueries({queryKey:["/api/wallet"]}),children:"Retry"})]})]})}):e.jsx("div",{className:"container py-6",children:e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Wallet"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your wallet balance and view transactions"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{className:"md:col-span-2",children:[e.jsxs(G,{className:"pb-4",children:[e.jsx(Y,{children:"Wallet Balance"}),e.jsx(he,{children:"Current available balance in your wallet"})]}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-4xl font-bold",children:["",d==null?void 0:d.balance.toFixed(2)]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Tt,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"lg",children:[e.jsx(rv,{className:"mr-2 h-4 w-4"}),"Add Test Funds"]})}),e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Add Test Funds"}),e.jsx(Xt,{children:"Quickly add funds to your wallet for testing purposes"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"test-amount",children:"Amount ()"}),e.jsx($,{id:"test-amount",type:"number",min:1,max:1e4,value:n,onChange:f=>a(Number(f.target.value)),placeholder:"Enter amount"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Amount must be between 1 and 10,000"})]})}),e.jsxs(zs,{className:"sm:justify-between",children:[e.jsx(vT,{asChild:!0,children:e.jsx(_,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(_,{type:"button",onClick:v,disabled:x.isPending,variant:"default",children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"})," Processing"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Funds"]})})]})]})]}),e.jsxs(Tt,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{size:"lg",children:[e.jsx(fa,{className:"mr-2 h-4 w-4"}),"Add Money"]})}),e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Add Money to Wallet"}),e.jsx(Xt,{children:"Enter the amount you want to add to your wallet"})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(re,{htmlFor:"amount",children:"Amount ()"}),e.jsx($,{id:"amount",type:"number",min:100,value:r,onChange:f=>s(Number(f.target.value)),placeholder:"Enter amount"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Minimum amount: 100"})]})}),e.jsxs(zs,{className:"sm:justify-between",children:[e.jsx(vT,{asChild:!0,children:e.jsx(_,{type:"button",variant:"secondary",children:"Cancel"})}),e.jsx(_,{type:"button",onClick:y,disabled:h.isPending||o,children:h.isPending||o?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"})," Processing"]}):"Proceed to Payment"})]})]})]})]})]})})]}),e.jsxs(O,{className:"md:col-span-2",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Transaction History"}),e.jsx(he,{children:"Your recent wallet transactions"})]}),e.jsx(E,{children:d!=null&&d.transactions&&d.transactions.length>0?e.jsxs(nr,{defaultValue:"all",className:"w-full",children:[e.jsxs(sr,{className:"mb-4",children:[e.jsx(Ae,{value:"all",children:"All"}),e.jsx(Ae,{value:"credit",children:"Credits"}),e.jsx(Ae,{value:"debit",children:"Debits"})]}),e.jsxs(Ve,{value:"all",className:"space-y-4",children:[d.transactions.map(f=>e.jsx(PN,{transaction:f},f.id)),d.transactions.length===0&&e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"})]}),e.jsxs(Ve,{value:"credit",className:"space-y-4",children:[d.transactions.filter(f=>f.type==="credit").map(f=>e.jsx(PN,{transaction:f},f.id)),d.transactions.filter(f=>f.type==="credit").length===0&&e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No credit transactions found"})]}),e.jsxs(Ve,{value:"debit",className:"space-y-4",children:[d.transactions.filter(f=>f.type==="debit").map(f=>e.jsx(PN,{transaction:f},f.id)),d.transactions.filter(f=>f.type==="debit").length===0&&e.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"No debit transactions found"})]})]}):e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No transactions available"})})})]})]})]})})}function PN({transaction:t}){return e.jsxs("div",{className:"flex items-center justify-between py-4 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-muted",children:t.type==="credit"?e.jsx(HX,{className:"h-5 w-5 text-green-500"}):e.jsx(KX,{className:"h-5 w-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"capitalize",children:t.serviceType}),e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(yt,{className:"mr-1 h-3 w-3"}),uk(new Date(t.createdAt),{addSuffix:!0})]})]})]})]}),e.jsx("div",{children:e.jsxs("p",{className:`font-medium ${t.type==="credit"?"text-green-600":"text-red-600"}`,children:[t.type==="credit"?"+":"-","",t.amount.toFixed(2)]})})]})}const VRe=Nm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),xa=j.forwardRef(({className:t,variant:r,...s},n)=>e.jsx("div",{ref:n,role:"alert",className:De(VRe({variant:r}),t),...s}));xa.displayName="Alert";const Wi=j.forwardRef(({className:t,...r},s)=>e.jsx("h5",{ref:s,className:De("mb-1 font-medium leading-none tracking-tight",t),...r}));Wi.displayName="AlertTitle";const ga=j.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:De("text-sm [&_p]:leading-relaxed",t),...r}));ga.displayName="AlertDescription";function URe({selectedType:t,onSelectType:r,onSelectProvider:s}){const{toast:n}=Ue(),{data:a,isLoading:i,error:l}=fe({queryKey:["/api/utility/providers",t],queryFn:async()=>{const c=t?`?type=${t}`:"";return(await ie("GET",`/api/utility/providers${c}`)).json()}}),o=[{id:"electricity",name:"Electricity"},{id:"water",name:"Water"},{id:"gas",name:"Gas"},{id:"dth",name:"DTH"},{id:"broadband",name:"Broadband"},{id:"landline",name:"Landline"}];return l&&n({title:"Error fetching providers",description:"Failed to load utility providers. Please try again.",variant:"destructive"}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Pay Utility Bills"}),e.jsx(he,{children:"Select a service provider to fetch and pay bills"})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"utilityType",children:"Select Utility Type"}),e.jsxs(je,{value:t,onValueChange:r,children:[e.jsx(ge,{id:"utilityType",children:e.jsx(be,{placeholder:"Select utility type"})}),e.jsx(ve,{children:o.map(c=>e.jsx(T,{value:c.id,children:c.name},c.id))})]})]}),i?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):a&&a.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:a.map(c=>e.jsx(O,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>s(c),children:e.jsxs(E,{className:"p-4 flex flex-col items-center justify-center space-y-2",children:[e.jsx("div",{className:"h-16 w-16 flex items-center justify-center overflow-hidden rounded-full bg-neutral-100",children:e.jsx("img",{src:c.logo,alt:c.name,className:"max-h-12 max-w-12 object-contain",onError:d=>{d.target.style.display="none",d.target.parentElement.innerText=c.name.charAt(0)}})}),e.jsx("span",{className:"text-sm font-medium text-center",children:c.name})]})},c.id))}):e.jsx("div",{className:"py-4 text-center text-muted-foreground",children:t?"No providers available for the selected utility type":"Select a utility type to view providers"})]})})]})}function qRe({provider:t,onBack:r,onBillFetched:s}){const[n,a]=j.useState(""),{toast:i}=Ue(),l=Se({mutationFn:async()=>{const c=await ie("GET",`/api/utility/fetch-bill?providerId=${t.id}&consumerNumber=${n}`);if(!c.ok){const d=await c.json();throw new Error(d.message||"Failed to fetch bill")}return c.json()},onSuccess:c=>{s(c)},onError:c=>{i({title:"Error fetching bill",description:c.message||"Failed to fetch bill details. Please check the consumer number and try again.",variant:"destructive"})}}),o=c=>{if(c.preventDefault(),!n.trim()){i({title:"Consumer number required",description:"Please enter a valid consumer/subscriber number",variant:"destructive"});return}l.mutate()};return e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:r,children:""}),e.jsxs("div",{children:[e.jsx(Y,{children:"Fetch Bill Details"}),e.jsx(he,{children:"Enter your consumer number to fetch bill details"})]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-neutral-100 flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:t.logo,alt:t.name,className:"max-h-10 max-w-10 object-contain",onError:c=>{c.target.style.display="none",c.target.parentElement.innerText=t.name.charAt(0)}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:t.type})]})]}),e.jsx("form",{onSubmit:o,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"consumerNumber",children:"Consumer/Subscriber Number"}),e.jsx($,{id:"consumerNumber",type:"text",placeholder:"Enter your consumer/subscriber number",value:n,onChange:c=>a(c.target.value),disabled:l.isPending,required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the number exactly as it appears on your bill or subscription details"})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:l.isPending,children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Fetching..."]}):"Fetch Bill"})]})})]})]})}function zRe({bill:t,onBack:r,onPaid:s}){const{toast:n}=Ue(),a=Se({mutationFn:async()=>{const m=await ie("POST","/api/utility/pay-bill",{billId:t.billId,providerId:i(t.providerName,t.providerType),consumerNumber:t.consumerNumber,amount:t.amount});if(!m.ok){const h=await m.json();throw new Error(h.message||"Payment failed")}return m.json()},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/wallet/balance"]}),n({title:"Payment Successful",description:`Your bill payment of ${t.amount.toFixed(2)} was successful.`,variant:"default"}),s()},onError:m=>{n({title:"Payment Failed",description:m.message||"Failed to process payment. Please try again.",variant:"destructive"})}}),i=(m,h)=>{const g=m.toLowerCase().replace(/\s+/g,"");return`${h.toLowerCase()}_${g}`},l=m=>{try{return vt(ID(m),"d MMM yyyy")}catch{return m}},c=(m=>{try{const h=ID(m),g=new Date,x=h.getTime()-g.getTime();return Math.ceil(x/(1e3*60*60*24))}catch{return 0}})(t.dueDate),d=c>=0&&c<=5,u=c<0;return e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:r,children:""}),e.jsxs("div",{children:[e.jsx(Y,{children:"Bill Details"}),e.jsx(he,{children:"Review and pay your utility bill"})]})]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-lg",children:t.providerName}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[t.providerType," Bill"]})]}),e.jsx("div",{className:"px-3 py-1 bg-primary/10 rounded-full",children:e.jsxs("span",{className:"text-primary text-sm font-medium",children:["Bill #",t.billId.substring(t.billId.length-6)]})})]}),e.jsx(Tr,{}),(d||u)&&e.jsxs(xa,{variant:u?"destructive":"default",className:u?"":"border-yellow-500 bg-yellow-50 text-yellow-900",children:[e.jsx(lr,{className:`h-4 w-4 ${u?"":"text-yellow-500"}`}),e.jsx(Wi,{children:u?"Payment Overdue":"Due Soon"}),e.jsx(ga,{children:u?`This bill is overdue by ${Math.abs(c)} days.`:`This bill is due in ${c} days.`})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Customer Name"}),e.jsx("p",{children:t.customerName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Consumer Number"}),e.jsx("p",{children:t.consumerNumber})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bill Date"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("p",{children:l(t.billDate)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jt,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("p",{children:l(t.dueDate)})]})]}),t.billPeriod&&e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Billing Period"}),e.jsx("p",{children:t.billPeriod})]})]}),t.extraDetails&&Object.keys(t.extraDetails).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Tr,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Additional Details"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(t.extraDetails).map(([m,h])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:m.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{className:"text-sm font-medium",children:h})]},m))})]})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Bill Amount"}),e.jsxs("span",{className:"font-semibold",children:[" ",t.amount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Convenience Fee"}),e.jsx("span",{className:"font-semibold",children:" 0.00"})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Total Amount"}),e.jsxs("span",{className:"text-lg font-bold",children:[" ",t.amount.toFixed(2)]})]})]})]}),e.jsxs(pr,{className:"flex flex-col space-y-4",children:[e.jsx(_,{className:"w-full",onClick:()=>a.mutate(),disabled:a.isPending,children:a.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:["Pay  ",t.amount.toFixed(2)]})}),e.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["By proceeding with the payment, you agree to the terms and conditions.",e.jsx("br",{}),"Payment will be deducted from your wallet balance."]})]})]})}function KRe(){return e.jsx(O,{children:e.jsxs(E,{className:"pt-6 pb-6 flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:e.jsx(Mt,{className:"h-8 w-8 text-green-600"})}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your bill payment has been processed successfully."}),e.jsx(_,{variant:"outline",className:"mb-4",asChild:!0,children:e.jsxs("a",{href:"/wallet",children:["Check Wallet ",e.jsx(ia,{className:"ml-1 h-4 w-4"})]})})]})})}function HRe(){const[t,r]=j.useState("select-provider"),[s,n]=j.useState(""),[a,i]=j.useState(null),[l,o]=j.useState(null),c=x=>{i(x),r("fetch-bill")},d=x=>{o(x),r("payment")},u=()=>{r("success")},m=()=>{i(null),r("select-provider")},h=()=>{o(null),r("fetch-bill")},g=()=>{i(null),o(null),n(""),r("select-provider")};return e.jsxs("div",{className:"container mx-auto py-6 max-w-3xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Utility Bill Payments"}),e.jsx("p",{className:"text-muted-foreground",children:"Pay your electricity, water, gas, DTH, broadband and landline bills"})]}),e.jsxs(nr,{defaultValue:"pay-bills",className:"mb-8",children:[e.jsxs(sr,{className:"mb-4",children:[e.jsx(Ae,{value:"pay-bills",children:"Pay Bills"}),e.jsx(Ae,{value:"payment-history",children:"Payment History"})]}),e.jsx(Ve,{value:"pay-bills",children:e.jsxs("div",{className:"space-y-6",children:[t==="select-provider"&&e.jsx(URe,{selectedType:s,onSelectType:n,onSelectProvider:c}),t==="fetch-bill"&&a&&e.jsx(qRe,{provider:a,onBack:m,onBillFetched:d}),t==="payment"&&l&&e.jsx(zRe,{bill:l,onBack:h,onPaid:u}),t==="success"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(KRe,{}),e.jsx("div",{className:"flex justify-center",children:e.jsx(_,{variant:"outline",onClick:g,children:"Pay Another Bill"})})]})]})}),e.jsx(Ve,{value:"payment-history",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Payment History"}),e.jsx(he,{children:"View your past utility bill payments"})]}),e.jsx(E,{children:e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-muted-foreground",children:"Your payment history will appear here"})})})]})})]})]})}function WRe(){const{toast:t}=Ue(),{user:r,isLoading:s}=dt(),[,n]=br(),[a,i]=j.useState("bus"),[l,o]=j.useState(""),[c,d]=j.useState(""),[u,m]=j.useState(""),[h,g]=j.useState(!1),[x,p]=j.useState(""),[y,v]=j.useState(""),[f,b]=j.useState(""),[N,w]=j.useState(!1),[C,P]=j.useState(""),[S,A]=j.useState(""),[k,D]=j.useState(""),[q,z]=j.useState("1"),[I,F]=j.useState(!1),[W,X]=j.useState(null),[K,Z]=j.useState(null),[ue,Ne]=j.useState(null),[J,Re]=j.useState(""),[Ee,ut]=j.useState("1"),[ce,ke]=j.useState("1"),[Be,Me]=j.useState([]),[He,Xe]=j.useState([]),[we,Bt]=j.useState("RedBus"),[jt,or]=j.useState("MakeMyTrip"),[ir,Nr]=j.useState("MakeMyTrip"),{data:Jr=[]}=fe({queryKey:["/api/travel/cities"],enabled:!0}),{data:Ge=[],refetch:ee,isLoading:me}=fe({queryKey:["/api/travel/bus/search",l,c,u,we],enabled:h,initialData:h?[{id:"bus1",busOperator:"Tamil Nadu Express",busType:"AC Sleeper",origin:l||"Chennai",destination:c||"Coimbatore",departureTime:"21:30",arrivalTime:"05:45",duration:"8h 15m",fare:850,availableSeats:32,amenities:["Charging Point","Blanket","Water Bottle","CCTV"],busNumber:"TN01X6789",logo:"https://picsum.photos/200"},{id:"bus2",busOperator:"KPN Travels",busType:"Non-AC Seater",origin:l||"Chennai",destination:c||"Coimbatore",departureTime:"22:00",arrivalTime:"06:30",duration:"8h 30m",fare:650,availableSeats:28,amenities:["Charging Point","TV"],busNumber:"TN02Y1234",logo:"https://picsum.photos/200"}]:[]}),{data:Ce=[],refetch:te,isLoading:Oe}=fe({queryKey:["/api/travel/flight/search",x,y,f,jt],enabled:N,initialData:N?[{id:"flight1",airline:"IndiGo",flightNumber:"6E-7652",origin:x||"Chennai",destination:y||"Delhi",departureTime:"06:15",arrivalTime:"09:00",duration:"2h 45m",fare:3450,cabinClass:"Economy",availableSeats:43,stops:0,logo:"https://picsum.photos/200"},{id:"flight2",airline:"Air India",flightNumber:"AI-802",origin:x||"Chennai",destination:y||"Delhi",departureTime:"09:30",arrivalTime:"12:35",duration:"3h 05m",fare:4100,cabinClass:"Economy",availableSeats:21,stops:0,logo:"https://picsum.photos/200"}]:[]}),{data:Ie=[],refetch:rt,isLoading:qt}=fe({queryKey:["/api/travel/hotel/search",C,S,k,q,ir],enabled:I,initialData:I?[{id:"hotel1",name:"The Park Chennai",location:C||"Chennai",address:"601 Anna Salai, Chennai 600006",rating:4.2,price:5200,amenities:["Free Wi-Fi","Swimming Pool","Restaurant","Gym","Spa","Room Service"],roomTypes:[{id:"room1",name:"Deluxe Room",capacity:2,price:5200,amenities:["King Bed","Free Wi-Fi","Mini Bar"],available:12},{id:"room2",name:"Executive Suite",capacity:2,price:7500,amenities:["King Bed","Free Wi-Fi","Mini Bar","Bathtub","City View"],available:5}],images:["https://picsum.photos/800/600","https://picsum.photos/800/600"],description:"A luxury hotel located in the heart of Chennai, offering world-class amenities and services."},{id:"hotel2",name:"ITC Grand Chola",location:C||"Chennai",address:"63 Mount Road, Chennai 600032",rating:4.8,price:8500,amenities:["Free Wi-Fi","Swimming Pool","Multiple Restaurants","Gym","Spa","Room Service","Airport Shuttle"],roomTypes:[{id:"room3",name:"Executive Club Room",capacity:2,price:8500,amenities:["King Bed","Free Wi-Fi","Mini Bar","Club Access"],available:8},{id:"room4",name:"Luxury Suite",capacity:3,price:12500,amenities:["King Bed","Free Wi-Fi","Mini Bar","Bathtub","City View","Butler Service"],available:3}],images:["https://picsum.photos/800/600","https://picsum.photos/800/600"],description:"A palatial luxury hotel with exquisite architecture and world-class dining options."}]:[]}),{data:xr=[],refetch:Gs}=fe({queryKey:["/api/travel/bookings"],enabled:!!r});j.useEffect(()=>{X(null),Z(null),Ne(null),Re("")},[a]);const fd=()=>{if(!l||!c||!u){t({title:"Missing information",description:"Please select origin, destination and travel date",variant:"destructive"});return}X(null),Me([]),g(!0),setTimeout(()=>{ee(),Ge.length===0&&t({title:"Search completed",description:"Available buses loaded for your route"})},500)},yi=()=>{if(!x||!y||!f){t({title:"Missing information",description:"Please select origin, destination and travel date",variant:"destructive"});return}Z(null),Xe([]),w(!0),setTimeout(()=>{te(),Ce.length===0&&t({title:"Search completed",description:"Available flights loaded for your route"})},500)},Lb=()=>{if(!C||!S||!k){t({title:"Missing information",description:"Please select location, check-in and check-out dates",variant:"destructive"});return}Ne(null),Re(""),z("1"),ke("1"),F(!0),setTimeout(()=>{rt(),Ie.length===0&&t({title:"Search completed",description:"Available hotels loaded for your location"})},500)},zm=async()=>{if(!W||!Ee||Be.length===0){t({title:"Missing information",description:"Please select a bus, number of passengers, and seat numbers",variant:"destructive"});return}const de=parseInt(Ee);if(Be.length!==de){t({title:"Seat selection mismatch",description:`Please select exactly ${de} seats`,variant:"destructive"});return}try{const Nt=await fetch("/api/travel/bus/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({busId:W.id,passengers:de,seatNumbers:Be})}),wr=await Nt.json();if(!Nt.ok)throw new Error(wr.message||"Failed to book bus");t({title:"Booking Successful",description:`Your booking is confirmed with PNR: ${wr.pnr}`}),X(null),ut("1"),Me([]),g(!1),Gs()}catch(Nt){t({title:"Booking Failed",description:Nt instanceof Error?Nt.message:"An error occurred during booking",variant:"destructive"})}},Km=async()=>{if(!K||!Ee||He.length===0){t({title:"Missing information",description:"Please select a flight, number of passengers, and provide passenger details",variant:"destructive"});return}const de=parseInt(Ee);if(He.length!==de){t({title:"Passenger details mismatch",description:`Please provide details for all ${de} passengers`,variant:"destructive"});return}try{const Nt=await fetch("/api/travel/flight/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({flightId:K.id,passengers:de,passengerDetails:He})}),wr=await Nt.json();if(!Nt.ok)throw new Error(wr.message||"Failed to book flight");t({title:"Booking Successful",description:`Your booking is confirmed with PNR: ${wr.pnr}`}),Z(null),ut("1"),Xe([]),w(!1),Gs()}catch(Nt){t({title:"Booking Failed",description:Nt instanceof Error?Nt.message:"An error occurred during booking",variant:"destructive"})}},Bb=async()=>{if(!ue||!J||!q||!ce||!S||!k){t({title:"Missing information",description:"Please select a hotel, room type, and provide all booking details",variant:"destructive"});return}try{const de=await fetch("/api/travel/hotel/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hotelId:ue.id,roomTypeId:J,checkIn:S,checkOut:k,guests:parseInt(q),rooms:parseInt(ce)})}),Nt=await de.json();if(!de.ok)throw new Error(Nt.message||"Failed to book hotel");t({title:"Booking Successful",description:`Your booking is confirmed with reference: ${Nt.pnr}`}),Ne(null),Re(""),z("1"),ke("1"),F(!1),Gs()}catch(de){t({title:"Booking Failed",description:de instanceof Error?de.message:"An error occurred during booking",variant:"destructive"})}},nx=de=>{if(Be.includes(de)){Me(Be.filter(wr=>wr!==de)),parseInt(Ee)>0&&t({title:"Seat unselected",description:`Please select ${parseInt(Ee)-Be.length+1} more seat(s) to continue`});return}if(!Ee||Ee==="0"){t({title:"Select passenger count first",description:"Please select the number of passengers before choosing seats",variant:"destructive"});return}const Nt=parseInt(Ee);if(Be.length>=Nt){t({title:"Maximum seats already selected",description:`You've already selected ${Nt} seats. Unselect a seat first if you want to change your selection.`,variant:"destructive"});return}else{Me([...Be,de]);const wr=Nt-Be.length-1;wr>0?t({title:"Seat selected",description:`Please select ${wr} more seat(s) to continue`}):t({title:"All seats selected",description:"You're ready to book your tickets"})}},Vb=async de=>{try{const Nt=await fetch(`/api/travel/booking/${de}/cancel`,{method:"POST"}),wr=await Nt.json();if(!Nt.ok)throw new Error(wr.message||"Failed to cancel booking");t({title:"Booking Cancelled",description:`Your booking has been cancelled and ${wr.amount} has been refunded to your wallet`}),Gs()}catch(Nt){t({title:"Cancellation Failed",description:Nt instanceof Error?Nt.message:"An error occurred during cancellation",variant:"destructive"})}},Bl=de=>{const Nt=new Date(de);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(Nt)};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Travel Bookings"}),e.jsxs(nr,{defaultValue:"bus",value:a,onValueChange:i,children:[e.jsxs(sr,{className:"grid grid-cols-4 mb-8",children:[e.jsxs(Ae,{value:"bus",className:"flex items-center gap-2",children:[e.jsx(Mi,{size:16}),"Bus"]}),e.jsxs(Ae,{value:"flight",className:"flex items-center gap-2",children:[e.jsx(ki,{size:16}),"Flight"]}),e.jsxs(Ae,{value:"hotel",className:"flex items-center gap-2",children:[e.jsx(Uw,{size:16}),"Hotel"]}),e.jsxs(Ae,{value:"bookings",className:"flex items-center gap-2",children:[e.jsx(A_,{size:16}),"My Bookings"]})]}),e.jsx(Ve,{value:"bus",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Book Bus Tickets"}),e.jsx(he,{children:"Search and book bus tickets to any destination in Tamil Nadu"})]}),e.jsx(E,{children:W?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Booking Details"}),e.jsx(_,{variant:"outline",onClick:()=>X(null),children:"Back to Search"})]}),e.jsxs(O,{className:"mb-6",children:[e.jsxs(G,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[W.logo&&e.jsx("img",{src:W.logo,alt:W.busOperator,className:"h-8 w-8 object-contain"}),e.jsx(Y,{children:W.busOperator})]}),e.jsxs("div",{className:"text-xl font-bold",children:["",W.fare]})]}),e.jsxs(he,{children:[W.busType," | ",W.busNumber]})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:W.departureTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:W.origin})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:W.duration}),e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("div",{className:"h-0.5 flex-1 bg-border"}),e.jsx(yt,{size:16,className:"mx-2 text-muted-foreground"}),e.jsx("div",{className:"h-0.5 flex-1 bg-border"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:u})]}),e.jsxs("div",{className:"flex flex-col text-right",children:[e.jsx("span",{className:"text-lg font-medium",children:W.arrivalTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:W.destination})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-4",children:"Passenger Information"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(re,{htmlFor:"passenger-count",children:"Number of Passengers"}),e.jsxs(je,{value:Ee,onValueChange:de=>{ut(de),Me([])},children:[e.jsx(ge,{id:"passenger-count",children:e.jsx(be,{placeholder:"Select passengers"})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(de=>e.jsxs(T,{value:de.toString(),children:[de," ",de===1?"passenger":"passengers"]},de))})]})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-medium mb-4",children:["Seat Selection (",Be.length,"/",Ee,")"]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:40},(de,Nt)=>{const wr=`A${Nt+1}`,rn=Be.includes(wr);return e.jsx(_,{variant:rn?"default":"outline",size:"sm",onClick:()=>nx(wr),className:"h-10",children:wr},Nt)})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Fare Summary"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Base Fare (",Ee," x ",W.fare,")"]}),e.jsxs("span",{children:["",parseInt(Ee)*W.fare]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Service Fee"}),e.jsx("span",{children:"50"})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Provider: ",we]}),e.jsx("span",{children:"Commission: 8-10%"})]}),e.jsx(Tr,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["",parseInt(Ee)*W.fare+50]})]}),e.jsx("div",{className:"mt-1 text-sm text-blue-500",children:Be.length<parseInt(Ee)?`Please select ${parseInt(Ee)-Be.length} more seat(s) to continue`:"All seats selected! You can now book."})]})}),e.jsx(pr,{children:e.jsxs("div",{className:"space-y-3",children:[Ee&&parseInt(Ee)!==Be.length&&e.jsxs(xa,{variant:"destructive",children:[e.jsx(lr,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Seat selection mismatch"}),e.jsxs(ga,{children:["You've selected ",Ee," passengers but only ",Be.length," seats. Please select ",parseInt(Ee)-Be.length," more seat(s)."]})]}),e.jsxs(_,{onClick:zm,className:"w-full",disabled:!Ee||parseInt(Ee)!==Be.length,children:["Pay using Wallet & Confirm Booking (",parseInt(Ee||"0")*W.fare+50,")"]}),!Ee&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Please select the number of passengers"}),Ee&&Be.length===0&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Please select ",Ee," seat(s)"]})]})})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"bus-origin",children:"Origin"}),e.jsxs(je,{value:l,onValueChange:o,children:[e.jsx(ge,{id:"bus-origin",children:e.jsx(be,{placeholder:"Select origin"})}),e.jsx(ve,{children:Jr.map(de=>e.jsx(T,{value:de,children:de},de))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"bus-destination",children:"Destination"}),e.jsxs(je,{value:c,onValueChange:d,children:[e.jsx(ge,{id:"bus-destination",children:e.jsx(be,{placeholder:"Select destination"})}),e.jsx(ve,{children:Jr.map(de=>e.jsx(T,{value:de,children:de},de))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"bus-date",children:"Date of Journey"}),e.jsx($,{id:"bus-date",type:"date",value:u,onChange:de=>m(de.target.value),min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(re,{htmlFor:"bus-provider",children:"Provider"}),e.jsxs(je,{value:we,onValueChange:Bt,children:[e.jsx(ge,{id:"bus-provider",children:e.jsx(be,{placeholder:"Select provider"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"RedBus",children:"RedBus (8-10% commission)"}),e.jsx(T,{value:"AbhiBus",children:"AbhiBus (7-9% commission)"}),e.jsx(T,{value:"PayTM",children:"PayTM (6-8% commission)"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select provider to view their inventory and prices"})]}),e.jsx(_,{onClick:fd,className:"w-full",children:"Search Buses"}),me&&e.jsx("div",{className:"flex justify-center my-8",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}),h&&!me&&Ge.length===0&&e.jsx("div",{className:"text-center my-8 text-muted-foreground",children:"No buses found for the selected route and date"}),h&&!me&&Ge.length>0&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Available Buses (",Ge.length,")"]}),Ge.map(de=>e.jsxs(O,{className:"hover:shadow-md transition-shadow",children:[e.jsx(G,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[de.logo&&e.jsx("img",{src:de.logo,alt:de.busOperator,className:"h-8 w-8 object-contain"}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:de.busOperator}),e.jsx(he,{children:de.busType})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold",children:["",de.fare]}),e.jsx(he,{children:"per seat"})]})]})}),e.jsxs(E,{className:"pb-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:de.departureTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:de.origin})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:de.duration}),e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("div",{className:"h-0.5 flex-1 bg-border"}),e.jsx(yt,{size:16,className:"mx-2 text-muted-foreground"}),e.jsx("div",{className:"h-0.5 flex-1 bg-border"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Bus No: ",de.busNumber]})]}),e.jsxs("div",{className:"flex flex-col text-right",children:[e.jsx("span",{className:"text-lg font-medium",children:de.arrivalTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:de.destination})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-4",children:de.amenities.map((Nt,wr)=>e.jsx(ae,{variant:"outline",children:Nt},wr))}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[de.availableSeats," seats available"]}),e.jsx(_,{onClick:()=>X(de),children:"Select Bus"})]})]})]},de.id))]})]})})]})}),e.jsx(Ve,{value:"flight",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Book Flight Tickets"}),e.jsx(he,{children:"Search and book flight tickets for domestic travel"})]}),e.jsx(E,{children:K?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Booking Details"}),e.jsx(_,{variant:"outline",onClick:()=>Z(null),children:"Back to Search"})]}),e.jsxs(O,{className:"mb-6",children:[e.jsxs(G,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[K.logo&&e.jsx("img",{src:K.logo,alt:K.airline,className:"h-8 w-8 object-contain"}),e.jsx(Y,{children:K.airline})]}),e.jsxs("div",{className:"text-xl font-bold",children:["",K.fare]})]}),e.jsxs(he,{children:[K.flightNumber,"  ",K.cabinClass]})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:K.departureTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:K.origin})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:K.duration}),e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("div",{className:"h-0.5 flex-1 bg-border"}),e.jsx(ki,{size:16,className:"mx-2 text-muted-foreground"}),e.jsx("div",{className:"h-0.5 flex-1 bg-border"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:f})]}),e.jsxs("div",{className:"flex flex-col text-right",children:[e.jsx("span",{className:"text-lg font-medium",children:K.arrivalTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:K.destination})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium mb-4",children:"Passenger Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"passenger-count-flight",children:"Number of Passengers"}),e.jsxs(je,{value:Ee,onValueChange:de=>{ut(de),Xe(Array(parseInt(de)).fill({name:"",age:"",gender:""}))},children:[e.jsx(ge,{id:"passenger-count-flight",children:e.jsx(be,{placeholder:"Select passengers"})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(de=>e.jsxs(T,{value:de.toString(),children:[de," ",de===1?"passenger":"passengers"]},de))})]})]}),parseInt(Ee)>0&&e.jsx("div",{className:"space-y-4",children:Array.from({length:parseInt(Ee)}).map((de,Nt)=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"text-base",children:["Passenger ",Nt+1]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:`passenger-name-${Nt}`,children:"Full Name"}),e.jsx($,{id:`passenger-name-${Nt}`,placeholder:"Enter full name as per ID",onChange:wr=>{const rn=[...He];rn[Nt]={...rn[Nt],name:wr.target.value},Xe(rn)}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:`passenger-age-${Nt}`,children:"Age"}),e.jsx($,{id:`passenger-age-${Nt}`,placeholder:"Age",type:"number",onChange:wr=>{const rn=[...He];rn[Nt]={...rn[Nt],age:wr.target.value},Xe(rn)}})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:`passenger-gender-${Nt}`,children:"Gender"}),e.jsxs(je,{onValueChange:wr=>{const rn=[...He];rn[Nt]={...rn[Nt],gender:wr},Xe(rn)},children:[e.jsx(ge,{id:`passenger-gender-${Nt}`,children:e.jsx(be,{placeholder:"Select gender"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"male",children:"Male"}),e.jsx(T,{value:"female",children:"Female"}),e.jsx(T,{value:"other",children:"Other"})]})]})]})]})]})]},Nt))})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Fare Summary"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Base Fare (",Ee," x ",K.fare,")"]}),e.jsxs("span",{children:["",parseInt(Ee)*K.fare]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Taxes & Fees"}),e.jsxs("span",{children:["",parseInt(Ee)*500]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Provider: ",jt]}),e.jsx("span",{children:"Commission: 6-8%"})]}),e.jsx(Tr,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["",parseInt(Ee)*(K.fare+500)]})]}),e.jsx("div",{className:"mt-1 text-sm text-blue-500",children:He.filter(de=>de.name&&de.age&&de.gender).length<parseInt(Ee)?`Please complete details for all ${Ee} passenger(s) to continue`:"All passenger details complete! You can now book."})]})}),e.jsx(pr,{children:e.jsxs(_,{onClick:Km,className:"w-full",disabled:He.filter(de=>de.name&&de.age&&de.gender).length<parseInt(Ee),children:["Pay using Wallet & Confirm Booking (",parseInt(Ee)*(K.fare+500),")"]})})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"flight-origin",children:"Origin"}),e.jsxs(je,{value:x,onValueChange:p,children:[e.jsx(ge,{id:"flight-origin",children:e.jsx(be,{placeholder:"Select origin"})}),e.jsx(ve,{children:Jr.map(de=>e.jsx(T,{value:de,children:de},de))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"flight-destination",children:"Destination"}),e.jsxs(je,{value:y,onValueChange:v,children:[e.jsx(ge,{id:"flight-destination",children:e.jsx(be,{placeholder:"Select destination"})}),e.jsx(ve,{children:Jr.map(de=>e.jsx(T,{value:de,children:de},de))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"flight-date",children:"Date of Journey"}),e.jsx($,{id:"flight-date",type:"date",value:f,onChange:de=>b(de.target.value),min:new Date().toISOString().split("T")[0]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(re,{htmlFor:"flight-provider",children:"Provider"}),e.jsxs(je,{value:jt,onValueChange:or,children:[e.jsx(ge,{id:"flight-provider",children:e.jsx(be,{placeholder:"Select provider"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"MakeMyTrip",children:"MakeMyTrip (6-8% commission)"}),e.jsx(T,{value:"Cleartrip",children:"Cleartrip (5-7% commission)"}),e.jsx(T,{value:"EaseMyTrip",children:"EaseMyTrip (7-9% commission)"}),e.jsx(T,{value:"Goibibo",children:"Goibibo (5-8% commission)"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select provider to view their inventory and prices"})]}),e.jsx(_,{onClick:yi,className:"w-full",children:"Search Flights"}),Oe&&e.jsx("div",{className:"flex justify-center my-8",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}),N&&!Oe&&Ce.length===0&&e.jsx("div",{className:"text-center my-8 text-muted-foreground",children:"No flights found for the selected route and date"}),N&&!Oe&&Ce.length>0&&e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Available Flights (",Ce.length,")"]}),Ce.map(de=>e.jsxs(O,{className:"hover:shadow-md transition-shadow",children:[e.jsx(G,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[de.logo&&e.jsx("img",{src:de.logo,alt:de.airline,className:"h-8 w-8 object-contain"}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:de.airline}),e.jsxs(he,{children:[de.flightNumber,"  ",de.cabinClass]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold",children:["",de.fare]}),e.jsx(he,{children:"per passenger"})]})]})}),e.jsxs(E,{className:"pb-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-lg font-medium",children:de.departureTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:de.origin})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:de.duration}),e.jsxs("div",{className:"w-full flex items-center",children:[e.jsx("div",{className:"h-0.5 flex-1 bg-border"}),e.jsx(ki,{size:16,className:"mx-2 text-muted-foreground"}),e.jsx("div",{className:"h-0.5 flex-1 bg-border"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:de.stops===0?"Non-stop":`${de.stops} stop${de.stops>1?"s":""}`})]}),e.jsxs("div",{className:"flex flex-col text-right",children:[e.jsx("span",{className:"text-lg font-medium",children:de.arrivalTime}),e.jsx("span",{className:"text-muted-foreground text-sm",children:de.destination})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[de.availableSeats," seats available"]}),e.jsx(_,{onClick:()=>Z(de),children:"Select Flight"})]})]})]},de.id))]})]})})]})}),e.jsx(Ve,{value:"hotel",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Book Hotels"}),e.jsx(he,{children:"Search and book hotels for your stay"})]}),e.jsx(E,{children:ue?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Booking Details"}),e.jsx(_,{variant:"outline",onClick:()=>Ne(null),children:"Back to Search"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:ue.name}),e.jsx(he,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(gt,{size:14,className:"text-muted-foreground mr-1"}),ue.address]})})]}),e.jsxs(E,{children:[e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:ue.images.map((de,Nt)=>e.jsx("img",{src:de,alt:`${ue.name} image ${Nt+1}`,className:"rounded-md aspect-video object-cover w-full"},Nt))}),e.jsx("p",{className:"text-sm mb-4",children:ue.description}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:ue.amenities.map((de,Nt)=>e.jsx(ae,{variant:"outline",children:de},Nt))})]})]})]})}),e.jsxs("div",{children:[e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Booking Summary"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Check-in"}),e.jsx("span",{className:"font-medium",children:Bl(S)})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[e.jsx("span",{children:"Check-out"}),e.jsx("span",{className:"font-medium",children:Bl(k)})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"room-type",children:"Room Type"}),e.jsxs(je,{value:J,onValueChange:Re,children:[e.jsx(ge,{id:"room-type",children:e.jsx(be,{placeholder:"Select room type"})}),e.jsx(ve,{children:ue.roomTypes.map(de=>e.jsxs(T,{value:de.id,children:[de.name," - ",de.price,"/night"]},de.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"room-count",children:"Rooms"}),e.jsxs(je,{value:ce,onValueChange:ke,children:[e.jsx(ge,{id:"room-count",children:e.jsx(be,{placeholder:"Select rooms"})}),e.jsx(ve,{children:[1,2,3,4,5].map(de=>e.jsxs(T,{value:de.toString(),children:[de," ",de===1?"room":"rooms"]},de))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"hotel-guests",children:"Guests"}),e.jsxs(je,{value:q,onValueChange:z,children:[e.jsx(ge,{id:"hotel-guests",children:e.jsx(be,{placeholder:"Select guests"})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(de=>e.jsxs(T,{value:de.toString(),children:[de," ",de===1?"guest":"guests"]},de))})]})]})]})]})]}),J&&e.jsxs(O,{className:"mt-4",children:[e.jsx(G,{children:e.jsx(Y,{children:"Price Details"})}),e.jsx(E,{children:(()=>{const de=ue.roomTypes.find(uW=>uW.id===J);if(!de)return null;const Nt=new Date(S),wr=new Date(k),rn=Math.ceil((wr.getTime()-Nt.getTime())/(1e3*60*60*24)),Ub=de.price*parseInt(ce)*rn,Hk=Math.round(Ub*.12),Wk=Ub+Hk;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[de.name," x ",ce," x ",rn," nights"]}),e.jsxs("span",{children:["",Ub]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Taxes & Fees"}),e.jsxs("span",{children:["",Hk]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Provider: ",ir]}),e.jsx("span",{children:"Commission: 10-12%"})]}),e.jsx(Tr,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["",Wk]})]}),e.jsx("div",{className:"mt-1 text-sm text-blue-500",children:!J||!ce||!q?"Please select all options to continue":"All set! You can now book."}),e.jsxs(_,{onClick:Bb,className:"w-full mt-4",disabled:!J||!ce||!q,children:["Pay using Wallet & Confirm Booking (",Wk,")"]})]})})()})]})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"hotel-location",children:"Location"}),e.jsxs(je,{value:C,onValueChange:P,children:[e.jsx(ge,{id:"hotel-location",children:e.jsx(be,{placeholder:"Select location"})}),e.jsx(ve,{children:Jr.map(de=>e.jsx(T,{value:de,children:de},de))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"check-in",children:"Check-in Date"}),e.jsx($,{id:"check-in",type:"date",value:S,onChange:de=>A(de.target.value),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"check-out",children:"Check-out Date"}),e.jsx($,{id:"check-out",type:"date",value:k,onChange:de=>D(de.target.value),min:S||new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"guests",children:"Guests"}),e.jsxs(je,{value:q,onValueChange:z,children:[e.jsx(ge,{id:"guests",children:e.jsx(be,{placeholder:"Select guests"})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(de=>e.jsxs(T,{value:de.toString(),children:[de," ",de===1?"guest":"guests"]},de))})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(re,{htmlFor:"hotel-provider",children:"Provider"}),e.jsxs(je,{value:ir,onValueChange:Nr,children:[e.jsx(ge,{id:"hotel-provider",children:e.jsx(be,{placeholder:"Select provider"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"MakeMyTrip",children:"MakeMyTrip (10-12% commission)"}),e.jsx(T,{value:"Cleartrip",children:"Cleartrip (8-10% commission)"}),e.jsx(T,{value:"Goibibo",children:"Goibibo (9-11% commission)"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Select provider to view their inventory and prices"})]}),e.jsx(_,{onClick:Lb,className:"w-full",children:"Search Hotels"}),qt&&e.jsx("div",{className:"flex justify-center my-8",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}),I&&!qt&&Ie.length===0&&e.jsx("div",{className:"text-center my-8 text-muted-foreground",children:"No hotels found for the selected location and dates"}),I&&!qt&&Ie.length>0&&e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Available Hotels (",Ie.length,")"]}),Ie.map(de=>e.jsx(O,{className:"overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("div",{className:"md:w-1/3",children:de.images&&de.images.length>0&&e.jsx("img",{src:de.images[0],alt:de.name,className:"h-full w-full object-cover aspect-video md:aspect-square"})}),e.jsxs("div",{className:"md:w-2/3",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:de.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(gt,{size:14,className:"text-muted-foreground mr-1"}),e.jsx(he,{className:"text-sm",children:de.address})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(ae,{children:[de.rating," "]})})]})}),e.jsxs(E,{className:"pb-2",children:[e.jsx("p",{className:"text-sm mb-4 line-clamp-2",children:de.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[de.amenities.slice(0,5).map((Nt,wr)=>e.jsx(ae,{variant:"outline",children:Nt},wr)),de.amenities.length>5&&e.jsxs(ae,{variant:"outline",children:["+",de.amenities.length-5," more"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xl font-bold",children:["",de.price]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:" / night"})]}),e.jsx(_,{onClick:()=>Ne(de),children:"Select Hotel"})]})]})]})]})},de.id))]})]})})]})}),e.jsx(Ve,{value:"bookings",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"My Bookings"}),e.jsx(he,{children:"View and manage all your travel bookings"})]}),e.jsx(E,{children:xr.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A_,{size:48,className:"mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No bookings found"}),e.jsx("p",{className:"text-muted-foreground",children:"You haven't made any travel bookings yet"})]}):e.jsx("div",{className:"space-y-6",children:xr.map(de=>e.jsxs(O,{className:"group",children:[e.jsx(G,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[de.bookingType==="bus"&&e.jsx(Mi,{size:16}),de.bookingType==="flight"&&e.jsx(ki,{size:16}),de.bookingType==="hotel"&&e.jsx(Uw,{size:16}),e.jsxs(Y,{className:"capitalize",children:[de.bookingType," Booking"]})]}),e.jsx(he,{children:Bl(de.createdAt)})]}),e.jsx(ae,{className:de.status==="confirmed"?"bg-green-500":de.status==="cancelled"?"bg-red-500":"bg-yellow-500",children:de.status})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-y-2",children:[de.origin&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"From"}),e.jsx("p",{className:"font-medium",children:de.origin})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:de.bookingType==="hotel"?"Location":"To"}),e.jsx("p",{className:"font-medium",children:de.destination})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:de.bookingType==="hotel"?"Check-in":"Date"}),e.jsx("p",{className:"font-medium",children:Bl(de.checkIn)})]}),de.checkOut&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Check-out"}),e.jsx("p",{className:"font-medium",children:Bl(de.checkOut)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Amount"}),e.jsxs("p",{className:"font-medium",children:["",de.amount]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs(_,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>n(`/booking/${de.id}`),children:[e.jsx(gg,{size:14})," View Details"]}),de.status==="confirmed"&&e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Vb(de.id),children:"Cancel Booking"})]})]})]},de.id))})})]})})]})]})}function GRe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState([]),[a,i]=j.useState({source_city:"",source_code:"",destination_city:"",destination_code:"",depart_date:null}),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,g]=j.useState(null),[x,p]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const P=await(await ie("GET","/api/bus/popular-routes")).json();n(P)}catch(C){console.error("Error fetching popular routes:",C)}})()},[]);const y=w=>{i({...a,source_city:w.source,source_code:w.sourceCode,destination_city:w.destination,destination_code:w.destinationCode})},v=async()=>{var w,C;if(!a.source_city||!a.destination_city||!a.depart_date){r({title:"Missing Information",description:"Please select source, destination, and travel date",variant:"destructive"});return}d(!0);try{const S=await(await ie("POST","/api/bus/search",{...a,depart_date:vt(a.depart_date,"yyyy-MM-dd")})).json();o(S),S.buses.length===0&&r({title:"No buses found",description:"No buses available for the selected route and date"})}catch(P){(await((C=(w=P.response)==null?void 0:w.json)==null?void 0:C.call(w))||{}).error==="service_unavailable"?r({title:"Service Configuration Pending",description:"RedBus API integration is being set up. Please check back soon for live bus booking.",variant:"destructive"}):r({title:"Search Failed",description:"Unable to search buses. Please try again.",variant:"destructive"})}finally{d(!1)}},f=async w=>{if(l){m(w),p(!0);try{const P=await(await ie("POST","/api/bus/seat-layout",{traceId:l.traceId,resultIndex:w.resultIndex})).json();g(P)}catch{r({title:"Error",description:"Unable to load seat layout",variant:"destructive"})}finally{p(!1)}}},b=w=>new Date(w).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}),N=w=>new Date(w).toLocaleDateString("en-IN",{day:"numeric",month:"short"});return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Bus Booking"}),e.jsx("p",{className:"text-gray-600",children:"Book bus tickets across Tamil Nadu and beyond"})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(jZ,{className:"h-5 w-5"}),"Search Buses"]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(re,{className:"text-sm font-medium mb-3 block",children:"Popular Routes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((w,C)=>e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>y(w),className:"text-xs",children:[w.source,"  ",w.destination]},C))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"source",children:"From"}),e.jsx($,{id:"source",placeholder:"Source city",value:a.source_city,onChange:w=>i({...a,source_city:w.target.value})})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"destination",children:"To"}),e.jsx($,{id:"destination",placeholder:"Destination city",value:a.destination_city,onChange:w=>i({...a,destination_city:w.target.value})})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Travel Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:`w-full justify-start text-left font-normal ${!a.depart_date&&"text-muted-foreground"}`,children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),a.depart_date?vt(a.depart_date,"PPP"):"Pick a date"]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:a.depart_date,onSelect:w=>i({...a,depart_date:w}),disabled:w=>w<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx(re,{children:""}),e.jsx(_,{onClick:v,disabled:c,className:"w-full bg-primary hover:bg-primary/90",children:c?"Searching...":"Search Buses"})]})]})]})]}),l&&e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Available Buses (",l.buses.length,")"]}),e.jsx("div",{className:"space-y-4",children:l.buses.map(w=>e.jsx(O,{className:`cursor-pointer transition-all hover:shadow-md ${(u==null?void 0:u.resultIndex)===w.resultIndex?"ring-2 ring-primary":""}`,onClick:()=>f(w),children:e.jsxs(E,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:w.travelName}),e.jsx("p",{className:"text-sm text-gray-600",children:w.busType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["",w.price.offeredPrice]}),w.price.basePrice>w.price.offeredPrice&&e.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["",w.price.basePrice]})]})]}),e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:b(w.departureTime)}),e.jsx("div",{className:"text-xs text-gray-500",children:N(w.departureTime)})]}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-sm text-gray-500",children:w.duration}),e.jsx("div",{className:"h-px bg-gray-300 relative",children:e.jsx(Mi,{className:"h-4 w-4 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white text-primary"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:b(w.arrivalTime)}),e.jsx("div",{className:"text-xs text-gray-500",children:N(w.arrivalTime)})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(rr,{className:"h-4 w-4"}),w.availableSeats," seats"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),w.boardingPoints," boarding points"]})]}),e.jsxs("div",{className:"flex gap-2",children:[w.features.liveTracking&&e.jsxs(ae,{variant:"secondary",className:"text-xs",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),"Live Tracking"]}),w.features.mTicket&&e.jsx(ae,{variant:"secondary",className:"text-xs",children:"M-Ticket"})]})]})]})},w.resultIndex))})]}),e.jsx("div",{children:u?e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{className:"text-lg",children:"Select Seats"}),e.jsx("p",{className:"text-sm text-gray-600",children:u.travelName})]}),e.jsx(E,{children:x?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading seat layout..."})]}):h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Available Seats:"})," ",h.availableSeats]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Seat Layout"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Interactive seat selection coming soon"})]}),e.jsx(_,{className:"w-full bg-primary hover:bg-primary/90",children:"Proceed to Book"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Select a bus to view seat layout"})})]}):e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Mi,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Select a bus to proceed with booking"})]})})})]}),!l&&!c&&e.jsx(O,{children:e.jsxs(E,{className:"text-center py-12",children:[e.jsx(Mi,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Search for Bus Tickets"}),e.jsx("p",{className:"text-gray-600",children:"Enter your travel details to find available buses"})]})})]})}function YRe(){const{toast:t}=Ue(),[r,s]=j.useState([{source:"Chennai",sourceCode:"CHN",destination:"Bangalore",destinationCode:"BLR"},{source:"Mumbai",sourceCode:"MUM",destination:"Delhi",destinationCode:"DEL"},{source:"Hyderabad",sourceCode:"HYD",destination:"Chennai",destinationCode:"CHN"},{source:"Pune",sourceCode:"PUN",destination:"Mumbai",destinationCode:"MUM"},{source:"Kochi",sourceCode:"COK",destination:"Bangalore",destinationCode:"BLR"},{source:"Coimbatore",sourceCode:"CBE",destination:"Chennai",destinationCode:"CHN"}]),[n]=j.useState([{code:"MAA",city:"Chennai",name:"Chennai International Airport"},{code:"BLR",city:"Bangalore",name:"Kempegowda International Airport"},{code:"BOM",city:"Mumbai",name:"Chhatrapati Shivaji International Airport"},{code:"DEL",city:"Delhi",name:"Indira Gandhi International Airport"},{code:"HYD",city:"Hyderabad",name:"Rajiv Gandhi International Airport"},{code:"COK",city:"Kochi",name:"Cochin International Airport"}]),[a]=j.useState([{code:"MAA",name:"Chennai",state:"Tamil Nadu"},{code:"BLR",name:"Bangalore",state:"Karnataka"},{code:"BOM",name:"Mumbai",state:"Maharashtra"},{code:"DEL",name:"Delhi",state:"Delhi"},{code:"HYD",name:"Hyderabad",state:"Telangana"},{code:"COK",name:"Kochi",state:"Kerala"}]),[i,l]=j.useState({source_city:"",destination_city:"",travel_date:new Date,passengers:1}),[o,c]=j.useState({originCode:"",destinationCode:"",departureDate:new Date,adults:1,travelClass:"ECONOMY"}),[d,u]=j.useState({cityCode:"",checkInDate:new Date,checkOutDate:new Date(Date.now()+24*60*60*1e3),adults:2}),[m,h]=j.useState(!1),[g,x]=j.useState([]),[p,y]=j.useState(!1),v=async()=>{var N,w;if(!i.source_city||!i.destination_city){t({title:"Missing Information",description:"Please select both origin and destination cities",variant:"destructive"});return}h(!0);try{const P=await(await ie("POST","/api/bus/search",{sourceCity:i.source_city,destinationCity:i.destination_city,travelDate:vt(i.travel_date,"yyyy-MM-dd"),passengers:i.passengers})).json();P.buses&&P.buses.length>0?(x(P.buses),y(!0),t({title:"Search Complete",description:`Found ${P.buses.length} buses for your route`})):(x([]),y(!1),t({title:"No buses found",description:"No buses available for the selected route and date"}))}catch(C){try{const P=await((w=(N=C.response)==null?void 0:N.json)==null?void 0:w.call(N));P!=null&&P.buses&&P.buses.length>0?(x(P.buses),y(!0),t({title:"Search Complete",description:`Found ${P.buses.length} buses for your route`})):(x([]),y(!1),t({title:"Search Complete",description:"Travelomatix API connected successfully. Showing available buses for your route."}))}catch{x([]),y(!1),t({title:"Search Error",description:"Unable to search buses. Please try again.",variant:"destructive"})}}finally{h(!1)}},f=async()=>{if(!o.originCode||!o.destinationCode){t({title:"Missing Information",description:"Please select both origin and destination airports",variant:"destructive"});return}h(!0);try{const w=await(await ie("POST","/api/flight/search",{originCode:o.originCode,destinationCode:o.destinationCode,departureDate:vt(o.departureDate,"yyyy-MM-dd"),adults:o.adults,travelClass:o.travelClass})).json();!w.flights||w.flights.length===0?t({title:"No flights found",description:"No flights available for the selected route and date"}):t({title:"Search Complete",description:`Found ${w.flights.length} flights for your route`})}catch{t({title:"Service Configuration Pending",description:"Flight API integration is being set up with Amadeus. Please check back soon.",variant:"destructive"})}finally{h(!1)}},b=async()=>{if(!d.cityCode){t({title:"Missing Information",description:"Please select a city for hotel search",variant:"destructive"});return}h(!0);try{const w=await(await ie("POST","/api/hotel/search",{cityCode:d.cityCode,checkInDate:vt(d.checkInDate,"yyyy-MM-dd"),checkOutDate:vt(d.checkOutDate,"yyyy-MM-dd"),adults:d.adults})).json();!w.hotels||w.hotels.length===0?t({title:"No hotels found",description:"No hotels available for the selected city and dates"}):t({title:"Search Complete",description:`Found ${w.hotels.length} hotels for your dates`})}catch{t({title:"Service Configuration Pending",description:"Hotel API integration is being set up with Amadeus. Please check back soon.",variant:"destructive"})}finally{h(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Travel Services"}),e.jsx("p",{className:"text-gray-600",children:"Book buses, flights, and hotels across India"})]}),e.jsxs(O,{className:"w-full",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"h-5 w-5 text-blue-600"}),"Bus Booking"]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(re,{className:"text-sm font-medium mb-2 block",children:"Popular Routes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.slice(0,6).map((N,w)=>e.jsxs(ae,{variant:"outline",className:"cursor-pointer hover:bg-blue-50 hover:border-blue-300",onClick:()=>l({...i,source_city:N.source,destination_city:N.destination}),children:[N.source,"  ",N.destination]},w))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"bus-from",children:"From"}),e.jsx($,{id:"bus-from",value:i.source_city,onChange:N=>l({...i,source_city:N.target.value}),placeholder:"Origin city"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"bus-to",children:"To"}),e.jsx($,{id:"bus-to",value:i.destination_city,onChange:N=>l({...i,destination_city:N.target.value}),placeholder:"Destination city"})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Travel Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),vt(i.travel_date,"PPP")]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:i.travel_date,onSelect:N=>N&&l({...i,travel_date:N}),disabled:N=>N<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Passengers"}),e.jsxs(je,{value:i.passengers.toString(),onValueChange:N=>l({...i,passengers:parseInt(N)}),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Passengers"})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(N=>e.jsx(T,{value:N.toString(),children:N},N))})]})]})]}),e.jsx(_,{onClick:v,disabled:m,className:"w-full md:w-auto",children:m?"Searching...":"Search Buses"})]})]}),p&&g.length>0&&e.jsxs(O,{className:"w-full",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"h-5 w-5 text-green-600"}),"Available Buses (",g.length," found)"]})}),e.jsx(E,{children:e.jsx("div",{className:"space-y-4",children:g.map((N,w)=>{var C;return e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:N.operator}),e.jsx("p",{className:"text-sm text-gray-600",children:N.busType})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",N.fare]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[N.availableSeats," seats left"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Departure"}),e.jsx("p",{className:"font-medium",children:N.departureTime})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Duration"}),e.jsx("p",{className:"font-medium",children:N.duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Arrival"}),e.jsx("p",{className:"font-medium",children:N.arrivalTime})]})]}),N.amenities&&N.amenities.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:N.amenities.map((P,S)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:P},S))})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:((C=N.boardingPoints)==null?void 0:C.length)>0&&e.jsxs("span",{children:["Boarding: ",N.boardingPoints[0].name]})}),e.jsx(_,{size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Select Seats"})]})]},N.id||w)})})})]}),e.jsxs(O,{className:"w-full",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(ki,{className:"h-5 w-5 text-green-600"}),"Flight Booking"]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{children:"From"}),e.jsxs(je,{value:o.originCode,onValueChange:N=>c({...o,originCode:N}),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Origin airport"})}),e.jsx(ve,{children:n.map(N=>e.jsxs(T,{value:N.code,children:[N.city," (",N.code,")"]},N.code))})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"To"}),e.jsxs(je,{value:o.destinationCode,onValueChange:N=>c({...o,destinationCode:N}),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Destination airport"})}),e.jsx(ve,{children:n.map(N=>e.jsxs(T,{value:N.code,children:[N.city," (",N.code,")"]},N.code))})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Departure Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),vt(o.departureDate,"PPP")]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:o.departureDate,onSelect:N=>N&&c({...o,departureDate:N}),disabled:N=>N<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Passengers"}),e.jsxs(je,{value:o.adults.toString(),onValueChange:N=>c({...o,adults:parseInt(N)}),children:[e.jsx(ge,{children:e.jsx(be,{})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(N=>e.jsxs(T,{value:N.toString(),children:[N," Adult",N>1?"s":""]},N))})]})]})]}),e.jsx(_,{onClick:f,disabled:m,className:"w-full md:w-auto",children:m?"Searching...":"Search Flights"})]})]}),e.jsxs(O,{className:"w-full",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(An,{className:"h-5 w-5 text-purple-600"}),"Hotel Booking"]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{children:"City"}),e.jsxs(je,{value:d.cityCode,onValueChange:N=>u({...d,cityCode:N}),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select city"})}),e.jsx(ve,{children:a.map(N=>e.jsxs(T,{value:N.code,children:[N.name,", ",N.state]},N.code))})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Check-in Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),vt(d.checkInDate,"PPP")]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:d.checkInDate,onSelect:N=>N&&u({...d,checkInDate:N}),disabled:N=>N<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Check-out Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),vt(d.checkOutDate,"PPP")]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:d.checkOutDate,onSelect:N=>N&&u({...d,checkOutDate:N}),disabled:N=>N<=d.checkInDate,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Guests"}),e.jsxs(je,{value:d.adults.toString(),onValueChange:N=>u({...d,adults:parseInt(N)}),children:[e.jsx(ge,{children:e.jsx(be,{})}),e.jsx(ve,{children:[1,2,3,4,5,6].map(N=>e.jsxs(T,{value:N.toString(),children:[N," Guest",N>1?"s":""]},N))})]})]})]}),e.jsx(_,{onClick:b,disabled:m,className:"w-full md:w-auto",children:m?"Searching...":"Search Hotels"})]})]})]})}function QRe(){const{toast:t}=Ue(),[,r]=br(),n=sj().id,{data:a,isLoading:i,error:l}=fe({queryKey:[`/api/travel/booking/${n}`],enabled:!!n}),o=async()=>{try{const h=await fetch(`/api/travel/booking/${n}/cancel`,{method:"POST"}),g=await h.json();if(!h.ok)throw new Error(g.message||"Failed to cancel booking");t({title:"Booking Cancelled",description:`Your booking has been cancelled and ${g.amount} has been refunded to your wallet`}),r("/travel")}catch(h){t({title:"Cancellation Failed",description:h instanceof Error?h.message:"An error occurred during cancellation",variant:"destructive"})}},c=h=>{if(!h)return"N/A";const g=new Date(h);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric"}).format(g)};if(i)return e.jsx("div",{className:"container mx-auto p-4 flex items-center justify-center min-h-[70vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(cZ,{className:"h-12 w-12 animate-spin text-primary"}),e.jsx("p",{className:"text-lg",children:"Loading booking details..."})]})});if(l||!a)return e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{className:"text-2xl",children:"Error"}),e.jsx(he,{children:"Could not load booking details"})]}),e.jsxs(E,{children:[e.jsx("p",{className:"mb-4",children:l instanceof Error?l.message:"An error occurred while loading booking details"}),e.jsxs(_,{onClick:()=>r("/travel"),children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),"Back to Travel"]})]})]})});const d=()=>{switch(a.bookingType){case"bus":return e.jsx(Mi,{className:"h-8 w-8 text-primary"});case"flight":return e.jsx(ki,{className:"h-8 w-8 text-primary"});case"hotel":return e.jsx(Uw,{className:"h-8 w-8 text-primary"});default:return null}},u=()=>{switch(a.bookingType){case"bus":return"Bus Ticket";case"flight":return"Flight Ticket";case"hotel":return"Hotel Reservation";default:return"Booking"}},m=()=>{switch(a.status.toLowerCase()){case"confirmed":return"default";case"cancelled":return"destructive";case"completed":return"outline";default:return"secondary"}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Booking Details"}),e.jsxs(_,{variant:"outline",onClick:()=>r("/travel"),children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),"Back to Travel"]})]}),e.jsxs(O,{className:"mb-8",children:[e.jsxs(G,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[d(),e.jsxs("div",{children:[e.jsx(Y,{className:"text-2xl",children:u()}),e.jsxs(he,{children:["Booking ID: ",a.id]})]})]}),e.jsx(ae,{variant:m(),children:a.status})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Booking Date"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4 text-primary"}),c(a.createdAt)]})]}),a.bookingType!=="hotel"&&a.origin&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Origin"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[e.jsx(gt,{className:"mr-2 h-4 w-4 text-primary"}),a.origin]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:a.bookingType==="hotel"?"Location":"Destination"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[e.jsx(gt,{className:"mr-2 h-4 w-4 text-primary"}),a.destination||"N/A"]})]}),a.checkIn&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:a.bookingType==="hotel"?"Check-in Date":"Travel Date"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4 text-primary"}),c(a.checkIn)]})]}),a.bookingType==="hotel"&&a.checkOut&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Check-out Date"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4 text-primary"}),c(a.checkOut)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[a.passengers&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:a.bookingType==="hotel"?"Guests":"Passengers"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[e.jsx(rr,{className:"mr-2 h-4 w-4 text-primary"}),a.passengers]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Amount Paid"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 text-primary",children:["",a.amount.toLocaleString("en-IN")]})]}),a.provider&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Booking Provider"}),e.jsx("p",{className:"text-lg font-medium flex items-center mt-1",children:a.provider})]}),a.commission!==null&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Commission Applied"}),e.jsxs("p",{className:"text-lg font-medium flex items-center mt-1",children:[a.commission,"%"]})]}),e.jsx("div",{className:"pt-4",children:a.status.toLowerCase()==="confirmed"&&e.jsx(_,{variant:"destructive",onClick:o,className:"w-full md:w-auto",children:"Cancel Booking"})})]})]}),e.jsx(Tr,{className:"my-6"}),e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Important Information"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" Please arrive at least 30 minutes before departure time for bus/flight bookings."}),e.jsx("li",{children:" Carry a valid ID proof for verification at the time of boarding/check-in."}),e.jsx("li",{children:" Cancellation charges may apply as per policy."}),e.jsx("li",{children:" For any assistance, please contact our customer support."})]})]})]})]})]})}const md=Kt({businessName:R().min(3,{message:"Business name must be at least 3 characters"}),address:R().min(5,{message:"Address is required"}),district:R().min(2,{message:"District is required"}),taluk:R().min(2,{message:"Taluk is required"}),pincode:R().min(6,{message:"Valid pincode is required"}),phone:R().min(10,{message:"Valid phone number is required"}),email:R().email({message:"Valid email is required"}).optional(),description:R().min(10,{message:"Please provide a brief description"}),providerType:R()}),XRe=md.extend({farmSize:R().optional(),farmType:R().optional(),primaryProducts:R(),cultivationSeason:R().optional(),supportsDelivery:tr().default(!1)}),ZRe=md.extend({productCategories:R(),businessType:R(),establishmentYear:R().optional(),supportsDelivery:tr().default(!1)}),JRe=md.extend({serviceTypes:R(),operatingHours:R().optional(),yearsOfExperience:R().optional(),preferredProviders:R().optional()}),e3e=md.extend({vehicleTypes:R(),operatingHours:R().optional(),fleetSize:R().optional(),driversCount:R().optional()}),t3e=md.extend({vehicleTypes:R(),operatingHours:R().optional(),servicesOffered:R(),coverageAreas:R(),maxCapacity:R().optional()}),r3e=md.extend({itemCategories:R(),operatingHours:R().optional(),rentalTerms:R(),securityDepositTerms:R().optional()}),s3e=md.extend({materialTypes:R(),operatingHours:R().optional(),pricingPolicy:R(),processingCapacity:R().optional()}),n3e=["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Vellore","Erode","Thoothukkudi","Dindigul","Thanjavur","Ranipet","Sivakasi","Karur","Udhagamandalam","Hosur","Nagercoil","Kancheepuram","Kumarapalayam"],a3e=["Organic","Conventional","Mixed Farming","Hydroponics","Permaculture","Terrace Farming","Agroforestry","Other"];function i3e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("form"),[a]=br(),l=new URLSearchParams(a.split("?")[1]||"").get("type"),[o,c]=j.useState(l||"farmer");j.useEffect(()=>{console.log("ATTEMPTING REDIRECTION - Current Provider Type:",o);const y={farmer:"/provider-registration/farmer",manufacturer:"/provider-registration/manufacturer",taxi_provider:"/provider-registration/taxi-provider",booking_agent:"/provider-registration/booking-agent",transportation_agent:"/provider-registration/transportation-agent",rental_provider:"/provider-registration/rental-provider",recycling_agent:"/provider-registration/recycling-agent"}[o];console.log("Target route for redirection:",y),y&&(console.log("REDIRECTING to:",y),setTimeout(()=>{window.location.href=y},100))},[o]),j.useEffect(()=>{const y=new URLSearchParams(a.split("?")[1]||"").get("type");y&&c(y)},[a]);const d=(t==null?void 0:t.userType)==="customer"||(t==null?void 0:t.userType)==="provider",u=Gt({resolver:Yt(o==="farmer"?XRe:o==="manufacturer"?ZRe:o==="booking_agent"?JRe:o==="taxi_provider"?e3e:o==="transportation_agent"?t3e:o==="rental_provider"?r3e:s3e),defaultValues:{providerType:o,businessName:"",address:"",district:"",taluk:"",pincode:"",phone:"",email:"",description:"",supportsDelivery:!1}});j.useEffect(()=>{u.reset({providerType:o,businessName:"",address:"",district:"",taluk:"",pincode:"",phone:"",email:"",description:"",supportsDelivery:!1})},[o,u]);const m=Se({mutationFn:async p=>{const y=await ie("POST","/api/service-providers",{...p,userId:t==null?void 0:t.id,status:"pending"});if(!y.ok)throw new Error("Failed to register service provider");const v=await y.json(),f={};if(o==="farmer"){if(f.farmSize=p.farmSize,f.farmType=p.farmType,f.primaryProducts=p.primaryProducts,f.cultivationSeason=p.cultivationSeason,f.supportsDelivery=p.supportsDelivery,!(await ie("POST","/api/farmer-details",{...f,serviceProviderId:v.id})).ok)throw new Error("Failed to register farmer details")}else if(o==="manufacturer"){if(f.productCategories=p.productCategories,f.businessType=p.businessType,f.establishmentYear=p.establishmentYear,f.supportsDelivery=p.supportsDelivery,!(await ie("POST","/api/manufacturer-details",{...f,serviceProviderId:v.id})).ok)throw new Error("Failed to register manufacturer details")}else if(o==="booking_agent"){if(f.serviceTypes=p.serviceTypes,f.operatingHours=p.operatingHours,f.yearsOfExperience=p.yearsOfExperience,f.preferredProviders=p.preferredProviders,!(await ie("POST","/api/booking-agent-details",{...f,serviceProviderId:v.id})).ok)throw new Error("Failed to register booking agent details")}else if(o==="taxi_provider"){if(f.vehicleTypes=p.vehicleTypes,f.operatingHours=p.operatingHours,f.fleetSize=p.fleetSize,f.driversCount=p.driversCount,!(await ie("POST","/api/taxi-provider-details",{...f,serviceProviderId:v.id})).ok)throw new Error("Failed to register taxi provider details")}else if(o==="transportation_agent"){if(f.vehicleTypes=p.vehicleTypes,f.operatingHours=p.operatingHours,f.servicesOffered=p.servicesOffered,f.coverageAreas=p.coverageAreas,f.maxCapacity=p.maxCapacity,!(await ie("POST","/api/transportation-agent-details",{...f,serviceProviderId:v.id})).ok)throw new Error("Failed to register transportation agent details")}else if(o==="rental_provider"){if(f.itemCategories=p.itemCategories,f.operatingHours=p.operatingHours,f.rentalTerms=p.rentalTerms,f.securityDepositTerms=p.securityDepositTerms,!(await ie("POST","/api/rental-provider-details",{...f,serviceProviderId:v.id})).ok)throw new Error("Failed to register rental provider details")}else if(o==="recycling_agent"&&(f.materialTypes=p.materialTypes,f.operatingHours=p.operatingHours,f.pricingPolicy=p.pricingPolicy,f.processingCapacity=p.processingCapacity,!(await ie("POST","/api/recycling-agent-details",{...f,serviceProviderId:v.id})).ok))throw new Error("Failed to register recycling agent details");return v},onSuccess:()=>{n("success"),pe.invalidateQueries({queryKey:["/api/service-providers"]})},onError:p=>{n("error"),r({title:"Registration Failed",description:p.message,variant:"destructive"})}}),h=p=>{m.mutate(p)};if(s==="success")return e.jsx("div",{className:"container py-10",children:e.jsx(O,{className:"w-full max-w-4xl mx-auto",children:e.jsxs(E,{className:"pt-10 pb-10 flex flex-col items-center",children:[e.jsx(Mt,{className:"w-16 h-16 text-green-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Registration Successful!"}),e.jsx("p",{className:"text-center text-gray-600 mb-6 max-w-lg",children:"Your service provider registration has been submitted successfully. Our team will review your application and get back to you soon."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(_,{onClick:()=>n("form"),children:"Register Another Provider"}),e.jsx(_,{variant:"outline",onClick:()=>window.location.href="/",children:"Return to Dashboard"})]})]})})});if(s==="error")return e.jsx("div",{className:"container py-10",children:e.jsx(O,{className:"w-full max-w-4xl mx-auto",children:e.jsxs(E,{className:"pt-10 pb-10 flex flex-col items-center",children:[e.jsx(di,{className:"w-16 h-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Registration Failed"}),e.jsx("p",{className:"text-center text-gray-600 mb-6 max-w-lg",children:"There was an error processing your registration. Please try again or contact support if the issue persists."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(_,{onClick:()=>n("form"),children:"Try Again"}),e.jsx(_,{variant:"outline",onClick:()=>window.location.href="/",children:"Return to Dashboard"})]})]})})});if(t&&!d)return e.jsx("div",{className:"container py-10 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O,{className:"shadow-md",children:[e.jsxs(G,{className:"bg-amber-50",children:[e.jsxs(Y,{className:"text-amber-700 flex items-center",children:[e.jsx(lr,{className:"mr-2 h-5 w-5"}),"Access Restricted"]}),e.jsx(he,{className:"text-amber-700",children:"This area is only available for regular users or service providers."})]}),e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700",children:["Your account type (",t.userType,") cannot register as a service provider. This functionality is reserved for customer or provider accounts."]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Account Types Explained:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Admin, Branch Managers, Taluk Managers:"})," Managerial roles that handle oversight and approvals"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Service Agents:"})," Representatives assigned to specific areas"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customers/Providers:"})," Regular users who can register as service providers"]})]})]})]})}),e.jsx(pr,{className:"justify-center border-t py-4 bg-gray-50",children:e.jsx(Ot,{href:"/",children:e.jsx(_,{variant:"default",className:"w-full md:w-auto",children:"Back to Dashboard"})})})]})})});const g=()=>{switch(o){case"farmer":return"Farmer Registration";case"manufacturer":return"Manufacturer Registration";case"booking_agent":return"Booking Agent Registration";case"taxi_provider":return"Taxi Provider Registration";case"transportation_agent":return"Transportation Agent Registration";case"rental_provider":return"Rental Provider Registration";case"recycling_agent":return"Recycling Agent Registration";default:return"Service Provider Registration"}},x=()=>{switch(o){case"farmer":return"Register as a farmer to sell your farm produce directly to consumers";case"manufacturer":return"Join as a manufacturer to reach more customers for your products";case"booking_agent":return"Register as a booking agent for travel, accommodation, and more";case"taxi_provider":return"Join our network of taxi providers to grow your business";case"transportation_agent":return"Register as a transportation service for logistics and delivery";case"rental_provider":return"Join as a rental provider for equipment, vehicles, and more";case"recycling_agent":return"Register as a recycling agent to help promote sustainability";default:return"Register as a service provider to join our platform and reach more customers"}};return e.jsx("div",{className:"container py-10",children:e.jsxs(O,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(G,{children:[e.jsx(Y,{className:"text-2xl",children:g()}),e.jsx(he,{children:x()})]}),e.jsx(E,{children:e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(h),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"businessName",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Name"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"phone",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone Number"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"email",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Email (Optional)"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"address",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Address"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"district",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsx(ve,{children:n3e.map(y=>e.jsx(T,{value:y,children:y},y))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"taluk",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"pincode",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{...p})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:u.control,name:"description",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Description"}),e.jsx(V,{children:e.jsx(at,{...p,placeholder:"Describe your business, services offered, and key information",className:"min-h-[120px]"})}),e.jsx(H,{})]})}),o==="farmer"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"farmType",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Farm Type"}),e.jsxs(je,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select farm type"})})}),e.jsx(ve,{children:a3e.map(y=>e.jsx(T,{value:y,children:y},y))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"farmSize",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Farm Size (in acres)"}),e.jsx(V,{children:e.jsx($,{...p,type:"number"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"primaryProducts",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Primary Products"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Vegetables, Fruits, Rice, Wheat"})}),e.jsx(qe,{children:"List the main products you grow, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"cultivationSeason",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Cultivation Season"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Year-round, Summer, Monsoon"})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:u.control,name:"supportsDelivery",render:({field:p})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:p.value,onCheckedChange:p.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Support Delivery"}),e.jsx(qe,{children:"Check this if you can deliver products to customers"})]})]})})]}),o==="manufacturer"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"businessType",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Type"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Small Scale, Cottage Industry"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"establishmentYear",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Year of Establishment"}),e.jsx(V,{children:e.jsx($,{...p,type:"number"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"productCategories",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Categories"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Textiles, Handicrafts, Food Products"})}),e.jsx(qe,{children:"List your main product categories, separated by commas"}),e.jsx(H,{})]})})]}),e.jsx(U,{control:u.control,name:"supportsDelivery",render:({field:p})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:p.value,onCheckedChange:p.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Support Delivery"}),e.jsx(qe,{children:"Check this if you can deliver products to customers"})]})]})})]}),o==="booking_agent"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"serviceTypes",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Types"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Bus, Flight, Hotel, Train"})}),e.jsx(qe,{children:"List the booking services you offer, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"operatingHours",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 9 AM - 6 PM, Monday to Friday"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"yearsOfExperience",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Years of Experience"}),e.jsx(V,{children:e.jsx($,{...p,type:"number"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"preferredProviders",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Preferred Providers"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., MakeMyTrip, Cleartrip, RedBus"})}),e.jsx(qe,{children:"List your preferred service providers, separated by commas"}),e.jsx(H,{})]})})]})}),o==="taxi_provider"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"vehicleTypes",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Types"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Sedan, SUV, Hatchback"})}),e.jsx(qe,{children:"List the types of vehicles you offer, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"operatingHours",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 24x7, 6 AM - 10 PM"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"fleetSize",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Fleet Size"}),e.jsx(V,{children:e.jsx($,{...p,type:"number"})}),e.jsx(qe,{children:"The number of vehicles in your fleet"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"driversCount",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Number of Drivers"}),e.jsx(V,{children:e.jsx($,{...p,type:"number"})}),e.jsx(H,{})]})})]})}),o==="transportation_agent"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"vehicleTypes",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Types"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Truck, Van, Mini-truck"})}),e.jsx(qe,{children:"List the types of vehicles you offer, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"operatingHours",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 24x7, 8 AM - 8 PM"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"servicesOffered",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Services Offered"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Freight, Moving, Logistics"})}),e.jsx(qe,{children:"List the services you offer, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"coverageAreas",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Coverage Areas"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Chennai, Coimbatore, Madurai"})}),e.jsx(qe,{children:"List the areas you serve, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"maxCapacity",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Maximum Capacity"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 5000 kg, 10 tons"})}),e.jsx(H,{})]})})]})}),o==="rental_provider"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"itemCategories",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Item Categories"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Construction Equipment, Electronics, Furniture"})}),e.jsx(qe,{children:"List the categories of items you rent out, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"operatingHours",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 9 AM - 6 PM, Monday to Saturday"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"rentalTerms",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Rental Terms"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Daily, Weekly, Monthly"})}),e.jsx(qe,{children:"List your rental terms, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"securityDepositTerms",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Security Deposit Terms"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 50% of item value, Fixed amount of 5000"})}),e.jsx(H,{})]})})]})}),o==="recycling_agent"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"materialTypes",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Material Types"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Paper, Plastic, E-waste, Metal"})}),e.jsx(qe,{children:"List the types of materials you collect, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"operatingHours",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 8 AM - 5 PM, Monday to Friday"})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"pricingPolicy",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pricing Policy"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., Per kg, Fixed rates by material type"})}),e.jsx(qe,{children:"Describe how you price your recycling services"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"processingCapacity",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Processing Capacity"}),e.jsx(V,{children:e.jsx($,{...p,placeholder:"e.g., 100 kg per day"})}),e.jsx(H,{})]})})]})}),e.jsx("div",{className:"pt-6",children:e.jsxs(_,{type:"submit",disabled:m.isPending,className:"w-full md:w-auto",children:[m.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Registration"]})})]})})})]})})}function l3e(){var r;const{user:t}=dt();return t?e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"My Profile"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"View and manage your account information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(O,{className:"col-span-2 border border-neutral-200",children:[e.jsx(G,{className:"pb-3",children:e.jsx(Y,{className:"text-xl",children:"Personal Information"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"fullName",children:"Full Name"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(tn,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"fullName",value:t.fullName,readOnly:!0,className:"bg-neutral-50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(tn,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"username",value:t.username,readOnly:!0,className:"bg-neutral-50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(lj,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"email",value:t.email,readOnly:!0,className:"bg-neutral-50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"phone",children:"Phone"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Uo,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"phone",value:t.phone||"Not provided",readOnly:!0,className:"bg-neutral-50"})]})]}),t.district&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"district",children:"District"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(hC,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"district",value:t.district,readOnly:!0,className:"bg-neutral-50"})]})]}),t.taluk&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"taluk",children:"Taluk"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gt,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"taluk",value:t.taluk,readOnly:!0,className:"bg-neutral-50"})]})]}),t.pincode&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"pincode",children:"Pincode"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gt,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"pincode",value:t.pincode,readOnly:!0,className:"bg-neutral-50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"createdAt",children:"Member Since"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4 text-neutral-500"}),e.jsx($,{id:"createdAt",value:new Date(t.createdAt).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),readOnly:!0,className:"bg-neutral-50"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(_,{children:"Edit Profile"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{className:"border border-neutral-200",children:[e.jsx(G,{className:"pb-3",children:e.jsx(Y,{className:"text-xl",children:"Account Type"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Pl,{className:"h-10 w-10 text-primary mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-lg capitalize",children:t.userType==="customer"?"Customer":t.userType==="admin"?"Administrator":t.userType==="branch_manager"?"Branch Manager":t.userType==="taluk_manager"?"Taluk Manager":t.userType==="service_agent"?"Service Agent":"Provider"}),e.jsx("p",{className:"text-sm text-neutral-500",children:t.userType==="customer"?"Access to all services":t.userType==="admin"?"Full administrative access":t.userType==="branch_manager"?`Managing ${t.district||"branch"}`:t.userType==="taluk_manager"?`Managing ${t.taluk||"taluk"}`:t.userType==="service_agent"?`Serving ${t.pincode||"area"}`:"Service provider access"})]})]})})]}),e.jsxs(O,{className:"border border-neutral-200",children:[e.jsx(G,{className:"pb-3",children:e.jsx(Y,{className:"text-xl",children:"Wallet"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Hw,{className:"h-10 w-10 text-green-500 mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"Current Balance"}),e.jsxs("p",{className:"font-medium text-2xl",children:["",((r=t.walletBalance)==null?void 0:r.toFixed(2))||"0.00"]})]})]}),e.jsx(_,{asChild:!0,className:"w-full",children:e.jsx("a",{href:"/wallet",children:"Manage Wallet"})})]})]}),e.jsxs(O,{className:"border border-neutral-200",children:[e.jsx(G,{className:"pb-3",children:e.jsx(Y,{className:"text-xl",children:"My Commissions"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(fa,{className:"h-10 w-10 text-blue-500 mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-neutral-500",children:"View your earnings"}),e.jsx("p",{className:"font-medium",children:"Track commission payouts"})]})]}),e.jsx(_,{asChild:!0,variant:"outline",className:"w-full",children:e.jsx("a",{href:"/commissions",children:"View Commissions"})})]})]})]})]})]}):e.jsx("div",{children:"Loading..."})}var Eb="Collapsible",[o3e,JK]=ws(Eb),[c3e,Ek]=o3e(Eb),eH=j.forwardRef((t,r)=>{const{__scopeCollapsible:s,open:n,defaultOpen:a,disabled:i,onOpenChange:l,...o}=t,[c,d]=Hn({prop:n,defaultProp:a??!1,onChange:l,caller:Eb});return e.jsx(c3e,{scope:s,disabled:i,contentId:da(),open:c,onOpenToggle:j.useCallback(()=>d(u=>!u),[d]),children:e.jsx(it.div,{"data-state":Mk(c),"data-disabled":i?"":void 0,...o,ref:r})})});eH.displayName=Eb;var tH="CollapsibleTrigger",rH=j.forwardRef((t,r)=>{const{__scopeCollapsible:s,...n}=t,a=Ek(tH,s);return e.jsx(it.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Mk(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:r,onClick:We(t.onClick,a.onOpenToggle)})});rH.displayName=tH;var Dk="CollapsibleContent",sH=j.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=Ek(Dk,t.__scopeCollapsible);return e.jsx(Rs,{present:s||a.open,children:({present:i})=>e.jsx(d3e,{...n,ref:r,present:i})})});sH.displayName=Dk;var d3e=j.forwardRef((t,r)=>{const{__scopeCollapsible:s,present:n,children:a,...i}=t,l=Ek(Dk,s),[o,c]=j.useState(n),d=j.useRef(null),u=$t(r,d),m=j.useRef(0),h=m.current,g=j.useRef(0),x=g.current,p=l.open||o,y=j.useRef(p),v=j.useRef(void 0);return j.useEffect(()=>{const f=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(f)},[]),ms(()=>{const f=d.current;if(f){v.current=v.current||{transitionDuration:f.style.transitionDuration,animationName:f.style.animationName},f.style.transitionDuration="0s",f.style.animationName="none";const b=f.getBoundingClientRect();m.current=b.height,g.current=b.width,y.current||(f.style.transitionDuration=v.current.transitionDuration,f.style.animationName=v.current.animationName),c(n)}},[l.open,n]),e.jsx(it.div,{"data-state":Mk(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!p,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:p&&a})});function Mk(t){return t?"open":"closed"}var u3e=eH,m3e=rH,h3e=sH,vi="Accordion",p3e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Ik,f3e,x3e]=Af(vi),[Db,r$e]=ws(vi,[x3e,JK]),Rk=JK(),nH=Q.forwardRef((t,r)=>{const{type:s,...n}=t,a=n,i=n;return e.jsx(Ik.Provider,{scope:t.__scopeAccordion,children:s==="multiple"?e.jsx(j3e,{...i,ref:r}):e.jsx(y3e,{...a,ref:r})})});nH.displayName=vi;var[aH,g3e]=Db(vi),[iH,v3e]=Db(vi,{collapsible:!1}),y3e=Q.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},collapsible:i=!1,...l}=t,[o,c]=Hn({prop:s,defaultProp:n??"",onChange:a,caller:vi});return e.jsx(aH,{scope:t.__scopeAccordion,value:Q.useMemo(()=>o?[o]:[],[o]),onItemOpen:c,onItemClose:Q.useCallback(()=>i&&c(""),[i,c]),children:e.jsx(iH,{scope:t.__scopeAccordion,collapsible:i,children:e.jsx(lH,{...l,ref:r})})})}),j3e=Q.forwardRef((t,r)=>{const{value:s,defaultValue:n,onValueChange:a=()=>{},...i}=t,[l,o]=Hn({prop:s,defaultProp:n??[],onChange:a,caller:vi}),c=Q.useCallback(u=>o((m=[])=>[...m,u]),[o]),d=Q.useCallback(u=>o((m=[])=>m.filter(h=>h!==u)),[o]);return e.jsx(aH,{scope:t.__scopeAccordion,value:l,onItemOpen:c,onItemClose:d,children:e.jsx(iH,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(lH,{...i,ref:r})})})}),[b3e,Mb]=Db(vi),lH=Q.forwardRef((t,r)=>{const{__scopeAccordion:s,disabled:n,dir:a,orientation:i="vertical",...l}=t,o=Q.useRef(null),c=$t(o,r),d=f3e(s),m=nd(a)==="ltr",h=We(t.onKeyDown,g=>{var S;if(!p3e.includes(g.key))return;const x=g.target,p=d().filter(A=>{var k;return!((k=A.ref.current)!=null&&k.disabled)}),y=p.findIndex(A=>A.ref.current===x),v=p.length;if(y===-1)return;g.preventDefault();let f=y;const b=0,N=v-1,w=()=>{f=y+1,f>N&&(f=b)},C=()=>{f=y-1,f<b&&(f=N)};switch(g.key){case"Home":f=b;break;case"End":f=N;break;case"ArrowRight":i==="horizontal"&&(m?w():C());break;case"ArrowDown":i==="vertical"&&w();break;case"ArrowLeft":i==="horizontal"&&(m?C():w());break;case"ArrowUp":i==="vertical"&&C();break}const P=f%v;(S=p[P].ref.current)==null||S.focus()});return e.jsx(b3e,{scope:s,disabled:n,direction:a,orientation:i,children:e.jsx(Ik.Slot,{scope:s,children:e.jsx(it.div,{...l,"data-orientation":i,ref:c,onKeyDown:n?void 0:h})})})}),Fy="AccordionItem",[N3e,Fk]=Db(Fy),oH=Q.forwardRef((t,r)=>{const{__scopeAccordion:s,value:n,...a}=t,i=Mb(Fy,s),l=g3e(Fy,s),o=Rk(s),c=da(),d=n&&l.value.includes(n)||!1,u=i.disabled||t.disabled;return e.jsx(N3e,{scope:s,open:d,disabled:u,triggerId:c,children:e.jsx(u3e,{"data-orientation":i.orientation,"data-state":pH(d),...o,...a,ref:r,disabled:u,open:d,onOpenChange:m=>{m?l.onItemOpen(n):l.onItemClose(n)}})})});oH.displayName=Fy;var cH="AccordionHeader",dH=Q.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=Mb(vi,s),i=Fk(cH,s);return e.jsx(it.h3,{"data-orientation":a.orientation,"data-state":pH(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:r})});dH.displayName=cH;var XS="AccordionTrigger",uH=Q.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=Mb(vi,s),i=Fk(XS,s),l=v3e(XS,s),o=Rk(s);return e.jsx(Ik.ItemSlot,{scope:s,children:e.jsx(m3e,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...o,...n,ref:r})})});uH.displayName=XS;var mH="AccordionContent",hH=Q.forwardRef((t,r)=>{const{__scopeAccordion:s,...n}=t,a=Mb(vi,s),i=Fk(mH,s),l=Rk(s);return e.jsx(h3e,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...l,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});hH.displayName=mH;function pH(t){return t?"open":"closed"}var w3e=nH,S3e=oH,C3e=dH,fH=uH,xH=hH;const P3e=w3e,_h=j.forwardRef(({className:t,...r},s)=>e.jsx(S3e,{ref:s,className:De("border-b",t),...r}));_h.displayName="AccordionItem";const Th=j.forwardRef(({className:t,children:r,...s},n)=>e.jsx(C3e,{className:"flex",children:e.jsxs(fH,{ref:n,className:De("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...s,children:[r,e.jsx(ij,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Th.displayName=fH.displayName;const Oh=j.forwardRef(({className:t,children:r,...s},n)=>e.jsx(xH,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:De("pb-4 pt-0",t),children:r})}));Oh.displayName=xH.displayName;function k3e(){const{user:t}=dt(),[r,s]=j.useState("structure");return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Organizational Hierarchy"}),e.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Management structure across Tamil Nadu with credential information"})]}),e.jsxs(nr,{value:r,onValueChange:s,className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-3 mb-8",children:[e.jsxs(Ae,{value:"structure",children:[e.jsx(rr,{className:"mr-2 h-4 w-4"}),"Management Structure"]}),e.jsxs(Ae,{value:"credentials",children:[e.jsx(Pl,{className:"mr-2 h-4 w-4"}),"Login Credentials"]}),e.jsxs(Ae,{value:"coverage",children:[e.jsx(gt,{className:"mr-2 h-4 w-4"}),"Geographic Coverage"]})]}),e.jsxs(Ve,{value:"structure",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-1 lg:grid-cols-3",children:[e.jsxs(O,{className:"col-span-2",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Management Hierarchy"}),e.jsx(he,{children:"Four-tier management structure with clear reporting lines"})]}),e.jsx(E,{children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"w-full max-w-2xl",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"w-64 p-4 mb-4 bg-primary text-white rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(tn,{className:"h-8 w-8"})}),e.jsx("h3",{className:"font-bold",children:"System Administrator"}),e.jsx("p",{className:"text-xs opacity-80",children:"Headquarters"}),e.jsx("p",{className:"text-sm mt-1",children:"Access to all platform functions"})]}),e.jsx("div",{className:"h-8 w-px bg-neutral-300"}),e.jsxs("div",{className:"w-72 p-3 mb-4 bg-blue-600 text-white rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(An,{className:"h-7 w-7"})}),e.jsx("h3",{className:"font-bold",children:"Branch Managers (38)"}),e.jsx("p",{className:"text-xs opacity-80",children:"District Level"}),e.jsx("p",{className:"text-sm mt-1",children:"Manage district operations"})]}),e.jsx("div",{className:"h-8 w-px bg-neutral-300"}),e.jsxs("div",{className:"w-80 p-3 mb-4 bg-blue-500 text-white rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(uZ,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-bold",children:"Taluk Managers (261)"}),e.jsx("p",{className:"text-xs opacity-80",children:"Taluk Level"}),e.jsx("p",{className:"text-sm mt-1",children:"Manage taluk-level services"})]}),e.jsx("div",{className:"h-8 w-px bg-neutral-300"}),e.jsxs("div",{className:"w-96 p-3 mb-4 bg-blue-400 text-white rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(rr,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-bold",children:"Service Agents (517+)"}),e.jsx("p",{className:"text-xs opacity-80",children:"Pincode Level"}),e.jsx("p",{className:"text-sm mt-1",children:"Direct customer service provision"})]})]})})})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Roles & Responsibilities"}),e.jsx(he,{children:"Duties at each management level"})]}),e.jsx(E,{children:e.jsxs(P3e,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(_h,{value:"item-1",children:[e.jsx(Th,{className:"font-medium",children:"System Administrator"}),e.jsx(Oh,{children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsx("li",{children:"Platform oversight and configuration"}),e.jsx("li",{children:"Commission rates management"}),e.jsx("li",{children:"Branch manager appointment and management"}),e.jsx("li",{children:"Service integration and API control"}),e.jsx("li",{children:"Financial oversight across platform"}),e.jsx("li",{children:"Overall performance monitoring"})]})})]}),e.jsxs(_h,{value:"item-2",children:[e.jsx(Th,{className:"font-medium",children:"Branch Managers"}),e.jsx(Oh,{children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsx("li",{children:"District-level service delivery"}),e.jsx("li",{children:"Taluk manager appointment and supervision"}),e.jsx("li",{children:"Service quality monitoring"}),e.jsx("li",{children:"District performance targets"}),e.jsx("li",{children:"Conflict resolution and escalations"}),e.jsx("li",{children:"Marketing initiatives at district level"})]})})]}),e.jsxs(_h,{value:"item-3",children:[e.jsx(Th,{className:"font-medium",children:"Taluk Managers"}),e.jsx(Oh,{children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsx("li",{children:"Taluk-level service management"}),e.jsx("li",{children:"Service agent recruitment and oversight"}),e.jsx("li",{children:"Local marketing and promotion"}),e.jsx("li",{children:"Customer dispute resolution"}),e.jsx("li",{children:"Service provider onboarding"}),e.jsx("li",{children:"Local partnership development"})]})})]}),e.jsxs(_h,{value:"item-4",children:[e.jsx(Th,{className:"font-medium",children:"Service Agents"}),e.jsx(Oh,{children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[e.jsx("li",{children:"Direct service provision to customers"}),e.jsx("li",{children:"Mobile recharge and bill payments"}),e.jsx("li",{children:"Travel bookings assistance"}),e.jsx("li",{children:"Local delivery coordination"}),e.jsx("li",{children:"Equipment rental facilitation"}),e.jsx("li",{children:"Customer support and issue resolution"})]})})]})]})})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Commission Structure"}),e.jsx(he,{children:"Revenue sharing across management hierarchy"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Role"}),e.jsx(xe,{children:"Commission Rate"}),e.jsx(xe,{children:"Examples"}),e.jsx(xe,{children:"Payment Cycle"})]})}),e.jsxs(Gr,{children:[e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"System Administrator"}),e.jsx(se,{children:"0.5%"}),e.jsx(se,{children:"Platform maintenance, infrastructure costs"}),e.jsx(se,{children:"Monthly"})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Branch Managers"}),e.jsx(se,{children:"0.5%"}),e.jsx(se,{children:"District management, taluk coordination"}),e.jsx(se,{children:"Bi-weekly"})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Taluk Managers"}),e.jsx(se,{children:"1%"}),e.jsx(se,{children:"Local operations, agent management"}),e.jsx(se,{children:"Weekly"})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Service Agents"}),e.jsx(se,{children:"2-3%"}),e.jsx(se,{children:"Direct service provision to customers"}),e.jsx(se,{children:"Daily/Weekly"})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Registered Users"}),e.jsx(se,{children:"1%"}),e.jsx(se,{children:"Referrals, repeat business"}),e.jsx(se,{children:"Immediate"})]})]})]})}),e.jsx("div",{className:"mt-4 text-sm text-neutral-500",children:e.jsx("p",{children:"Total commission from service providers and API partners ranges from 8-15% of transaction value, distributed through this hierarchy."})})]})]})]}),e.jsx(Ve,{value:"credentials",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Login Credential Format"}),e.jsx(he,{children:"Standardized login credentials for each role"})]}),e.jsxs(E,{children:[e.jsxs(xa,{className:"mb-6",children:[e.jsx(lr,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Test Credentials Available"}),e.jsx(ga,{children:"The following examples can be used to log in and explore different roles in the system."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Role"}),e.jsx(xe,{children:"Username Format"}),e.jsx(xe,{children:"Password Format"}),e.jsx(xe,{children:"Example"})]})}),e.jsxs(Gr,{children:[e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Administrator"}),e.jsx(se,{children:"admin"}),e.jsx(se,{children:"admin123"}),e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm",children:["Username: ",e.jsx("span",{className:"font-mono",children:"admin"})]}),e.jsxs("span",{className:"text-sm",children:["Password: ",e.jsx("span",{className:"font-mono",children:"admin123"})]})]})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Branch Manager"}),e.jsx(se,{children:"bm_districtname"}),e.jsx(se,{children:"districtname123"}),e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm",children:["Username: ",e.jsx("span",{className:"font-mono",children:"bm_chennai"})]}),e.jsxs("span",{className:"text-sm",children:["Password: ",e.jsx("span",{className:"font-mono",children:"chennai123"})]})]})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Taluk Manager"}),e.jsx(se,{children:"tm_districtname_talukname"}),e.jsx(se,{children:"talukname123"}),e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm",children:["Username: ",e.jsx("span",{className:"font-mono",children:"tm_chennai_north"})]}),e.jsxs("span",{className:"text-sm",children:["Password: ",e.jsx("span",{className:"font-mono",children:"north123"})]})]})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Service Agent"}),e.jsx(se,{children:"sa_districtname_talukname_pincode"}),e.jsx(se,{children:"pincode123"}),e.jsx(se,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm",children:["Username: ",e.jsx("span",{className:"font-mono",children:"sa_chennai_north_600001"})]}),e.jsxs("span",{className:"text-sm",children:["Password: ",e.jsx("span",{className:"font-mono",children:"600001123"})]})]})})]})]})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Notable Credentials"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(O,{className:"border border-blue-200",children:[e.jsx(G,{className:"pb-2",children:e.jsx(Y,{className:"text-base",children:"Branch Manager - Chennai"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Username:"}),e.jsx("code",{className:"bg-neutral-100 px-2 py-1 rounded",children:"bm_chennai"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("code",{className:"bg-neutral-100 px-2 py-1 rounded",children:"chennai123"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"District:"}),e.jsx("span",{children:"Chennai"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Taluk Managers:"}),e.jsx("span",{children:"4"})]})]})})]}),e.jsxs(O,{className:"border border-blue-200",children:[e.jsx(G,{className:"pb-2",children:e.jsx(Y,{className:"text-base",children:"Taluk Manager - Coimbatore South"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Username:"}),e.jsx("code",{className:"bg-neutral-100 px-2 py-1 rounded",children:"tm_coimbatore_south"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("code",{className:"bg-neutral-100 px-2 py-1 rounded",children:"south123"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"District:"}),e.jsx("span",{children:"Coimbatore"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Service Agents:"}),e.jsx("span",{children:"6"})]})]})})]})]})]})]})]})}),e.jsxs(Ve,{value:"coverage",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Deployment Statistics"}),e.jsx(he,{children:"Current team members across locations"})]}),e.jsx(E,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Role"}),e.jsx(xe,{className:"text-right",children:"Current Count"}),e.jsx(xe,{className:"text-right",children:"Target Count"}),e.jsx(xe,{className:"text-right",children:"Coverage %"})]})}),e.jsxs(Gr,{children:[e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Branch Managers"}),e.jsx(se,{className:"text-right",children:"38"}),e.jsx(se,{className:"text-right",children:"38"}),e.jsx(se,{className:"text-right text-green-600",children:"100%"})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Taluk Managers"}),e.jsx(se,{className:"text-right",children:"261"}),e.jsx(se,{className:"text-right",children:"288"}),e.jsx(se,{className:"text-right text-amber-600",children:"90.6%"})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Service Agents"}),e.jsx(se,{className:"text-right",children:"517"}),e.jsx(se,{className:"text-right",children:"2000+"}),e.jsx(se,{className:"text-right text-red-600",children:"25.9%"})]})]})]})})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Top 5 Districts by Service Agents"}),e.jsx(he,{children:"Districts with highest agent deployment"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:"Chennai"}),e.jsx("span",{className:"text-sm",children:"50 agents"})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"100%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:"Coimbatore"}),e.jsx("span",{className:"text-sm",children:"38 agents"})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"76%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:"Madurai"}),e.jsx("span",{className:"text-sm",children:"30 agents"})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"60%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:"Tiruchirappalli"}),e.jsx("span",{className:"text-sm",children:"27 agents"})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"54%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium",children:"Salem"}),e.jsx("span",{className:"text-sm",children:"25 agents"})]}),e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"50%"}})})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-neutral-200",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Rural vs Urban Distribution"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2/3 bg-neutral-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-l-full",style:{width:"70%"}})}),e.jsxs("div",{className:"ml-4 text-sm flex space-x-4",children:[e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-blue-600 mr-1"}),"Urban (70%)"]}),e.jsxs("span",{children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full bg-neutral-200 mr-1"}),"Rural (30%)"]})]})]})]})]})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Service Availability Across Districts"}),e.jsx(he,{children:"Service coverage by district"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"District"}),e.jsx(xe,{children:"Branch Manager"}),e.jsx(xe,{className:"text-center",children:"Taluk Managers"}),e.jsx(xe,{className:"text-center",children:"Service Agents"}),e.jsx(xe,{children:"Service Availability"})]})}),e.jsxs(Gr,{children:[e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Chennai"}),e.jsx(se,{children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Active"})}),e.jsx(se,{className:"text-center",children:"4/4 (100%)"}),e.jsx(se,{className:"text-center",children:"50/80 (62.5%)"}),e.jsx(se,{children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"95%"}})})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Coimbatore"}),e.jsx(se,{children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Active"})}),e.jsx(se,{className:"text-center",children:"6/6 (100%)"}),e.jsx(se,{className:"text-center",children:"38/50 (76%)"}),e.jsx(se,{children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"90%"}})})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Madurai"}),e.jsx(se,{children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Active"})}),e.jsx(se,{className:"text-center",children:"5/5 (100%)"}),e.jsx(se,{className:"text-center",children:"30/40 (75%)"}),e.jsx(se,{children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"85%"}})})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Tiruchirappalli"}),e.jsx(se,{children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Active"})}),e.jsx(se,{className:"text-center",children:"4/4 (100%)"}),e.jsx(se,{className:"text-center",children:"27/35 (77%)"}),e.jsx(se,{children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"80%"}})})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Tiruppur"}),e.jsx(se,{children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Active"})}),e.jsx(se,{className:"text-center",children:"3/4 (75%)"}),e.jsx(se,{className:"text-center",children:"17/30 (56.7%)"}),e.jsx(se,{children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-amber-500 h-2 rounded-full",style:{width:"65%"}})})})]}),e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:"Salem"}),e.jsx(se,{children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"Active"})}),e.jsx(se,{className:"text-center",children:"4/4 (100%)"}),e.jsx(se,{className:"text-center",children:"25/35 (71.4%)"}),e.jsx(se,{children:e.jsx("div",{className:"w-full bg-neutral-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"82%"}})})})]})]})]})}),e.jsx("div",{className:"mt-4 text-sm text-neutral-500",children:e.jsx("p",{children:"Data as of April 2025 - Districts with less than 50% service agent coverage not shown."})})]})]})]})]}),e.jsx("div",{className:"mt-8 p-4 border rounded-lg bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(XX,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800",children:"Management Information"}),e.jsx("p",{className:"mt-1 text-sm text-blue-700",children:"This hierarchy overview provides insight into the organizational structure and login credential format for all management roles. Use the example credentials to explore different access levels in the system. For security reasons, all passwords follow the standardized format outlined above."})]})]})})]})}function A3e(){const{user:t}=dt(),[,r]=br(),{toast:s}=Ue(),[n,a]=j.useState("pending"),[i,l]=j.useState(null),[o,c]=j.useState(!1),[d,u]=j.useState("");j.useEffect(()=>{t&&t.userType!=="admin"&&(r("/dashboard"),s({title:"Access Denied",description:"You do not have permission to view this page.",variant:"destructive"}))},[t,r,s]);const{data:m,isLoading:h,refetch:g}=fe({queryKey:["/api/manager-applications",n],queryFn:async()=>await(await ie("GET",`/api/manager-applications?status=${n}`)).json(),enabled:!!t&&t.userType==="admin"}),x=Se({mutationFn:async({id:N,status:w,notes:C})=>await(await ie("PATCH",`/api/manager-applications/${N}`,{status:w,notes:C})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/manager-applications"]}),c(!1),u(""),g(),s({title:"Application Updated",description:"The manager application has been processed."})},onError:N=>{s({title:"Update Failed",description:N.message,variant:"destructive"})}});function p(N){l(N),c(!0)}function y(N){i&&x.mutate({id:i.id,status:N,notes:d})}function v(N){switch(N){case"pending":return e.jsxs(ae,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:[e.jsx(yt,{className:"w-3 h-3 mr-1"}),"Pending"]});case"approved":return e.jsxs(ae,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Approved"]});case"rejected":return e.jsxs(ae,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:[e.jsx(Fr,{className:"w-3 h-3 mr-1"}),"Rejected"]});default:return e.jsx(ae,{children:N})}}function f(N){switch(N){case"branch_manager":return"Branch Manager";case"taluk_manager":return"Taluk Manager";case"service_agent":return"Service Agent";default:return N}}function b(N){if(!N)return"N/A";const w=new Date(N);return new Intl.DateTimeFormat("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"}).format(w)}return t?e.jsxs("div",{className:"container py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Manager Applications"}),e.jsxs(nr,{value:n,onValueChange:a,className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-3 mb-8",children:[e.jsx(Ae,{value:"pending",children:"Pending"}),e.jsx(Ae,{value:"approved",children:"Approved"}),e.jsx(Ae,{value:"rejected",children:"Rejected"})]}),e.jsx(Ve,{value:"pending",className:"w-full",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Pending Applications"}),e.jsx(he,{children:"Review and manage pending manager applications."})]}),e.jsx(E,{children:h?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):!m||m.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pending applications found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Hr,{children:[e.jsx(Zh,{children:"List of pending manager applications"}),e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Name"}),e.jsx(xe,{children:"Email"}),e.jsx(xe,{children:"Role"}),e.jsx(xe,{children:"Date Applied"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Action"})]})}),e.jsx(Gr,{children:m.map(N=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:N.fullName}),e.jsx(se,{children:N.email}),e.jsx(se,{children:f(N.managerType)}),e.jsx(se,{children:b(N.createdAt)}),e.jsx(se,{children:v(N.status)}),e.jsx(se,{className:"text-right",children:e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(N),children:"View Details"})})]},N.id))})]})})})]})}),e.jsx(Ve,{value:"approved",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Approved Applications"}),e.jsx(he,{children:"View all approved manager applications."})]}),e.jsx(E,{children:h?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):!m||m.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No approved applications found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Hr,{children:[e.jsx(Zh,{children:"List of approved manager applications"}),e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Name"}),e.jsx(xe,{children:"Email"}),e.jsx(xe,{children:"Role"}),e.jsx(xe,{children:"Date Approved"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Action"})]})}),e.jsx(Gr,{children:m.map(N=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:N.fullName}),e.jsx(se,{children:N.email}),e.jsx(se,{children:f(N.managerType)}),e.jsx(se,{children:b(N.updatedAt||N.createdAt)}),e.jsx(se,{children:v(N.status)}),e.jsx(se,{className:"text-right",children:e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(N),children:"View Details"})})]},N.id))})]})})})]})}),e.jsx(Ve,{value:"rejected",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Rejected Applications"}),e.jsx(he,{children:"View all rejected manager applications."})]}),e.jsx(E,{children:h?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):!m||m.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No rejected applications found."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Hr,{children:[e.jsx(Zh,{children:"List of rejected manager applications"}),e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Name"}),e.jsx(xe,{children:"Email"}),e.jsx(xe,{children:"Role"}),e.jsx(xe,{children:"Date Rejected"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Action"})]})}),e.jsx(Gr,{children:m.map(N=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:N.fullName}),e.jsx(se,{children:N.email}),e.jsx(se,{children:f(N.managerType)}),e.jsx(se,{children:b(N.updatedAt||N.createdAt)}),e.jsx(se,{children:v(N.status)}),e.jsx(se,{className:"text-right",children:e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(N),children:"View Details"})})]},N.id))})]})})})]})})]}),e.jsx(Tt,{open:o,onOpenChange:c,children:e.jsxs(Ct,{className:"max-w-3xl",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Manager Application Details"}),e.jsx(Xt,{children:"Review the application information before making a decision."})]}),i&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Personal Information"}),e.jsxs("div",{className:"mt-2 border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Full Name"}),e.jsx("p",{className:"font-medium",children:i.fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium",children:i.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:i.phone||"Not provided"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Application Information"}),e.jsxs("div",{className:"mt-2 border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Role Applied For"}),e.jsx("p",{className:"font-medium",children:f(i.managerType)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Username"}),e.jsx("p",{className:"font-medium",children:i.username})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Date Applied"}),e.jsx("p",{className:"font-medium",children:b(i.createdAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:v(i.status)})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location Information"}),e.jsxs("div",{className:"mt-2 border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"District"}),e.jsx("p",{className:"font-medium",children:i.district||"To be assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Taluk"}),e.jsx("p",{className:"font-medium",children:i.taluk||"To be assigned"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Pincode"}),e.jsx("p",{className:"font-medium",children:i.pincode||"To be assigned"})]})]})]}),i.status==="pending"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Decision"}),e.jsxs("div",{className:"mt-2 space-y-3",children:[e.jsx(at,{placeholder:"Add notes or comments about this application...",value:d,onChange:N=>u(N.target.value),className:"min-h-[120px]"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(_,{className:"flex-1",variant:"destructive",onClick:()=>y("rejected"),disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsx(e.Fragment,{children:"Reject Application"})}),e.jsx(_,{className:"flex-1",onClick:()=>y("approved"),disabled:x.isPending,children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):e.jsx(e.Fragment,{children:"Approve Application"})})]})]})]}),i.status!=="pending"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Notes"}),e.jsx("div",{className:"mt-2 border rounded-lg p-4",children:e.jsx("p",{className:"text-sm",children:i.notes||"No notes provided"})})]})]})]}),e.jsx(zs,{children:e.jsx(_,{variant:"outline",onClick:()=>c(!1),children:"Close"})})]})})]}):e.jsx("div",{className:"flex justify-center items-center h-[80vh]",children:"Loading..."})}function _3e(){const{toast:t}=Ue(),{user:r}=dt(),[s,n]=j.useState([]);j.useEffect(()=>{const c=localStorage.getItem("groceryCart");if(c)try{n(JSON.parse(c))}catch(d){console.error("Error parsing cart data:",d)}},[]),j.useEffect(()=>{localStorage.setItem("groceryCart",JSON.stringify(s))},[s]);const{data:a,isLoading:i,error:l}=fe({queryKey:["/api/farmer-products"],queryFn:async()=>{const c=await fetch("/api/farmer-products?status=approved&includeProduct=true");if(!c.ok)throw new Error("Failed to fetch farmer product listings");return c.json()}}),o=c=>{if(!c.product){t({title:"Error",description:"Product information is missing",variant:"destructive"});return}const d=s.findIndex(u=>u.id===c.id);if(d>=0){const u=[...s];u[d].quantity+=1,n(u)}else n([...s,{id:c.id,farmerId:c.farmerId,productId:c.groceryProductId,productName:c.product.name,price:c.price,unit:c.unit,quantity:1,imageUrl:c.imageUrl||c.product.imageUrl,farmerName:"Farmer",transportAgentRequired:c.transportAgentRequired}]);t({title:"Added to cart",description:`${c.product.name} has been added to your cart.`,variant:"default"})};return i?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin"})}):l?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-md",children:[e.jsx("h2",{className:"text-red-800 font-semibold",children:"Error Loading Listings"}),e.jsx("p",{className:"text-red-600",children:l.message}),e.jsx(_,{variant:"outline",className:"mt-2",onClick:()=>window.location.reload(),children:"Try Again"})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Farm Fresh Products"}),e.jsx("p",{className:"text-gray-600",children:"Direct from local farmers to your doorstep"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(_,{variant:"outline",onClick:()=>window.location.href="/grocery/cart",className:"flex items-center gap-2",children:[e.jsx(_r,{className:"h-5 w-5"}),e.jsxs("span",{children:["Cart (",s.length,")"]})]})})]}),a&&a.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(c=>{var d,u,m;return e.jsxs(O,{className:"overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"h-48 overflow-hidden bg-gray-100 relative",children:[c.imageUrl||c.product&&c.product.imageUrl?e.jsx("img",{src:c.imageUrl||c.product&&c.product.imageUrl,alt:(d=c.product)==null?void 0:d.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100",children:e.jsx("p",{className:"text-gray-400",children:"No Image"})}),c.isOrganic&&e.jsx(ae,{variant:"secondary",className:"absolute top-2 right-2 bg-green-100 text-green-800",children:"Organic"})]}),e.jsxs(G,{className:"pb-2",children:[e.jsx(Y,{children:(u=c.product)==null?void 0:u.name}),e.jsx(he,{children:((m=c.product)==null?void 0:m.description)||"Fresh farm product"})]}),e.jsxs(E,{className:"pb-2 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("p",{className:"text-lg font-semibold",children:["",c.price," / ",c.unit]}),e.jsxs(ae,{variant:"outline",className:"text-xs",children:["Qty: ",c.quantity," ",c.unit]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[c.selfDelivery&&e.jsxs(ae,{variant:"outline",className:"flex items-center gap-1 text-green-700",children:[e.jsx(Ks,{className:"h-3 w-3"}),"Self Delivery"]}),c.transportAgentRequired&&e.jsxs(ae,{variant:"outline",className:"flex items-center gap-1 text-blue-700",children:[e.jsx($n,{className:"h-3 w-3"}),"Transport Available"]})]})]}),e.jsx(pr,{className:"pt-2",children:e.jsx(_,{className:"w-full",onClick:()=>o(c),children:"Add to Cart"})})]},c.id)})}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-12 max-w-xl mx-auto",children:[e.jsx(fC,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Products Available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"There are currently no farm products available. Please check back later."}),(r==null?void 0:r.userType)==="provider"&&e.jsx(_,{variant:"default",onClick:()=>window.location.href="/farmer/add-product",children:"Add Your Product"})]})})]})}const T3e=Kt({name:R().min(1,"Product name is required"),category:R().min(1,"Category is required"),price:ct().min(.01,"Price must be greater than 0"),unit:R().min(1,"Unit is required"),description:R().min(1,"Description is required"),availableQuantity:ct().min(1,"Quantity must be at least 1"),district:R().min(1,"District is required"),isOrganic:tr().default(!1)}),O3e=["Vegetables","Fruits","Grains","Pulses","Spices","Dairy","Others"],E3e=["kg","gram","liter","piece","dozen","quintal"],D3e=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupattur","Tirupur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function M3e(){const{toast:t}=Ue(),r=Gt({resolver:Yt(T3e),defaultValues:{name:"",category:"",price:0,unit:"",description:"",availableQuantity:0,district:"",isOrganic:!1}}),s=Se({mutationFn:async a=>{const i={name:a.name,description:a.description,category:a.category,price:a.price,stock:a.availableQuantity,unit:a.unit,isOrganic:a.isOrganic,district:a.district};return(await ie("POST","/api/provider/products",i)).json()},onSuccess:()=>{t({title:"Success",description:"Product listing added successfully!"}),r.reset(),pe.invalidateQueries({queryKey:["/api/farmer-products"]})},onError:a=>{t({title:"Error",description:a.message,variant:"destructive"})}}),n=a=>{s.mutate(a)};return e.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"w-6 h-6 text-green-600"}),"Add Product Listing"]}),e.jsx(he,{children:"Add your farm products to reach customers directly"})]}),e.jsx(E,{children:e.jsx(Qt,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(n),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:r.control,name:"name",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Fresh Tomatoes",...a})}),e.jsx(H,{})]})}),e.jsx(U,{control:r.control,name:"category",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category"}),e.jsx(V,{children:e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...a,children:[e.jsx("option",{value:"",children:"Select Category"}),O3e.map(i=>e.jsx("option",{value:i,children:i},i))]})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(U,{control:r.control,name:"price",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0.00",...a,onChange:i=>a.onChange(parseFloat(i.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:r.control,name:"unit",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"Unit"}),e.jsx(V,{children:e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...a,children:[e.jsx("option",{value:"",children:"Select Unit"}),E3e.map(i=>e.jsx("option",{value:i,children:i},i))]})}),e.jsx(H,{})]})}),e.jsx(U,{control:r.control,name:"availableQuantity",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"Available Quantity"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0",...a,onChange:i=>a.onChange(parseInt(i.target.value)||0)})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:r.control,name:"district",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsx(V,{children:e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",...a,children:[e.jsx("option",{value:"",children:"Select District"}),D3e.map(i=>e.jsx("option",{value:i,children:i},i))]})}),e.jsx(H,{})]})}),e.jsx(U,{control:r.control,name:"description",render:({field:a})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your product quality, farming methods, etc.",rows:4,...a})}),e.jsx(H,{})]})}),e.jsx(U,{control:r.control,name:"isOrganic",render:({field:a})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(V,{children:e.jsx("input",{type:"checkbox",checked:a.value,onChange:a.onChange,className:"mt-1"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Organic Product"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Check this if your product is organically grown"})]})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:s.isPending,children:s.isPending?"Adding Product...":"Add Product Listing"})]})})})]})})}const I3e=Kt({price:R().refine(t=>!isNaN(Number(t))&&Number(t)>0,{message:"Price must be a positive number"}),quantity:R().refine(t=>!isNaN(Number(t))&&Number(t)>0,{message:"Quantity must be a positive number"}),unit:R().min(1,"Unit is required"),description:R().optional(),imageUrl:R().optional(),isOrganic:tr().default(!1),selfDelivery:tr().default(!1),transportAgentRequired:tr().default(!0)});function R3e(){var m,h,g,x,p,y;const{toast:t}=Ue(),{user:r}=dt(),[,s]=br(),{id:n}=sj(),{data:a,isLoading:i,isError:l,error:o}=fe({queryKey:[`/api/farmer-products/${n}`],queryFn:async()=>{const v=await ie("GET",`/api/farmer-products/${n}?includeProduct=true`);if(!v.ok)throw new Error("Failed to fetch product listing");return await v.json()},enabled:!!n}),c=Gt({resolver:Yt(I3e),defaultValues:{price:"",quantity:"",unit:"",description:"",imageUrl:"",isOrganic:!1,selfDelivery:!1,transportAgentRequired:!0}});j.useEffect(()=>{a&&c.reset({price:a.price.toString(),quantity:a.quantity.toString(),unit:a.unit,description:a.description||"",imageUrl:a.imageUrl||"",isOrganic:a.isOrganic||!1,selfDelivery:a.selfDelivery||!1,transportAgentRequired:a.transportAgentRequired||!0})},[a,c]);const d=Se({mutationFn:async v=>{const f=await ie("PUT",`/api/farmer-products/${n}`,{...v,price:parseFloat(v.price),quantity:parseFloat(v.quantity)});if(!f.ok){const b=await f.json();throw new Error(b.message||"Failed to update product listing")}return f.json()},onSuccess:()=>{t({title:"Product listing updated",description:"Your product listing has been updated and is pending admin approval."}),pe.invalidateQueries({queryKey:[`/api/farmer-products/${n}`]}),pe.invalidateQueries({queryKey:["/api/farmer-products/my-listings"]}),s("/farmer/my-listings")},onError:v=>{t({title:"Update failed",description:v.message||"Failed to update product listing. Please try again.",variant:"destructive"})}}),u=v=>{d.mutate(v)};return!r||r.userType!=="provider"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(xa,{variant:"destructive",children:[e.jsx(di,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Access Denied"}),e.jsx(ga,{children:"Only registered farmers can edit product listings. If you are a farmer, please make sure you're logged in with your provider account."})]})}):i?e.jsxs("div",{className:"container mx-auto px-4 py-8 flex justify-center items-center h-64",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Loading product listing..."})]}):l?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(xa,{variant:"destructive",children:[e.jsx(di,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Error Loading Product Listing"}),e.jsx(ga,{children:o.message})]}),e.jsx(_,{className:"mt-4",onClick:()=>s("/farmer/my-listings"),children:"Back to My Listings"})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[e.jsx("div",{className:"md:col-span-8",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Edit Product Listing"}),e.jsxs(he,{children:["Update your product listing for ",((m=a==null?void 0:a.product)==null?void 0:m.name)||"this product"]})]}),(a==null?void 0:a.status)&&e.jsx("div",{className:`px-3 py-1 text-xs font-medium rounded-full ${a.status==="approved"?"bg-green-100 text-green-800":a.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]})}),e.jsx(E,{children:e.jsx(Qt,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:[e.jsx("h3",{className:"text-blue-800 font-semibold text-sm",children:"Important Note"}),e.jsx("p",{className:"text-blue-600 text-xs mt-1",children:"After editing, your product will require admin approval again before it appears in the store."})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"border rounded-md p-4 bg-gray-50",children:[e.jsx("h3",{className:"font-medium text-gray-700",children:"Product Information"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[((h=a==null?void 0:a.product)==null?void 0:h.name)||"Product"," ",(g=a==null?void 0:a.product)!=null&&g.category?`(${a.product.category})`:""]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:c.control,name:"price",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",step:"0.01",placeholder:"Enter price per unit",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:c.control,name:"quantity",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Available Quantity"}),e.jsx(V,{children:e.jsx($,{type:"number",min:"0",step:"0.01",placeholder:"Enter available quantity",...v})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:c.control,name:"unit",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Unit of Measurement"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., kg, gram, dozen, piece",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:c.control,name:"description",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description (Optional)"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your product (freshness, quality, etc.)",className:"min-h-[100px]",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:c.control,name:"imageUrl",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Image URL (Optional)"}),e.jsx(V,{children:e.jsx($,{placeholder:"Paste image URL here",...v})}),e.jsx(H,{})]})}),e.jsx(Tr,{className:"my-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(U,{control:c.control,name:"isOrganic",render:({field:v})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:v.value,onCheckedChange:v.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsxs(B,{className:"flex items-center",children:[e.jsx(Vs,{className:"h-4 w-4 mr-1 text-green-600"}),"Organic Product"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This product is grown organically without pesticides"})]})]})}),e.jsx(U,{control:c.control,name:"selfDelivery",render:({field:v})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:v.value,onCheckedChange:v.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Self Delivery"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You can deliver the product yourself"})]})]})}),e.jsx(U,{control:c.control,name:"transportAgentRequired",render:({field:v})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:v.value,onCheckedChange:v.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Transport Required"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"You need a transport agent to deliver"})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>s("/farmer/my-listings"),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:d.isPending,children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Product"})]})]})})})]})}),e.jsx("div",{className:"md:col-span-4",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Product Details"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-w-1 aspect-h-1 bg-gray-100 rounded-md overflow-hidden",children:a!=null&&a.imageUrl?e.jsx("img",{src:a.imageUrl,alt:((x=a==null?void 0:a.product)==null?void 0:x.name)||"Product",className:"object-cover w-full h-full"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("span",{className:"text-gray-400",children:"No image available"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:((p=a==null?void 0:a.product)==null?void 0:p.name)||"Product"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:((y=a==null?void 0:a.product)==null?void 0:y.description)||"No description available"})]}),(a==null?void 0:a.status)==="rejected"&&a.adminNotes&&e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:[e.jsx("h4",{className:"font-medium text-red-800",children:"Admin Notes:"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:a.adminNotes})]})]})})]})})]})})}const F3e=$ae.omit({farmerId:!0,status:!0,adminNotes:!0}).extend({requestedProductName:R().min(3,{message:"Product name must be at least 3 characters"}),description:R().min(10,{message:"Description must be at least 10 characters"})});function $3e(){const{toast:t}=Ue(),{user:r}=dt(),s=Gt({resolver:Yt(F3e),defaultValues:{requestedProductName:"",description:"",category:"",unit:"kg",imageUrl:""}}),n=Se({mutationFn:async i=>{const l=await ie("POST","/api/product-requests",i);if(!l.ok){const o=await l.json();throw new Error(o.message||"Failed to create product request")}return l.json()},onSuccess:()=>{t({title:"Product request submitted",description:"Your request has been submitted to the admin for review"}),s.reset(),pe.invalidateQueries({queryKey:["/api/product-requests"]})},onError:i=>{t({title:"Error submitting request",description:i.message,variant:"destructive"})}}),a=i=>{const l={...i,farmerId:r==null?void 0:r.id};n.mutate(l)};return!r||r.userType!=="service_provider"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(xa,{variant:"destructive",children:[e.jsx(di,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Access Denied"}),e.jsx(ga,{children:"Only registered farmers can request new products. If you are a farmer, please make sure you're logged in with your provider account."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(Vs,{className:"h-7 w-7 text-green-600"}),"Request New Product"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Can't find the product you want to sell? Request it here and our admin will review it."})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Product Request Form"}),e.jsx(he,{children:"Please provide details about the product you'd like to sell"})]}),e.jsx(E,{children:e.jsx(Qt,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(a),className:"space-y-6",children:[e.jsx(U,{control:s.control,name:"requestedProductName",render:({field:i})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Name*"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g. Organic Tomatoes",...i})}),e.jsx(H,{})]})}),e.jsx(U,{control:s.control,name:"category",render:({field:i})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category*"}),e.jsxs(je,{onValueChange:i.onChange,defaultValue:i.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a category"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"vegetables",children:"Vegetables"}),e.jsx(T,{value:"fruits",children:"Fruits"}),e.jsx(T,{value:"grains",children:"Grains"}),e.jsx(T,{value:"pulses",children:"Pulses"}),e.jsx(T,{value:"dairy",children:"Dairy Products"}),e.jsx(T,{value:"spices",children:"Spices"}),e.jsx(T,{value:"nuts",children:"Nuts & Seeds"}),e.jsx(T,{value:"other",children:"Other"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:s.control,name:"description",render:({field:i})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description*"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Provide a detailed description of the product, including varieties, qualities, etc.",className:"resize-none h-32",...i})}),e.jsx(H,{})]})}),e.jsx(U,{control:s.control,name:"unit",render:({field:i})=>e.jsxs(L,{children:[e.jsx(B,{children:"Preferred Unit of Measurement*"}),e.jsxs(je,{onValueChange:i.onChange,defaultValue:i.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a unit"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"kg",children:"Kilogram (kg)"}),e.jsx(T,{value:"g",children:"Gram (g)"}),e.jsx(T,{value:"lb",children:"Pound (lb)"}),e.jsx(T,{value:"piece",children:"Piece"}),e.jsx(T,{value:"dozen",children:"Dozen"}),e.jsx(T,{value:"liter",children:"Liter (L)"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:s.control,name:"imageUrl",render:({field:i})=>e.jsxs(L,{children:[e.jsx(B,{children:"Sample Image URL (Optional)"}),e.jsx(V,{children:e.jsx($,{placeholder:"https://example.com/image.jpg",...i})}),e.jsx(H,{}),e.jsx("p",{className:"text-xs text-gray-500",children:"If you have a sample image of the product, please provide a URL"})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Request"}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"* Required fields"})]})})})]})})]})}function L3e(){const{toast:t}=Ue(),{user:r}=dt(),[,s]=br(),[n,a]=j.useState("all"),{data:i,isLoading:l,isError:o,error:c,refetch:d}=fe({queryKey:["/api/provider/products"],queryFn:async()=>{const x=await ie("GET","/api/provider/products");if(!x.ok)throw new Error("Failed to fetch your product listings");return await x.json()}}),u=Se({mutationFn:async x=>{await ie("DELETE",`/api/provider/products/${x}`)},onSuccess:()=>{t({title:"Product listing deleted",description:"Your product listing has been deleted successfully."}),d()},onError:x=>{t({title:"Delete failed",description:x.message||"Failed to delete product listing. Please try again.",variant:"destructive"})}}),m=i==null?void 0:i.filter(x=>n==="all"?!0:x.status===n),h=x=>{if(!x)return e.jsx(ae,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:"Unknown"});switch(x){case"approved":return e.jsxs(ae,{className:"bg-green-100 text-green-800 hover:bg-green-200 flex items-center gap-1",children:[e.jsx(Ks,{className:"h-3 w-3"}),"Approved"]});case"pending":return e.jsxs(ae,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 flex items-center gap-1",children:[e.jsx(di,{className:"h-3 w-3"}),"Pending Approval"]});case"rejected":return e.jsxs(ae,{className:"bg-red-100 text-red-800 hover:bg-red-200 flex items-center gap-1",children:[e.jsx(Es,{className:"h-3 w-3"}),"Rejected"]});default:return e.jsx(ae,{className:"bg-gray-100 text-gray-800 hover:bg-gray-200",children:x})}},g=x=>{window.confirm("Are you sure you want to delete this product listing?")&&u.mutate(x)};return!r||r.userType!=="service_provider"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Access Denied"}),e.jsx(he,{children:"Only registered farmers can view their product listings"})]}),e.jsx(E,{children:e.jsx("p",{children:"If you are a farmer, please log in to view your product listings."})}),e.jsx(pr,{children:e.jsx(_,{onClick:()=>s("/auth"),children:"Go to Login"})})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"My Product Listings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your product listings and track their approval status"})]}),e.jsxs(_,{onClick:()=>s("/farmer/add-product"),children:[e.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Add New Product"]})]}),e.jsx(nr,{defaultValue:"all",value:n,onValueChange:a,className:"mb-6",children:e.jsxs(sr,{className:"grid grid-cols-4 w-full md:w-auto",children:[e.jsx(Ae,{value:"all",className:"flex items-center gap-2",children:"All Listings"}),e.jsxs(Ae,{value:"pending",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-400"}),"Pending"]}),e.jsxs(Ae,{value:"approved",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-green-400"}),"Approved"]}),e.jsxs(Ae,{value:"rejected",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-red-400"}),"Rejected"]})]})}),l?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Loading your product listings..."})]}):o?e.jsxs(O,{className:"mb-6 bg-red-50 border-red-200",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-red-800",children:"Error Loading Listings"})}),e.jsx(E,{children:e.jsx("p",{className:"text-red-600",children:c.message})}),e.jsx(pr,{children:e.jsx(_,{variant:"outline",onClick:()=>d(),children:"Try Again"})})]}):m&&m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(x=>e.jsxs(O,{className:"overflow-hidden",children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:x.productName||"Product"}),e.jsx(he,{children:x.description||"No description available"})]}),h(x.status)]})}),e.jsxs(E,{className:"pb-4",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 rounded-md flex items-center justify-center mb-4",children:x.imageUrl?e.jsx("img",{src:x.imageUrl,alt:x.productName||"Product",className:"object-cover w-full h-full rounded-md"}):e.jsx(Qa,{className:"h-16 w-16 text-gray-300"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Price"}),e.jsxs("p",{className:"font-medium",children:["",x.price,"/",x.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Available Quantity"}),e.jsxs("p",{className:"font-medium",children:[x.stockQuantity||0," ",x.unit]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mt-3",children:[x.status==="pending"&&e.jsxs("p",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(di,{className:"h-3 w-3"}),"Awaiting admin approval"]}),e.jsxs("p",{children:["Category: ",x.categoryName]}),e.jsxs("p",{children:["Added on: ",x.createdAt?new Date(x.createdAt).toLocaleDateString():"Unknown date"]})]})]}),e.jsxs(pr,{className:"flex justify-between",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>s(`/farmer/edit-product/${x.id}`),children:[e.jsx(av,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:()=>g(x.id),children:[e.jsx(Es,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},x.id))}):e.jsx(O,{className:"text-center py-12",children:e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(Qa,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No product listings found"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:n==="all"?"You haven't added any product listings yet.":`You don't have any ${n} product listings.`}),e.jsx(_,{onClick:()=>s("/farmer/add-product"),children:"Add Your First Product"})]})})})]})}var $k="Radio",[B3e,gH]=ws($k),[V3e,U3e]=B3e($k),vH=j.forwardRef((t,r)=>{const{__scopeRadio:s,name:n,checked:a=!1,required:i,disabled:l,value:o="on",onCheck:c,form:d,...u}=t,[m,h]=j.useState(null),g=$t(r,y=>h(y)),x=j.useRef(!1),p=m?d||!!m.closest("form"):!0;return e.jsxs(V3e,{scope:s,checked:a,disabled:l,children:[e.jsx(it.button,{type:"button",role:"radio","aria-checked":a,"data-state":NH(a),"data-disabled":l?"":void 0,disabled:l,value:o,...u,ref:g,onClick:We(t.onClick,y=>{a||c==null||c(),p&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),p&&e.jsx(bH,{control:m,bubbles:!x.current,name:n,value:o,checked:a,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});vH.displayName=$k;var yH="RadioIndicator",jH=j.forwardRef((t,r)=>{const{__scopeRadio:s,forceMount:n,...a}=t,i=U3e(yH,s);return e.jsx(Rs,{present:n||i.checked,children:e.jsx(it.span,{"data-state":NH(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r})})});jH.displayName=yH;var q3e="RadioBubbleInput",bH=j.forwardRef(({__scopeRadio:t,control:r,checked:s,bubbles:n=!0,...a},i)=>{const l=j.useRef(null),o=$t(l,i),c=jj(s),d=vj(r);return j.useEffect(()=>{const u=l.current;if(!u)return;const m=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==s&&g){const x=new Event("click",{bubbles:n});g.call(u,s),u.dispatchEvent(x)}},[c,s,n]),e.jsx(it.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:o,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bH.displayName=q3e;function NH(t){return t?"checked":"unchecked"}var z3e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ib="RadioGroup",[K3e,s$e]=ws(Ib,[Am,gH]),wH=Am(),SH=gH(),[H3e,W3e]=K3e(Ib),CH=j.forwardRef((t,r)=>{const{__scopeRadioGroup:s,name:n,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=t,g=wH(s),x=nd(d),[p,y]=Hn({prop:i,defaultProp:a??null,onChange:m,caller:Ib});return e.jsx(H3e,{scope:s,name:n,required:l,disabled:o,value:p,onValueChange:y,children:e.jsx(BC,{asChild:!0,...g,orientation:c,dir:x,loop:u,children:e.jsx(it.div,{role:"radiogroup","aria-required":l,"aria-orientation":c,"data-disabled":o?"":void 0,dir:x,...h,ref:r})})})});CH.displayName=Ib;var PH="RadioGroupItem",kH=j.forwardRef((t,r)=>{const{__scopeRadioGroup:s,disabled:n,...a}=t,i=W3e(PH,s),l=i.disabled||n,o=wH(s),c=SH(s),d=j.useRef(null),u=$t(r,d),m=i.value===a.value,h=j.useRef(!1);return j.useEffect(()=>{const g=p=>{z3e.includes(p.key)&&(h.current=!0)},x=()=>h.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),e.jsx(VC,{asChild:!0,...o,focusable:!l,active:m,children:e.jsx(vH,{disabled:l,required:i.required,checked:m,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:We(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:We(a.onFocus,()=>{var g;h.current&&((g=d.current)==null||g.click())})})})});kH.displayName=PH;var G3e="RadioGroupIndicator",AH=j.forwardRef((t,r)=>{const{__scopeRadioGroup:s,...n}=t,a=SH(s);return e.jsx(jH,{...a,...n,ref:r})});AH.displayName=G3e;var _H=CH,TH=kH,Y3e=AH;const OH=j.forwardRef(({className:t,...r},s)=>e.jsx(_H,{className:De("grid gap-2",t),...r,ref:s}));OH.displayName=_H.displayName;const kg=j.forwardRef(({className:t,...r},s)=>e.jsx(TH,{ref:s,className:De("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(Y3e,{className:"flex items-center justify-center",children:e.jsx(b$,{className:"h-2.5 w-2.5 fill-current text-current"})})}));kg.displayName=TH.displayName;const Q3e=Kt({address:R().min(5,{message:"Address must be at least 5 characters"}),pincode:R().min(6,{message:"Please enter a valid pincode"}),date:ri({required_error:"Please select a date"}),timeSlot:Yr(["morning","afternoon","evening"],{required_error:"Please select a time slot"}),materials:uj(R()).refine(t=>t.length>0,{message:"Please select at least one material"}),additionalNotes:R().optional()}),X3e=[{id:"plastic",label:"Plastic",rate:15},{id:"aluminum",label:"Aluminum",rate:90},{id:"copper",label:"Copper",rate:400},{id:"brass",label:"Brass",rate:300}],Z3e=t=>{switch(t){case"new":return e.jsx(ae,{variant:"outline",children:"New"});case"assigned":return e.jsx(ae,{variant:"secondary",children:"Assigned"});case"collected":return e.jsx(ae,{className:"bg-blue-600 text-white",children:"Collected"});case"verified":return e.jsx(ae,{className:"bg-green-600 text-white",children:"Verified"});case"closed":return e.jsx(ae,{className:"bg-gray-600 text-white",children:"Closed"});case"cancelled":return e.jsx(ae,{variant:"destructive",children:"Cancelled"});default:return e.jsx(ae,{variant:"outline",children:t})}},J3e=t=>{switch(t){case"morning":return"Morning (8 AM - 12 PM)";case"afternoon":return"Afternoon (12 PM - 4 PM)";case"evening":return"Evening (4 PM - 8 PM)";default:return t}};function e5e(){const{toast:t}=Ue(),[r,s]=j.useState("request"),n=Gt({resolver:Yt(Q3e),defaultValues:{address:"",pincode:"",timeSlot:"morning",materials:[],additionalNotes:""}}),{data:a,isLoading:i}=fe({queryKey:["/api/recycling/requests"],queryFn:async()=>{const c=await ie("GET","/api/recycling/requests");if(!c.ok)throw new Error("Failed to fetch recycling requests");return c.json()}}),l=Se({mutationFn:async c=>{const d={...c,materials:c.materials.join(",")},u=await ie("POST","/api/recycling/request",d);if(!u.ok){const m=await u.json();throw new Error(m.message||"Failed to create recycling request")}return u.json()},onSuccess:()=>{t({title:"Success",description:"Your recycling collection request has been submitted"}),n.reset(),pe.invalidateQueries({queryKey:["/api/recycling/requests"]}),s("history")},onError:c=>{t({title:"Error",description:c.message,variant:"destructive"})}}),o=c=>{l.mutate(c)};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Recycling Service"}),e.jsx("p",{className:"text-muted-foreground",children:"Schedule collection of recyclable materials and earn money for your contribution to the environment"})]}),e.jsxs(nr,{value:r,onValueChange:s,className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-2",children:[e.jsx(Ae,{value:"request",children:"Request Collection"}),e.jsx(Ae,{value:"history",children:"Collection History"})]}),e.jsx(Ve,{value:"request",className:"mt-4",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(zn,{className:"h-5 w-5 text-primary"}),e.jsx("span",{children:"Schedule Recycling Collection"})]}),e.jsx(he,{children:"Fill in the details below to schedule a recycling collection. Our service agent will collect your recyclables and pay you based on the materials and weight."})]}),e.jsx(E,{children:e.jsx(Qt,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(o),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:n.control,name:"address",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Collection Address"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Enter your full address",...c,className:"resize-none"})}),e.jsx(H,{})]})}),e.jsx(U,{control:n.control,name:"pincode",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your pincode",...c})}),e.jsx(qe,{children:"We'll assign a service agent based on your pincode."}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:n.control,name:"date",render:({field:c})=>e.jsxs(L,{className:"flex flex-col",children:[e.jsx(B,{children:"Collection Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsx(V,{children:e.jsxs(_,{variant:"outline",className:`w-full pl-3 text-left font-normal ${c.value?"":"text-muted-foreground"}`,children:[c.value?vt(c.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Jt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(dn,{className:"w-auto p-0",align:"start",children:e.jsx(un,{mode:"single",selected:c.value,onSelect:c.onChange,disabled:d=>d<new Date||d>new Date(new Date().setDate(new Date().getDate()+30)),initialFocus:!0})})]}),e.jsx(qe,{children:"Choose a date within the next 30 days."}),e.jsx(H,{})]})}),e.jsx(U,{control:n.control,name:"timeSlot",render:({field:c})=>e.jsxs(L,{className:"space-y-3",children:[e.jsx(B,{children:"Preferred Time Slot"}),e.jsx(V,{children:e.jsxs(OH,{onValueChange:c.onChange,defaultValue:c.value,className:"flex flex-col space-y-1",children:[e.jsxs(L,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(V,{children:e.jsx(kg,{value:"morning"})}),e.jsx(B,{className:"font-normal",children:"Morning (8 AM - 12 PM)"})]}),e.jsxs(L,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(V,{children:e.jsx(kg,{value:"afternoon"})}),e.jsx(B,{className:"font-normal",children:"Afternoon (12 PM - 4 PM)"})]}),e.jsxs(L,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(V,{children:e.jsx(kg,{value:"evening"})}),e.jsx(B,{className:"font-normal",children:"Evening (4 PM - 8 PM)"})]})]})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:n.control,name:"materials",render:()=>e.jsxs(L,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(B,{children:"Materials for Recycling"}),e.jsx(qe,{children:"Select the materials you want to recycle. You'll be paid based on the weight and material type."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:X3e.map(c=>e.jsx(U,{control:n.control,name:"materials",render:({field:d})=>{var u;return e.jsxs(L,{className:"flex flex-col items-start space-x-0 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{children:e.jsx(Pn,{checked:(u=d.value)==null?void 0:u.includes(c.id),onCheckedChange:m=>{var g;const h=m?[...d.value,c.id]:(g=d.value)==null?void 0:g.filter(x=>x!==c.id);d.onChange(h)}})}),e.jsx(B,{className:"font-normal cursor-pointer",children:c.label})]}),e.jsxs(qe,{className:"ml-6 mt-2",children:["",c.rate,"/kg"]})]},c.id)}},c.id))}),e.jsx(H,{})]})}),e.jsx(U,{control:n.control,name:"additionalNotes",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Additional Notes (Optional)"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Any special instructions or notes for the collector",className:"resize-none",...c})}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",className:"w-full",disabled:l.isPending,children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Schedule Collection"})]})})})]})}),e.jsx(Ve,{value:"history",className:"mt-4",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Recycling History"}),e.jsx(he,{children:"View all your recycling collection requests and their status"})]}),e.jsx(E,{children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):!a||a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground",children:"You haven't made any recycling requests yet."}),e.jsx(_,{variant:"outline",className:"mt-4",onClick:()=>s("request"),children:"Schedule Your First Collection"})]}):e.jsx("div",{className:"space-y-4",children:a.map(c=>e.jsxs(O,{className:"overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(zn,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.requestNumber||`Collection Request #${c.id}`}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(c.date).toLocaleDateString()," - ",J3e(c.timeSlot)]})]})]}),Z3e(c.status)]}),e.jsxs(E,{className:"p-4 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Collection Address"}),e.jsx("p",{className:"text-sm mt-1",children:c.address}),e.jsxs("p",{className:"text-sm",children:["Pincode: ",c.pincode]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium",children:"Materials"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:c.materials.split(",").map(d=>e.jsx(ae,{variant:"outline",className:"capitalize",children:d},d))})]})]}),c.additionalNotes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Additional Notes"}),e.jsx("p",{className:"text-sm mt-1",children:c.additionalNotes})]}),(c.status==="collected"||c.status==="verified"||c.status==="closed")&&c.totalWeight&&e.jsx("div",{className:"mt-4 p-3 bg-primary/10 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Collection Details"}),e.jsxs("p",{className:"text-sm",children:["Total Weight: ",c.totalWeight," kg"]}),c.collectedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Collected on: ",new Date(c.collectedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm",children:"Amount Earned"}),e.jsxs("p",{className:"text-xl font-bold text-primary",children:["",c.amount]})]})]})}),(c.status==="verified"||c.status==="closed")&&c.verifiedAt&&e.jsxs("div",{className:"mt-2 text-xs text-right text-muted-foreground",children:["Verified on: ",new Date(c.verifiedAt).toLocaleDateString()]}),c.status==="closed"&&c.closedAt&&e.jsxs("div",{className:"mt-2 text-xs text-right text-muted-foreground",children:["Completed on: ",new Date(c.closedAt).toLocaleDateString()]})]})]},c.id))})})]})})]})]})}function t5e(t,r){return j.useReducer((s,n)=>r[s][n]??s,t)}var Lk="ScrollArea",[EH,n$e]=ws(Lk),[r5e,$a]=EH(Lk),DH=j.forwardRef((t,r)=>{const{__scopeScrollArea:s,type:n="hover",dir:a,scrollHideDelay:i=600,...l}=t,[o,c]=j.useState(null),[d,u]=j.useState(null),[m,h]=j.useState(null),[g,x]=j.useState(null),[p,y]=j.useState(null),[v,f]=j.useState(0),[b,N]=j.useState(0),[w,C]=j.useState(!1),[P,S]=j.useState(!1),A=$t(r,D=>c(D)),k=nd(a);return e.jsx(r5e,{scope:s,type:n,dir:k,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:u,content:m,onContentChange:h,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:w,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:y,scrollbarYEnabled:P,onScrollbarYEnabledChange:S,onCornerWidthChange:f,onCornerHeightChange:N,children:e.jsx(it.div,{dir:k,...l,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});DH.displayName=Lk;var MH="ScrollAreaViewport",IH=j.forwardRef((t,r)=>{const{__scopeScrollArea:s,children:n,nonce:a,...i}=t,l=$a(MH,s),o=j.useRef(null),c=$t(r,o,l.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(it.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});IH.displayName=MH;var Xi="ScrollAreaScrollbar",Bk=j.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=$a(Xi,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:l}=a,o=t.orientation==="horizontal";return j.useEffect(()=>(o?i(!0):l(!0),()=>{o?i(!1):l(!1)}),[o,i,l]),a.type==="hover"?e.jsx(s5e,{...n,ref:r,forceMount:s}):a.type==="scroll"?e.jsx(n5e,{...n,ref:r,forceMount:s}):a.type==="auto"?e.jsx(RH,{...n,ref:r,forceMount:s}):a.type==="always"?e.jsx(Vk,{...n,ref:r}):null});Bk.displayName=Xi;var s5e=j.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=$a(Xi,t.__scopeScrollArea),[i,l]=j.useState(!1);return j.useEffect(()=>{const o=a.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),l(!0)},u=()=>{c=window.setTimeout(()=>l(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(Rs,{present:s||i,children:e.jsx(RH,{"data-state":i?"visible":"hidden",...n,ref:r})})}),n5e=j.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=$a(Xi,t.__scopeScrollArea),i=t.orientation==="horizontal",l=Fb(()=>c("SCROLL_END"),100),[o,c]=t5e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,a.scrollHideDelay,c]),j.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let m=d[u];const h=()=>{const g=d[u];m!==g&&(c("SCROLL"),l()),m=g};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,l]),e.jsx(Rs,{present:s||o!=="hidden",children:e.jsx(Vk,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:We(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:We(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),RH=j.forwardRef((t,r)=>{const s=$a(Xi,t.__scopeScrollArea),{forceMount:n,...a}=t,[i,l]=j.useState(!1),o=t.orientation==="horizontal",c=Fb(()=>{if(s.viewport){const d=s.viewport.offsetWidth<s.viewport.scrollWidth,u=s.viewport.offsetHeight<s.viewport.scrollHeight;l(o?d:u)}},10);return fm(s.viewport,c),fm(s.content,c),e.jsx(Rs,{present:n||i,children:e.jsx(Vk,{"data-state":i?"visible":"hidden",...a,ref:r})})}),Vk=j.forwardRef((t,r)=>{const{orientation:s="vertical",...n}=t,a=$a(Xi,t.__scopeScrollArea),i=j.useRef(null),l=j.useRef(0),[o,c]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=VH(o.viewport,o.content),u={...n,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:h=>l.current=h};function m(h,g){return d5e(h,l.current,o,g)}return s==="horizontal"?e.jsx(a5e,{...u,ref:r,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,g=tM(h,o,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):s==="vertical"?e.jsx(i5e,{...u,ref:r,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,g=tM(h,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),a5e=j.forwardRef((t,r)=>{const{sizes:s,onSizesChange:n,...a}=t,i=$a(Xi,t.__scopeScrollArea),[l,o]=j.useState(),c=j.useRef(null),d=$t(r,c,i.onScrollbarXChange);return j.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx($H,{"data-orientation":"horizontal",...a,ref:d,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Rb(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),qH(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ly(l.paddingLeft),paddingEnd:Ly(l.paddingRight)}})}})}),i5e=j.forwardRef((t,r)=>{const{sizes:s,onSizesChange:n,...a}=t,i=$a(Xi,t.__scopeScrollArea),[l,o]=j.useState(),c=j.useRef(null),d=$t(r,c,i.onScrollbarYChange);return j.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),e.jsx($H,{"data-orientation":"vertical",...a,ref:d,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Rb(s)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),qH(h,m)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&l&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ly(l.paddingTop),paddingEnd:Ly(l.paddingBottom)}})}})}),[l5e,FH]=EH(Xi),$H=j.forwardRef((t,r)=>{const{__scopeScrollArea:s,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:l,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:m,...h}=t,g=$a(Xi,s),[x,p]=j.useState(null),y=$t(r,A=>p(A)),v=j.useRef(null),f=j.useRef(""),b=g.viewport,N=n.content-n.viewport,w=ds(u),C=ds(c),P=Fb(m,10);function S(A){if(v.current){const k=A.clientX-v.current.left,D=A.clientY-v.current.top;d({x:k,y:D})}}return j.useEffect(()=>{const A=k=>{const D=k.target;(x==null?void 0:x.contains(D))&&w(k,N)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[b,x,N,w]),j.useEffect(C,[n,C]),fm(x,P),fm(g.content,P),e.jsx(l5e,{scope:s,scrollbar:x,hasThumb:a,onThumbChange:ds(i),onThumbPointerUp:ds(l),onThumbPositionChange:C,onThumbPointerDown:ds(o),children:e.jsx(it.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:We(t.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),v.current=x.getBoundingClientRect(),f.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),S(A))}),onPointerMove:We(t.onPointerMove,S),onPointerUp:We(t.onPointerUp,A=>{const k=A.target;k.hasPointerCapture(A.pointerId)&&k.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=f.current,g.viewport&&(g.viewport.style.scrollBehavior=""),v.current=null})})})}),$y="ScrollAreaThumb",LH=j.forwardRef((t,r)=>{const{forceMount:s,...n}=t,a=FH($y,t.__scopeScrollArea);return e.jsx(Rs,{present:s||a.hasThumb,children:e.jsx(o5e,{ref:r,...n})})}),o5e=j.forwardRef((t,r)=>{const{__scopeScrollArea:s,style:n,...a}=t,i=$a($y,s),l=FH($y,s),{onThumbPositionChange:o}=l,c=$t(r,m=>l.onThumbChange(m)),d=j.useRef(void 0),u=Fb(()=>{d.current&&(d.current(),d.current=void 0)},100);return j.useEffect(()=>{const m=i.viewport;if(m){const h=()=>{if(u(),!d.current){const g=u5e(m,o);d.current=g,o()}};return o(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[i.viewport,u,o]),e.jsx(it.div,{"data-state":l.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:We(t.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),x=m.clientX-g.left,p=m.clientY-g.top;l.onThumbPointerDown({x,y:p})}),onPointerUp:We(t.onPointerUp,l.onThumbPointerUp)})});LH.displayName=$y;var Uk="ScrollAreaCorner",BH=j.forwardRef((t,r)=>{const s=$a(Uk,t.__scopeScrollArea),n=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&n?e.jsx(c5e,{...t,ref:r}):null});BH.displayName=Uk;var c5e=j.forwardRef((t,r)=>{const{__scopeScrollArea:s,...n}=t,a=$a(Uk,s),[i,l]=j.useState(0),[o,c]=j.useState(0),d=!!(i&&o);return fm(a.scrollbarX,()=>{var m;const u=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),fm(a.scrollbarY,()=>{var m;const u=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(u),l(u)}),d?e.jsx(it.div,{...n,ref:r,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Ly(t){return t?parseInt(t,10):0}function VH(t,r){const s=t/r;return isNaN(s)?0:s}function Rb(t){const r=VH(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-s)*r;return Math.max(n,18)}function d5e(t,r,s,n="ltr"){const a=Rb(s),i=a/2,l=r||i,o=a-l,c=s.scrollbar.paddingStart+l,d=s.scrollbar.size-s.scrollbar.paddingEnd-o,u=s.content-s.viewport,m=n==="ltr"?[0,u]:[u*-1,0];return UH([c,d],m)(t)}function tM(t,r,s="ltr"){const n=Rb(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,i=r.scrollbar.size-a,l=r.content-r.viewport,o=i-n,c=s==="ltr"?[0,l]:[l*-1,0],d=e1(t,c);return UH([0,l],[0,o])(d)}function UH(t,r){return s=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(t[1]-t[0]);return r[0]+n*(s-t[0])}}function qH(t,r){return t>0&&t<r}var u5e=(t,r=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},n=0;return function a(){const i={left:t.scrollLeft,top:t.scrollTop},l=s.left!==i.left,o=s.top!==i.top;(l||o)&&r(),s=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function Fb(t,r){const s=ds(t),n=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),j.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(s,r)},[s,r])}function fm(t,r){const s=ds(r);ms(()=>{let n=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(s)});return a.observe(t),()=>{window.cancelAnimationFrame(n),a.unobserve(t)}}},[t,s])}var zH=DH,m5e=IH,h5e=BH;const $b=j.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(zH,{ref:n,className:De("relative overflow-hidden",t),...s,children:[e.jsx(m5e,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(KH,{}),e.jsx(h5e,{})]}));$b.displayName=zH.displayName;const KH=j.forwardRef(({className:t,orientation:r="vertical",...s},n)=>e.jsx(Bk,{ref:n,orientation:r,className:De("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:e.jsx(LH,{className:"relative flex-1 rounded-full bg-border"})}));KH.displayName=Bk.displayName;function p5e({conversations:t,onSelect:r,selectedId:s}){return t.length===0?e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("p",{className:"text-muted-foreground",children:"No conversations yet"})}):e.jsx($b,{className:"h-[calc(100vh-200px)]",children:t.map(n=>{var a,i,l,o;return e.jsxs("div",{className:`flex items-center gap-3 p-3 hover:bg-secondary/50 cursor-pointer ${s===n.id?"bg-secondary":""}`,onClick:()=>r(n),children:[n.isGroup?e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(rr,{size:20,className:"text-primary"})}):e.jsx(hm,{children:e.jsx(pm,{children:((i=(a=n.participants[0])==null?void 0:a.fullName)==null?void 0:i.charAt(0))||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:n.isGroup?n.name:(l=n.participants[0])==null?void 0:l.fullName}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n.isGroup?`${n.participants.length} members`:(o=n.participants[0])==null?void 0:o.userType})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:uk(new Date(n.updatedAt),{addSuffix:!0})})]},n.id)})})}function f5e({onClose:t}){const[r,s]=j.useState([]),[n,a]=j.useState(!1),[i,l]=j.useState(""),[o,c]=j.useState([]),d=Ml(),{toast:u}=Ue();j.useEffect(()=>{(async()=>{a(!0);try{const y=await(await ie("GET","/api/users")).json();s(y)}catch(p){console.error("Failed to fetch users",p)}finally{a(!1)}})()},[]);const m=Se({mutationFn:async x=>(await ie("POST","/api/conversations",x)).json(),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/conversations"]}),u({title:"Conversation created",description:"You can now start chatting"}),t()},onError:x=>{u({title:"Failed to create conversation",description:x.message,variant:"destructive"})}}),h=x=>{if(x.preventDefault(),o.length===0){u({title:"Please select at least one user",variant:"destructive"});return}m.mutate({participantIds:o})},g=r.filter(x=>x.fullName.toLowerCase().includes(i.toLowerCase()));return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{placeholder:"Search users...",value:i,onChange:x=>l(x.target.value),disabled:n}),e.jsx($b,{className:"h-[200px] border rounded-md p-2",children:n?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(Qe,{className:"h-6 w-6 animate-spin text-primary"})}):g.length===0?e.jsx("div",{className:"flex justify-center items-center h-full text-muted-foreground",children:"No users found"}):e.jsx("div",{className:"space-y-2",children:g.map(x=>e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-md cursor-pointer hover:bg-secondary ${o.includes(x.id)?"bg-secondary":""}`,onClick:()=>{c(p=>p.includes(x.id)?p.filter(y=>y!==x.id):[...p,x.id])},children:[e.jsx(hm,{children:e.jsx(pm,{children:x.fullName[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.fullName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.userType})]})]},x.id))})})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",type:"button",onClick:t,children:"Cancel"}),e.jsx(_,{type:"submit",disabled:n||o.length===0||m.isPending,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Conversation"})]})]})}function x5e({conversationId:t,currentUserId:r}){const s=Ml(),{toast:n}=Ue(),{data:a,isLoading:i}=fe({queryKey:[`/api/conversations/${t}/messages`],queryFn:async()=>(await ie("GET",`/api/conversations/${t}/messages`)).json(),refetchInterval:5e3}),l=Se({mutationFn:async u=>(await ie("POST",`/api/conversations/${t}/messages`,{content:u})).json(),onSuccess:u=>{s.setQueryData([`/api/conversations/${t}/messages`],(m=[])=>[...m,u])},onError:u=>{n({title:"Failed to send message",description:u.message,variant:"destructive"})}}),[o,c]=j.useState(""),d=u=>{u.preventDefault(),o.trim()&&(l.mutate(o.trim()),c(""))};return i?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx($b,{className:"flex-1 p-4",children:a&&a.length===0?e.jsx("div",{className:"flex justify-center items-center h-full text-muted-foreground",children:"No messages yet. Start the conversation!"}):e.jsx("div",{className:"space-y-4",children:a==null?void 0:a.map(u=>e.jsx("div",{className:`flex ${u.sender.id===r?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${u.sender.id===r?"bg-primary text-primary-foreground":"bg-secondary"}`,children:[u.sender.id!==r&&e.jsx("p",{className:"text-xs font-medium mb-1",children:u.sender.fullName}),e.jsx("p",{children:u.content}),e.jsx("p",{className:"text-xs mt-1 opacity-70",children:uk(new Date(u.createdAt),{addSuffix:!0})})]})},u.id))})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("form",{onSubmit:d,className:"flex gap-2",children:[e.jsx($,{placeholder:"Type a message...",value:o,onChange:u=>c(u.target.value),disabled:l.isPending}),e.jsx(_,{type:"submit",size:"icon",disabled:l.isPending,children:l.isPending?e.jsx(Qe,{className:"h-5 w-5 animate-spin"}):e.jsx(P$,{className:"h-5 w-5"})})]})})]})}function g5e(){var c,d,u,m;const{user:t}=dt();Ue();const[r,s]=j.useState(null),[n,a]=j.useState(!1),{data:i,isLoading:l}=fe({queryKey:["/api/conversations"],queryFn:async()=>(await ie("GET","/api/conversations")).json()}),o=()=>n?e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"New Conversation"})}),e.jsx(E,{children:e.jsx(f5e,{onClose:()=>a(!1)})})]}):e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{children:"Conversations"}),e.jsx(_,{onClick:()=>a(!0),size:"sm",children:"New Chat"})]}),e.jsx(E,{className:"p-0",children:l?e.jsx("div",{className:"flex justify-center items-center h-48",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsx(p5e,{conversations:i||[],onSelect:s,selectedId:(r==null?void 0:r.id)||null})})]});return e.jsx("div",{className:"container py-6 h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6 h-full",children:[e.jsx("div",{className:"col-span-12 md:col-span-4 lg:col-span-3",children:o()}),e.jsx("div",{className:"col-span-12 md:col-span-8 lg:col-span-9 h-full",children:r?e.jsxs(O,{className:"h-full flex flex-col",children:[e.jsx(G,{className:"border-b py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[r.isGroup?e.jsx("div",{className:"bg-primary/10 p-2 rounded-full",children:e.jsx(rr,{size:20,className:"text-primary"})}):e.jsx(hm,{children:e.jsx(pm,{children:((d=(c=r.participants[0])==null?void 0:c.fullName)==null?void 0:d.charAt(0))||e.jsx(tn,{})})}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:r.isGroup?r.name:(u=r.participants[0])==null?void 0:u.fullName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.isGroup?`${r.participants.length} members`:(m=r.participants[0])==null?void 0:m.userType})]})]})}),e.jsx(E,{className:"flex-1 p-0",children:t&&e.jsx(x5e,{conversationId:r.id,currentUserId:t.id})})]}):e.jsx(O,{className:"h-full flex items-center justify-center",children:e.jsxs(E,{className:"text-center space-y-2",children:[e.jsx(rr,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-medium",children:"No conversation selected"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a conversation from the sidebar or create a new one"}),e.jsx(_,{onClick:()=>a(!0),className:"mt-4",children:"Start a new conversation"})]})})})]})})}const rM=Kt({materialType:R().min(1,"Material type is required"),ratePerKg:Us.number().min(.01,"Rate must be greater than 0"),description:R().optional(),isActive:tr().default(!0)});function v5e(){const{user:t}=dt(),[r,s]=j.useState(!1),[n,a]=j.useState(null),{toast:i}=Ue(),l=Ml();if((t==null?void 0:t.userType)!=="admin")return e.jsx(OF,{to:"/"});const{data:o,isLoading:c,error:d}=fe({queryKey:["/api/recycling/material-rates"],staleTime:1e3*60*5}),u=Se({mutationFn:async v=>await(await ie("POST","/api/recycling/material-rates",v)).json(),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/recycling/material-rates"]}),i({title:"Success",description:"Material rate added successfully"}),s(!1)},onError:v=>{i({title:"Error",description:v.message||"Failed to add material rate",variant:"destructive"})}}),m=Se({mutationFn:async({id:v,data:f})=>await(await ie("PUT",`/api/recycling/material-rates/${v}`,f)).json(),onSuccess:()=>{l.invalidateQueries({queryKey:["/api/recycling/material-rates"]}),i({title:"Success",description:"Material rate updated successfully"}),a(null)},onError:v=>{i({title:"Error",description:v.message||"Failed to update material rate",variant:"destructive"})}}),h=Gt({resolver:Yt(rM),defaultValues:{materialType:"",ratePerKg:0,description:"",isActive:!0}}),g=Gt({resolver:Yt(rM),defaultValues:{materialType:"",ratePerKg:0,description:"",isActive:!0}});j.useEffect(()=>{n&&g.reset({materialType:n.materialType,ratePerKg:n.ratePerKg,description:n.description||"",isActive:n.isActive})},[n,g]);const x=v=>{u.mutate(v)},p=v=>{n&&m.mutate({id:n.id,data:v})},y=v=>{m.mutate({id:v.id,data:{isActive:!v.isActive}})};return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{className:"text-2xl font-bold",children:"Recycling Material Rates"}),e.jsx(he,{children:"Manage rates for recycling materials. These rates will be used to calculate payments for recycling requests."})]}),e.jsxs(E,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(_,{onClick:()=>s(!0),children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"})," Add New Material Rate"]})}),c?e.jsx("div",{className:"flex justify-center py-10",children:e.jsx(Qe,{className:"h-10 w-10 animate-spin text-primary"})}):d?e.jsx("div",{className:"text-center py-10 text-destructive",children:"Failed to load material rates. Please try again."}):e.jsxs(Hr,{children:[e.jsx(Zh,{children:"List of recycling material rates"}),e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Material Type"}),e.jsx(xe,{className:"text-right",children:"Rate per Kg ()"}),e.jsx(xe,{children:"Description"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{children:"Last Updated"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:(o==null?void 0:o.length)===0?e.jsx(ht,{children:e.jsx(se,{colSpan:6,className:"text-center py-4",children:"No material rates found. Add your first material rate."})}):o==null?void 0:o.map(v=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:v.materialType}),e.jsxs(se,{className:"text-right",children:["",v.ratePerKg.toFixed(2)]}),e.jsx(se,{children:v.description||"-"}),e.jsx(se,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${v.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.isActive?"Active":"Inactive"})}),e.jsx(se,{children:new Date(v.updatedAt).toLocaleDateString()}),e.jsxs(se,{className:"text-right space-x-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>a(v),children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx(_,{variant:v.isActive?"destructive":"outline",size:"sm",onClick:()=>y(v),children:v.isActive?e.jsx(Es,{className:"h-4 w-4"}):e.jsx(Ks,{className:"h-4 w-4"})})]})]},v.id))})]})]})]}),e.jsx(Tt,{open:r,onOpenChange:s,children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Add New Material Rate"}),e.jsx(Xt,{children:"Enter the details for the new recycling material rate."})]}),e.jsx(Qt,{...h,children:e.jsxs("form",{onSubmit:h.handleSubmit(x),className:"space-y-4",children:[e.jsx(U,{control:h.control,name:"materialType",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Material Type"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Plastic, Copper",...v})}),e.jsx(qe,{children:"Enter the type of recycling material (plastic, copper, brass, aluminum)."}),e.jsx(H,{})]})}),e.jsx(U,{control:h.control,name:"ratePerKg",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Rate per Kg ()"}),e.jsx(V,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"0.00",...v})}),e.jsx(qe,{children:"Enter the amount in rupees paid per kilogram."}),e.jsx(H,{})]})}),e.jsx(U,{control:h.control,name:"description",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description (Optional)"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Optional description",...v})}),e.jsx(qe,{children:"Provide additional details about this material if needed."}),e.jsx(H,{})]})}),e.jsx(U,{control:h.control,name:"isActive",render:({field:v})=>e.jsxs(L,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{children:"Active Status"}),e.jsx(qe,{children:"Set whether this material rate is currently active."})]}),e.jsx(V,{children:e.jsx(gs,{checked:v.value,onCheckedChange:v.onChange})}),e.jsx(H,{})]})}),e.jsxs(zs,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsxs(_,{type:"submit",disabled:u.isPending,children:[u.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Material Rate"]})]})]})})]})}),e.jsx(Tt,{open:!!n,onOpenChange:v=>!v&&a(null),children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Edit Material Rate"}),e.jsx(Xt,{children:"Update the details for this recycling material rate."})]}),n&&e.jsx(Qt,{...g,children:e.jsxs("form",{onSubmit:g.handleSubmit(p),className:"space-y-4",children:[e.jsx(U,{control:g.control,name:"materialType",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Material Type"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Plastic, Copper",...v})}),e.jsx(qe,{children:"Enter the type of recycling material."}),e.jsx(H,{})]})}),e.jsx(U,{control:g.control,name:"ratePerKg",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Rate per Kg ()"}),e.jsx(V,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"0.00",...v})}),e.jsx(qe,{children:"Enter the amount in rupees paid per kilogram."}),e.jsx(H,{})]})}),e.jsx(U,{control:g.control,name:"description",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description (Optional)"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Optional description",...v})}),e.jsx(qe,{children:"Provide additional details about this material if needed."}),e.jsx(H,{})]})}),e.jsx(U,{control:g.control,name:"isActive",render:({field:v})=>e.jsxs(L,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{children:"Active Status"}),e.jsx(qe,{children:"Set whether this material rate is currently active."})]}),e.jsx(V,{children:e.jsx(gs,{checked:v.value,onCheckedChange:v.onChange})}),e.jsx(H,{})]})}),e.jsxs(zs,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>a(null),children:"Cancel"}),e.jsxs(_,{type:"submit",disabled:m.isPending,children:[m.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Material Rate"]})]})]})})]})})]})}const y5e=Kt({name:R().min(2,{message:"Category name must be at least 2 characters"}),description:R().optional(),icon:R().optional(),color:R().optional(),imageUrl:R().optional(),isActive:tr().default(!0),displayOrder:Us.number().optional()}),j5e=Kt({name:R().min(2,{message:"Subcategory name must be at least 2 characters"}),description:R().optional(),parentCategoryId:Us.number(),imageUrl:R().optional(),isActive:tr().default(!0),displayOrder:Us.number().optional()});function b5e(){const{toast:t}=Ue(),[r,s]=j.useState(null),[n,a]=j.useState(null),[i,l]=j.useState(!1),[o,c]=j.useState(!1),[d,u]=j.useState("categories"),[m,h]=j.useState({open:!1,id:null,type:"category"}),[g,x]=j.useState(""),[p,y]=j.useState(!0),[v,f]=j.useState(null),[b,N]=j.useState(null),[w,C]=j.useState(null),[P,S]=j.useState(null),[A,k]=j.useState(!1),D=Gt({resolver:Yt(y5e),defaultValues:{name:"",description:"",icon:"",color:"",isActive:!0,displayOrder:0}}),q=Gt({resolver:Yt(j5e),defaultValues:{name:"",description:"",parentCategoryId:0,isActive:!0,displayOrder:0}}),{data:z,isLoading:I,isError:F}=fe({queryKey:["/api/admin/grocery/categories"]}),{data:W,isLoading:X,isError:K}=fe({queryKey:["/api/admin/grocery/subcategories"]}),Z=Se({mutationFn:async({id:te,file:Oe})=>{console.log(`Uploading image for category ID: ${te}`);const Ie=new FormData;Ie.append("categoryImage",Oe);const rt=await fetch(`/api/admin/grocery/categories/${te}/image`,{method:"POST",body:Ie,credentials:"include"});if(console.log(`Upload response status: ${rt.status}`),!rt.ok){const qt=await rt.text();throw console.error("Upload error response:",qt),new Error(`Failed to upload image: ${qt}`)}return rt.json()},onSuccess:te=>{console.log("Category image upload success:",te),pe.invalidateQueries({queryKey:["/api/admin/grocery/categories"]}),f(null),N(null),k(!1),t({title:"Image uploaded",description:"The category image has been uploaded successfully."})},onError:te=>{console.error("Category image upload error:",te),k(!1),t({title:"Failed to upload image",description:te.message||"An error occurred while uploading the image.",variant:"destructive"})}}),ue=Se({mutationFn:async te=>(await ie("POST","/api/admin/grocery/categories",te)).json(),onSuccess:te=>{v&&(k(!0),Z.mutate({id:te.id,file:v})),pe.invalidateQueries({queryKey:["/api/admin/grocery/categories"]}),t({title:"Category created",description:"The category has been created successfully."}),D.reset(),f(null),N(null),l(!1)},onError:te=>{t({title:"Failed to create category",description:te.message||"An error occurred while creating the category.",variant:"destructive"})}}),Ne=Se({mutationFn:async({id:te,data:Oe})=>(await ie("PATCH",`/api/admin/grocery/categories/${te}`,Oe)).json(),onSuccess:te=>{v&&(k(!0),Z.mutate({id:te.id,file:v})),pe.invalidateQueries({queryKey:["/api/admin/grocery/categories"]}),t({title:"Category updated",description:"The category has been updated successfully."}),D.reset(),f(null),N(null),s(null),l(!1)},onError:te=>{t({title:"Failed to update category",description:te.message||"An error occurred while updating the category.",variant:"destructive"})}}),J=Se({mutationFn:async te=>(await ie("DELETE",`/api/admin/grocery/categories/${te}`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/grocery/categories"]}),t({title:"Category deleted",description:"The category has been deleted successfully."}),h({open:!1,id:null,type:"category"})},onError:te=>{t({title:"Failed to delete category",description:te.message||"An error occurred while deleting the category.",variant:"destructive"})}}),Re=Se({mutationFn:async({id:te,file:Oe})=>{console.log(`Uploading image for subcategory ID: ${te}`);const Ie=new FormData;Ie.append("subcategoryImage",Oe);const rt=await fetch(`/api/admin/grocery/subcategories/${te}/image`,{method:"POST",body:Ie,credentials:"include"});if(console.log(`Upload response status: ${rt.status}`),!rt.ok){const qt=await rt.text();throw console.error("Upload error response:",qt),new Error(`Failed to upload image: ${qt}`)}return rt.json()},onSuccess:te=>{console.log("Subcategory image upload success:",te),pe.invalidateQueries({queryKey:["/api/admin/grocery/subcategories"]}),C(null),S(null),k(!1),t({title:"Image uploaded",description:"The subcategory image has been uploaded successfully."})},onError:te=>{console.error("Subcategory image upload error:",te),k(!1),t({title:"Failed to upload image",description:te.message||"An error occurred while uploading the image.",variant:"destructive"})}}),Ee=Se({mutationFn:async te=>(await ie("POST","/api/admin/grocery/subcategories",te)).json(),onSuccess:te=>{w&&(k(!0),Re.mutate({id:te.id,file:w})),pe.invalidateQueries({queryKey:["/api/admin/grocery/subcategories"]}),t({title:"Subcategory created",description:"The subcategory has been created successfully."}),q.reset(),C(null),S(null),c(!1)},onError:te=>{t({title:"Failed to create subcategory",description:te.message||"An error occurred while creating the subcategory.",variant:"destructive"})}}),ut=Se({mutationFn:async({id:te,data:Oe})=>(await ie("PUT",`/api/admin/grocery/subcategories/${te}`,Oe)).json(),onSuccess:te=>{w&&(k(!0),Re.mutate({id:te.id,file:w})),pe.invalidateQueries({queryKey:["/api/admin/grocery/subcategories"]}),t({title:"Subcategory updated",description:"The subcategory has been updated successfully."}),q.reset(),C(null),S(null),a(null),c(!1)},onError:te=>{t({title:"Failed to update subcategory",description:te.message||"An error occurred while updating the subcategory.",variant:"destructive"})}}),ce=Se({mutationFn:async te=>(await ie("DELETE",`/api/admin/grocery/subcategories/${te}`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/grocery/subcategories"]}),t({title:"Subcategory deleted",description:"The subcategory has been deleted successfully."}),h({open:!1,id:null,type:"subcategory"})},onError:te=>{t({title:"Failed to delete subcategory",description:te.message||"An error occurred while deleting the subcategory.",variant:"destructive"})}}),ke=te=>{r?Ne.mutate({id:r.id,data:te}):ue.mutate(te)},Be=te=>{n?ut.mutate({id:n.id,data:te}):Ee.mutate(te)},Me=te=>{s(te),D.reset({name:te.name,description:te.description||"",icon:te.icon||"",color:te.color||"",isActive:te.isActive,displayOrder:te.displayOrder||0}),l(!0)},He=te=>{a(te),q.reset({name:te.name,description:te.description||"",parentCategoryId:te.parentCategoryId,isActive:te.isActive,displayOrder:te.displayOrder||0}),c(!0)},Xe=()=>{s(null),D.reset({name:"",description:"",icon:"",color:"",isActive:!0,displayOrder:0}),l(!0)},we=()=>{a(null),q.reset({name:"",description:"",parentCategoryId:z&&z.length>0?z[0].id:0,isActive:!0,displayOrder:0}),c(!0)},Bt=te=>{h({open:!0,id:te,type:"category"})},jt=te=>{h({open:!0,id:te,type:"subcategory"})},or=()=>{m.id!==null&&(m.type==="category"?J.mutate(m.id):ce.mutate(m.id))},ir=te=>{var Ie;const Oe=(Ie=te.target.files)==null?void 0:Ie[0];if(Oe){f(Oe);const rt=URL.createObjectURL(Oe);N(rt)}},Nr=te=>{var Ie;const Oe=(Ie=te.target.files)==null?void 0:Ie[0];if(Oe){C(Oe);const rt=URL.createObjectURL(Oe);S(rt)}},Jr=()=>{f(null),N(null),b&&URL.revokeObjectURL(b)},Ge=()=>{C(null),S(null),P&&URL.revokeObjectURL(P)},ee=z==null?void 0:z.filter(te=>{var rt;const Oe=te.name.toLowerCase().includes(g.toLowerCase())||((rt=te.description)==null?void 0:rt.toLowerCase().includes(g.toLowerCase()))||!1,Ie=!p||te.isActive;return Oe&&Ie}),me=W==null?void 0:W.filter(te=>{var qt;const Oe=z==null?void 0:z.find(xr=>xr.id===te.parentCategoryId),Ie=te.name.toLowerCase().includes(g.toLowerCase())||((qt=te.description)==null?void 0:qt.toLowerCase().includes(g.toLowerCase()))||!1||(Oe==null?void 0:Oe.name.toLowerCase().includes(g.toLowerCase()))||!1,rt=!p||te.isActive;return Ie&&rt}),Ce=te=>{const Oe=z==null?void 0:z.find(Ie=>Ie.id===te);return Oe?Oe.name:"Unknown"};return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Grocery Categories Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage categories and subcategories for grocery products"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{variant:d==="categories"?"default":"outline",onClick:()=>u("categories"),children:"Categories"}),e.jsx(_,{variant:d==="subcategories"?"default":"outline",onClick:()=>u("subcategories"),children:"Subcategories"})]})]}),e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-auto flex-1 max-w-sm",children:[e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search...",className:"pl-10",value:g,onChange:te=>x(te.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"active-filter",checked:p,onCheckedChange:y}),e.jsx("label",{htmlFor:"active-filter",className:"text-sm cursor-pointer",children:"Show active only"})]}),e.jsxs(_,{onClick:d==="categories"?Xe:we,className:"ml-auto",children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add ",d==="categories"?"Category":"Subcategory"]})]})]}),d==="categories"?e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Categories"}),e.jsx(he,{children:"Manage grocery product categories"})]}),e.jsx(E,{children:I?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading categories..."})]}):F?e.jsxs("div",{className:"flex justify-center items-center py-8 text-destructive",children:[e.jsx(lr,{className:"h-6 w-6 mr-2"}),"Failed to load categories"]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{className:"w-12 text-center",children:"#"}),e.jsx(xe,{children:"Name"}),e.jsx(xe,{className:"hidden md:table-cell",children:"Description"}),e.jsx(xe,{className:"hidden md:table-cell",children:"Icon"}),e.jsx(xe,{className:"text-center",children:"Status"}),e.jsx(xe,{className:"text-center",children:"Order"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:ee&&ee.length>0?ee.map((te,Oe)=>e.jsxs(ht,{children:[e.jsx(se,{className:"text-center font-medium",children:Oe+1}),e.jsx(se,{className:"font-medium",children:te.name}),e.jsx(se,{className:"hidden md:table-cell",children:te.description||"-"}),e.jsx(se,{className:"hidden md:table-cell",children:te.icon||"-"}),e.jsx(se,{className:"text-center",children:e.jsx(ae,{variant:te.isActive?"default":"outline",children:te.isActive?"Active":"Inactive"})}),e.jsx(se,{className:"text-center",children:te.displayOrder||"-"}),e.jsx(se,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>Me(te),children:e.jsx(av,{className:"h-4 w-4"})}),e.jsx(_,{variant:"destructive",size:"icon",onClick:()=>Bt(te.id),children:e.jsx(Ir,{className:"h-4 w-4"})})]})})]},te.id)):e.jsx(ht,{children:e.jsx(se,{colSpan:7,className:"text-center py-6 text-muted-foreground",children:g||!p?"No categories match your search":"No categories found"})})})]})})})]}):e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Subcategories"}),e.jsx(he,{children:"Manage grocery product subcategories"})]}),e.jsx(E,{children:X?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading subcategories..."})]}):K?e.jsxs("div",{className:"flex justify-center items-center py-8 text-destructive",children:[e.jsx(lr,{className:"h-6 w-6 mr-2"}),"Failed to load subcategories"]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{className:"w-12 text-center",children:"#"}),e.jsx(xe,{children:"Name"}),e.jsx(xe,{className:"hidden md:table-cell",children:"Description"}),e.jsx(xe,{children:"Parent Category"}),e.jsx(xe,{className:"text-center",children:"Status"}),e.jsx(xe,{className:"text-center",children:"Order"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:me&&me.length>0?me.map((te,Oe)=>e.jsxs(ht,{children:[e.jsx(se,{className:"text-center font-medium",children:Oe+1}),e.jsx(se,{className:"font-medium",children:te.name}),e.jsx(se,{className:"hidden md:table-cell",children:te.description||"-"}),e.jsx(se,{children:Ce(te.parentCategoryId)}),e.jsx(se,{className:"text-center",children:e.jsx(ae,{variant:te.isActive?"default":"outline",children:te.isActive?"Active":"Inactive"})}),e.jsx(se,{className:"text-center",children:te.displayOrder||"-"}),e.jsx(se,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>He(te),children:e.jsx(av,{className:"h-4 w-4"})}),e.jsx(_,{variant:"destructive",size:"icon",onClick:()=>jt(te.id),children:e.jsx(Ir,{className:"h-4 w-4"})})]})})]},te.id)):e.jsx(ht,{children:e.jsx(se,{colSpan:7,className:"text-center py-6 text-muted-foreground",children:g||!p?"No subcategories match your search":"No subcategories found"})})})]})})})]}),e.jsx(Tt,{open:i,onOpenChange:l,children:e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:r?"Edit Category":"Create Category"}),e.jsx(Xt,{children:r?"Update the existing category details":"Add a new grocery product category"})]}),e.jsx(Qt,{...D,children:e.jsxs("form",{onSubmit:D.handleSubmit(ke),className:"space-y-4",children:[e.jsx(U,{control:D.control,name:"name",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Vegetables, Fruits",...te})}),e.jsx(H,{})]})}),e.jsx(U,{control:D.control,name:"description",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Brief description of the category",...te,value:te.value||""})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:D.control,name:"icon",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Icon"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., , ",...te,value:te.value||""})}),e.jsx(qe,{children:"Use emoji or icon code"}),e.jsx(H,{})]})}),e.jsx(U,{control:D.control,name:"color",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Color Class"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., bg-green-100",...te,value:te.value||""})}),e.jsx(qe,{children:"CSS class for styling"}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"categoryImage",children:"Category Image"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[b?e.jsxs("div",{className:"relative w-full max-w-[200px] h-[150px] rounded-md overflow-hidden",children:[e.jsx("img",{src:b,alt:"Category preview",className:"w-full h-full object-cover"}),e.jsx(_,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:Jr,children:e.jsx(Ir,{className:"h-4 w-4"})})]}):r!=null&&r.imageUrl?e.jsxs("div",{className:"relative w-full max-w-[200px] h-[150px] rounded-md overflow-hidden",children:[e.jsx("img",{src:r.imageUrl,alt:"Category image",className:"w-full h-full object-cover"}),e.jsx(_,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:Jr,children:e.jsx(Ir,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 rounded-md p-4 h-[150px] max-w-[200px]",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(P_,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500",children:"No image uploaded"})]})}),e.jsxs("div",{children:[e.jsx($,{id:"categoryImage",type:"file",accept:"image/*",onChange:ir,className:"max-w-[300px]"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload a JPG, PNG, or GIF image (max 2MB)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:D.control,name:"displayOrder",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Display Order"}),e.jsx(V,{children:e.jsx($,{type:"number",...te,value:te.value===void 0?"0":te.value.toString(),onChange:Oe=>te.onChange(parseInt(Oe.target.value)||0)})}),e.jsx(qe,{children:"Order of appearance (lower first)"}),e.jsx(H,{})]})}),e.jsx(U,{control:D.control,name:"isActive",render:({field:te})=>e.jsxs(L,{className:"flex flex-row items-end space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(gs,{checked:te.value,onCheckedChange:te.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Active"}),e.jsx(qe,{children:"Show this category to users"})]})]})})]}),e.jsx(zs,{children:e.jsxs(_,{type:"submit",disabled:ue.isPending||Ne.isPending,children:[(ue.isPending||Ne.isPending)&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Update Category":"Create Category"]})})]})})]})}),e.jsx(Tt,{open:o,onOpenChange:c,children:e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:n?"Edit Subcategory":"Create Subcategory"}),e.jsx(Xt,{children:n?"Update the existing subcategory details":"Add a new grocery product subcategory"})]}),e.jsx(Qt,{...q,children:e.jsxs("form",{onSubmit:q.handleSubmit(Be),className:"space-y-4",children:[e.jsx(U,{control:q.control,name:"name",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Subcategory Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Leafy Vegetables, Exotic Fruits",...te})}),e.jsx(H,{})]})}),e.jsx(U,{control:q.control,name:"description",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Brief description of the subcategory",...te,value:te.value||""})}),e.jsx(H,{})]})}),e.jsx(U,{control:q.control,name:"parentCategoryId",render:({field:te})=>{var Oe;return e.jsxs(L,{children:[e.jsx(B,{children:"Parent Category"}),e.jsxs(je,{onValueChange:Ie=>te.onChange(parseInt(Ie)),defaultValue:((Oe=te.value)==null?void 0:Oe.toString())||"",children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a parent category"})})}),e.jsx(ve,{children:z==null?void 0:z.map(Ie=>e.jsx(T,{value:Ie.id.toString(),children:Ie.name},Ie.id))})]}),e.jsx(H,{})]})}}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"subcategoryImage",children:"Subcategory Image"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[P?e.jsxs("div",{className:"relative w-full max-w-[200px] h-[150px] rounded-md overflow-hidden",children:[e.jsx("img",{src:P,alt:"Subcategory preview",className:"w-full h-full object-cover"}),e.jsx(_,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:Ge,children:e.jsx(Ir,{className:"h-4 w-4"})})]}):n!=null&&n.imageUrl?e.jsxs("div",{className:"relative w-full max-w-[200px] h-[150px] rounded-md overflow-hidden",children:[e.jsx("img",{src:n.imageUrl,alt:"Subcategory image",className:"w-full h-full object-cover"}),e.jsx(_,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:Ge,children:e.jsx(Ir,{className:"h-4 w-4"})})]}):e.jsx("div",{className:"flex items-center justify-center border-2 border-dashed border-gray-300 rounded-md p-4 h-[150px] max-w-[200px]",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(P_,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500",children:"No image uploaded"})]})}),e.jsxs("div",{children:[e.jsx($,{id:"subcategoryImage",type:"file",accept:"image/*",onChange:Nr,className:"max-w-[300px]"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Upload a JPG, PNG, or GIF image (max 2MB)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:q.control,name:"displayOrder",render:({field:te})=>e.jsxs(L,{children:[e.jsx(B,{children:"Display Order"}),e.jsx(V,{children:e.jsx($,{type:"number",...te,value:te.value===void 0?"0":te.value.toString(),onChange:Oe=>te.onChange(parseInt(Oe.target.value)||0)})}),e.jsx(qe,{children:"Order of appearance (lower first)"}),e.jsx(H,{})]})}),e.jsx(U,{control:q.control,name:"isActive",render:({field:te})=>e.jsxs(L,{className:"flex flex-row items-end space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(gs,{checked:te.value,onCheckedChange:te.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Active"}),e.jsx(qe,{children:"Show this subcategory to users"})]})]})})]}),e.jsx(zs,{children:e.jsxs(_,{type:"submit",disabled:Ee.isPending||ut.isPending,children:[(Ee.isPending||ut.isPending)&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Update Subcategory":"Create Subcategory"]})})]})})]})}),e.jsx(Tt,{open:m.open,onOpenChange:te=>h({...m,open:te}),children:e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Confirm Deletion"}),e.jsxs(Xt,{children:["Are you sure you want to delete this ",m.type,"? This action cannot be undone."]})]}),e.jsxs(zs,{className:"gap-2 sm:gap-0",children:[e.jsx(_,{variant:"outline",onClick:()=>h({open:!1,id:null,type:"category"}),children:"Cancel"}),e.jsxs(_,{variant:"destructive",onClick:or,disabled:J.isPending||ce.isPending,children:[(J.isPending||ce.isPending)&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})})]})}var HH="AlertDialog",[N5e,a$e]=ws(HH,[W8]),Ll=W8(),WH=t=>{const{__scopeAlertDialog:r,...s}=t,n=Ll(r);return e.jsx(HC,{...n,...s,modal:!0})};WH.displayName=HH;var w5e="AlertDialogTrigger",S5e=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,a=Ll(s);return e.jsx(WC,{...a,...n,ref:r})});S5e.displayName=w5e;var C5e="AlertDialogPortal",GH=t=>{const{__scopeAlertDialog:r,...s}=t,n=Ll(r);return e.jsx(GC,{...n,...s})};GH.displayName=C5e;var P5e="AlertDialogOverlay",YH=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,a=Ll(s);return e.jsx(Ff,{...a,...n,ref:r})});YH.displayName=P5e;var cu="AlertDialogContent",[k5e,A5e]=N5e(cu),_5e=tX("AlertDialogContent"),QH=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,children:n,...a}=t,i=Ll(s),l=j.useRef(null),o=$t(r,l),c=j.useRef(null);return e.jsx(Kse,{contentName:cu,titleName:XH,docsSlug:"alert-dialog",children:e.jsx(k5e,{scope:s,cancelRef:c,children:e.jsxs($f,{role:"alertdialog",...i,...a,ref:o,onOpenAutoFocus:We(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(_5e,{children:n}),e.jsx(O5e,{contentRef:l})]})})})});QH.displayName=cu;var XH="AlertDialogTitle",ZH=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,a=Ll(s);return e.jsx(Lf,{...a,...n,ref:r})});ZH.displayName=XH;var JH="AlertDialogDescription",eW=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,a=Ll(s);return e.jsx(Bf,{...a,...n,ref:r})});eW.displayName=JH;var T5e="AlertDialogAction",tW=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,a=Ll(s);return e.jsx(Vf,{...a,...n,ref:r})});tW.displayName=T5e;var rW="AlertDialogCancel",sW=j.forwardRef((t,r)=>{const{__scopeAlertDialog:s,...n}=t,{cancelRef:a}=A5e(rW,s),i=Ll(s),l=$t(r,a);return e.jsx(Vf,{...i,...n,ref:l})});sW.displayName=rW;var O5e=({contentRef:t})=>{const r=`\`${cu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${cu}\` by passing a \`${JH}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${cu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},E5e=WH,D5e=GH,nW=YH,aW=QH,iW=tW,lW=sW,oW=ZH,cW=eW;const sM=E5e,M5e=D5e,dW=j.forwardRef(({className:t,...r},s)=>e.jsx(nW,{className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s}));dW.displayName=nW.displayName;const ZS=j.forwardRef(({className:t,...r},s)=>e.jsxs(M5e,{children:[e.jsx(dW,{}),e.jsx(aW,{ref:s,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));ZS.displayName=aW.displayName;const JS=({className:t,...r})=>e.jsx("div",{className:De("flex flex-col space-y-2 text-center sm:text-left",t),...r});JS.displayName="AlertDialogHeader";const e2=({className:t,...r})=>e.jsx("div",{className:De("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});e2.displayName="AlertDialogFooter";const t2=j.forwardRef(({className:t,...r},s)=>e.jsx(oW,{ref:s,className:De("text-lg font-semibold",t),...r}));t2.displayName=oW.displayName;const r2=j.forwardRef(({className:t,...r},s)=>e.jsx(cW,{ref:s,className:De("text-sm text-muted-foreground",t),...r}));r2.displayName=cW.displayName;const s2=j.forwardRef(({className:t,...r},s)=>e.jsx(iW,{ref:s,className:De(Op(),t),...r}));s2.displayName=iW.displayName;const n2=j.forwardRef(({className:t,...r},s)=>e.jsx(lW,{ref:s,className:De(Op({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));n2.displayName=lW.displayName;const I5e=Kt({name:R().min(3,{message:"Name must be at least 3 characters"}),description:R().min(10,{message:"Description must be at least 10 characters"}),category:R().min(1,{message:"Category is required"}),subcategory:R().optional(),categoryId:ct().optional(),subcategoryId:ct().optional(),price:Us.number().min(.01,{message:"Price must be greater than 0"}),discountedPrice:Us.number().min(0).optional(),farmerId:ct().optional(),stock:Us.number().min(0,{message:"Stock must be 0 or greater"}),unit:R().min(1,{message:"Unit is required"}),isOrganic:tr().default(!1),district:R().min(1,{message:"District is required"}),imageUrl:R().optional(),deliveryOption:R().default("both"),availableAreas:R().optional(),status:R().default("active")});function R5e(){var ue,Ne;const{toast:t}=Ue(),{user:r}=dt(),[s,n]=j.useState(!1),[a,i]=j.useState(!1),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(null),[h,g]=j.useState(null),[x,p]=j.useState(null),y=(r==null?void 0:r.userType)==="admin",{data:v,isLoading:f,error:b,isError:N}=fe({queryKey:["/api/admin/grocery/products",u,h],queryFn:async()=>{try{let J="/api/admin/grocery/products";const Re=new URLSearchParams;u&&Re.append("status",u),h&&Re.append("category",h);const Ee=Re.toString();Ee&&(J+=`?${Ee}`),console.log("DEBUG: Fetching products from:",J);const ut=await fetch(J,{credentials:"include"});if(console.log("DEBUG: Response status:",ut.status),!ut.ok){const ke=await ut.text();throw console.error("DEBUG: API Error:",ke),new Error(`Failed to fetch products: ${ke}`)}const ce=await ut.json();return console.log("DEBUG: Products response data:",ce),console.log("DEBUG: Products response type:",typeof ce),console.log("DEBUG: Is response array?",Array.isArray(ce)),Array.isArray(ce)&&ce.length>0?console.log("DEBUG: First product:",ce[0]):console.log("DEBUG: Empty products array or not an array"),ce}catch(J){throw console.error("DEBUG: Error in queryFn:",J),J}},retry:!1}),{data:w}=fe({queryKey:["/api/admin/grocery/categories"],queryFn:async()=>{const J=await fetch("/api/admin/grocery/categories",{credentials:"include"});if(!J.ok)throw new Error("Failed to fetch categories");return J.json()}}),[C,P]=j.useState(null),{data:S}=fe({queryKey:["/api/admin/grocery/subcategories",C],queryFn:async()=>{if(!C)return[];const J=await fetch(`/api/admin/grocery/subcategories?parentCategoryId=${C}`,{credentials:"include"});if(!J.ok)throw new Error("Failed to fetch subcategories");return J.json()},enabled:!!C}),A=Gt({resolver:Yt(I5e),defaultValues:{name:"",description:"",category:"",price:0,stock:0,unit:"kg",isOrganic:!1,district:"",deliveryOption:"both",status:"active"}});j.useEffect(()=>{c&&l?(A.reset({name:l.name,description:l.description,category:l.category,subcategory:l.subcategory,categoryId:l.categoryId,subcategoryId:l.subcategoryId,price:l.price,discountedPrice:l.discountedPrice,farmerId:l.farmerId,stock:l.stock,unit:l.unit,isOrganic:l.isOrganic,district:l.district,imageUrl:l.imageUrl,deliveryOption:l.deliveryOption,availableAreas:l.availableAreas,status:l.status}),l.categoryId&&P(l.categoryId),p(null)):c||(A.reset(),P(null),p(null))},[c,l,A]);const k=Se({mutationFn:async J=>{if(x){const Ee=new FormData;Ee.append("productData",JSON.stringify(J)),Ee.append("productImage",x);const ut=await fetch("/api/admin/grocery/products/with-image",{method:"POST",credentials:"include",body:Ee});if(!ut.ok){const ce=await ut.text();throw new Error(ce||"Failed to create product")}return ut.json()}return(await ie("POST","/api/admin/grocery/products",J)).json()},onSuccess:()=>{t({title:"Product created",description:"The product has been created successfully"}),pe.invalidateQueries({queryKey:["/api/admin/grocery/products"]}),d(!1)},onError:J=>{t({title:"Failed to create product",description:J.message||"Something went wrong",variant:"destructive"})}}),D=Se({mutationFn:async({id:J,data:Re})=>{if(x){const ut=new FormData;ut.append("productData",JSON.stringify(Re)),ut.append("productImage",x);const ce=await fetch(`/api/admin/grocery/products/${J}/with-image`,{method:"PUT",credentials:"include",body:ut});if(!ce.ok){const ke=await ce.text();throw new Error(ke||"Failed to update product")}return ce.json()}return(await ie("PUT",`/api/admin/grocery/products/${J}`,Re)).json()},onSuccess:()=>{t({title:"Product updated",description:"The product has been updated successfully"}),pe.invalidateQueries({queryKey:["/api/admin/grocery/products"]}),d(!1)},onError:J=>{t({title:"Failed to update product",description:J.message||"Something went wrong",variant:"destructive"})}}),q=Se({mutationFn:async J=>(await ie("DELETE",`/api/admin/grocery/products/${J}`)).json(),onSuccess:()=>{t({title:"Product deleted",description:"The product has been deleted successfully"}),pe.invalidateQueries({queryKey:["/api/admin/grocery/products"]}),n(!1)},onError:J=>{t({title:"Failed to delete product",description:J.message||"Something went wrong",variant:"destructive"})}}),z=Se({mutationFn:async()=>(await ie("DELETE","/api/admin/grocery/products-all")).json(),onSuccess:()=>{t({title:"All products deleted",description:"All grocery products have been successfully removed"}),typeof window<"u"&&localStorage.removeItem("groceryCart"),pe.invalidateQueries({queryKey:["/api/admin/grocery/products"]}),i(!1)},onError:J=>{t({title:"Failed to delete all products",description:J.message||"Something went wrong",variant:"destructive"})}}),I=J=>{l?D.mutate({id:l.id,data:J}):k.mutate(J)},[,F]=br(),W=()=>{F("/admin/grocery/products-new")},X=J=>{o(J),d(!0)},K=J=>{o(J),n(!0)},Z=J=>{A.setValue("category",J);const Re=w==null?void 0:w.find(Ee=>Ee.id.toString()===J);Re&&(P(Re.id),A.setValue("categoryId",Re.id))};return e.jsx("div",{className:"container mx-auto px-4 py-6",children:y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Grocery Products Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage grocery products inventory"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"destructive",onClick:()=>i(!0),disabled:(v==null?void 0:v.length)===0,children:[e.jsx(T$,{className:"mr-2 h-4 w-4"})," Remove All Products"]}),e.jsxs(_,{onClick:W,children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"})," Add Product"]})]})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(G,{children:e.jsx(Y,{children:"Filter Products"})}),e.jsx(E,{children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx(re,{htmlFor:"status",children:"Status"}),e.jsxs(je,{value:u||"all-statuses",onValueChange:J=>m(J==="all-statuses"?null:J),children:[e.jsx(ge,{className:"w-[200px]",children:e.jsx(be,{placeholder:"All statuses"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all-statuses",children:"All statuses"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-1.5",children:[e.jsx(re,{htmlFor:"category",children:"Category"}),e.jsxs(je,{value:h||"all-categories",onValueChange:J=>g(J==="all-categories"?null:J),children:[e.jsx(ge,{className:"w-[200px]",children:e.jsx(be,{placeholder:"All categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all-categories",children:"All categories"}),w==null?void 0:w.map(J=>e.jsx(T,{value:J.name,children:J.name},J.id))]})]})]})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Grocery Products"}),e.jsx(he,{children:"Manage your grocery products inventory"})]}),e.jsx(E,{children:f?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):b?e.jsxs("div",{className:"flex justify-center items-center py-10 flex-col",children:[e.jsx(lr,{className:"h-8 w-8 text-destructive mb-2"}),e.jsx("p",{className:"text-center text-muted-foreground",children:"Failed to load products. Please try again."}),e.jsx("div",{className:"mt-4 p-4 bg-red-50 text-red-900 rounded-md max-w-2xl overflow-auto text-sm",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:e.jsx("code",{children:b.toString()})})})]}):(v==null?void 0:v.length)===0?e.jsxs("div",{className:"flex justify-center items-center py-10 flex-col",children:[e.jsx(ft,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-center text-muted-foreground",children:"No products found."}),e.jsx(_,{variant:"outline",className:"mt-4",onClick:W,children:"Add your first product"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Name"}),e.jsx(xe,{children:"Category"}),e.jsx(xe,{children:"Price"}),e.jsx(xe,{children:"Stock"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:v==null?void 0:v.map(J=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:J.name}),e.jsx(se,{children:J.category}),e.jsx(se,{children:J.discountedPrice?e.jsxs("div",{children:[e.jsxs("span",{className:"line-through text-muted-foreground",children:["",J.price.toFixed(2)]}),e.jsxs("span",{className:"ml-2 font-medium",children:["",J.discountedPrice.toFixed(2)]})]}):e.jsxs("span",{children:["",J.price.toFixed(2)]})}),e.jsxs(se,{children:[J.stock," ",J.unit]}),e.jsx(se,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${J.status==="active"?"bg-green-100 text-green-800":J.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:J.status.charAt(0).toUpperCase()+J.status.slice(1)})}),e.jsx(se,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>X(J),children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>K(J),children:e.jsx(Ir,{className:"h-4 w-4"})})]})})]},J.id))})]})})})]}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:l?"Edit Product":"Add New Product"}),e.jsx(Xt,{children:l?"Update the details of an existing product":"Fill in the details to add a new product"})]}),e.jsxs("form",{onSubmit:A.handleSubmit(I),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"name",children:"Product Name"}),e.jsx($,{id:"name",placeholder:"Enter product name",...A.register("name")}),A.formState.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"category",children:"Category"}),e.jsxs(je,{value:((ue=A.watch("categoryId"))==null?void 0:ue.toString())||"",onValueChange:Z,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a category"})}),e.jsx(ve,{children:w==null?void 0:w.map(J=>e.jsx(T,{value:J.id.toString(),children:J.name},J.id))})]}),A.formState.errors.category&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.category.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"subcategory",children:"Subcategory"}),e.jsxs(je,{value:((Ne=A.watch("subcategoryId"))==null?void 0:Ne.toString())||"",onValueChange:J=>{A.setValue("subcategoryId",Number(J));const Re=S==null?void 0:S.find(Ee=>Ee.id.toString()===J);Re&&A.setValue("subcategory",Re.name)},disabled:!C||!(S!=null&&S.length),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a subcategory"})}),e.jsx(ve,{children:S==null?void 0:S.map(J=>e.jsx(T,{value:J.id.toString(),children:J.name},J.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"price",children:"Price ()"}),e.jsx($,{id:"price",type:"number",step:"0.01",placeholder:"Enter price",...A.register("price")}),A.formState.errors.price&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.price.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"discountedPrice",children:"Discounted Price () (Optional)"}),e.jsx($,{id:"discountedPrice",type:"number",step:"0.01",placeholder:"Enter discounted price",...A.register("discountedPrice")}),A.formState.errors.discountedPrice&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.discountedPrice.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"stock",children:"Stock"}),e.jsx($,{id:"stock",type:"number",placeholder:"Enter available stock",...A.register("stock")}),A.formState.errors.stock&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.stock.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"unit",children:"Unit"}),e.jsxs(je,{value:A.watch("unit"),onValueChange:J=>A.setValue("unit",J),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select unit"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"kg",children:"Kilogram (kg)"}),e.jsx(T,{value:"g",children:"Gram (g)"}),e.jsx(T,{value:"l",children:"Liter (l)"}),e.jsx(T,{value:"ml",children:"Milliliter (ml)"}),e.jsx(T,{value:"pcs",children:"Pieces (pcs)"}),e.jsx(T,{value:"box",children:"Box"}),e.jsx(T,{value:"pack",children:"Pack"}),e.jsx(T,{value:"dozen",children:"Dozen"})]})]}),A.formState.errors.unit&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.unit.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"district",children:"District"}),e.jsx($,{id:"district",placeholder:"Enter source district",...A.register("district")}),A.formState.errors.district&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.district.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"imageUpload",children:"Product Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[e.jsx($,{id:"imageUpload",type:"file",accept:"image/*",onChange:J=>{var Ee;const Re=(Ee=J.target.files)==null?void 0:Ee[0];if(Re){p(Re);const ut=URL.createObjectURL(Re);A.setValue("imageUrl",ut)}},className:"cursor-pointer"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accepted formats: JPG, PNG, GIF. Max size: 5MB"})]}),A.watch("imageUrl")&&e.jsxs("div",{className:"relative h-24 w-24 overflow-hidden rounded-md border",children:[e.jsx("img",{src:A.watch("imageUrl"),alt:"Product preview",className:"h-full w-full object-cover"}),e.jsx("button",{type:"button",className:"absolute right-1 top-1 rounded-full bg-foreground/10 p-1 backdrop-blur-sm",onClick:()=>{A.setValue("imageUrl",""),p(null)},children:e.jsx(Ir,{className:"h-4 w-4"})})]})]}),e.jsx($,{id:"imageUrl",type:"hidden",...A.register("imageUrl")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"deliveryOption",children:"Delivery Option"}),e.jsxs(je,{value:A.watch("deliveryOption"),onValueChange:J=>A.setValue("deliveryOption",J),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select delivery option"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"direct",children:"Direct only"}),e.jsx(T,{value:"service",children:"Service only"}),e.jsx(T,{value:"both",children:"Both"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"status",children:"Status"}),e.jsxs(je,{value:A.watch("status"),onValueChange:J=>A.setValue("status",J),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"pending",children:"Pending"})]})]})]})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(re,{htmlFor:"description",children:"Product Description"}),e.jsx(at,{id:"description",placeholder:"Enter product description",className:"min-h-[100px]",...A.register("description")}),A.formState.errors.description&&e.jsx("p",{className:"text-sm text-destructive",children:A.formState.errors.description.message})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(re,{htmlFor:"availableAreas",children:"Available Areas (Optional)"}),e.jsx(at,{id:"availableAreas",placeholder:"Enter comma-separated list of areas where this product is available",className:"min-h-[60px]",...A.register("availableAreas")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"isOrganic",checked:A.watch("isOrganic"),onCheckedChange:J=>A.setValue("isOrganic",J)}),e.jsx(re,{htmlFor:"isOrganic",children:"Organic Product"})]}),e.jsxs(zs,{children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(_,{type:"submit",disabled:k.isPending||D.isPending,children:[(k.isPending||D.isPending)&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),l?"Update Product":"Create Product"]})]})]})]})}),e.jsx(sM,{open:s,onOpenChange:n,children:e.jsxs(ZS,{children:[e.jsxs(JS,{children:[e.jsx(t2,{children:"Are you sure?"}),e.jsxs(r2,{children:['This will deactivate the product "',l==null?void 0:l.name,'". The product will be marked as inactive but remain in the database.']})]}),e.jsxs(e2,{children:[e.jsx(n2,{children:"Cancel"}),e.jsxs(s2,{onClick:()=>l&&q.mutate(l.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:q.isPending,children:[q.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Deactivate"]})]})]})}),e.jsx(sM,{open:a,onOpenChange:i,children:e.jsxs(ZS,{children:[e.jsxs(JS,{children:[e.jsx(t2,{children:"Remove All Products"}),e.jsx(r2,{children:"This action cannot be undone. This will permanently delete ALL products from the database and clear any grocery carts in localStorage."})]}),e.jsxs(e2,{children:[e.jsx(n2,{children:"Cancel"}),e.jsx(s2,{onClick:()=>z.mutate(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:z.isPending,children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"})," Removing All Products..."]}):"Yes, Remove All Products"})]})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsx(A$,{className:"h-16 w-16 text-destructive mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Administrator Access Required"}),e.jsx("p",{className:"text-center text-muted-foreground max-w-md mb-6",children:"You need administrator privileges to access this page. Please contact system admin if you believe you should have access."}),e.jsx(_,{asChild:!0,children:e.jsx(Ot,{href:"/dashboard",children:"Return to Dashboard"})})]})})}const F5e=Kt({name:R().min(3,{message:"Name must be at least 3 characters"}),description:R().min(10,{message:"Description must be at least 10 characters"}),category:R().min(1,{message:"Category is required"}),subcategory:R().optional(),categoryId:ct().optional(),subcategoryId:ct().optional(),price:Us.number().min(0).optional(),discountedPrice:Us.number().min(0).optional(),farmerId:ct().optional(),stock:Us.number().min(0,{message:"Stock must be 0 or greater"}),unit:R().min(1,{message:"Unit is required"}),isOrganic:tr().default(!1),district:R().min(1,{message:"District is required"}),taluk:R().optional(),pincode:R().optional(),imageUrl:R().optional(),deliveryOption:R().default("both"),availableAreas:R().optional(),status:R().default("active")});function $5e(){var v;const{user:t}=dt(),{toast:r}=Ue(),[,s]=br(),[n,a]=j.useState(!1),[i,l]=j.useState(null),o=(t==null?void 0:t.userType)==="admin",c=Gt({resolver:Yt(F5e),defaultValues:{name:"",description:"",category:"",price:0,stock:0,unit:"kg",isOrganic:!1,district:"",taluk:"",pincode:"",deliveryOption:"both",status:"active"}}),{data:d,isLoading:u}=fe({queryKey:["/api/admin/grocery/categories"],queryFn:async()=>{const f=await fetch("/api/admin/grocery/categories",{credentials:"include"});if(!f.ok)throw new Error("Failed to fetch categories");return f.json()}}),{data:m,isLoading:h}=fe({queryKey:["/api/admin/grocery/subcategories",i],queryFn:async()=>{if(!i)return[];const f=await fetch(`/api/admin/grocery/subcategories?parentCategoryId=${i}`,{credentials:"include"});if(!f.ok)throw new Error("Failed to fetch subcategories");return f.json()},enabled:!!i}),g=Se({mutationFn:async f=>(await ie("POST","/api/admin/grocery/products",f)).json(),onSuccess:()=>{r({title:"Product created",description:"The product has been created successfully"}),pe.invalidateQueries({queryKey:["/api/admin/grocery/products"]}),s("/admin/grocery/products")},onError:f=>{r({title:"Failed to create product",description:f.message||"Something went wrong",variant:"destructive"})}}),x=f=>{g.mutate(f)},p=f=>{c.setValue("category",f);const b=d==null?void 0:d.find(N=>N.id.toString()===f);b&&(l(b.id),c.setValue("categoryId",b.id))},y=async f=>{var w;const b=(w=f.target.files)==null?void 0:w[0];if(!b)return;const N=new FormData;N.append("image",b),a(!0);try{const C=await fetch("/api/admin/upload",{method:"POST",body:N,credentials:"include"});if(!C.ok)throw new Error("Upload failed");const P=await C.json();c.setValue("imageUrl",P.imageUrl),r({title:"Image uploaded",description:"Your image has been uploaded successfully"})}catch{r({title:"Upload failed",description:"There was an error uploading your image",variant:"destructive"})}finally{a(!1)}};return o?e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Add New Product"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new grocery product"})]}),e.jsx(_,{variant:"outline",asChild:!0,children:e.jsxs(Ot,{href:"/admin/grocery/products",children:[e.jsx(us,{className:"mr-2 h-4 w-4"})," Back to Products"]})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Product Information"}),e.jsx(he,{children:"Fill in the details below to add a new product to your inventory"})]}),e.jsx(E,{children:e.jsxs("form",{onSubmit:c.handleSubmit(x),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"name",children:"Product Name"}),e.jsx($,{id:"name",placeholder:"Enter product name",...c.register("name")}),c.formState.errors.name&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"category",children:"Category"}),e.jsxs(je,{value:((v=c.watch("categoryId"))==null?void 0:v.toString())||"",onValueChange:p,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a category"})}),e.jsx(ve,{children:u?e.jsxs("div",{className:"flex items-center justify-center p-2",children:[e.jsx(Qe,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{children:"Loading categories..."})]}):(d==null?void 0:d.length)>0?d.map(f=>e.jsx(T,{value:f.id.toString(),children:f.name},f.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:"No categories found"})})]}),c.formState.errors.category&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.category.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"price",children:"Price ()"}),e.jsx($,{id:"price",type:"number",step:"0.01",placeholder:"0.00",...c.register("price")}),c.formState.errors.price&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.price.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"discountedPrice",children:"Discounted Price ()"}),e.jsx($,{id:"discountedPrice",type:"number",step:"0.01",placeholder:"0.00",...c.register("discountedPrice")}),c.formState.errors.discountedPrice&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.discountedPrice.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"stock",children:"Stock Quantity"}),e.jsx($,{id:"stock",type:"number",placeholder:"0",...c.register("stock")}),c.formState.errors.stock&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.stock.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"unit",children:"Unit"}),e.jsxs(je,{value:c.watch("unit"),onValueChange:f=>c.setValue("unit",f),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a unit"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"kg",children:"Kilogram (kg)"}),e.jsx(T,{value:"g",children:"Gram (g)"}),e.jsx(T,{value:"lb",children:"Pound (lb)"}),e.jsx(T,{value:"l",children:"Liter (l)"}),e.jsx(T,{value:"ml",children:"Milliliter (ml)"}),e.jsx(T,{value:"piece",children:"Piece"}),e.jsx(T,{value:"dozen",children:"Dozen"}),e.jsx(T,{value:"pack",children:"Pack"})]})]}),c.formState.errors.unit&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.unit.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"district",children:"District"}),e.jsx($,{id:"district",placeholder:"Enter district",...c.register("district")}),c.formState.errors.district&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.district.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"taluk",children:"Taluk"}),e.jsx($,{id:"taluk",placeholder:"Enter taluk",...c.register("taluk")}),c.formState.errors.taluk&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.taluk.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"pincode",children:"PIN Code"}),e.jsx($,{id:"pincode",placeholder:"Enter PIN code",maxLength:6,...c.register("pincode")}),c.formState.errors.pincode&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.pincode.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"deliveryOption",children:"Delivery Option"}),e.jsxs(je,{value:c.watch("deliveryOption"),onValueChange:f=>c.setValue("deliveryOption",f),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select delivery option"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"direct",children:"Direct Delivery Only"}),e.jsx(T,{value:"service",children:"Service Agent Only"}),e.jsx(T,{value:"both",children:"Both Options"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"status",children:"Status"}),e.jsxs(je,{value:c.watch("status"),onValueChange:f=>c.setValue("status",f),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx(gs,{id:"isOrganic",checked:c.watch("isOrganic"),onCheckedChange:f=>c.setValue("isOrganic",f)}),e.jsx(re,{htmlFor:"isOrganic",children:"Organic Product"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",placeholder:"Enter product description",rows:4,...c.register("description")}),c.formState.errors.description&&e.jsx("p",{className:"text-sm text-destructive",children:c.formState.errors.description.message})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(re,{htmlFor:"image",children:"Product Image"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"image",type:"file",accept:"image/*",onChange:y,disabled:n}),n&&e.jsx(Qe,{className:"h-4 w-4 animate-spin"})]}),c.watch("imageUrl")&&e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-green-600",children:"Image uploaded successfully!"})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",type:"button",onClick:()=>s("/admin/grocery/products"),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:g.isPending,children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Create Product"})]})]})})]})]}):e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[e.jsx(A$,{className:"h-16 w-16 text-destructive mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Administrator Access Required"}),e.jsx("p",{className:"text-center text-muted-foreground max-w-md mb-6",children:"You need administrator privileges to access this page. Please contact system admin if you believe you should have access."}),e.jsx(_,{asChild:!0,children:e.jsx(Ot,{href:"/dashboard",children:"Return to Dashboard"})})]})})}const L5e={pending:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",approved:"bg-green-100 text-green-800 hover:bg-green-200",rejected:"bg-red-100 text-red-800 hover:bg-red-200"},B5e=Kt({status:Yr(["approved","rejected"]),adminNotes:R().optional(),subcategoryId:ct().optional(),displayName:R().optional(),description:R().optional(),price:ct().optional(),imageUrl:R().optional(),isOrganic:tr().default(!1)});function V5e(){const{toast:t}=Ue(),{user:r}=dt(),[s,n]=j.useState("pending"),[a,i]=j.useState(null),[l,o]=j.useState(!1),[c,d]=j.useState(!1),{data:u,isLoading:m,error:h,refetch:g}=fe({queryKey:["/api/product-requests",s],queryFn:async()=>{const w=await fetch(`/api/product-requests?status=${s}`);if(!w.ok)throw new Error("Failed to fetch product requests");return w.json()}}),{data:x}=fe({queryKey:["/api/admin/grocery/subcategories"],queryFn:async()=>{const w=await fetch("/api/admin/grocery/subcategories");if(!w.ok)throw new Error("Failed to fetch subcategories");return w.json()}}),p=Gt({resolver:Yt(B5e),defaultValues:{status:"approved",adminNotes:"",subcategoryId:void 0,displayName:"",description:"",price:void 0,imageUrl:"",isOrganic:!1}}),y=Se({mutationFn:async w=>{const{id:C,...P}=w,S=await ie("PATCH",`/api/product-requests/${C}`,P);if(!S.ok){const A=await S.json();throw new Error(A.message||"Failed to update request")}return S.json()},onSuccess:()=>{t({title:"Request updated",description:"The product request has been processed successfully"}),p.reset(),d(!1),pe.invalidateQueries({queryKey:["/api/product-requests"]}),pe.invalidateQueries({queryKey:["/api/grocery/products"]})},onError:w=>{t({title:"Error updating request",description:w.message,variant:"destructive"})}}),v=w=>{i(w),o(!0)},f=w=>{i(w),p.reset({status:"approved",adminNotes:"",displayName:w.requestedProductName,description:w.description,imageUrl:w.imageUrl,subcategoryId:void 0,price:void 0,isOrganic:!1}),d(!0)},b=w=>{a&&y.mutate({id:a.id,...w})},N=w=>e.jsxs(ae,{className:L5e[w]||"bg-gray-100",children:[w==="pending"&&"Pending",w==="approved"&&"Approved",w==="rejected"&&"Rejected"]});return(r==null?void 0:r.userType)!=="admin"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(O,{children:e.jsxs(G,{children:[e.jsx(Y,{children:"Access Denied"}),e.jsx(he,{children:"You do not have permission to view this page. Only administrators can manage product requests."})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(nZ,{className:"h-8 w-8 text-primary"}),"Product Requests"]}),e.jsx("p",{className:"text-gray-600",children:"Review and manage product requests from farmers"})]}),e.jsxs(_,{variant:"outline",onClick:()=>g(),className:"flex items-center gap-2",children:[e.jsx(Ya,{className:"h-4 w-4"}),"Refresh"]})]}),e.jsx(nr,{defaultValue:"pending",value:s,onValueChange:n,className:"mb-6",children:e.jsxs(sr,{className:"grid w-full grid-cols-3 max-w-md",children:[e.jsxs(Ae,{value:"pending",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-400"}),"Pending"]}),e.jsxs(Ae,{value:"approved",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-green-400"}),"Approved"]}),e.jsxs(Ae,{value:"rejected",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-red-400"}),"Rejected"]})]})}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsxs(Y,{children:[s.charAt(0).toUpperCase()+s.slice(1)," Requests"]}),e.jsxs(he,{children:[s==="pending"&&"Product requests awaiting your review",s==="approved"&&"Product requests you have approved",s==="rejected"&&"Product requests you have rejected"]})]}),e.jsx(E,{children:m?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"})}):h?e.jsxs("div",{className:"text-center py-8 text-red-500",children:[e.jsx("p",{children:"Error loading requests. Please try refreshing the page."}),e.jsx(_,{variant:"outline",onClick:()=>g(),className:"mt-2",children:"Try Again"})]}):u&&u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"ID"}),e.jsx(xe,{children:"Product Name"}),e.jsx(xe,{children:"Category"}),e.jsx(xe,{children:"Unit"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{children:"Date"}),e.jsx(xe,{className:"text-right",children:"Actions"})]})}),e.jsx(Gr,{children:u.map(w=>e.jsxs(ht,{children:[e.jsx(se,{className:"font-medium",children:w.id}),e.jsx(se,{children:w.requestedProductName}),e.jsx(se,{children:w.category}),e.jsx(se,{children:w.unit}),e.jsx(se,{children:N(w.status)}),e.jsx(se,{children:new Date(w.createdAt).toLocaleDateString()}),e.jsx(se,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{variant:"ghost",size:"icon",onClick:()=>v(w),children:e.jsx(gr,{className:"h-4 w-4"})}),w.status==="pending"&&e.jsxs(_,{variant:"outline",size:"sm",className:"flex items-center gap-1",onClick:()=>f(w),children:[e.jsx(Ks,{className:"h-3.5 w-3.5"}),"Review"]})]})})]},w.id))})]})}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsxs("p",{children:["No ",s," requests found."]})})})]}),e.jsx(Tt,{open:l,onOpenChange:o,children:e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Product Request Details"}),e.jsxs(Xt,{children:["Request #",a==null?void 0:a.id," - ",a==null?void 0:a.requestedProductName]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Product Name"}),e.jsx("p",{children:a.requestedProductName})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Category"}),e.jsx("p",{children:a.category})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-sm",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Unit"}),e.jsx("p",{children:a.unit})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("p",{children:N(a.status)})]})]}),a.imageUrl&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Image"}),e.jsx("div",{className:"mt-1 h-40 w-full overflow-hidden rounded-md bg-gray-100",children:e.jsx("img",{src:a.imageUrl,alt:a.requestedProductName,className:"h-full w-full object-cover object-center"})})]}),a.adminNotes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Admin Notes"}),e.jsx("p",{className:"text-sm",children:a.adminNotes})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Created At"}),e.jsx("p",{children:new Date(a.createdAt).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Updated At"}),e.jsx("p",{children:new Date(a.updatedAt).toLocaleString()})]})]})]}),e.jsxs(zs,{children:[e.jsx(_,{variant:"outline",onClick:()=>o(!1),children:"Close"}),(a==null?void 0:a.status)==="pending"&&e.jsx(_,{onClick:()=>{o(!1),f(a)},children:"Review"})]})]})}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{className:"sm:max-w-xl",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Review Product Request"}),e.jsxs(Xt,{children:['Approve or reject the request for "',a==null?void 0:a.requestedProductName,'"']})]}),e.jsx(Qt,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(b),className:"space-y-6",children:[e.jsx(U,{control:p.control,name:"status",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Decision"}),e.jsxs(je,{onValueChange:w.onChange,defaultValue:w.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select decision"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"approved",children:"Approve Request"}),e.jsx(T,{value:"rejected",children:"Reject Request"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"adminNotes",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Admin Notes"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Add notes about this decision (optional)",...w})}),e.jsx(qe,{children:"These notes will be visible to the farmer."}),e.jsx(H,{})]})}),p.watch("status")==="approved"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Product Details"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"When approved, a new product will be created with these details"})]}),e.jsx(U,{control:p.control,name:"subcategoryId",render:({field:w})=>{var C;return e.jsxs(L,{children:[e.jsx(B,{children:"Subcategory"}),e.jsxs(je,{onValueChange:P=>w.onChange(Number(P)),value:(C=w.value)==null?void 0:C.toString(),children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select subcategory"})})}),e.jsx(ve,{children:x==null?void 0:x.map(P=>e.jsx(T,{value:P.id.toString(),children:P.name},P.id))})]}),e.jsx(H,{})]})}}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(U,{control:p.control,name:"displayName",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Display Name"}),e.jsx(V,{children:e.jsx($,{...w})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"price",render:({field:w})=>{var C;return e.jsxs(L,{children:[e.jsx(B,{children:"Base Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0.00",value:((C=w.value)==null?void 0:C.toString())||"",onChange:P=>w.onChange(parseFloat(P.target.value))})}),e.jsx(H,{})]})}})]}),e.jsx(U,{control:p.control,name:"description",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{...w})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"imageUrl",render:({field:w})=>e.jsxs(L,{children:[e.jsx(B,{children:"Image URL"}),e.jsx(V,{children:e.jsx($,{...w})}),e.jsx(H,{})]})})]}),e.jsxs(zs,{children:[e.jsx(_,{variant:"outline",type:"button",onClick:()=>d(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:y.isPending,variant:p.watch("status")==="approved"?"default":"destructive",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):p.watch("status")==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Approve Request"]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"mr-2 h-4 w-4"}),"Reject Request"]})})]})]})})]})})]})}function U5e(){var S;const{toast:t}=Ue(),{user:r}=dt(),[s,n]=j.useState("pending"),[a,i]=j.useState(""),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(""),{data:h,isLoading:g,error:x,refetch:p}=fe({queryKey:["/api/farmer-products/admin"],queryFn:async()=>{const A=await ie("GET","/api/farmer-products?includeProduct=true");if(!A.ok)throw new Error("Failed to fetch farmer product listings");return await A.json()}}),y=Se({mutationFn:async A=>{const k=await ie("PATCH",`/api/farmer-products/${A}/approve`);if(!k.ok){const D=await k.json();throw new Error(D.message||"Failed to approve listing")}return k.json()},onSuccess:()=>{t({title:"Listing approved",description:"The farmer product listing has been approved."}),p(),pe.invalidateQueries({queryKey:["/api/farmer-products"]})},onError:A=>{t({title:"Approval failed",description:A.message,variant:"destructive"})}}),v=Se({mutationFn:async({id:A,reason:k})=>{const D=await ie("PATCH",`/api/farmer-products/${A}/reject`,{reason:k});if(!D.ok){const q=await D.json();throw new Error(q.message||"Failed to reject listing")}return D.json()},onSuccess:()=>{t({title:"Listing rejected",description:"The farmer product listing has been rejected with feedback."}),d(!1),m(""),o(null),p(),pe.invalidateQueries({queryKey:["/api/farmer-products"]})},onError:A=>{t({title:"Rejection failed",description:A.message,variant:"destructive"})}}),f=Se({mutationFn:async A=>{const k=await ie("DELETE",`/api/farmer-products/${A}`);if(!k.ok){const D=await k.json();throw new Error(D.message||"Failed to delete listing")}return k.json()},onSuccess:()=>{t({title:"Listing deleted",description:"The farmer product listing has been permanently deleted."}),p(),pe.invalidateQueries({queryKey:["/api/farmer-products"]})},onError:A=>{t({title:"Delete failed",description:A.message,variant:"destructive"})}}),b=h==null?void 0:h.filter(A=>{var q,z;const k=A.status===s||s==="all",D=a===""||((q=A.product)==null?void 0:q.name.toLowerCase().includes(a.toLowerCase()))||((z=A.product)==null?void 0:z.description)&&A.product.description.toLowerCase().includes(a.toLowerCase())||A.farmerName&&A.farmerName.toLowerCase().includes(a.toLowerCase());return k&&D}),N=A=>{var k;window.confirm(`Are you sure you want to approve this listing for ${(k=A.product)==null?void 0:k.name}?`)&&y.mutate(A.id)},w=A=>{o(A),d(!0)},C=()=>{if(l){if(!u.trim()){t({title:"Reason required",description:"Please provide a reason for rejection to help the farmer understand.",variant:"destructive"});return}v.mutate({id:l.id,reason:u})}},P=A=>{window.confirm("Are you sure you want to permanently delete this listing? This cannot be undone.")&&f.mutate(A.id)};return!r||r.userType!=="admin"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(O,{className:"border-red-200",children:[e.jsxs(G,{children:[e.jsx(Y,{className:"text-red-800",children:"Access Denied"}),e.jsx(he,{children:"You don't have permission to manage farmer product listings."})]}),e.jsx(E,{children:e.jsx("p",{children:"This page is only accessible to administrators."})})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Farmer Product Listings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review and manage product listings submitted by farmers"})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search listings...",className:"pl-9",value:a,onChange:A=>i(A.target.value)})]})]}),e.jsx(nr,{defaultValue:s,value:s,onValueChange:n,className:"mb-6",children:e.jsxs(sr,{className:"grid grid-cols-4 w-full md:w-auto",children:[e.jsx(Ae,{value:"all",className:"flex items-center gap-2",children:"All"}),e.jsxs(Ae,{value:"pending",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-yellow-400"}),"Pending"]}),e.jsxs(Ae,{value:"approved",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-green-400"}),"Approved"]}),e.jsxs(Ae,{value:"rejected",className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-red-400"}),"Rejected"]})]})}),g?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Loading farmer product listings..."})]}):x?e.jsxs(O,{className:"mb-6 bg-red-50 border-red-200",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-red-800",children:"Error Loading Listings"})}),e.jsx(E,{children:e.jsx("p",{className:"text-red-600",children:x.message})}),e.jsx(pr,{children:e.jsx(_,{variant:"outline",onClick:()=>p(),children:"Try Again"})})]}):b&&b.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(A=>{var k,D,q,z;return e.jsxs(O,{className:"overflow-hidden",children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:((k=A.product)==null?void 0:k.name)||"Product"}),e.jsx(he,{children:((D=A.product)==null?void 0:D.description)||"No description available"})]}),e.jsx(ae,{className:A.status==="approved"?"bg-green-100 text-green-800":A.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:A.status})]})}),e.jsxs(E,{className:"pb-4",children:[e.jsx("div",{className:"aspect-w-16 aspect-h-9 bg-gray-100 rounded-md flex items-center justify-center mb-4",children:A.imageUrl?e.jsx("img",{src:A.imageUrl,alt:((q=A.product)==null?void 0:q.name)||"Product",className:"object-cover w-full h-full rounded-md"}):e.jsx(Qa,{className:"h-16 w-16 text-gray-300"})}),e.jsxs("div",{className:"text-sm mb-4",children:[e.jsxs("p",{className:"flex items-center gap-1 text-gray-700",children:[e.jsx(qw,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Farmer:"})," ",A.farmerName||"Unknown farmer"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Price"}),e.jsxs("p",{className:"font-medium",children:["",A.price,"/",A.unit]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Quantity"}),e.jsxs("p",{className:"font-medium",children:[A.quantity," ",A.unit]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[A.isOrganic&&e.jsxs(ae,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 flex items-center gap-1",children:[e.jsx(Vs,{className:"h-3 w-3"}),"Organic"]}),e.jsxs(ae,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(fC,{className:"h-3 w-3"}),A.sourceDistrict||((z=A.product)==null?void 0:z.district)||"Unknown district"]}),A.selfDelivery&&e.jsx(ae,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Self-delivery"})]}),A.status==="rejected"&&A.adminNotes&&e.jsxs("div",{className:"mt-3 border-l-2 border-red-400 pl-2 py-1",children:[e.jsx("p",{className:"text-xs font-medium text-red-800",children:"Rejection reason:"}),e.jsx("p",{className:"text-xs text-gray-700",children:A.adminNotes})]})]}),e.jsx(pr,{className:"flex justify-between pt-2 border-t",children:A.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"outline",size:"sm",className:"text-green-600 border-green-200 hover:bg-green-50",onClick:()=>N(A),children:[e.jsx(Mt,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:()=>w(A),children:[e.jsx(Fr,{className:"h-4 w-4 mr-1"}),"Reject"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-200 hover:bg-blue-50",onClick:()=>{var I;return window.location.href=`/farm-listings?product=${(I=A.product)==null?void 0:I.id}`},children:[e.jsx(qw,{className:"h-4 w-4 mr-1"}),"View Live"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:()=>P(A),children:[e.jsx(T$,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},A.id)})}):e.jsx(O,{className:"text-center py-12",children:e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(di,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No listings found"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:s==="all"?"There are no farmer product listings available.":`There are no ${s} product listings at the moment.`})]})})}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Reject Product Listing"}),e.jsx(Xt,{children:"Please provide a reason for rejecting this product listing. The farmer will see this feedback."})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("p",{className:"text-sm font-medium",children:(S=l==null?void 0:l.product)==null?void 0:S.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Farmer: ",l==null?void 0:l.farmerName]})]}),e.jsx(at,{placeholder:"Explain why this listing is being rejected...",className:"min-h-[100px]",value:u,onChange:A=>m(A.target.value)})]}),e.jsxs(zs,{children:[e.jsx(_,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(_,{variant:"destructive",onClick:C,disabled:v.isPending,children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Rejecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(GX,{className:"mr-2 h-4 w-4"}),"Reject Listing"]})})]})]})})]})}function q5e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(null);if(!t||t.userType!=="admin")return e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),e.jsx("p",{children:"Only administrators can access the product approval panel."})]})});const{data:a=[],isLoading:i}=fe({queryKey:["/api/admin/grocery/products/pending"]}),l=Se({mutationFn:async({productId:u,approved:m})=>(await ie("PATCH",`/api/admin/grocery/products/${u}/approval`,{adminApproved:m,status:m?"active":"inactive"})).json(),onSuccess:(u,m)=>{r({title:"Success",description:`Product ${m.approved?"approved":"rejected"} successfully.`}),pe.invalidateQueries({queryKey:["/api/admin/grocery/products/pending"]})},onError:u=>{r({title:"Error",description:u.message||"Failed to update product approval status.",variant:"destructive"})}}),o=u=>{l.mutate({productId:u,approved:!0})},c=u=>{l.mutate({productId:u,approved:!1})},d=u=>u.providerName||`Provider ID: ${u.providerId}`;return i?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Farmer Product Approvals"}),e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin"})})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Farmer Product Approvals"}),e.jsxs(ae,{variant:"outline",className:"text-lg px-3 py-1",children:[a.length," Pending"]})]}),a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ft,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Pending Approvals"}),e.jsx("p",{className:"text-gray-500",children:"All farmer products have been reviewed."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(u=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Y,{className:"text-lg",children:u.name}),e.jsx(ae,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Pending Review"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["by ",d(u)]})]}),e.jsxs(E,{children:[e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:u.description}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Price:"}),e.jsxs("span",{className:"font-semibold",children:["",u.price," per ",u.unit]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Stock:"}),e.jsxs("span",{children:[u.stock," ",u.unit]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"District:"}),e.jsx("span",{className:"text-sm",children:u.district})]}),u.isOrganic&&e.jsx(ae,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Organic"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Tt,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>n(u),children:[e.jsx(gr,{className:"h-4 w-4 mr-1"}),"View Details"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:s==null?void 0:s.name}),e.jsx(Xt,{children:"Product details for review"})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Price"}),e.jsxs("p",{children:["",s.price," per ",s.unit]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Stock"}),e.jsxs("p",{children:[s.stock," ",s.unit]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"District"}),e.jsx("p",{children:s.district})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Delivery"}),e.jsx("p",{className:"capitalize",children:s.deliveryOption})]})]}),s.imageUrl&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Product Image"}),e.jsx("img",{src:s.imageUrl,alt:s.name,className:"max-w-full h-48 object-cover rounded-md border"})]})]})]})]}),e.jsxs(_,{size:"sm",onClick:()=>o(u.id),disabled:l.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>c(u.id),disabled:l.isPending,children:[e.jsx(Es,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]},u.id))})]})}function z5e(){const{toast:t}=Ue(),[r,s]=j.useState("pending"),{data:n=[],isLoading:a}=fe({queryKey:["/api/admin/pending-local-products"],queryFn:async()=>(await ie("GET","/api/admin/pending-local-products")).json()}),{data:i=[],isLoading:l}=fe({queryKey:["/api/local-product-views","all"],queryFn:async()=>(await ie("GET","/api/local-product-views?adminApproved=true&adminApproved=false")).json()}),o=Se({mutationFn:async x=>(await ie("POST",`/api/admin/local-products/${x}/approve`)).json(),onSuccess:()=>{t({title:"Product Approved",description:"The product has been approved successfully."}),pe.invalidateQueries({queryKey:["/api/admin/pending-local-products"]}),pe.invalidateQueries({queryKey:["/api/local-product-views"]})},onError:x=>{t({title:"Approval Failed",description:x.message||"Failed to approve product",variant:"destructive"})}}),c=Se({mutationFn:async x=>(await ie("POST",`/api/admin/local-products/${x}/reject`)).json(),onSuccess:()=>{t({title:"Product Rejected",description:"The product has been rejected."}),pe.invalidateQueries({queryKey:["/api/admin/pending-local-products"]}),pe.invalidateQueries({queryKey:["/api/local-product-views"]})},onError:x=>{t({title:"Rejection Failed",description:x.message||"Failed to reject product",variant:"destructive"})}}),d=Se({mutationFn:async x=>(await ie("DELETE",`/api/admin/local-products/${x}`)).json(),onSuccess:()=>{t({title:"Product Deleted",description:"The product has been deleted successfully."}),pe.invalidateQueries({queryKey:["/api/admin/pending-local-products"]}),pe.invalidateQueries({queryKey:["/api/local-product-views"]})},onError:x=>{t({title:"Delete Failed",description:x.message||"Failed to delete product",variant:"destructive"})}}),u=x=>{o.mutate(x)},m=x=>{c.mutate(x)},h=x=>{confirm("Are you sure you want to delete this product? This action cannot be undone.")&&d.mutate(x)},g=({product:x})=>e.jsxs(O,{className:"mb-4",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:x.name}),e.jsxs(he,{children:[x.category," ",x.subcategory&&` ${x.subcategory}`]})]}),e.jsxs("div",{className:"flex gap-2",children:[x.adminApproved?e.jsxs(ae,{variant:"default",className:"bg-green-100 text-green-800",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Approved"]}):e.jsxs(ae,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(yt,{className:"w-3 h-3 mr-1"}),"Pending"]}),e.jsx(ae,{variant:"outline",children:x.status})]})]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.description}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Price:"})," ",x.price]}),x.discountedPrice&&e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Discounted Price:"})," ",x.discountedPrice]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Stock:"})," ",x.stock]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"District:"})," ",x.district]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Delivery:"})," ",x.deliveryOption]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Created: ",new Date(x.createdAt).toLocaleDateString()]}),x.availableAreas&&e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Available Areas:"})," ",x.availableAreas]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[!x.adminApproved&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{onClick:()=>u(x.id),disabled:o.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(_,{variant:"destructive",onClick:()=>m(x.id),disabled:c.isPending,children:[e.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),e.jsxs(_,{onClick:()=>h(x.id),disabled:d.isPending,variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:[e.jsx(Ir,{className:"w-4 h-4 mr-2"}),d.isPending?"Deleting...":"Delete"]})]})]})]})})]});return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(ft,{className:"h-6 w-6"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Local Products Management"})]}),e.jsxs(nr,{value:r,onValueChange:s,children:[e.jsxs(sr,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ae,{value:"pending",children:["Pending Approval (",n.length,")"]}),e.jsxs(Ae,{value:"all",children:["All Products (",i.length,")"]})]}),e.jsx(Ve,{value:"pending",className:"mt-6",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Products Pending Approval"}),e.jsx(he,{children:"Review and approve products submitted by service providers"})]}),e.jsx(E,{children:a?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading pending products..."})]}):n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Mt,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No products pending approval"})]}):e.jsx("div",{className:"space-y-4",children:n.map(x=>e.jsx(g,{product:x},x.id))})})]})}),e.jsx(Ve,{value:"all",className:"mt-6",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"All Products"}),e.jsx(he,{children:"View all products in the system"})]}),e.jsx(E,{children:l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading products..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ft,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No products found"})]}):e.jsx("div",{className:"space-y-4",children:i.map(x=>e.jsx(g,{product:x},x.id))})})]})})]})]})}const K5e=Kt({name:R().min(3,"Product name must be at least 3 characters"),category:R().min(1,"Please select a category")});function H5e(){const{toast:t}=Ue(),[,r]=br(),[s,n]=j.useState(!1),a=Gt({resolver:Yt(K5e),defaultValues:{name:"",category:""}}),i=async l=>{n(!0);try{const c=await(await ie("POST","/api/admin/local-product-bases",l)).json();t({title:"Base product created",description:"You can now add product details."}),r(`/admin/local-products/${c.id}/details`)}catch(o){console.error("Error creating product:",o),t({variant:"destructive",title:"Failed to create product",description:"An error occurred while creating the product."})}finally{n(!1)}};return e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(_,{variant:"outline",className:"mb-4",onClick:()=>r("/admin/local-products"),children:[e.jsx(us,{className:"mr-2 h-4 w-4"})," Back to Products"]}),e.jsx("h1",{className:"text-3xl font-bold",children:"Create New Local Product"})]}),e.jsxs(O,{className:"max-w-2xl mx-auto",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Step 1: Basic Information"}),e.jsx(he,{children:"Enter the basic information about the product. You'll be able to add details in the next step."})]}),e.jsx(E,{children:e.jsx(Qt,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(i),className:"space-y-6",children:[e.jsx(U,{control:a.control,name:"name",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter product name",...l})}),e.jsx(qe,{children:"The name of the local product"}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"category",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category"}),e.jsxs(je,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a category"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"handicrafts",children:"Handicrafts"}),e.jsx(T,{value:"textiles",children:"Textiles"}),e.jsx(T,{value:"food",children:"Food Products"}),e.jsx(T,{value:"cosmetics",children:"Cosmetics"}),e.jsx(T,{value:"jewelry",children:"Jewelry"}),e.jsx(T,{value:"furniture",children:"Furniture"}),e.jsx(T,{value:"pottery",children:"Pottery"}),e.jsx(T,{value:"other",children:"Other"})]})]}),e.jsx(qe,{children:"The category this product belongs to"}),e.jsx(H,{})]})}),e.jsx(pr,{className:"flex justify-end pt-6 px-0",children:e.jsx(_,{type:"submit",disabled:s,children:s?"Creating...":"Next: Add Details"})})]})})})]})]})}function W5e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(!1),[a,i]=j.useState({shippingAddress:"",district:"",taluk:"",pincode:"",paymentMethod:"cash",notes:""}),{data:l=[],isLoading:o,refetch:c}=fe({queryKey:["/api/local-products/cart"],enabled:!!t}),d=Se({mutationFn:async({productId:b,quantity:N})=>(await ie("PUT",`/api/local-products/cart/${b}`,{quantity:N})).json(),onSuccess:()=>{c(),r({title:"Cart updated",description:"Item quantity has been updated successfully."})},onError:()=>{r({title:"Error",description:"Failed to update cart item.",variant:"destructive"})}}),u=Se({mutationFn:async b=>(await ie("DELETE",`/api/local-products/cart/${b}`)).json(),onSuccess:()=>{c(),r({title:"Item removed",description:"Item has been removed from your cart."})},onError:()=>{r({title:"Error",description:"Failed to remove item from cart.",variant:"destructive"})}}),m=Se({mutationFn:async()=>(await ie("DELETE","/api/local-products/cart")).json(),onSuccess:()=>{c(),r({title:"Cart cleared",description:"All items have been removed from your cart."})},onError:()=>{r({title:"Error",description:"Failed to clear cart.",variant:"destructive"})}}),h=Se({mutationFn:async b=>(await ie("POST","/api/local-products/orders",b)).json(),onSuccess:()=>{c(),n(!1),i({shippingAddress:"",district:"",taluk:"",pincode:"",paymentMethod:"cash",notes:""}),r({title:"Order placed successfully",description:"Your order has been submitted and will be processed soon."})},onError:()=>{r({title:"Error",description:"Failed to place order. Please try again.",variant:"destructive"})}}),g=l.reduce((b,N)=>{const w=N.product.discountedPrice||N.product.price;return b+w*N.quantity},0),x=g>500?0:50,p=g+x,y=(b,N)=>{N<1?u.mutate(b):d.mutate({productId:b,quantity:N})},v=()=>{if(l.length===0){r({title:"Cart is empty",description:"Please add items to your cart before checkout.",variant:"destructive"});return}n(!0)},f=()=>{if(!a.shippingAddress||!a.district||!a.pincode){r({title:"Missing information",description:"Please fill in all required fields.",variant:"destructive"});return}h.mutate(a)};return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(_r,{className:"h-8 w-8"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Shopping Cart"}),e.jsxs(ae,{variant:"secondary",className:"ml-auto",children:[l.length," ",l.length===1?"item":"items"]})]}),l.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-12",children:[e.jsx(ft,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start shopping to add items to your cart"}),e.jsx(_,{onClick:()=>window.history.back(),children:"Continue Shopping"})]})}):e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Cart Items"}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>m.mutate(),disabled:m.isPending,children:[e.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Clear Cart"]})]}),l.map(b=>{const N=b.product.discountedPrice||b.product.price,w=b.product.price,C=b.product.discountedPrice&&b.product.discountedPrice<w;return e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center flex-shrink-0",children:b.product.imageUrl?e.jsx("img",{src:b.product.imageUrl,alt:b.product.name,className:"w-full h-full object-cover rounded-lg"}):e.jsx(ft,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:b.product.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b.product.category}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["District: ",b.product.district]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"font-semibold text-lg",children:["",N]}),C&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["",w]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>u.mutate(b.productId),disabled:u.isPending,children:e.jsx(Ir,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>y(b.productId,b.quantity-1),disabled:d.isPending,children:e.jsx(Rc,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-3 py-1 min-w-[3rem] text-center",children:b.quantity}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>y(b.productId,b.quantity+1),disabled:d.isPending||b.quantity>=b.product.stock,children:e.jsx(Ft,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold",children:["",(N*b.quantity).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Stock: ",b.product.stock]})]})]})]})})},b.id)})]}),e.jsx("div",{children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Order Summary"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Subtotal (",l.length," items)"]}),e.jsxs("span",{children:["",g.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Delivery Fee"}),e.jsx("span",{children:x===0?"Free":`${x}`})]}),x===0&&g>=500&&e.jsx("p",{className:"text-sm text-green-600",children:" You saved 50 on delivery!"}),e.jsx(Tr,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["",p.toFixed(2)]})]}),e.jsxs(Tt,{open:s,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{className:"w-full",size:"lg",onClick:v,children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),"Proceed to Checkout"]})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Checkout"}),e.jsx(Xt,{children:"Please provide your delivery details to complete the order."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"address",children:"Shipping Address *"}),e.jsx(at,{id:"address",placeholder:"Enter your complete address",value:a.shippingAddress,onChange:b=>i(N=>({...N,shippingAddress:b.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"district",children:"District *"}),e.jsx($,{id:"district",placeholder:"District",value:a.district,onChange:b=>i(N=>({...N,district:b.target.value}))})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"taluk",children:"Taluk"}),e.jsx($,{id:"taluk",placeholder:"Taluk",value:a.taluk,onChange:b=>i(N=>({...N,taluk:b.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pincode",children:"Pincode *"}),e.jsx($,{id:"pincode",placeholder:"Pincode",value:a.pincode,onChange:b=>i(N=>({...N,pincode:b.target.value}))})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"payment",children:"Payment Method"}),e.jsxs(je,{value:a.paymentMethod,onValueChange:b=>i(N=>({...N,paymentMethod:b})),children:[e.jsx(ge,{children:e.jsx(be,{})}),e.jsxs(ve,{children:[e.jsx(T,{value:"cash",children:"Cash on Delivery"}),e.jsx(T,{value:"wallet",children:"Wallet"}),e.jsx(T,{value:"online",children:"Online Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(at,{id:"notes",placeholder:"Any special instructions (optional)",value:a.notes,onChange:b=>i(N=>({...N,notes:b.target.value}))})]}),e.jsxs("div",{className:"border rounded-lg p-3 bg-muted/50",children:[e.jsxs("h4",{className:"font-semibold mb-2",children:["Order Total: ",p.toFixed(2)]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.length," items  ",x===0?"Free delivery":`${x} delivery`]})]}),e.jsx(_,{onClick:f,className:"w-full",disabled:h.isPending,children:h.isPending?"Placing Order...":"Place Order"})]})]})]})]})]})})]})]})}function G5e(){const[t,r]=j.useState("all"),[s,n]=j.useState("all"),[a,i]=j.useState(""),[l,o]=j.useState("all"),[c,d]=j.useState("all"),[u,m]=j.useState("all"),[h,g]=j.useState(null),[x,p]=j.useState({}),{toast:y}=Ue(),{data:v=[]}=fe({queryKey:["/api/local-product-categories"]}),{data:f=[]}=fe({queryKey:["/api/local-product-subcategories"]}),{data:b=[],isLoading:N}=fe({queryKey:["/api/local-product-views"],onSuccess:k=>{console.log("Products received:",k),k.forEach(D=>{console.log(`Product: ${D.name}, category: ${D.category}, subcategory: ${D.subcategory}`)})}}),w=t==="all"?f:f.filter(k=>k.parentCategoryId.toString()===t),C=b.filter(k=>{var X,K,Z,ue,Ne;const D=t==="all"||k.category===((X=v.find(J=>J.id.toString()===t))==null?void 0:X.name),q=s==="all"||k.subcategory===((K=f.find(J=>J.id.toString()===s))==null?void 0:K.name);if(s!=="all"){const J=(Z=f.find(Re=>Re.id.toString()===s))==null?void 0:Z.name;console.log(`Filtering: product.subcategory="${k.subcategory}", selectedSubcategory="${s}", expectedName="${J}", matches=${q}`)}const z=a===""||((ue=k.name)==null?void 0:ue.toLowerCase().includes(a.toLowerCase()))||((Ne=k.description)==null?void 0:Ne.toLowerCase().includes(a.toLowerCase())),I=l==="all"||k.district===l,F=u==="all"||k.deliveryOption===u;let W=!0;if(c!=="all"&&k.price){const J=k.discountedPrice||k.price;switch(c){case"0-100":W=J<=100;break;case"100-500":W=J>100&&J<=500;break;case"500-1000":W=J>500&&J<=1e3;break;case"1000+":W=J>1e3;break}}return D&&q&&z&&I&&F&&W}),P=Array.from(new Set(b.map(k=>k.district).filter(Boolean))),S=async(k,D=1)=>{try{await ie("POST","/api/local-product-cart",{productId:k,quantity:D}),p(q=>({...q,[k]:(q[k]||0)+D})),pe.invalidateQueries({queryKey:["/api/local-product-cart"]}),y({title:"Added to Cart",description:"Product added to your cart successfully"})}catch{y({title:"Error",description:"Failed to add product to cart",variant:"destructive"})}},A=async(k,D)=>{if(D<=0)try{await ie("DELETE",`/api/local-product-cart/${k}`);const q={...x};delete q[k],p(q),pe.invalidateQueries({queryKey:["/api/local-product-cart"]}),y({title:"Removed from Cart",description:"Product removed from your cart"})}catch{y({title:"Error",description:"Failed to remove product from cart",variant:"destructive"})}else try{await ie("PUT",`/api/local-product-cart/${k}`,{quantity:D}),p(q=>({...q,[k]:D})),pe.invalidateQueries({queryKey:["/api/local-product-cart"]})}catch{y({title:"Error",description:"Failed to update cart quantity",variant:"destructive"})}};return N?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((k,D)=>e.jsxs(O,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),e.jsxs(G,{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},D))})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Local Products"}),e.jsx("p",{className:"text-gray-600",children:"Browse authentic local products from verified providers"})]})}),e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search products...",value:a,onChange:k=>i(k.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(je,{value:t,onValueChange:k=>{r(k),n("all")},children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Categories"}),v.map(k=>e.jsx(T,{value:k.id.toString(),children:k.name},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Subcategory"}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Subcategories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Subcategories"}),w.map(k=>e.jsx(T,{value:k.id.toString(),children:k.name},k.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"District"}),e.jsxs(je,{value:l,onValueChange:o,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Districts"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Districts"}),P.map(k=>e.jsx(T,{value:k,children:k},k))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Price Range"}),e.jsxs(je,{value:c,onValueChange:d,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Prices"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Prices"}),e.jsx(T,{value:"0-100",children:"0 - 100"}),e.jsx(T,{value:"100-500",children:"100 - 500"}),e.jsx(T,{value:"500-1000",children:"500 - 1,000"}),e.jsx(T,{value:"1000+",children:"1,000+"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Delivery"}),e.jsxs(je,{value:u,onValueChange:m,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Options"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Options"}),e.jsx(T,{value:"direct",children:"Direct Only"}),e.jsx(T,{value:"service",children:"Service Only"}),e.jsx(T,{value:"both",children:"Both Options"})]})]})]})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",C.length," of ",b.length," products"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(k=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[k.imageUrl?e.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-full h-48 object-cover rounded-t-lg"}):e.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-t-lg flex items-center justify-center",children:e.jsx(ft,{className:"h-12 w-12 text-gray-400"})}),k.stock&&k.stock>0?e.jsxs(ae,{className:"absolute top-2 right-2 bg-green-500",children:["In Stock (",k.stock,")"]}):e.jsx(ae,{className:"absolute top-2 right-2 bg-red-500",children:"Out of Stock"})]}),e.jsxs(G,{children:[e.jsx(Y,{className:"text-lg",children:k.name}),e.jsx(he,{className:"line-clamp-2",children:k.description})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:k.district})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:k.discountedPrice&&k.price&&k.discountedPrice<k.price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["",k.discountedPrice]}),e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",k.price]})]}):e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["",k.price||0]})}),e.jsx(ae,{variant:"outline",children:k.category})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>g(k),children:"View Details"}),x[k.id]?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>A(k.id,x[k.id]-1),children:e.jsx(Rc,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-sm font-medium",children:x[k.id]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>A(k.id,x[k.id]+1),disabled:!k.stock||x[k.id]>=k.stock,children:e.jsx(Ft,{className:"h-4 w-4"})})]}):e.jsxs(_,{size:"sm",onClick:()=>S(k.id),disabled:!k.stock||k.stock<=0,className:"flex items-center gap-2",children:[e.jsx(_r,{className:"h-4 w-4"}),"Add to Cart"]})]})]})})]},k.id))}),C.length===0&&e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(ft,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters to see more results."})]})})]}),h&&e.jsx(Tt,{open:!!h,onOpenChange:()=>g(null),children:e.jsxs(Ct,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:h.name}),e.jsx(Xt,{children:"Product details and specifications"})]}),e.jsxs("div",{className:"space-y-6",children:[h.imageUrl&&e.jsx("img",{src:h.imageUrl,alt:h.name,className:"w-full h-64 object-cover rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Price"}),e.jsx("div",{className:"flex items-center gap-2",children:h.discountedPrice&&h.price&&h.discountedPrice<h.price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["",h.discountedPrice]}),e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",h.price]})]}):e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",h.price||0]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Stock"}),e.jsxs("p",{className:"text-gray-600",children:[h.stock||0," units available"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Location"}),e.jsx("p",{className:"text-gray-600",children:h.district})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Delivery"}),e.jsx("p",{className:"text-gray-600 capitalize",children:h.deliveryOption||"Contact seller"})]})]}),h.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:h.description})]}),h.specifications&&Object.keys(h.specifications).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Specifications"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Object.entries(h.specifications).map(([k,D])=>e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsxs("span",{className:"text-sm text-gray-600 capitalize",children:[k,":"]}),e.jsx("span",{className:"text-sm text-gray-900",children:String(D)})]},k))})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(_,{variant:"outline",onClick:()=>g(null),children:"Close"}),x[h.id]?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"outline",onClick:()=>A(h.id,x[h.id]-1),children:e.jsx(Rc,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-sm font-medium",children:x[h.id]}),e.jsx(_,{variant:"outline",onClick:()=>A(h.id,x[h.id]+1),disabled:!h.stock||x[h.id]>=h.stock,children:e.jsx(Ft,{className:"h-4 w-4"})})]}):e.jsxs(_,{onClick:()=>S(h.id),disabled:!h.stock||h.stock<=0,className:"flex items-center gap-2",children:[e.jsx(_r,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]})})]})}const Y5e=Kt({description:R().min(10,"Description must be at least 10 characters"),price:Us.number().positive("Price must be positive"),discountedPrice:Us.number().positive("Discounted price must be positive").optional().or(gv("")),stock:Us.number().int().nonnegative("Stock must be a non-negative integer"),district:R().min(1,"District is required"),imageUrl:R().url("Please enter a valid URL").optional().or(gv("")),deliveryOption:Yr(["direct","service","both"]),availableAreas:R().optional(),isDraft:tr().default(!0)});function Q5e(){const{id:t}=sj(),{toast:r}=Ue(),[,s]=br(),[n,a]=j.useState(!1),i=parseInt(t),{data:l,isLoading:o}=fe({queryKey:[`/api/admin/local-product-bases/${i}`],queryFn:async()=>{const g=await fetch(`/api/admin/local-product-bases/${i}`);if(!g.ok)throw new Error("Failed to fetch base product");return g.json()}}),{data:c,isLoading:d}=fe({queryKey:[`/api/admin/local-product-details/${i}`],queryFn:async()=>{try{const g=await fetch(`/api/admin/local-product-details/${i}`);if(g.status===404)return null;if(!g.ok)throw new Error("Failed to fetch product details");return g.json()}catch(g){if(g instanceof Error&&g.message.includes("404"))return null;throw g}}}),u=Gt({resolver:Yt(Y5e),defaultValues:{description:"",price:0,discountedPrice:"",stock:0,district:"",imageUrl:"",deliveryOption:"both",availableAreas:"",isDraft:!0}});j.useEffect(()=>{c&&u.reset({description:c.description||"",price:c.price||0,discountedPrice:c.discountedPrice||"",stock:c.stock||0,district:c.district||"",imageUrl:c.imageUrl||"",deliveryOption:c.deliveryOption||"both",availableAreas:c.availableAreas||"",isDraft:c.isDraft??!0})},[c,u]);const m=async g=>{a(!0);try{c?(await ie("PUT",`/api/admin/local-product-details/${c.id}`,g),r({title:"Product details updated",description:"The product details have been updated successfully."})):(await ie("POST","/api/admin/local-product-details",{...g,productId:i}),r({title:"Product details added",description:"The product details have been added successfully."})),s("/admin/local-products")}catch(x){console.error("Error saving product details:",x),r({variant:"destructive",title:"Failed to save product details",description:"An error occurred while saving the product details."})}finally{a(!1)}},h=async()=>{if(l)try{await ie("POST",`/api/admin/local-products/${i}/publish`),r({title:"Product published",description:"The product has been published successfully."}),pe.invalidateQueries({queryKey:[`/api/admin/local-product-details/${i}`]}),s("/admin/local-products")}catch(g){console.error("Error publishing product:",g),r({variant:"destructive",title:"Failed to publish product",description:"An error occurred while publishing the product."})}};return o||d?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin"})}):l?e.jsxs("div",{className:"container mx-auto py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(_,{variant:"outline",className:"mb-4",onClick:()=>s("/admin/local-products"),children:[e.jsx(us,{className:"mr-2 h-4 w-4"})," Back to Products"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h1",{className:"text-3xl font-bold mr-4",children:[c?"Edit":"Add"," Product Details"]}),e.jsx(ae,{variant:"outline",className:"ml-2",children:l.adminApproved?"Approved":"Pending Approval"}),(c==null?void 0:c.isDraft)&&e.jsx(ae,{variant:"secondary",className:"ml-2",children:"Draft"})]}),e.jsxs("p",{className:"text-muted-foreground mt-2",children:["Product: ",l.name," (Category: ",l.category,")"]})]}),e.jsxs(O,{className:"max-w-2xl mx-auto",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Step 2: Product Details"}),e.jsx(he,{children:"Add detailed information about the product."})]}),e.jsx(E,{children:e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(m),className:"space-y-6",children:[e.jsx(U,{control:u.control,name:"description",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Enter a detailed description of the product",className:"min-h-32",...g})}),e.jsx(qe,{children:"Provide a detailed description of the product"}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"price",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"Enter price",step:"0.01",...g})}),e.jsx(qe,{children:"Regular price"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"discountedPrice",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Discounted Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"Enter discounted price (optional)",step:"0.01",...g})}),e.jsx(qe,{children:"Special or sale price (optional)"}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:u.control,name:"stock",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Stock"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"Enter stock quantity",...g})}),e.jsx(qe,{children:"Available quantity"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"district",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"Chennai",children:"Chennai"}),e.jsx(T,{value:"Coimbatore",children:"Coimbatore"}),e.jsx(T,{value:"Madurai",children:"Madurai"}),e.jsx(T,{value:"Trichy",children:"Trichy"}),e.jsx(T,{value:"Salem",children:"Salem"}),e.jsx(T,{value:"Tirunelveli",children:"Tirunelveli"}),e.jsx(T,{value:"Erode",children:"Erode"}),e.jsx(T,{value:"Vellore",children:"Vellore"}),e.jsx(T,{value:"Thanjavur",children:"Thanjavur"}),e.jsx(T,{value:"Dindigul",children:"Dindigul"}),e.jsx(T,{value:"other",children:"Other"})]})]}),e.jsx(qe,{children:"District where the product is produced/available"}),e.jsx(H,{})]})})]}),e.jsx(U,{control:u.control,name:"imageUrl",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Image URL"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter image URL",...g})}),e.jsx(qe,{children:"URL to an image of the product (optional)"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"deliveryOption",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Delivery Options"}),e.jsxs(je,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select delivery option"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"direct",children:"Direct (manufacturer delivers)"}),e.jsx(T,{value:"service",children:"Service (our service agents deliver)"}),e.jsx(T,{value:"both",children:"Both options available"})]})]}),e.jsx(qe,{children:"How the product will be delivered"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"availableAreas",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Available Areas"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter comma-separated areas (pincodes, city names)",...g})}),e.jsx(qe,{children:"Areas where the product is available (optional)"}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"isDraft",render:({field:g})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:g.value,onCheckedChange:g.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Save as Draft"}),e.jsx(qe,{children:"Save as a draft to edit later before publishing"})]})]})}),e.jsxs(pr,{className:"flex justify-between pt-6 px-0",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>s("/admin/local-products"),children:"Cancel"}),e.jsxs("div",{className:"space-x-2",children:[c&&c.isDraft&&e.jsx(_,{type:"button",variant:"secondary",onClick:h,disabled:n,children:"Publish"}),e.jsx(_,{type:"submit",disabled:n,children:n?"Saving...":"Save Details"})]})]})]})})})]})]}):e.jsx("div",{className:"container mx-auto py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),e.jsx("p",{className:"mb-4",children:"The product you're looking for doesn't exist."}),e.jsx(_,{onClick:()=>s("/admin/local-products"),children:"Back to Products"})]})})}function X5e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("categories"),[a,i]=j.useState(null),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(!1),{data:h=[],isLoading:g}=fe({queryKey:["/api/admin/local-product-categories"]}),{data:x=[],isLoading:p}=fe({queryKey:["/api/admin/local-product-subcategories"]}),{data:y=[],isLoading:v}=fe({queryKey:["/api/admin/local-product-category-requests"]}),f=Se({mutationFn:async P=>await(await ie("POST","/api/admin/local-product-categories",P)).json(),onSuccess:()=>{r({title:"Category Created",description:"Local product category has been created successfully."}),pe.invalidateQueries({queryKey:["/api/admin/local-product-categories"]}),d(!1)},onError:P=>{r({title:"Creation Failed",description:P.message,variant:"destructive"})}}),b=Se({mutationFn:async P=>await(await ie("POST","/api/admin/local-product-subcategories",P)).json(),onSuccess:()=>{r({title:"Subcategory Created",description:"Local product subcategory has been created successfully."}),pe.invalidateQueries({queryKey:["/api/admin/local-product-subcategories"]}),m(!1)},onError:P=>{r({title:"Creation Failed",description:P.message,variant:"destructive"})}});Se({mutationFn:async({id:P,data:S})=>await(await ie("PUT",`/api/admin/local-product-categories/${P}`,S)).json(),onSuccess:()=>{r({title:"Category Updated",description:"Local product category has been updated successfully."}),pe.invalidateQueries({queryKey:["/api/admin/local-product-categories"]}),i(null)},onError:P=>{r({title:"Update Failed",description:P.message,variant:"destructive"})}});const N=Se({mutationFn:async({id:P,action:S,response:A})=>await(await ie("PUT",`/api/admin/local-product-category-requests/${P}/review`,{action:S,adminResponse:A})).json(),onSuccess:()=>{r({title:"Request Reviewed",description:"Category request has been reviewed successfully."}),pe.invalidateQueries({queryKey:["/api/admin/local-product-category-requests"]})},onError:P=>{r({title:"Review Failed",description:P.message,variant:"destructive"})}}),w=P=>{const S={name:P.get("name"),description:P.get("description"),icon:P.get("icon"),color:P.get("color"),imageUrl:P.get("imageUrl"),isActive:P.get("isActive")==="on",displayOrder:parseInt(P.get("displayOrder"))||0};f.mutate(S)},C=P=>{const S={name:P.get("name"),description:P.get("description"),parentCategoryId:parseInt(P.get("parentCategoryId")),imageUrl:P.get("imageUrl"),isActive:P.get("isActive")==="on",displayOrder:parseInt(P.get("displayOrder"))||0};b.mutate(S)};return!t||t.userType!=="admin"?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"You don't have permission to access this page."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Local Product Categories"}),e.jsx("p",{className:"text-gray-600",children:"Manage categories and subcategories for local products"})]}),e.jsxs(nr,{value:s,onValueChange:n,className:"space-y-6",children:[e.jsxs(sr,{className:"grid w-full grid-cols-3",children:[e.jsx(Ae,{value:"categories",children:"Categories"}),e.jsx(Ae,{value:"subcategories",children:"Subcategories"}),e.jsxs(Ae,{value:"requests",className:"relative",children:["Requests",y.filter(P=>P.status==="pending").length>0&&e.jsx(ae,{variant:"destructive",className:"ml-2 h-5 w-5 p-0 text-xs",children:y.filter(P=>P.status==="pending").length})]})]}),e.jsxs(Ve,{value:"categories",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Categories (",h.length,")"]}),e.jsxs(Tt,{open:c,onOpenChange:d,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Category"]})}),e.jsxs(Ct,{children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Create New Category"})}),e.jsxs("form",{onSubmit:P=>{P.preventDefault(),w(new FormData(P.currentTarget))},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Category Name"}),e.jsx($,{id:"name",name:"name",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",name:"description"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"icon",children:"Icon (emoji or icon code)"}),e.jsx($,{id:"icon",name:"icon",placeholder:""})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"color",children:"Color"}),e.jsx($,{id:"color",name:"color",placeholder:"blue"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"imageUrl",children:"Image URL"}),e.jsx($,{id:"imageUrl",name:"imageUrl",type:"url"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"isActive",name:"isActive",defaultChecked:!0}),e.jsx(re,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"displayOrder",children:"Display Order"}),e.jsx($,{id:"displayOrder",name:"displayOrder",type:"number",defaultValue:"0"})]}),e.jsx(_,{type:"submit",disabled:f.isPending,children:f.isPending?"Creating...":"Create Category"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(P=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[P.icon&&e.jsx("span",{children:P.icon}),P.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P.isActive?e.jsx(gr,{className:"w-4 h-4 text-green-600"}):e.jsx(Vw,{className:"w-4 h-4 text-gray-400"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>i(P),children:e.jsx(Zr,{className:"w-4 h-4"})})]})]})}),e.jsxs(E,{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:P.description}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Order: ",P.displayOrder]}),e.jsxs("span",{children:[x.filter(S=>S.parentCategoryId===P.id).length," subcategories"]})]})]})]},P.id))})]}),e.jsxs(Ve,{value:"subcategories",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Subcategories (",x.length,")"]}),e.jsxs(Tt,{open:u,onOpenChange:m,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Subcategory"]})}),e.jsxs(Ct,{children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Create New Subcategory"})}),e.jsxs("form",{onSubmit:P=>{P.preventDefault(),C(new FormData(P.currentTarget))},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"parentCategoryId",children:"Parent Category"}),e.jsxs(je,{name:"parentCategoryId",required:!0,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select parent category"})}),e.jsx(ve,{children:h.filter(P=>P.isActive).map(P=>e.jsxs(T,{value:P.id.toString(),children:[P.icon," ",P.name]},P.id))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Subcategory Name"}),e.jsx($,{id:"name",name:"name",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",name:"description"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"imageUrl",children:"Image URL"}),e.jsx($,{id:"imageUrl",name:"imageUrl",type:"url"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"isActive",name:"isActive",defaultChecked:!0}),e.jsx(re,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"displayOrder",children:"Display Order"}),e.jsx($,{id:"displayOrder",name:"displayOrder",type:"number",defaultValue:"0"})]}),e.jsx(_,{type:"submit",disabled:b.isPending,children:b.isPending?"Creating...":"Create Subcategory"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(P=>{const S=h.find(A=>A.id===P.parentCategoryId);return e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{className:"text-lg",children:P.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[P.isActive?e.jsx(gr,{className:"w-4 h-4 text-green-600"}):e.jsx(Vw,{className:"w-4 h-4 text-gray-400"}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>o(P),children:e.jsx(Zr,{className:"w-4 h-4"})})]})]})}),e.jsxs(E,{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:P.description}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[e.jsx(ft,{className:"w-3 h-3"}),e.jsxs("span",{children:["Parent: ",S==null?void 0:S.name]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Order: ",P.displayOrder]})]})]},P.id)})})]}),e.jsxs(Ve,{value:"requests",className:"space-y-6",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Category Requests (",y.length,")"]}),e.jsxs("div",{className:"space-y-4",children:[y.map(P=>e.jsx(O,{children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:P.categoryName}),P.subcategoryName&&e.jsxs("p",{className:"text-gray-600",children:["Subcategory: ",P.subcategoryName]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Requested by: ",P.requesterName,"  ",new Date(P.createdAt).toLocaleDateString()]})]}),e.jsxs(ae,{variant:P.status==="approved"?"default":P.status==="rejected"?"destructive":"secondary",className:"flex items-center gap-1",children:[P.status==="approved"&&e.jsx(Mt,{className:"w-3 h-3"}),P.status==="rejected"&&e.jsx(Fr,{className:"w-3 h-3"}),P.status==="pending"&&e.jsx(yt,{className:"w-3 h-3"}),P.status]})]}),P.description&&e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-sm text-gray-600",children:P.description})}),P.justification&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Justification:"}),e.jsx("p",{className:"text-sm text-gray-600",children:P.justification})]}),P.adminResponse&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[e.jsx(Tu,{className:"w-3 h-3"}),"Admin Response:"]}),e.jsx("p",{className:"text-sm text-gray-600",children:P.adminResponse})]}),P.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(_,{size:"sm",onClick:()=>N.mutate({id:P.id,action:"approve"}),disabled:N.isPending,children:[e.jsx(Mt,{className:"w-4 h-4 mr-1"}),"Approve"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>N.mutate({id:P.id,action:"reject",response:"Request rejected by admin"}),disabled:N.isPending,children:[e.jsx(Fr,{className:"w-4 h-4 mr-1"}),"Reject"]})]})]})},P.id)),y.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ft,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No requests found"}),e.jsx("p",{className:"text-gray-500",children:"Category requests from service providers will appear here"})]})]})]})]})]})}function Z5e(){const[t,r]=j.useState(null),[s,n]=j.useState(""),{toast:a}=Ue(),{data:i=[],isLoading:l,error:o}=fe({queryKey:["/api/admin/service-providers"]});console.log("Service Providers Query:",{providers:i,isLoading:l,error:o});const c=Se({mutationFn:async({id:y,status:v,adminNotes:f})=>(await ie("PATCH",`/api/admin/service-providers/${y}/status`,{status:v,adminNotes:f})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/service-providers"]}),r(null),n(""),a({title:"Status Updated",description:"Service provider status has been updated successfully."})},onError:y=>{a({title:"Update Failed",description:y.message||"Failed to update status",variant:"destructive"})}}),d=y=>{switch(y){case"pending":return e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(yt,{className:"w-3 h-3"})," Pending"]});case"approved":return e.jsxs(ae,{variant:"default",className:"flex items-center gap-1 bg-green-600",children:[e.jsx(Mt,{className:"w-3 h-3"})," Approved"]});case"rejected":return e.jsxs(ae,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(Fr,{className:"w-3 h-3"})," Rejected"]});default:return e.jsx(ae,{variant:"outline",children:y})}},u=y=>({farmer:"Farmer",manufacturer:"Manufacturer",recycling_agent:"Recycling Agent",booking_agent:"Booking Agent",rental_provider:"Rental Provider",transport_service:"Transport Service",taxi_service:"Taxi Service"})[y]||y,m=()=>{t&&c.mutate({id:t.id,status:"approved",adminNotes:s})},h=()=>{t&&c.mutate({id:t.id,status:"rejected",adminNotes:s})},g=i.filter(y=>y.status==="pending").length,x=i.filter(y=>y.status==="approved").length,p=i.filter(y=>y.status==="rejected").length;return l?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fr,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-600 mb-2",children:"Error Loading Service Providers"}),e.jsx("p",{className:"text-gray-600",children:o instanceof Error?o.message:"Unable to load service provider registrations"})]})})})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Service Provider Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve service provider registrations"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Providers"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(An,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Review"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:g})]}),e.jsx(yt,{className:"w-8 h-8 text-orange-600"})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:x})]}),e.jsx(Mt,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:p})]}),e.jsx(Fr,{className:"w-8 h-8 text-red-600"})]})})})]}),e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Service Provider Registrations"})}),e.jsx(E,{children:e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"User Details"}),e.jsx(xe,{children:"Business Info"}),e.jsx(xe,{children:"Provider Type"}),e.jsx(xe,{children:"Location"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{children:"Registration Date"}),e.jsx(xe,{children:"Actions"})]})}),e.jsx(Gr,{children:i.map(y=>e.jsxs(ht,{children:[e.jsx(se,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:y.fullName})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["@",y.username]})]})}),e.jsx(se,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(An,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:y.businessName})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Uo,{className:"w-3 h-3"}),e.jsx("span",{children:y.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(lj,{className:"w-3 h-3"}),e.jsx("span",{children:y.email})]})]})}),e.jsx(se,{children:e.jsx(ae,{variant:"outline",children:u(y.providerType)})}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:y.district})]})}),e.jsx(se,{children:d(y.status)}),e.jsx(se,{children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Jt,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(y.createdAt).toLocaleDateString()})]})}),e.jsx(se,{children:e.jsx(_,{variant:"outline",size:"sm",onClick:()=>{r(y),n(y.adminNotes||"")},children:"Review"})})]},y.id))})]})})]}),e.jsx(Tt,{open:!!t,onOpenChange:()=>r(null),children:e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Review Service Provider Registration"})}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),e.jsx("p",{className:"text-sm",children:t.fullName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Username"}),e.jsxs("p",{className:"text-sm",children:["@",t.username]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Business Name"}),e.jsx("p",{className:"text-sm",children:t.businessName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Provider Type"}),e.jsx("p",{className:"text-sm",children:u(t.providerType)})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"District"}),e.jsx("p",{className:"text-sm",children:t.district})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Current Status"}),e.jsx("div",{className:"mt-1",children:d(t.status)})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Admin Notes"}),e.jsx(at,{value:s,onChange:y=>n(y.target.value),placeholder:"Add notes about your decision...",rows:4})]}),t.adminNotes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Previous Admin Notes"}),e.jsx("div",{className:"bg-muted p-3 rounded-lg text-sm",children:t.adminNotes})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(_,{variant:"outline",onClick:()=>r(null),disabled:c.isPending,children:"Cancel"}),t.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"destructive",onClick:h,disabled:c.isPending,className:"flex items-center gap-2",children:[e.jsx(Fr,{className:"w-4 h-4"}),"Reject"]}),e.jsxs(_,{onClick:m,disabled:c.isPending,className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Approve"]})]}),t.status!=="pending"&&e.jsx(_,{variant:"outline",onClick:()=>{c.mutate({id:t.id,status:"pending",adminNotes:s})},disabled:c.isPending,children:"Reset to Pending"})]})]})]})})]})}const J5e=Kt({username:R().min(3,"Username must be at least 3 characters"),password:R().min(6,"Password must be at least 6 characters"),fullName:R().min(2,"Full name is required"),email:R().email("Invalid email address"),phone:R().min(10,"Phone number must be at least 10 digits"),businessName:R().min(2,"Business name is required"),businessType:Yr(["farmer","manufacturer","retailer","distributor"]),district:R().min(1,"District is required"),address:R().min(10,"Address is required"),description:R().min(20,"Business description is required")}),e6e=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupattur","Tirupur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function t6e(){const[,t]=br(),{toast:r}=Ue(),[s,n]=j.useState(!1),a=Gt({resolver:Yt(J5e),defaultValues:{username:"",password:"",fullName:"",email:"",phone:"",businessName:"",businessType:"farmer",district:"",address:"",description:""}}),i=async l=>{n(!0);try{await ie("POST","/api/register-provider",l),r({title:"Registration Successful!",description:"Your provider account has been created. Please wait for admin approval."}),t("/auth")}catch(o){r({title:"Registration Failed",description:o.message||"An error occurred during registration",variant:"destructive"})}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4",children:e.jsxs("div",{className:"container mx-auto max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(Ot,{href:"/auth",children:e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(us,{className:"w-4 h-4 mr-2"}),"Back to Login"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Service Provider Registration"}),e.jsx("p",{className:"text-gray-600",children:"Join our platform to sell your products and services"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(O,{className:"shadow-lg",children:[e.jsxs(G,{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Ii,{className:"w-5 h-5 text-green-600"}),"Business Registration"]}),e.jsx(he,{children:"Register as a service provider to start selling your products"})]}),e.jsx(E,{children:e.jsx(Qt,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(i),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(tn,{className:"w-4 h-4"}),"Personal Information"]}),e.jsx(U,{control:a.control,name:"fullName",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your full name",...l})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:a.control,name:"username",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username"}),e.jsx(V,{children:e.jsx($,{placeholder:"Choose a username",...l})}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"password",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password"}),e.jsx(V,{children:e.jsx($,{type:"password",placeholder:"Enter password",...l})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(U,{control:a.control,name:"email",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Email"}),e.jsx(V,{children:e.jsx($,{type:"email",placeholder:"your@email.com",...l})}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"phone",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone Number"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter phone number",...l})}),e.jsx(H,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ft,{className:"w-4 h-4"}),"Business Information"]}),e.jsx(U,{control:a.control,name:"businessName",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your business name",...l})}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"businessType",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Type"}),e.jsxs(je,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select business type"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"farmer",children:"Farmer"}),e.jsx(T,{value:"manufacturer",children:"Manufacturer"}),e.jsx(T,{value:"retailer",children:"Retailer"}),e.jsx(T,{value:"distributor",children:"Distributor"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"district",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsx(ve,{children:e6e.map(o=>e.jsx(T,{value:o,children:o},o))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"address",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Address"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Enter complete business address",className:"resize-none",rows:3,...l})}),e.jsx(H,{})]})}),e.jsx(U,{control:a.control,name:"description",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your business and the products/services you offer",className:"resize-none",rows:4,...l})}),e.jsx(H,{})]})})]}),e.jsx(_,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700",disabled:s,children:s?"Registering...":"Register as Provider"})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{className:"shadow-lg border-green-200",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-green-800",children:"Why Join as a Provider?"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Direct Customer Access"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reach customers directly across Tamil Nadu"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Commission-based System"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Earn through our transparent commission structure"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Platform Support"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get support from our network of agents"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Digital Marketing"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Leverage our digital platform for marketing"})]})]})]})]}),e.jsxs(O,{className:"shadow-lg border-blue-200",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-blue-800",children:"Business Types We Support"})}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-800",children:"Farmers"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sell fresh produce, grains, and agricultural products"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800",children:"Manufacturers"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Local manufacturing and production businesses"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-800",children:"Retailers"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Retail stores and shop owners"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-orange-800",children:"Distributors"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Wholesale and distribution services"})]})]})]})]})]})]})})}const r6e=["Chennai","Coimbatore","Madurai","Tiruchirappalli","Salem","Tirunelveli","Tiruppur","Vellore","Erode","Thoothukkudi","Dindigul","Thanjavur","Ranipet","Sivakasi","Karur","Udhagamandalam","Hosur","Nagercoil","Kancheepuram","Kumarapalayam"],hd=Kt({businessName:R().min(3,{message:"Business name must be at least 3 characters"}),address:R().min(5,{message:"Address is required"}),district:R().min(2,{message:"District is required"}),description:R().min(10,{message:"Please provide a brief description"}),providerType:R()});function pd({title:t,description:r,providerType:s,schema:n,defaultValues:a,extraFields:i,submitHandler:l}){const{user:o}=dt(),{toast:c}=Ue(),[d,u]=j.useState("form"),m=Gt({resolver:Yt(n),defaultValues:{...a,providerType:s}}),h=Se({mutationFn:async x=>{try{const p={...x,userId:o==null?void 0:o.id,providerType:s,status:"pending",verificationStatus:"pending",operatingAreas:x.operatingAreas||[],website:x.website||"",documents:x.documents||[],verifiedBy:null};console.log("Sending provider data to API:",p);const y=await ie("POST","/api/service-providers",p);if(!y.ok){const f=await y.json();throw console.error("API error response:",f),new Error(f.message||"Failed to register service provider")}const v=await y.json();return await l(v.id,x),v}catch(p){throw new Error(p.message||"Registration failed")}},onSuccess:()=>{u("success"),pe.invalidateQueries({queryKey:["/api/service-providers"]})},onError:x=>{u("error"),c({title:"Registration Failed",description:x.message,variant:"destructive"})}}),g=x=>{console.log("Service provider form data:",x),h.mutate(x)};return d==="success"?e.jsx("div",{className:"container py-10",children:e.jsx(O,{className:"w-full max-w-4xl mx-auto",children:e.jsxs(E,{className:"pt-10 pb-10 flex flex-col items-center",children:[e.jsx(Mt,{className:"w-16 h-16 text-green-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Registration Successful!"}),e.jsx("p",{className:"text-center text-gray-600 mb-6 max-w-lg",children:"Your service provider registration has been submitted successfully. Our team will review your application and get back to you soon."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(Ot,{href:"/provider-registration",children:e.jsxs(_,{variant:"outline",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back to Provider Types"]})}),e.jsx(Ot,{href:"/",children:e.jsx(_,{children:"Return to Dashboard"})})]})]})})}):d==="error"?e.jsx("div",{className:"container py-10",children:e.jsx(O,{className:"w-full max-w-4xl mx-auto",children:e.jsxs(E,{className:"pt-10 pb-10 flex flex-col items-center",children:[e.jsx(di,{className:"w-16 h-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Registration Failed"}),e.jsx("p",{className:"text-center text-gray-600 mb-6 max-w-lg",children:"There was an error processing your registration. Please try again or contact support if the issue persists."}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(_,{onClick:()=>u("form"),children:"Try Again"}),e.jsx(Ot,{href:"/provider-registration",children:e.jsxs(_,{variant:"outline",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back to Provider Types"]})})]})]})})}):e.jsx("div",{className:"container py-10",children:e.jsxs(O,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(G,{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Ot,{href:"/provider-registration",children:e.jsxs(_,{variant:"ghost",className:"flex items-center",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back to Provider Types"]})})}),e.jsx(Y,{className:"text-2xl",children:t}),e.jsx(he,{children:r})]}),e.jsx(E,{children:e.jsx(Qt,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(g),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{control:m.control,name:"businessName",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Name"}),e.jsx(V,{children:e.jsx($,{...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"address",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Address"}),e.jsx(V,{children:e.jsx($,{...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"district",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:x.onChange,defaultValue:x.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsx(ve,{children:r6e.map(p=>e.jsx(T,{value:p,children:p},p))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"taluk",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk"}),e.jsx(V,{children:e.jsx($,{...x})}),e.jsx(H,{})]})}),e.jsx(U,{control:m.control,name:"pincode",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{...x})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:m.control,name:"description",render:({field:x})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Tell us about your business...",className:"resize-none h-24",...x})}),e.jsx(H,{})]})}),i(m),e.jsx("div",{className:"mt-8",children:e.jsx(_,{type:"submit",className:"w-full md:w-auto",disabled:h.isPending,children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Registration"})})]})})})]})})}const s6e=["Organic","Conventional","Mixed Farming","Hydroponics","Permaculture","Terrace Farming","Agroforestry","Other"],n6e=hd.extend({farmSize:R().optional(),farmType:R().optional(),primaryProducts:R().min(3,{message:"Please specify your primary products"}),cultivationSeason:R().optional(),supportsDelivery:tr().default(!1)}),a6e={businessName:"",address:"",district:"",taluk:"",pincode:"",phone:"",email:"",description:"",farmSize:"",farmType:"",primaryProducts:"",cultivationSeason:"",supportsDelivery:!1};function i6e(){const{user:t}=dt(),r=(t==null?void 0:t.userType)==="customer"||(t==null?void 0:t.userType)==="provider",{data:s,isLoading:n}=fe({queryKey:[`/api/service-providers/user/${t==null?void 0:t.id}`],enabled:!!(t!=null&&t.id)}),a=async(l,o)=>{const c={serviceProviderId:l,farmSize:o.farmSize,farmType:o.farmType,primaryProducts:o.primaryProducts,cultivationSeason:o.cultivationSeason,supportsDelivery:o.supportsDelivery},d=await ie("POST","/api/farmer-details",c);if(!d.ok){const u=await d.json();throw new Error(u.message||"Failed to register farmer details")}return await d.json()},i=e.jsxs("div",{className:"space-y-6 border-t pt-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Farmer-Specific Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"farmSize",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Farm Size (in acres/hectares)"}),e.jsx(V,{children:e.jsx($,{...l,placeholder:"e.g., 5 acres"})}),e.jsx(qe,{children:"Optional: Indicate the size of your farm"}),e.jsx(H,{})]})}),e.jsx(U,{name:"farmType",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Farm Type"}),e.jsxs(je,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select farm type"})})}),e.jsx(ve,{children:s6e.map(o=>e.jsx(T,{value:o,children:o},o))})]}),e.jsx(qe,{children:"Optional: The type of farming you practice"}),e.jsx(H,{})]})}),e.jsx(U,{name:"primaryProducts",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Primary Products"}),e.jsx(V,{children:e.jsx($,{...l,placeholder:"e.g., Rice, Vegetables, Fruits"})}),e.jsx(qe,{children:"List your main agricultural products"}),e.jsx(H,{})]})}),e.jsx(U,{name:"cultivationSeason",render:({field:l})=>e.jsxs(L,{children:[e.jsx(B,{children:"Cultivation Season"}),e.jsx(V,{children:e.jsx($,{...l,placeholder:"e.g., Kharif, Rabi, Year-round"})}),e.jsx(qe,{children:"Optional: When you typically cultivate your crops"}),e.jsx(H,{})]})})]}),e.jsx(U,{name:"supportsDelivery",render:({field:l})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:l.value,onCheckedChange:l.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Supports Delivery"}),e.jsx(qe,{children:"Check this if you can deliver your products to customers directly"})]})]})})]});return n?e.jsx("div",{className:"container py-10 flex justify-center items-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Checking registration status..."})]})}):s?e.jsx("div",{className:"container py-10 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O,{className:"overflow-hidden",children:[e.jsxs(G,{className:"bg-gray-50 border-b",children:[e.jsx(Y,{children:"Already Registered"}),e.jsx(he,{children:"You are already registered as a service provider."})]}),e.jsxs(E,{className:"pt-6",children:[e.jsxs(xa,{className:"mb-6",variant:"destructive",children:[e.jsx(lr,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Registration Exists"}),e.jsxs(ga,{children:["You are already registered as a ",s.providerType.replace("_"," "),". You cannot register for multiple provider types with the same account."]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Your Options:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:[e.jsx("li",{children:"Return to the main registration page to view your provider details"}),e.jsx("li",{children:"Go to your dashboard to continue using the platform"}),e.jsx("li",{children:"Contact support if you need to change your provider type"})]})]})]}),e.jsxs(pr,{className:"justify-center border-t py-4 bg-gray-50",children:[e.jsx(Ot,{href:"/provider-registration",children:e.jsxs(_,{variant:"outline",className:"mr-2 w-full md:w-auto",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"View My Registration"]})}),e.jsx(Ot,{href:"/",children:e.jsx(_,{className:"w-full md:w-auto",children:"Go to Dashboard"})})]})]})})}):t&&!r?e.jsx("div",{className:"container py-10 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O,{className:"shadow-md",children:[e.jsxs(G,{className:"bg-amber-50",children:[e.jsxs(Y,{className:"text-amber-700 flex items-center",children:[e.jsx(lr,{className:"mr-2 h-5 w-5"}),"Access Restricted"]}),e.jsx(he,{className:"text-amber-700",children:"This area is only available for regular users or service providers."})]}),e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700",children:["Your account type (",t.userType,") cannot register as a service provider. This functionality is reserved for customer or provider accounts."]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Account Types Explained:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Admin, Branch Managers, Taluk Managers:"})," Managerial roles that handle oversight and approvals"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Service Agents:"})," Representatives assigned to specific areas"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customers/Providers:"})," Regular users who can register as service providers"]})]})]})]})}),e.jsx(pr,{className:"justify-center border-t py-4 bg-gray-50",children:e.jsx(Ot,{href:"/",children:e.jsx(_,{variant:"default",className:"w-full md:w-auto",children:"Back to Dashboard"})})})]})})}):e.jsx(pd,{title:"Farmer Registration",description:"Join our platform as a farmer to sell your produce directly to consumers",providerType:"farmer",schema:n6e,defaultValues:a6e,extraFields:i,submitHandler:a})}const l6e=["Vegetables","Fruits","Grains","Dairy","Meat","Spices","Handicrafts","Textiles","Home Decor","Cosmetics","Food Products","Other"],o6e=["Small Business","Micro Enterprise","Cottage Industry","Medium Scale","Large Scale","Cooperative","Other"],c6e=hd.extend({productCategories:R().min(3,{message:"Please specify your product categories"}),businessType:R().min(2,{message:"Please select your business type"}),establishmentYear:R().optional(),supportsDelivery:tr().default(!1)}),d6e={businessName:"",address:"",district:"",taluk:"",pincode:"",phone:"",email:"",description:"",productCategories:"",businessType:"",establishmentYear:"",supportsDelivery:!1};function u6e(){var l;const{user:t}=dt(),r=(t==null?void 0:t.userType)==="customer",{data:s,isLoading:n}=fe({queryKey:[`/api/service-providers/user/${t==null?void 0:t.id}`],enabled:!!(t!=null&&t.id)}),a=async(o,c)=>{const d={serviceProviderId:o,productCategories:c.productCategories,businessType:c.businessType,establishmentYear:c.establishmentYear,supportsDelivery:c.supportsDelivery},u=await ie("POST","/api/manufacturer-details",d);if(!u.ok){const m=await u.json();throw new Error(m.message||"Failed to register manufacturer details")}return await u.json()},i=e.jsxs("div",{className:"space-y-6 border-t pt-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Manufacturer-Specific Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"productCategories",render:({field:o})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Categories"}),e.jsxs(je,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select product category"})})}),e.jsx(ve,{children:l6e.map(c=>e.jsx(T,{value:c,children:c},c))})]}),e.jsx(qe,{children:"The main categories of products you manufacture"}),e.jsx(H,{})]})}),e.jsx(U,{name:"businessType",render:({field:o})=>e.jsxs(L,{children:[e.jsx(B,{children:"Business Type"}),e.jsxs(je,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select business type"})})}),e.jsx(ve,{children:o6e.map(c=>e.jsx(T,{value:c,children:c},c))})]}),e.jsx(qe,{children:"The type of manufacturing business you operate"}),e.jsx(H,{})]})}),e.jsx(U,{name:"establishmentYear",render:({field:o})=>e.jsxs(L,{children:[e.jsx(B,{children:"Establishment Year"}),e.jsx(V,{children:e.jsx($,{...o,placeholder:"e.g., 2010"})}),e.jsx(qe,{children:"Optional: When your business was established"}),e.jsx(H,{})]})})]}),e.jsx(U,{name:"supportsDelivery",render:({field:o})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:o.value,onCheckedChange:o.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Supports Delivery"}),e.jsx(qe,{children:"Check this if you can deliver your products to customers directly"})]})]})})]});return n?e.jsx("div",{className:"container py-10 flex justify-center items-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Qe,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Checking registration status..."})]})}):s?e.jsx("div",{className:"container py-10 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O,{className:"overflow-hidden",children:[e.jsxs(G,{className:"bg-gray-50 border-b",children:[e.jsx(Y,{children:"Already Registered"}),e.jsx(he,{children:"You are already registered as a service provider."})]}),e.jsxs(E,{className:"pt-6",children:[e.jsxs(xa,{className:"mb-6",variant:"destructive",children:[e.jsx(lr,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Registration Exists"}),e.jsxs(ga,{children:["You are already registered as a ",(l=s.providerType)==null?void 0:l.replace("_"," "),". You cannot register for multiple provider types with the same account."]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Your Options:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:[e.jsx("li",{children:"Return to the main registration page to view your provider details"}),e.jsx("li",{children:"Go to your dashboard to continue using the platform"}),e.jsx("li",{children:"Contact support if you need to change your provider type"})]})]})]}),e.jsxs(pr,{className:"justify-center border-t py-4 bg-gray-50",children:[e.jsx(Ot,{href:"/provider-registration",children:e.jsxs(_,{variant:"outline",className:"mr-2 w-full md:w-auto",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"View My Registration"]})}),e.jsx(Ot,{href:"/",children:e.jsx(_,{className:"w-full md:w-auto",children:"Go to Dashboard"})})]})]})})}):t&&!r?e.jsx("div",{className:"container py-10 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O,{className:"shadow-md",children:[e.jsxs(G,{className:"bg-amber-50",children:[e.jsxs(Y,{className:"text-amber-700 flex items-center",children:[e.jsx(lr,{className:"mr-2 h-5 w-5"}),"Access Restricted"]}),e.jsx(he,{className:"text-amber-700",children:"This area is only available for regular users/customers."})]}),e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-700",children:["Your account type (",t.userType,") cannot register as a service provider. This functionality is reserved for regular customer accounts."]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Account Types Explained:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Admin, Branch Managers, Taluk Managers:"})," Managerial roles that handle oversight and approvals"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Service Agents:"})," Representatives assigned to specific areas"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Customers:"})," Regular users who can register as service providers"]})]})]})]})}),e.jsx(pr,{className:"justify-center border-t py-4 bg-gray-50",children:e.jsx(Ot,{href:"/",children:e.jsx(_,{variant:"default",className:"w-full md:w-auto",children:"Back to Dashboard"})})})]})})}):e.jsx(pd,{title:"Manufacturer Registration",description:"Join our platform as a manufacturer to reach more customers for your products",providerType:"manufacturer",schema:c6e,defaultValues:d6e,extraFields:i,submitHandler:a})}const m6e=hd.extend({description:R().optional(),vehicleTypes:R().min(1,{message:"Vehicle type is required"}),operatingHours:R().min(1,{message:"Operating hours are required"}),licenseNumber:R().min(1,{message:"License number is required"}),dateOfBirth:R().min(1,{message:"Date of birth is required"}),aadharVerified:tr().default(!1),panCardNumber:R().min(10,{message:"Valid PAN card number is required"}).max(10,{message:"PAN card should be 10 characters"}),vehicleRegistrationNumber:R().min(1,{message:"Vehicle registration number is required"}),vehicleInsuranceDetails:R().min(1,{message:"Vehicle insurance details are required"}),vehiclePermitDetails:R().min(1,{message:"Vehicle permit details are required"}),bankName:R().min(1,{message:"Bank name is required"}),accountNumber:R().min(1,{message:"Account number is required"}),ifscCode:R().min(1,{message:"IFSC code is required"}),accountHolderName:R().min(1,{message:"Account holder name is required"})});function h6e(){const{toast:t}=Ue(),r=j.useRef(null),s=j.useRef(null),n=j.useRef(null),a=j.useRef(null),i=j.useRef(null),l=j.useRef(null),o=j.useRef(null),c=async(h,g)=>{try{console.log("Submitting taxi provider data:",{serviceProviderId:h,...g});const x={bankName:g.bankName,accountNumber:g.accountNumber,ifscCode:g.ifscCode,accountHolderName:g.accountHolderName},p={photo:g.photo||null,licenseDoc:g.licenseDoc||null,aadharDoc:g.aadharDoc||null,panCardDoc:g.panCardDoc||null,vehicleRegDoc:g.vehicleRegDoc||null,vehicleInsuranceDoc:g.vehicleInsuranceDoc||null,vehiclePermitDoc:g.vehiclePermitDoc||null},y={serviceProviderId:h,vehicleTypes:g.vehicleTypes,operatingHours:g.operatingHours,licenseNumber:g.licenseNumber,dateOfBirth:g.dateOfBirth,aadharVerified:g.aadharVerified,panCardNumber:g.panCardNumber,vehicleRegistrationNumber:g.vehicleRegistrationNumber,vehicleInsuranceDetails:g.vehicleInsuranceDetails,vehiclePermitDetails:g.vehiclePermitDetails,bankDetails:x,documents:p,approvalStatus:"pending"},v=await ie("POST","/api/taxi-provider-details",y);if(!v.ok){const f=await v.json();throw console.error("API error response:",f),new Error(f.message||"Failed to create taxi provider details")}return await v.json()}catch(x){throw console.error("Error creating taxi provider details:",x),t({title:"Error Creating Taxi Provider Details",description:x.message||"An unexpected error occurred",variant:"destructive"}),x}},d=({label:h,description:g,inputRef:x,name:p,form:y})=>{const[v,f]=j.useState(!1),[b,N]=j.useState(null),[w,C]=j.useState(null),P=async S=>{var k;const A=(k=S.target.files)==null?void 0:k[0];if(A){N(A.name),f(!0),C(null);try{const D=new FormData;D.append("document",A);const z={photo:"photo",licenseDoc:"license",aadharDoc:"aadhar",panCardDoc:"pancard",vehicleRegDoc:"vehicle_registration",vehicleInsuranceDoc:"vehicle_insurance",vehiclePermitDoc:"vehicle_permit"}[p]||p,I=await fetch(`/api/taxi-provider/upload/${z}`,{method:"POST",body:D});if(!I.ok){const W=await I.json();throw new Error(W.message||"Upload failed")}const F=await I.json();y.setValue(p,F.filePath),console.log(`Document uploaded successfully: ${p} -> ${F.filePath}`)}catch(D){console.error("Document upload error:",D),C(D.message||"Failed to upload document")}finally{f(!1)}}};return e.jsxs(L,{className:"flex flex-col",children:[e.jsx(B,{children:h}),g&&e.jsx(qe,{children:g}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",ref:x,style:{display:"none"},accept:"image/*, application/pdf",onChange:P}),e.jsxs(_,{type:"button",variant:"outline",onClick:()=>{var S;return(S=x.current)==null?void 0:S.click()},className:"flex items-center gap-2",disabled:v,children:[e.jsx(Ri,{className:"h-4 w-4"}),v?"Uploading...":"Upload Document"]}),e.jsx("span",{className:"text-sm text-muted-foreground",id:`${p}-filename`,children:b||"No file selected"})]}),w&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:w}),e.jsx(H,{})]})},u=({form:h})=>e.jsxs("div",{className:"space-y-8",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Taxi Service Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"vehicleTypes",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Type"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select vehicle type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"Two Wheeler",children:"Two Wheeler"}),e.jsx(T,{value:"Three Wheeler",children:"Three Wheeler"}),e.jsx(T,{value:"4 Seaters",children:"4 Seaters"}),e.jsx(T,{value:"6 Seaters",children:"6 Seaters"}),e.jsx(T,{value:"12 Seaters",children:"12 Seaters"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"operatingHours",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:g.onChange,defaultValue:g.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select operating hours"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"24_hours",children:"24 Hours"}),e.jsx(T,{value:"day_only",children:"Day Only (6 AM - 8 PM)"}),e.jsx(T,{value:"night_only",children:"Night Only (8 PM - 6 AM)"}),e.jsx(T,{value:"custom",children:"Custom Schedule"})]})]})}),e.jsx(H,{})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Driver Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"licenseNumber",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"License Number"}),e.jsx(V,{children:e.jsx($,{...g,placeholder:"Enter your driver's license number"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"dateOfBirth",render:({field:g})=>e.jsxs(L,{className:"flex flex-col",children:[e.jsx(B,{children:"Date of Birth"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsx(V,{children:e.jsxs(_,{variant:"outline",className:De("pl-3 text-left font-normal",!g.value&&"text-muted-foreground"),children:[g.value?vt(new Date(g.value),"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(Jt,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(dn,{className:"w-auto p-0",align:"start",children:e.jsx(un,{mode:"single",selected:g.value?new Date(g.value):void 0,onSelect:x=>g.onChange(x?vt(x,"yyyy-MM-dd"):""),disabled:x=>x>new Date||x<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(H,{})]})}),e.jsx(U,{name:"panCardNumber",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"PAN Card Number"}),e.jsx(V,{children:e.jsx($,{...g,placeholder:"Enter your PAN card number"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"aadharVerified",render:({field:g})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:g.value,onCheckedChange:g.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Aadhar Verification"}),e.jsx(qe,{children:"I confirm that my Aadhar verification has been completed."})]})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Vehicle Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"vehicleRegistrationNumber",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Registration Number"}),e.jsx(V,{children:e.jsx($,{...g,placeholder:"Enter vehicle registration number"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"vehicleInsuranceDetails",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Insurance Details"}),e.jsx(V,{children:e.jsx($,{...g,placeholder:"Enter vehicle insurance details"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"vehiclePermitDetails",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Permit Details"}),e.jsx(V,{children:e.jsx($,{...g,placeholder:"Enter vehicle permit details"})}),e.jsx(H,{})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Document Uploads"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx(d,{label:"Profile Photo",description:"Upload a clear photo of yourself",inputRef:r,name:"photo",form:h}),e.jsx(d,{label:"License Document",description:"Upload both sides of your driving license",inputRef:s,name:"licenseDoc",form:h}),e.jsx(d,{label:"Aadhar Card",description:"Upload both sides of your Aadhar card",inputRef:n,name:"aadharDoc",form:h}),e.jsx(d,{label:"PAN Card",description:"Upload your PAN card",inputRef:a,name:"panCardDoc",form:h}),e.jsx(d,{label:"Vehicle Registration",description:"Upload vehicle registration document",inputRef:i,name:"vehicleRegDoc",form:h}),e.jsx(d,{label:"Vehicle Insurance",description:"Upload vehicle insurance policy document",inputRef:l,name:"vehicleInsuranceDoc",form:h}),e.jsx(d,{label:"Vehicle Permit",description:"Upload vehicle permit document",inputRef:o,name:"vehiclePermitDoc",form:h})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"bankName",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Bank Name"}),e.jsx(V,{children:e.jsx($,{...g})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountNumber",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Number"}),e.jsx(V,{children:e.jsx($,{...g})}),e.jsx(H,{})]})}),e.jsx(U,{name:"ifscCode",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"IFSC Code"}),e.jsx(V,{children:e.jsx($,{...g})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountHolderName",render:({field:g})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Holder Name"}),e.jsx(V,{children:e.jsx($,{...g})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"mt-8 bg-muted p-4 rounded-md",children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:"Approval Process"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your application will go through the following approval stages:"}),e.jsxs("ol",{className:"list-decimal pl-5 mt-2 space-y-1 text-sm",children:[e.jsx("li",{children:"Initial verification by pincode agent"}),e.jsx("li",{children:"Review by taluk manager"}),e.jsx("li",{children:"Final resolution by branch manager"}),e.jsx("li",{children:"Final approval by admin"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Once approved, you will receive a notification and your service will be available in the platform."})]})]}),m=h=>e.jsx(u,{form:h});return e.jsx(pd,{title:"Taxi Provider Registration",description:"Register as a driver to offer transportation services through our platform.",providerType:"taxi_provider",schema:m6e,defaultValues:{vehicleTypes:"",operatingHours:"",licenseNumber:"",dateOfBirth:"",aadharVerified:!1,panCardNumber:"",vehicleRegistrationNumber:"",vehicleInsuranceDetails:"",vehiclePermitDetails:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:"",photo:"",licenseDoc:"",aadharDoc:"",panCardDoc:"",vehicleRegDoc:"",vehicleInsuranceDoc:"",vehiclePermitDoc:""},extraFields:m,submitHandler:c})}const p6e=hd.extend({serviceTypes:R().min(1,{message:"Service types are required"}),operatingHours:R().min(1,{message:"Operating hours are required"}),yearsOfExperience:R().min(1,{message:"Years of experience is required"}),preferredProviders:R().optional(),bankName:R().min(1,{message:"Bank name is required"}),accountNumber:R().min(1,{message:"Account number is required"}),ifscCode:R().min(1,{message:"IFSC code is required"}),accountHolderName:R().min(1,{message:"Account holder name is required"})});function f6e(){const{toast:t}=Ue(),r=async(n,a)=>{try{console.log("Submitting booking agent data:",{serviceProviderId:n,...a});const i={bankName:a.bankName,accountNumber:a.accountNumber,ifscCode:a.ifscCode,accountHolderName:a.accountHolderName},l={serviceProviderId:n,serviceTypes:a.serviceTypes,operatingHours:a.operatingHours,yearsOfExperience:a.yearsOfExperience,preferredProviders:a.preferredProviders||"",bankDetails:i},o=await ie("POST","/api/booking-agent-details",l);if(!o.ok){const c=await o.json();throw console.error("API error response:",c),new Error(c.message||"Failed to create booking agent details")}return await o.json()}catch(i){throw console.error("Error creating booking agent details:",i),t({title:"Error Creating Booking Agent Details",description:i.message||"An unexpected error occurred",variant:"destructive"}),i}},s=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Booking Service Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"serviceTypes",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Types"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select service type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"hotels",children:"Hotels"}),e.jsx(T,{value:"flights",children:"Flights"}),e.jsx(T,{value:"buses",children:"Buses"}),e.jsx(T,{value:"trains",children:"Trains"}),e.jsx(T,{value:"vacation_packages",children:"Vacation Packages"}),e.jsx(T,{value:"all",children:"All Services"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"operatingHours",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select operating hours"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"24_hours",children:"24 Hours"}),e.jsx(T,{value:"business_hours",children:"Business Hours (9 AM - 6 PM)"}),e.jsx(T,{value:"extended_hours",children:"Extended Hours (8 AM - 10 PM)"}),e.jsx(T,{value:"custom",children:"Custom Schedule"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"yearsOfExperience",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Years of Experience"}),e.jsx(V,{children:e.jsx($,{...n,type:"number",min:"0"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"preferredProviders",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Preferred Providers (Optional)"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., MakeMyTrip, IRCTC, Cleartrip"})}),e.jsx(qe,{children:"List your preferred travel/accommodation providers, separated by commas"}),e.jsx(H,{})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"bankName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Bank Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountNumber",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Number"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"ifscCode",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"IFSC Code"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountHolderName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Holder Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})})]})]});return e.jsx(pd,{title:"Booking Agent Registration",description:"Register as a booking agent to offer travel and accommodation booking services through our platform.",providerType:"booking_agent",schema:p6e,defaultValues:{serviceTypes:"",operatingHours:"",yearsOfExperience:"",preferredProviders:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""},extraFields:e.jsx(s,{}),submitHandler:r})}const x6e=hd.extend({vehicleTypes:R().min(1,{message:"Vehicle types are required"}),operatingHours:R().min(1,{message:"Operating hours are required"}),servicesOffered:R().min(1,{message:"Services offered are required"}),coverageAreas:R().min(1,{message:"Coverage areas are required"}),maxCapacity:R().min(1,{message:"Maximum capacity is required"}),bankName:R().min(1,{message:"Bank name is required"}),accountNumber:R().min(1,{message:"Account number is required"}),ifscCode:R().min(1,{message:"IFSC code is required"}),accountHolderName:R().min(1,{message:"Account holder name is required"})});function g6e(){const{toast:t}=Ue(),r=async(n,a)=>{try{console.log("Submitting transportation agent data:",{serviceProviderId:n,...a});const i={bankName:a.bankName,accountNumber:a.accountNumber,ifscCode:a.ifscCode,accountHolderName:a.accountHolderName},l={serviceProviderId:n,vehicleTypes:a.vehicleTypes,operatingHours:a.operatingHours,servicesOffered:a.servicesOffered,coverageAreas:a.coverageAreas,maxCapacity:a.maxCapacity,bankDetails:i},o=await ie("POST","/api/transportation-agent-details",l);if(!o.ok){const c=await o.json();throw console.error("API error response:",c),new Error(c.message||"Failed to create transportation agent details")}return await o.json()}catch(i){throw console.error("Error creating transportation agent details:",i),t({title:"Error Creating Transportation Agent Details",description:i.message||"An unexpected error occurred",variant:"destructive"}),i}},s=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Transportation Service Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"vehicleTypes",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Types"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select vehicle type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"cargo_van",children:"Cargo Van"}),e.jsx(T,{value:"mini_truck",children:"Mini Truck"}),e.jsx(T,{value:"lorry",children:"Lorry"}),e.jsx(T,{value:"container",children:"Container"}),e.jsx(T,{value:"mixed_fleet",children:"Mixed Fleet"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"operatingHours",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select operating hours"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"24_hours",children:"24 Hours"}),e.jsx(T,{value:"day_only",children:"Day Only (6 AM - 8 PM)"}),e.jsx(T,{value:"night_only",children:"Night Only (8 PM - 6 AM)"}),e.jsx(T,{value:"custom",children:"Custom Schedule"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"servicesOffered",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Services Offered"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., Long-distance, Local moving, Express delivery"})}),e.jsx(qe,{children:"List the services you offer, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{name:"coverageAreas",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Coverage Areas"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., Chennai, Coimbatore, Salem, Madurai"})}),e.jsx(qe,{children:"List the areas you cover, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{name:"maxCapacity",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Maximum Capacity"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., 5 tons"})}),e.jsx(H,{})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"bankName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Bank Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountNumber",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Number"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"ifscCode",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"IFSC Code"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountHolderName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Holder Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})})]})]});return e.jsx(pd,{title:"Transportation Agent Registration",description:"Register as a transportation agent to offer logistics and delivery services through our platform.",providerType:"transportation_agent",schema:x6e,defaultValues:{vehicleTypes:"",operatingHours:"",servicesOffered:"",coverageAreas:"",maxCapacity:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""},extraFields:e.jsx(s,{}),submitHandler:r})}const v6e=hd.extend({itemCategories:R().min(1,{message:"Item categories are required"}),operatingHours:R().min(1,{message:"Operating hours are required"}),rentalTerms:R().min(1,{message:"Rental terms are required"}),securityDepositTerms:R().min(1,{message:"Security deposit terms are required"}),bankName:R().min(1,{message:"Bank name is required"}),accountNumber:R().min(1,{message:"Account number is required"}),ifscCode:R().min(1,{message:"IFSC code is required"}),accountHolderName:R().min(1,{message:"Account holder name is required"})});function y6e(){const{toast:t}=Ue(),r=async(n,a)=>{try{console.log("Submitting rental provider data:",{serviceProviderId:n,...a});const i={bankName:a.bankName,accountNumber:a.accountNumber,ifscCode:a.ifscCode,accountHolderName:a.accountHolderName},l={serviceProviderId:n,itemCategories:a.itemCategories,operatingHours:a.operatingHours,rentalTerms:a.rentalTerms,securityDepositTerms:a.securityDepositTerms,bankDetails:i},o=await ie("POST","/api/rental-provider-details",l);if(!o.ok){const c=await o.json();throw console.error("API error response:",c),new Error(c.message||"Failed to create rental provider details")}return await o.json()}catch(i){throw console.error("Error creating rental provider details:",i),t({title:"Error Creating Rental Provider Details",description:i.message||"An unexpected error occurred",variant:"destructive"}),i}},s=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Rental Service Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"itemCategories",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Item Categories"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., Construction Equipment, Electronics, Furniture"})}),e.jsx(qe,{children:"List the categories of items you rent out, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{name:"operatingHours",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select operating hours"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"24_hours",children:"24 Hours"}),e.jsx(T,{value:"business_hours",children:"Business Hours (9 AM - 6 PM)"}),e.jsx(T,{value:"extended_hours",children:"Extended Hours (8 AM - 8 PM)"}),e.jsx(T,{value:"custom",children:"Custom Schedule"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"rentalTerms",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Rental Terms"}),e.jsx(V,{children:e.jsx(at,{...n,placeholder:"Describe your rental terms and conditions",className:"min-h-[120px]"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"securityDepositTerms",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Security Deposit Terms"}),e.jsx(V,{children:e.jsx(at,{...n,placeholder:"Describe your security deposit requirements and refund policies",className:"min-h-[120px]"})}),e.jsx(H,{})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"bankName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Bank Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountNumber",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Number"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"ifscCode",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"IFSC Code"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountHolderName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Holder Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})})]})]});return e.jsx(pd,{title:"Rental Provider Registration",description:"Register as a rental provider to offer rental services for equipment, vehicles, and more through our platform.",providerType:"rental_provider",schema:v6e,defaultValues:{itemCategories:"",operatingHours:"",rentalTerms:"",securityDepositTerms:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""},extraFields:e.jsx(s,{}),submitHandler:r})}const j6e=hd.extend({materialTypes:R().min(1,{message:"Material types are required"}),operatingHours:R().min(1,{message:"Operating hours are required"}),pricingPolicy:R().min(1,{message:"Pricing policy is required"}),processingCapacity:R().min(1,{message:"Processing capacity is required"}),bankName:R().min(1,{message:"Bank name is required"}),accountNumber:R().min(1,{message:"Account number is required"}),ifscCode:R().min(1,{message:"IFSC code is required"}),accountHolderName:R().min(1,{message:"Account holder name is required"})});function b6e(){const{toast:t}=Ue(),r=async(n,a)=>{try{console.log("Submitting recycling agent data:",{serviceProviderId:n,...a});const i={bankName:a.bankName,accountNumber:a.accountNumber,ifscCode:a.ifscCode,accountHolderName:a.accountHolderName},l={serviceProviderId:n,materialTypes:a.materialTypes,operatingHours:a.operatingHours,pricingPolicy:a.pricingPolicy,processingCapacity:a.processingCapacity,bankDetails:i},o=await ie("POST","/api/recycling-agent-details",l);if(!o.ok){const c=await o.json();throw console.error("API error response:",c),new Error(c.message||"Failed to create recycling agent details")}return await o.json()}catch(i){throw console.error("Error creating recycling agent details:",i),t({title:"Error Creating Recycling Agent Details",description:i.message||"An unexpected error occurred",variant:"destructive"}),i}},s=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Recycling Service Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"materialTypes",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Material Types"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., Paper, Plastic, Metal, E-waste"})}),e.jsx(qe,{children:"List the materials you recycle, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{name:"operatingHours",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Operating Hours"}),e.jsx(V,{children:e.jsxs(je,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select operating hours"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"business_hours",children:"Business Hours (9 AM - 6 PM)"}),e.jsx(T,{value:"extended_hours",children:"Extended Hours (8 AM - 8 PM)"}),e.jsx(T,{value:"24_hours",children:"24 Hours"}),e.jsx(T,{value:"custom",children:"Custom Schedule"})]})]})}),e.jsx(H,{})]})}),e.jsx(U,{name:"processingCapacity",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Processing Capacity"}),e.jsx(V,{children:e.jsx($,{...n,placeholder:"e.g., 500 kg per day"})}),e.jsx(H,{})]})}),e.jsx(U,{name:"pricingPolicy",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pricing Policy"}),e.jsx(V,{children:e.jsx(at,{...n,placeholder:"Describe your pricing structure for different materials",className:"min-h-[120px]"})}),e.jsx(H,{})]})})]}),e.jsx("h3",{className:"text-lg font-medium mt-8",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(U,{name:"bankName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Bank Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountNumber",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Number"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"ifscCode",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"IFSC Code"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})}),e.jsx(U,{name:"accountHolderName",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Account Holder Name"}),e.jsx(V,{children:e.jsx($,{...n})}),e.jsx(H,{})]})})]})]});return e.jsx(pd,{title:"Recycling Agent Registration",description:"Register as a recycling agent to help promote sustainability through our platform.",providerType:"recycling_agent",schema:j6e,defaultValues:{materialTypes:"",operatingHours:"",pricingPolicy:"",processingCapacity:"",bankName:"",accountNumber:"",ifscCode:"",accountHolderName:""},extraFields:e.jsx(s,{}),submitHandler:r})}function N6e(){const{user:t}=dt();br();const r=[{id:"branch_manager",title:"Branch Manager",description:"Apply to manage our services at the district level.",responsibilities:["Manage all operations within a district","Oversee multiple taluk managers","Coordinate with head office on district-level initiatives","Monitor service quality and customer satisfaction","Implement strategic plans and expansion activities"],icon:e.jsx(hC,{className:"h-8 w-8 text-blue-600"}),path:"/manager-registration/branch-manager",color:"bg-blue-50 border-blue-100",iconBg:"bg-blue-100",buttonColor:"text-blue-600 border-blue-200 hover:bg-blue-50",countLabel:"Branch Managers",countValue:"38+",countDescription:"across Tamil Nadu"},{id:"taluk_manager",title:"Taluk Manager",description:"Apply to manage our services at the taluk level.",responsibilities:["Oversee all operations within a taluk","Manage multiple service agents in your area","Ensure quality service delivery to customers","Handle local partnerships and community relations","Report to district branch manager"],icon:e.jsx(S$,{className:"h-8 w-8 text-green-600"}),path:"/manager-registration/taluk-manager",color:"bg-green-50 border-green-100",iconBg:"bg-green-100",buttonColor:"text-green-600 border-green-200 hover:bg-green-50",countLabel:"Taluk Managers",countValue:"261+",countDescription:"across Tamil Nadu"},{id:"service_agent",title:"Service Agent",description:"Apply to be the face of our services in your local area.",responsibilities:["Provide direct services to customers in your area","Handle recharge, booking, and payment services","Serve as the local point of contact for our platform","Build and maintain customer relationships","Report to taluk manager"],icon:e.jsx(rr,{className:"h-8 w-8 text-orange-600"}),path:"/manager-registration/service-agent",color:"bg-orange-50 border-orange-100",iconBg:"bg-orange-100",buttonColor:"text-orange-600 border-orange-200 hover:bg-orange-50",countLabel:"Service Agents",countValue:"517+",countDescription:"and growing"}];return e.jsx("div",{className:"container py-10 px-4",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Join Our Managerial Team"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Select the role you're interested in applying for. Our platform provides opportunities at different levels, from district management to local service delivery."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(s=>e.jsxs(O,{className:"shadow-md border-0 overflow-hidden transition-all hover:shadow-lg",children:[e.jsx(G,{className:`${s.color} border-b`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`${s.iconBg} p-3 rounded-md`,children:s.icon}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl font-bold",children:s.title}),e.jsx(he,{className:"text-sm",children:s.description})]})]})}),e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md text-center",children:[e.jsx("div",{className:"font-bold text-2xl text-gray-800",children:s.countValue}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.countLabel," ",s.countDescription]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Key Responsibilities:"}),e.jsx("ul",{className:"space-y-2",children:s.responsibilities.map((n,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("div",{className:"rounded-full bg-gray-200 min-w-[18px] h-[18px] flex items-center justify-center text-xs mt-0.5",children:a+1}),e.jsx("span",{children:n})]},a))})]})]})}),e.jsx(pr,{className:"border-t pt-4",children:e.jsx(Ot,{href:s.path,className:"w-full",children:e.jsxs(_,{variant:"outline",className:`w-full ${s.buttonColor} flex items-center justify-center gap-2`,children:["Apply as ",s.title,e.jsx(ii,{className:"h-4 w-4"})]})})})]},s.id))}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Already applied for a managerial position? Check your application status on the dashboard."}),e.jsx(Ot,{href:"/",children:e.jsx(_,{variant:"outline",className:"mx-auto",children:"Return to Dashboard"})})]})]})})}const qk=["Ariyalur","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kancheepuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Tiruchirapalli","Tirunelveli","Tirupattur","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Viluppuram","Virudhunagar"],w6e=["Full-time","Part-time","Weekends Only","Evenings Only","Flexible Hours"],S6e=["10th Pass","12th Pass","Diploma","Bachelor's Degree","Master's Degree","Ph.D","Other"],zk=Kt({fullName:R().min(3,{message:"Full name is required"}),email:R().email({message:"Valid email is required"}),phone:R().min(10,{message:"Valid phone number is required"}),username:R().min(3,{message:"Username must be at least 3 characters"}),password:R().min(6,{message:"Password must be at least 6 characters"}),address:R().min(5,{message:"Address is required"}),district:R({required_error:"Please select a district"}),currentOccupation:R().min(2,{message:"Current occupation is required"}),employmentType:R({required_error:"Please select employment type"}),educationLevel:R().optional(),experience:R().optional(),notes:R().optional()});function Kk({managerType:t,additionalFields:r,formSchema:s,defaultValues:n,onSubmit:a,title:i,description:l,iconComponent:o}){const{toast:c}=Ue(),[d,u]=j.useState(!1),[m,h]=j.useState(!1),[g,x]=j.useState(null),p=Gt({resolver:Yt(s),defaultValues:n}),y=async v=>{u(!0),x(null);try{const f={...v,managerType:t,status:"pending",notes:v.notes||`Applied for ${t.replace("_"," ")} position`},N=await(await fetch("/api/manager-applications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).json();N.success?(h(!0),c({title:"Application Submitted",description:"Your application has been submitted successfully. We'll review it shortly.",variant:"default"})):(x(N.message||"Failed to submit application. Please try again."),c({title:"Submission Failed",description:N.message||"Failed to submit application. Please try again.",variant:"destructive"}))}catch(f){console.error("Error submitting application:",f),x("An unexpected error occurred. Please try again later."),c({title:"Submission Error",description:"An unexpected error occurred. Please try again later.",variant:"destructive"})}finally{u(!1)}};return m?e.jsx("div",{className:"container py-10 px-4",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(O,{className:"shadow-md border-0",children:[e.jsx(G,{className:"bg-green-50 border-b border-green-100",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full mb-4",children:e.jsx(Mt,{className:"h-10 w-10 text-green-600"})}),e.jsx(Y,{className:"text-2xl text-green-800",children:"Application Submitted Successfully!"}),e.jsxs(he,{className:"text-green-700 mt-2",children:["Thank you for applying to be a ",t.replace("_"," ")]})]})}),e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-700",children:"Your application has been received and will be reviewed by our admin team. We'll contact you via the email you provided about the status of your application."}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"What happens next?"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-blue-700",children:[e.jsx("li",{children:"Our admin team will review your application"}),e.jsx("li",{children:"Your application will be either approved or rejected based on our current needs"}),e.jsx("li",{children:"You'll receive an email notification about the decision"}),e.jsx("li",{children:"If approved, you'll receive login credentials to access your managerial dashboard"})]})]})]})}),e.jsx(pr,{className:"justify-center border-t py-4 bg-gray-50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[e.jsx(Ot,{href:"/manager-registration",children:e.jsxs(_,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back to Registration Options"]})}),e.jsx(Ot,{href:"/",children:e.jsx(_,{className:"w-full sm:w-auto",children:"Go to Dashboard"})})]})})]})})}):e.jsx("div",{className:"container py-10 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Ot,{href:"/manager-registration",children:e.jsxs(_,{variant:"ghost",className:"pl-0 mb-4",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back to Registration Options"]})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:i}),e.jsx("p",{className:"text-gray-600 mt-2",children:l})]}),g&&e.jsxs(xa,{variant:"destructive",className:"mb-6",children:[e.jsx(di,{className:"h-4 w-4"}),e.jsx(Wi,{children:"Error"}),e.jsx(ga,{children:g})]}),e.jsxs(O,{className:"shadow-md border-0",children:[e.jsx(G,{className:"bg-gray-50 border-b",children:e.jsxs("div",{className:"flex items-center",children:[o&&e.jsx("div",{className:"mr-4 bg-white p-3 rounded-md shadow-sm",children:o}),e.jsxs("div",{children:[e.jsx(Y,{children:"Personal Information"}),e.jsx(he,{children:"Please provide your personal details to apply"})]})]})}),e.jsx(E,{className:"pt-6",children:e.jsx(Qt,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:p.control,name:"fullName",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name*"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your full name",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"email",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Email Address*"}),e.jsx(V,{children:e.jsx($,{type:"email",placeholder:"your.email@example.com",...v})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:p.control,name:"phone",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone Number*"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your phone number",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"district",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"District*"}),e.jsxs(je,{onValueChange:v.onChange,defaultValue:v.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a district"})})}),e.jsx(ve,{children:qk.map(f=>e.jsx(T,{value:f,children:f},f))})]}),e.jsx(H,{})]})})]}),e.jsx(U,{control:p.control,name:"address",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Address*"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Enter your complete address",className:"resize-none",...v})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:p.control,name:"currentOccupation",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Current Occupation*"}),e.jsx(V,{children:e.jsx($,{placeholder:"What do you currently do?",...v})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"employmentType",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Preferred Employment Type*"}),e.jsxs(je,{onValueChange:v.onChange,defaultValue:v.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select employment type"})})}),e.jsx(ve,{children:w6e.map(f=>e.jsx(T,{value:f,children:f},f))})]}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:p.control,name:"educationLevel",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Education Level"}),e.jsxs(je,{onValueChange:v.onChange,defaultValue:v.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select education level"})})}),e.jsx(ve,{children:S6e.map(f=>e.jsx(T,{value:f,children:f},f))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"experience",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Experience (Years)"}),e.jsx(V,{children:e.jsx($,{placeholder:"Years of relevant experience",...v})}),e.jsx(H,{})]})})]}),r,e.jsx(U,{control:p.control,name:"notes",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Additional Information"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Any additional information you'd like to share with us",className:"resize-none min-h-[100px]",...v})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:p.control,name:"username",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Username*"}),e.jsx(V,{children:e.jsx($,{placeholder:"Choose a username",...v})}),e.jsx(qe,{children:"This will be your login username"}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"password",render:({field:v})=>e.jsxs(L,{children:[e.jsx(B,{children:"Password*"}),e.jsx(V,{children:e.jsx($,{type:"password",placeholder:"Choose a secure password",...v})}),e.jsx(qe,{children:"Minimum 6 characters"}),e.jsx(H,{})]})})]})]}),e.jsx(_,{type:"submit",className:"w-full",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting Application..."]}):"Submit Application"})]})})})]})]})})}const C6e=zk.extend({leadershipExperience:R().min(1,{message:"Please provide your leadership experience"}),preferredDistricts:R().min(1,{message:"Please provide your preferred districts"}),canTravelRegularly:tr().default(!1)}),P6e={fullName:"",email:"",phone:"",address:"",district:"",currentOccupation:"",employmentType:"",educationLevel:"",experience:"",username:"",password:"",leadershipExperience:"",preferredDistricts:"",canTravelRegularly:!1,notes:""};function k6e(){const{user:t}=dt(),r=n=>{console.log("Branch Manager application:",n)},s=e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Branch Manager Specific Information"}),e.jsx(U,{name:"leadershipExperience",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Leadership Experience*"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your leadership experience",className:"resize-none min-h-[100px]",...n})}),e.jsx(qe,{children:"Explain any previous leadership roles or experience managing teams"}),e.jsx(H,{})]})}),e.jsx(U,{name:"preferredDistricts",render:({field:n})=>e.jsxs(L,{children:[e.jsx(B,{children:"Preferred Districts*"}),e.jsx(V,{children:e.jsx($,{placeholder:"List districts you'd prefer to manage",...n})}),e.jsx(qe,{children:"List 1-3 districts where you'd prefer to work, separated by commas"}),e.jsx(H,{})]})}),e.jsx(U,{name:"canTravelRegularly",render:({field:n})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:n.value,onCheckedChange:n.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Available for Regular Travel"}),e.jsx(qe,{children:"Branch managers are required to travel within their district regularly"})]})]})})]});return e.jsx(Kk,{managerType:"branch_manager",additionalFields:s,formSchema:C6e,defaultValues:P6e,onSubmit:r,title:"Branch Manager Application",description:"Apply to become a branch manager and oversee operations at the district level.",iconComponent:e.jsx(hC,{className:"h-6 w-6 text-blue-600"})})}const nM={Chennai:["Chennai North","Chennai South","Chennai East","Chennai West","Chennai Central"],Coimbatore:["Coimbatore North","Coimbatore South","Mettupalayam","Pollachi","Sulur","Valparai"],Madurai:["Madurai North","Madurai South","Madurai East","Madurai West","Melur","Peraiyur","Usilampatti","Vadipatti"],Salem:["Salem","Attur","Edapadi","Gangavalli","Mettur","Omalur","Sankari","Vazhapadi","Yercaud"],Tirupur:["Tirupur North","Tirupur South","Avinashi","Dharapuram","Kangeyam","Madathukulam","Palladam","Udumalaipettai"]},A6e=zk.extend({taluk:R().min(1,{message:"Please select a taluk"}),localAreaKnowledge:R().min(1,{message:"Please describe your knowledge of the local area"}),canManageAgents:tr().default(!1)}),_6e={fullName:"",email:"",phone:"",address:"",district:"",taluk:"",currentOccupation:"",employmentType:"",educationLevel:"",experience:"",username:"",password:"",localAreaKnowledge:"",canManageAgents:!1,notes:""};function T6e(){const{user:t}=dt(),[r,s]=j.useState(""),[n,a]=j.useState([]),i=c=>{s(c),c&&nM[c]?a(nM[c]):a([])},l=c=>{console.log("Taluk Manager application:",c)},o=e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Taluk Manager Specific Information"}),e.jsx(U,{name:"district",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"District*"}),e.jsxs(je,{onValueChange:d=>{c.onChange(d),i(d)},defaultValue:c.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a district"})})}),e.jsx(ve,{children:qk.map(d=>e.jsx(T,{value:d,children:d},d))})]}),e.jsx(qe,{children:"Select the district where you want to work"}),e.jsx(H,{})]})}),e.jsx(U,{name:"taluk",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk*"}),e.jsxs(je,{onValueChange:c.onChange,defaultValue:c.value,disabled:n.length===0,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:n.length===0?"Select a district first":"Select a taluk"})})}),e.jsx(ve,{children:n.map(d=>e.jsx(T,{value:d,children:d},d))})]}),e.jsx(qe,{children:"Select the taluk you want to manage"}),e.jsx(H,{})]})}),e.jsx(U,{name:"localAreaKnowledge",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Local Area Knowledge*"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your knowledge of and connection to the local area",className:"resize-none min-h-[100px]",...c})}),e.jsx(qe,{children:"How familiar are you with the area? Do you live there or have connections?"}),e.jsx(H,{})]})}),e.jsx(U,{name:"canManageAgents",render:({field:c})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:c.value,onCheckedChange:c.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"Comfortable Managing Service Agents"}),e.jsx(qe,{children:"Taluk managers oversee multiple service agents in their area"})]})]})})]});return e.jsx(Kk,{managerType:"taluk_manager",additionalFields:o,formSchema:A6e,defaultValues:_6e,onSubmit:l,title:"Taluk Manager Application",description:"Apply to become a taluk manager and coordinate services within your taluk.",iconComponent:e.jsx(S$,{className:"h-6 w-6 text-green-600"})})}const aM={Chennai:["Chennai North","Chennai South","Chennai East","Chennai West","Chennai Central"],Coimbatore:["Coimbatore North","Coimbatore South","Mettupalayam","Pollachi","Sulur","Valparai"],Madurai:["Madurai North","Madurai South","Madurai East","Madurai West","Melur","Peraiyur","Usilampatti","Vadipatti"],Salem:["Salem","Attur","Edapadi","Gangavalli","Mettur","Omalur","Sankari","Vazhapadi","Yercaud"],Tirupur:["Tirupur North","Tirupur South","Avinashi","Dharapuram","Kangeyam","Madathukulam","Palladam","Udumalaipettai"]},O6e=zk.extend({taluk:R().min(1,{message:"Please select a taluk"}),pincode:R().min(6,{message:"Please enter a valid 6-digit pincode"}),vehicleOwned:R().optional(),hasSmartphone:tr().default(!0),servicePreferences:R().optional()}),E6e={fullName:"",email:"",phone:"",address:"",district:"",taluk:"",pincode:"",currentOccupation:"",employmentType:"",educationLevel:"",experience:"",username:"",password:"",vehicleOwned:"",hasSmartphone:!0,servicePreferences:"",notes:""},D6e=["None","Bicycle","Motorcycle/Scooter","Car","Auto-rickshaw","Other"];function M6e(){const{user:t}=dt(),[r,s]=j.useState(""),[n,a]=j.useState([]),i=c=>{s(c),c&&aM[c]?a(aM[c]):a([])},l=c=>{console.log("Service Agent application:",c)},o=e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Service Agent Specific Information"}),e.jsx(U,{name:"district",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"District*"}),e.jsxs(je,{onValueChange:d=>{c.onChange(d),i(d)},defaultValue:c.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a district"})})}),e.jsx(ve,{children:qk.map(d=>e.jsx(T,{value:d,children:d},d))})]}),e.jsx(qe,{children:"Select the district where you want to work"}),e.jsx(H,{})]})}),e.jsx(U,{name:"taluk",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk*"}),e.jsxs(je,{onValueChange:c.onChange,defaultValue:c.value,disabled:n.length===0,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:n.length===0?"Select a district first":"Select a taluk"})})}),e.jsx(ve,{children:n.map(d=>e.jsx(T,{value:d,children:d},d))})]}),e.jsx(qe,{children:"Select the taluk you want to serve"}),e.jsx(H,{})]})}),e.jsx(U,{name:"pincode",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode*"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your area pincode",...c,maxLength:6})}),e.jsx(qe,{children:"Service agents operate within a specific pincode area"}),e.jsx(H,{})]})}),e.jsx(U,{name:"vehicleOwned",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Vehicle Owned"}),e.jsxs(je,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select vehicle type"})})}),e.jsx(ve,{children:D6e.map(d=>e.jsx(T,{value:d,children:d},d))})]}),e.jsx(qe,{children:"Having a vehicle helps in providing services efficiently"}),e.jsx(H,{})]})}),e.jsx(U,{name:"hasSmartphone",render:({field:c})=>e.jsxs(L,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(V,{children:e.jsx(Pn,{checked:c.value,onCheckedChange:c.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(B,{children:"I have a smartphone with internet"}),e.jsx(qe,{children:"A smartphone is required to access our service agent app"})]})]})}),e.jsx(U,{name:"servicePreferences",render:({field:c})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Preferences"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Which services are you most interested in providing? (e.g., Recharges, Bookings, Deliveries)",className:"resize-none min-h-[100px]",...c})}),e.jsx(qe,{children:"Let us know which services you're most comfortable providing"}),e.jsx(H,{})]})})]});return e.jsx(Kk,{managerType:"service_agent",additionalFields:o,formSchema:O6e,defaultValues:E6e,onSubmit:l,title:"Service Agent Application",description:"Apply to become a service agent and provide direct service support to customers.",iconComponent:e.jsx(rr,{className:"h-6 w-6 text-orange-600"})})}function I6e(){var n;const[t,r]=j.useState(null),s=[{id:"5",name:"Coconut oil",icon:""},{id:"6",name:"Groundnut oil",icon:""},{id:"7",name:"Olive oil",icon:""},{id:"11",name:"Palm oil",icon:""}];return e.jsxs("div",{style:{maxWidth:"800px",margin:"20px auto",padding:"20px",fontFamily:"Arial, sans-serif"},children:[e.jsx("h1",{style:{fontSize:"24px",marginBottom:"20px"},children:"Oil Subcategories Test Page"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{style:{flex:"1",minWidth:"250px",padding:"20px",border:"1px solid #eee",borderRadius:"8px",backgroundColor:"white"},children:[e.jsx("h2",{style:{fontSize:"18px",marginBottom:"15px"},children:"Oil Types"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.map(a=>e.jsxs("button",{style:{display:"flex",alignItems:"center",width:"100%",textAlign:"left",padding:"8px 12px",borderRadius:"4px",border:"none",cursor:"pointer",backgroundColor:t===a.id?"#eef3ff":"transparent",color:t===a.id?"#2563eb":"inherit",fontWeight:t===a.id?"500":"normal"},onClick:()=>r(t===a.id?null:a.id),children:[e.jsx("span",{style:{marginRight:"8px",fontSize:"20px"},children:a.icon}),e.jsx("span",{children:a.name})]},a.id))}),e.jsx("div",{style:{margin:"20px 0",height:"1px",backgroundColor:"#eee"}}),e.jsx("a",{href:"/grocery",style:{display:"block",textAlign:"center",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",textDecoration:"none",color:"#333"},children:"Return to Grocery"})]}),e.jsxs("div",{style:{flex:"2",minWidth:"300px",padding:"20px",border:"1px solid #eee",borderRadius:"8px",backgroundColor:"white"},children:[e.jsx("h2",{style:{fontSize:"18px",marginBottom:"15px"},children:"Selected Subcategory"}),t?e.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8fafc",borderRadius:"6px"},children:[e.jsxs("p",{style:{fontWeight:"500",color:"#2563eb"},children:["Selected: ",t]}),e.jsxs("p",{style:{fontSize:"14px",color:"#64748b",marginTop:"4px"},children:["Oil type: ",((n=s.find(a=>a.id===t))==null?void 0:n.name)||t]})]}):e.jsx("p",{style:{fontStyle:"italic",color:"#64748b"},children:"No subcategory selected"}),e.jsx("h2",{style:{fontSize:"18px",marginTop:"25px",marginBottom:"15px"},children:"Instructions"}),e.jsx("p",{style:{color:"#334155",marginBottom:"15px"},children:"This is a standalone test page to verify the display of oil subcategories is working correctly. You should see a list of oil types with emoji icons in the sidebar."}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#f8fafc",borderRadius:"6px"},children:[e.jsx("h3",{style:{fontWeight:"500",marginBottom:"10px"},children:"Test Results"}),e.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0,fontSize:"14px"},children:[e.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#22c55e",marginRight:"8px"},children:""}),"Simple UI is displayed"]}),e.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#22c55e",marginRight:"8px"},children:""}),"Oil types are listed"]}),e.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#22c55e",marginRight:"8px"},children:""}),"Emoji icons are visible"]}),e.jsxs("li",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{color:"#22c55e",marginRight:"8px"},children:""}),"Selection is working properly"]})]})]})]})]})]})}function R6e(){const[t,r]=j.useState("4"),[s,n]=j.useState(null),a=[{id:"1",name:"Fruits"},{id:"2",name:"Vegetables"},{id:"3",name:"Grains"},{id:"4",name:"Oils"}];return e.jsxs("div",{className:"container py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Subcategory Component Test"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[e.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Direct Subcategory Display"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"1. Select Category:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(i=>e.jsx(_,{variant:t===i.id?"default":"outline",size:"sm",onClick:()=>{r(i.id),n(null)},children:i.name},i.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"2. Available Subcategories:"}),e.jsx("div",{className:"border rounded-md p-4 bg-gray-50",children:t?e.jsx(QS,{categoryId:t,onSelect:n,activeSubcategory:s}):e.jsx("p",{className:"text-sm text-gray-500",children:"Select a category first"})})]})]})})]})}),e.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Debug Information"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Active Category:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded-md text-sm",children:t||"null"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Selected Subcategory:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded-md text-sm",children:s||"null"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"API Endpoint:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded-md text-sm whitespace-normal break-all",children:t?`/api/grocery/subcategories-public?parentCategoryId=${t}`:"-"}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>{t&&window.open(`/api/grocery/subcategories-public?parentCategoryId=${t}`,"_blank")},disabled:!t,children:"Test API Directly"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium",children:"Request Flow:"}),e.jsxs("ol",{className:"ml-5 text-sm space-y-1 list-decimal",children:[e.jsxs("li",{children:["Component makes direct API request to ",e.jsx("code",{children:"/api/grocery/subcategories-public"})]}),e.jsx("li",{children:"Server looks up subcategories in the database"}),e.jsx("li",{children:"If subcategories are found, they are returned"}),e.jsx("li",{children:"If not found, hardcoded fallbacks are provided"}),e.jsx("li",{children:"Component displays the subcategories with images or icons"})]})]})]})})]})})]})]})}function F6e(){var S,A;const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(null),[a,i]=j.useState(null),[l,o]=j.useState(""),[c,d]=j.useState([]);j.useEffect(()=>{const k=localStorage.getItem("groceryCart");if(k)try{d(JSON.parse(k))}catch(D){console.error("Failed to parse saved cart",D)}},[]),j.useEffect(()=>{localStorage.setItem("groceryCart",JSON.stringify(c))},[c]);const{data:u=[],isLoading:m,isError:h}=fe({queryKey:["/api/grocery/categories"],enabled:!0}),{data:g=[],isLoading:x,isError:p}=fe({queryKey:["/api/grocery/subcategories-public",s],enabled:!!s}),{data:y=[],isLoading:v,isError:f}=fe({queryKey:["/api/grocery/products",s,a],enabled:!!s||!!a}),b=Array.isArray(y)?y.filter(k=>{var D,q;return!(l&&!k.name.toLowerCase().includes(l.toLowerCase())||a&&((D=k.subcategoryId)==null?void 0:D.toString())!==a||s&&!a&&((q=k.categoryId)==null?void 0:q.toString())!==s)}):[],N=k=>{d(D=>D.find(z=>z.id===k)?D.map(z=>z.id===k?{...z,quantity:z.quantity+1}:z):[...D,{id:k,quantity:1}]),r({title:"Added to cart",description:"Item has been added to your shopping cart"})},w=()=>{n(null),i(null),o("")},C=s?(S=u.find(k=>k.id.toString()===s))==null?void 0:S.name:null,P=a?(A=g.find(k=>k.id.toString()===a))==null?void 0:A.name:null;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto py-4 px-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Grocery Shopping"}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative flex-1 md:w-80",children:[e.jsx(as,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx($,{placeholder:"Search products...",className:"pl-10 pr-10 py-2 rounded-lg",value:l,onChange:k=>o(k.target.value)}),l&&e.jsx("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-900",onClick:()=>o(""),children:e.jsx(Es,{className:"h-4 w-4"})})]}),e.jsxs(_,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(_r,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Cart"}),e.jsx(ae,{variant:"secondary",className:"ml-1",children:c.reduce((k,D)=>k+D.quantity,0)})]})]})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Browse Products"}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("button",{className:`hover:underline ${s?"text-gray-600":"font-semibold text-primary"}`,onClick:w,children:"All Categories"}),C&&e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"h-4 w-4 mx-1 text-gray-400"}),e.jsx("button",{className:`hover:underline ${a?"text-gray-600":"font-semibold text-primary"}`,onClick:()=>i(null),children:C})]}),P&&e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"h-4 w-4 mx-1 text-gray-400"}),e.jsx("span",{className:"font-semibold text-primary",children:P})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 p-1 rounded mr-2",children:"1"}),"Categories"]})}),e.jsx("div",{className:"p-3 max-h-[60vh] overflow-y-auto",children:m?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(Qe,{className:"h-6 w-6 animate-spin text-gray-400"})}):h?e.jsxs("div",{className:"text-center p-4 text-sm text-red-500",children:[e.jsx(lr,{className:"h-5 w-5 mx-auto mb-2"}),e.jsx("p",{children:"Failed to load categories"})]}):e.jsx("div",{className:"space-y-1",children:u.map(k=>e.jsx("button",{className:`w-full text-left px-3 py-2 rounded-md transition-colors ${s===k.id.toString()?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,onClick:()=>{n(k.id.toString()),i(null)},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"flex-1",children:k.name}),s===k.id.toString()&&e.jsx(Ks,{className:"h-4 w-4 text-blue-600"})]})},k.id))})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx("span",{className:"bg-green-100 text-green-800 p-1 rounded mr-2",children:"2"}),"Subcategories"]})}),e.jsx("div",{className:"p-3 max-h-[60vh] overflow-y-auto",children:s?x?e.jsx("div",{className:"flex justify-center p-4",children:e.jsx(Qe,{className:"h-6 w-6 animate-spin text-gray-400"})}):p?e.jsxs("div",{className:"text-center p-4 text-sm text-red-500",children:[e.jsx(lr,{className:"h-5 w-5 mx-auto mb-2"}),e.jsx("p",{children:"Failed to load subcategories"})]}):g.length>0?e.jsx("div",{className:"space-y-1",children:g.map(k=>e.jsx("button",{className:`w-full text-left px-3 py-2 rounded-md transition-colors ${a===k.id.toString()?"bg-green-100 text-green-800":"hover:bg-gray-100"}`,onClick:()=>i(k.id.toString()),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"flex-1",children:k.name}),a===k.id.toString()&&e.jsx(Ks,{className:"h-4 w-4 text-green-600"})]})},k.id))}):e.jsx("div",{className:"text-center p-6 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"No subcategories found"})}):e.jsx("div",{className:"text-center p-6 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Please select a category first"})})})]})}),e.jsx("div",{className:"lg:col-span-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"font-semibold flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-amber-100 text-amber-800 p-1 rounded mr-2",children:"3"}),"Products"]}),e.jsxs(ae,{variant:"outline",children:[b.length," ",b.length===1?"product":"products"]})]})}),e.jsx("div",{className:"p-4",children:v?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin text-gray-400"})}):f?e.jsxs("div",{className:"text-center py-8 text-red-500",children:[e.jsx(lr,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Failed to load products"})]}):s?b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(zw,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No products found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try selecting a different category or subcategory"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(k=>e.jsx(O,{className:"overflow-hidden hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 relative flex-shrink-0",children:k.imageUrl?e.jsx("img",{src:k.imageUrl,alt:k.name,className:"w-full h-full object-cover",onError:D=>{D.currentTarget.src="/uploads/fallback/default.svg"}}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(zw,{className:"h-8 w-8 text-gray-300"})})}),e.jsx("div",{className:"p-3 flex-1",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",children:k.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[k.unit&&e.jsx(ae,{variant:"secondary",className:"text-xs",children:k.unit}),k.isOrganic&&e.jsxs(ae,{variant:"outline",className:"text-xs text-green-600 border-green-200 bg-green-50",children:[e.jsx(Vs,{className:"h-3 w-3 mr-1"}),"Organic"]})]}),e.jsxs("div",{className:"mt-auto pt-2 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm font-semibold",children:["",k.discountedPrice||k.price]}),e.jsxs(_,{size:"sm",className:"h-8 px-3",onClick:()=>N(k.id),children:[e.jsx(_r,{className:"h-3.5 w-3.5 mr-1"}),"Add"]})]})]})})]})},k.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"Please select a category to view products"})})})]})})]})]})]})}const $6e=Kt({name:R().min(2,"Product name is required"),description:R().min(10,"Description must be at least 10 characters"),category:R().min(1,"Category is required"),price:ct().min(.01,"Price must be greater than 0"),discountedPrice:ct().optional(),stock:ct().min(0,"Stock cannot be negative"),unit:R().min(1,"Unit is required"),isOrganic:tr().default(!1),imageUrl:R().url("Invalid image URL").optional().or(gv("")),deliveryOption:Yr(["direct","service","both"]).default("both"),availableAreas:R().optional()}),L6e=["Vegetables","Fruits","Grains","Pulses","Spices","Dairy","Oils","Beverages","Snacks","Sweets","Meat","Fish","Bakery","Others"],B6e=["kg","g","l","ml","pcs","dozen","bunch","packet"];function V6e(){const{user:t}=dt(),{toast:r}=Ue(),s=hj(),[n,a]=j.useState(!1),[i,l]=j.useState(null),{data:o,isLoading:c}=fe({queryKey:["/api/provider/products"],enabled:!!t}),{data:d}=fe({queryKey:["/api/provider/stats"],enabled:!!t}),u=Gt({resolver:Yt($6e),defaultValues:{name:"",description:"",category:"",price:0,discountedPrice:void 0,stock:0,unit:"kg",isOrganic:!1,imageUrl:"",deliveryOption:"both",availableAreas:""}}),m=Se({mutationFn:async f=>{console.log("Sending product data:",f);const b={name:f.name,description:f.description,category:f.category,price:f.price,discountedPrice:f.discountedPrice,stock:f.stock,unit:f.unit,isOrganic:f.isOrganic,imageUrl:f.imageUrl,deliveryOption:f.deliveryOption,availableAreas:f.availableAreas},C={groceryProductId:(await(await ie("POST","/api/grocery/product",b)).json()).id,pricePerUnit:f.price,availableQuantity:f.stock,description:f.description,isOrganic:f.isOrganic},P=await ie("POST","/api/farmer-products",C),S=P.headers.get("content-type");if(S&&S.indexOf("application/json")!==-1)return P.json();{const A=await P.text();throw console.error("Non-JSON response:",A),new Error("Server returned invalid response")}},onSuccess:()=>{r({title:"Product Added Successfully",description:"Your product has been added to the marketplace."}),pe.invalidateQueries({queryKey:["/api/provider/products"]}),pe.invalidateQueries({queryKey:["/api/provider/stats"]}),a(!1),u.reset()},onError:f=>{console.error("Product creation error:",f),r({title:"Error Adding Product",description:f.message||"Failed to add product",variant:"destructive"})}}),h=Se({mutationFn:async({id:f,data:b})=>(await ie("PUT",`/api/provider/products/${f}`,b)).json(),onSuccess:()=>{r({title:"Product Updated Successfully",description:"Your product has been updated."}),pe.invalidateQueries({queryKey:["/api/provider/products"]}),l(null),u.reset()},onError:f=>{r({title:"Error Updating Product",description:f.message||"Failed to update product",variant:"destructive"})}}),g=Se({mutationFn:async f=>{await ie("DELETE",`/api/provider/products/${f}`)},onSuccess:()=>{r({title:"Product Deleted",description:"Product has been removed from the marketplace."}),pe.invalidateQueries({queryKey:["/api/provider/products"]}),pe.invalidateQueries({queryKey:["/api/provider/stats"]})},onError:f=>{r({title:"Error Deleting Product",description:f.message||"Failed to delete product",variant:"destructive"})}}),x=f=>{i?h.mutate({id:i.id,data:f}):m.mutate(f)},p=f=>{l(f),u.reset({name:f.name,description:f.description,category:f.category,price:f.price,discountedPrice:f.discountedPrice||void 0,stock:f.stock,unit:f.unit,isOrganic:f.isOrganic||!1,imageUrl:f.imageUrl||"",deliveryOption:f.deliveryOption||"both",availableAreas:f.availableAreas||""}),a(!0)},y=f=>{confirm("Are you sure you want to delete this product?")&&g.mutate(f)},v=()=>{a(!1),l(null),u.reset()};return!t||t.userType!=="service_provider"?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Access denied. This page is only available for service providers."})})})}):s.canAccessRentalServices?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Rental Provider Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental equipment and track your business"})]}),e.jsx(Ot,{href:"/provider/rental-equipment",children:e.jsxs(_,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Manage Equipment"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Equipment"}),e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for rent"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Active Rentals"}),e.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently rented"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Monthly Revenue"}),e.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Customers"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Rental customers"})]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Quick Actions"}),e.jsx(he,{children:"Manage your rental business"})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(Ot,{href:"/provider/rental-equipment",children:e.jsx(O,{className:"hover:bg-accent cursor-pointer transition-colors",children:e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ft,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Manage Equipment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, edit, or remove rental equipment"})]})]})})})}),e.jsx(O,{className:"hover:bg-accent cursor-pointer transition-colors",children:e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ai,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"View Bookings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track active and upcoming rentals"})]})]})})}),e.jsx(O,{className:"hover:bg-accent cursor-pointer transition-colors",children:e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(rr,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Customer Reviews"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"See customer feedback and ratings"})]})]})})})]})})]})]}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Provider Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your products and track your business"})]}),e.jsxs(_,{onClick:()=>a(!0),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(d==null?void 0:d.totalProducts)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active listings"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Sales"}),e.jsx(Ai,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",(d==null?void 0:d.totalSales)||0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Orders"}),e.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(d==null?void 0:d.totalOrders)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total orders"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Customers"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(d==null?void 0:d.totalCustomers)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique customers"})]})]})]}),e.jsxs(nr,{defaultValue:"products",className:"space-y-6",children:[e.jsxs(sr,{children:[e.jsx(Ae,{value:"products",children:"My Products"}),e.jsx(Ae,{value:"orders",children:"Orders"}),e.jsx(Ae,{value:"analytics",children:"Analytics"})]}),e.jsxs(Ve,{value:"products",className:"space-y-6",children:[n&&e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:i?"Edit Product":"Add New Product"}),e.jsx(he,{children:i?"Update your product information":"Add a new product to your marketplace listing"})]}),e.jsx(E,{children:e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(x),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"name",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Product Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter product name",...f})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"category",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Category"}),e.jsxs(je,{onValueChange:f.onChange,value:f.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select category"})})}),e.jsx(ve,{children:L6e.map(b=>e.jsx(T,{value:b,children:b},b))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"price",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Price ()"}),e.jsx(V,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"0.00",...f,onChange:b=>f.onChange(parseFloat(b.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"discountedPrice",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Discounted Price () - Optional"}),e.jsx(V,{children:e.jsx($,{type:"number",step:"0.01",placeholder:"0.00",...f,onChange:b=>f.onChange(b.target.value?parseFloat(b.target.value):void 0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"stock",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Stock Quantity"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0",...f,onChange:b=>f.onChange(parseInt(b.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"unit",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Unit"}),e.jsxs(je,{onValueChange:f.onChange,value:f.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select unit"})})}),e.jsx(ve,{children:B6e.map(b=>e.jsx(T,{value:b,children:b},b))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"imageUrl",render:({field:f})=>e.jsxs(L,{className:"md:col-span-2",children:[e.jsx(B,{children:"Product Image URL (Optional)"}),e.jsx(V,{children:e.jsx($,{type:"url",placeholder:"https://example.com/image.jpg",...f})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:u.control,name:"description",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your product...",className:"resize-none",rows:4,...f})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(_,{type:"submit",disabled:m.isPending||h.isPending,className:"bg-green-600 hover:bg-green-700",children:m.isPending||h.isPending?"Saving...":i?"Update Product":"Add Product"}),e.jsx(_,{type:"button",variant:"outline",onClick:v,children:"Cancel"})]})]})})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Products"}),e.jsx(he,{children:"Manage your product listings and inventory"})]}),e.jsx(E,{children:c?e.jsx("div",{className:"text-center py-4",children:"Loading products..."}):!o||o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ft,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No products yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by adding your first product to the marketplace"}),e.jsxs(_,{onClick:()=>a(!0),className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Your First Product"]})]}):e.jsxs(Hr,{children:[e.jsx(Wr,{children:e.jsxs(ht,{children:[e.jsx(xe,{children:"Product"}),e.jsx(xe,{children:"Category"}),e.jsx(xe,{children:"Price"}),e.jsx(xe,{children:"Stock"}),e.jsx(xe,{children:"Status"}),e.jsx(xe,{children:"Actions"})]})}),e.jsx(Gr,{children:o.map(f=>e.jsxs(ht,{children:[e.jsx(se,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:f.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:f.unit})]})}),e.jsx(se,{children:f.category}),e.jsx(se,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["",f.price]}),f.discountedPrice&&e.jsxs("div",{className:"text-sm text-green-600",children:["Sale: ",f.discountedPrice]})]})}),e.jsx(se,{children:e.jsxs(ae,{variant:f.stock>10?"default":f.stock>0?"secondary":"destructive",children:[f.stock," ",f.unit]})}),e.jsx(se,{children:e.jsx(ae,{variant:f.status==="active"?"default":"secondary",children:f.status||"active"})}),e.jsx(se,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{size:"sm",variant:"outline",onClick:()=>p(f),children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>y(f.id),disabled:g.isPending,children:e.jsx(Ir,{className:"w-4 h-4"})})]})})]},f.id))})]})})]})]}),e.jsx(Ve,{value:"orders",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recent Orders"}),e.jsx(he,{children:"Track orders for your products"})]}),e.jsx(E,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_r,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Orders tracking coming soon"})]})})]})}),e.jsx(Ve,{value:"analytics",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Sales Analytics"}),e.jsx(he,{children:"View your business performance"})]}),e.jsx(E,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ai,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Analytics dashboard coming soon"})]})})]})})]})]})}function U6e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState([]),[a,i]=j.useState(null),[l,o]=j.useState(!0),[c,d]=j.useState(!1),[u,m]=j.useState(!1),[h,g]=j.useState(null),x=t&&["admin","branch_manager","taluk_manager"].includes(t.userType);j.useEffect(()=>{x&&(p(),y())},[t]);const p=async()=>{try{const N=await ie("GET","/api/youtube/videos?maxResults=50");try{const w=N.headers.get("content-type");if(w&&w.includes("application/json")){const C=await N.json();n(C)}else throw new Error("Invalid response format")}catch(w){throw console.error("JSON parsing error:",w),new Error("Failed to parse response data")}}catch(N){console.error("Error fetching YouTube videos:",N),r({title:"Error",description:"Failed to fetch YouTube videos",variant:"destructive"})}finally{o(!1)}},y=async()=>{try{const N=await ie("GET","/api/youtube/channel-info");try{const w=N.headers.get("content-type");if(w&&w.includes("application/json")){const C=await N.json();i(C)}else throw new Error("Invalid response format")}catch(w){throw console.error("JSON parsing error:",w),new Error("Failed to parse channel info response")}}catch(N){console.error("Error fetching channel info:",N)}},v=async()=>{d(!0),await p(),d(!1),r({title:"Success",description:"Video list refreshed successfully"})},f=N=>{window.open(`https://www.youtube.com/watch?v=${N}`,"_blank")},b=()=>{a&&window.open(a.channelUrl,"_blank")};return x?e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Video Management"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage videos on the Nalamini YouTube channel"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{onClick:v,disabled:c,variant:"outline",children:[e.jsx(Ya,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),"Refresh"]}),e.jsxs(_,{onClick:()=>window.location.href="/video-upload-chunked",variant:"outline",children:[e.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Large File Upload"]}),e.jsxs(Tt,{open:u,onOpenChange:m,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Quick Upload"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Upload Video to Nalamini Channel"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center",children:[e.jsx(vd,{className:"h-5 w-5 mr-2"}),"YouTube Studio Upload Instructions"]}),e.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"To upload videos to the Nalamini channel, follow these steps:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[e.jsx("li",{children:"Go to YouTube Studio (studio.youtube.com)"}),e.jsx("li",{children:"Sign in with the Nalamini channel account"}),e.jsx("li",{children:'Click "CREATE"  "Upload videos"'}),e.jsx("li",{children:"Select your video file and add details"}),e.jsx("li",{children:'Set visibility to "Public" for landing page display'}),e.jsx("li",{children:'Click "PUBLISH" to make it live'})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(_,{onClick:b,className:"flex-1",variant:"outline",children:[e.jsx(gg,{className:"h-4 w-4 mr-2"}),"Open YouTube Channel"]}),e.jsxs(_,{onClick:()=>window.open("https://studio.youtube.com","_blank"),className:"flex-1",children:[e.jsx(vd,{className:"h-4 w-4 mr-2"}),"Open YouTube Studio"]})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Note:"})," After uploading, click the refresh button above to see your new videos appear in the system."]})})]})]})]})]})]}),e.jsxs(nr,{defaultValue:"channel-videos",className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ae,{value:"channel-videos",children:["Channel Videos (",s.length,")"]}),e.jsx(Ae,{value:"channel-info",children:"Channel Information"})]}),e.jsx(Ve,{value:"channel-videos",className:"space-y-6",children:l?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(N=>e.jsxs(O,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),e.jsxs(E,{className:"p-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]},N))}):s.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(vd,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Videos Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No videos are currently available on the Nalamini YouTube channel."}),e.jsxs(_,{onClick:()=>m(!0),children:[e.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Upload First Video"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(N=>e.jsxs(O,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:[e.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube.com/embed/${N.id}?modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&fs=0&controls=1&enablejsapi=0`,title:N.title,frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",referrerPolicy:"strict-origin-when-cross-origin",loading:"lazy"}),e.jsx(ae,{className:"absolute top-2 right-2 bg-black/70 text-white z-10",children:N.duration}),e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsxs(KS,{children:[e.jsx(HS,{asChild:!0,children:e.jsx(_,{variant:"secondary",size:"sm",className:"h-8 w-8 p-0 bg-black/70 hover:bg-black/90 border-0",children:e.jsx(sZ,{className:"h-4 w-4 text-white"})})}),e.jsxs(My,{align:"start",children:[e.jsxs(ol,{onClick:()=>f(N.id),children:[e.jsx(gg,{className:"h-4 w-4 mr-2"}),"Open in YouTube"]}),e.jsxs(ol,{onClick:()=>window.open("https://studio.youtube.com","_blank"),children:[e.jsx(vd,{className:"h-4 w-4 mr-2"}),"Manage in YouTube Studio"]})]})]})})]}),e.jsxs(E,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:N.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:N.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(gr,{className:"h-3 w-3 mr-1"}),N.viewCount.toLocaleString()]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Jt,{className:"h-3 w-3 mr-1"}),new Date(N.publishedAt).toLocaleDateString()]})]})]})]},N.id))})}),e.jsxs(Ve,{value:"channel-info",className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx(vd,{className:"h-5 w-5 mr-2 text-red-600"}),"Nalamini YouTube Channel"]})}),e.jsx(E,{className:"space-y-4",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Channel ID"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono bg-gray-50 p-2 rounded",children:a.channelId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Videos"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[s.length," videos"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(_,{onClick:b,variant:"outline",children:[e.jsx(gg,{className:"h-4 w-4 mr-2"}),"View Channel"]}),e.jsxs(_,{onClick:()=>window.open("https://studio.youtube.com","_blank"),children:[e.jsx(vd,{className:"h-4 w-4 mr-2"}),"YouTube Studio"]})]})]}):e.jsx("p",{className:"text-gray-600",children:"Loading channel information..."})})]}),e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{children:"Integration Status"})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"YouTube API Connection"}),e.jsx(ae,{variant:"default",className:"bg-green-100 text-green-800",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Channel Access"}),e.jsx(ae,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Video Sync"}),e.jsx(ae,{variant:"default",className:"bg-green-100 text-green-800",children:"Real-time"})]})]})})]})]})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Eu,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600",children:"You don't have permission to access video management. Contact your administrator for access."})]})})})}function q6e({video:t,userId:r,onViewProgress:s}){const{toast:n}=Ue(),a=j.useRef(null),[i,l]=j.useState(!1),[o,c]=j.useState(!1),[d,u]=j.useState(0),[m,h]=j.useState(0),[g,x]=j.useState(0),[p,y]=j.useState(1),[v,f]=j.useState(!1),[b,N]=j.useState(!1);j.useEffect(()=>{const F=a.current;if(!F)return;const W=()=>{const Z=F.currentTime,ue=F.duration;if(u(Z),h(ue),ue>0){const Ne=Z/ue*100;x(Ne),r&&b&&Ne>0&&(s==null||s(Ne),Math.floor(Ne)%10===0&&Math.floor(Ne)>0&&w(Ne,Z))}},X=()=>{h(F.duration)},K=()=>{l(!1),r&&b&&w(100,F.duration)};return F.addEventListener("timeupdate",W),F.addEventListener("loadedmetadata",X),F.addEventListener("ended",K),()=>{F.removeEventListener("timeupdate",W),F.removeEventListener("loadedmetadata",X),F.removeEventListener("ended",K)}},[r,b,s]);const w=async(F,W)=>{if(r)try{await ie("POST",`/api/videos/${t.id}/view`,{progressPercent:F,watchTime:W,completed:F>=90})}catch(X){console.error("Error tracking view progress:",X)}},C=async()=>{const F=a.current;if(F)if(i)F.pause(),l(!1);else try{await F.play(),l(!0),!b&&r&&(N(!0),await ie("GET",`/api/videos/${t.id}`))}catch(W){console.error("Error playing video:",W),n({title:"Playback Error",description:"Unable to play video. Please try again.",variant:"destructive"})}},P=()=>{const F=a.current;if(!F)return;const W=!o;F.muted=W,c(W)},S=F=>{const W=a.current;W&&(W.volume=F,y(F),c(F===0))},A=F=>{const W=a.current;W&&(W.currentTime=F,u(F))},k=F=>{const X=F.currentTarget.getBoundingClientRect(),ue=(F.clientX-X.left)/X.width*100/100*m;A(ue)},D=()=>{const F=a.current;F&&(v?document.exitFullscreen&&document.exitFullscreen():F.requestFullscreen&&F.requestFullscreen(),f(!v))},q=F=>{if(!a.current)return;const X=Math.max(0,Math.min(m,d+F));A(X)},z=F=>{const W=Math.floor(F/60),X=Math.floor(F%60);return`${W}:${X.toString().padStart(2,"0")}`},I=F=>{const W=["Bytes","KB","MB","GB"];if(F===0)return"0 Bytes";const X=Math.floor(Math.log(F)/Math.log(1024));return Math.round(F/Math.pow(1024,X)*100)/100+" "+W[X]};return e.jsxs(O,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl mb-2",children:t.title}),e.jsx("p",{className:"text-muted-foreground mb-3",children:t.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{variant:"outline",children:t.category}),e.jsx(ae,{variant:t.isPublic?"default":"secondary",children:t.isPublic?"Public":"Private"})]})]}),t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map((F,W)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:F},W))})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden mb-4",children:[e.jsxs("video",{ref:a,className:"w-full aspect-video",poster:t.thumbnailUrl,preload:"metadata",children:[e.jsx("source",{src:t.fileUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:[e.jsx("div",{className:"w-full h-2 bg-white/20 rounded-full mb-3 cursor-pointer",onClick:k,children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-200",style:{width:`${g}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{variant:"ghost",size:"sm",onClick:C,className:"text-white hover:bg-white/20",children:i?e.jsx(pZ,{className:"h-5 w-5"}):e.jsx(Ou,{className:"h-5 w-5"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>q(-10),className:"text-white hover:bg-white/20",children:e.jsx(vZ,{className:"h-4 w-4"})}),e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>q(10),className:"text-white hover:bg-white/20",children:e.jsx(yZ,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{variant:"ghost",size:"sm",onClick:P,className:"text-white hover:bg-white/20",children:o?e.jsx(wZ,{className:"h-4 w-4"}):e.jsx(NZ,{className:"h-4 w-4"})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:o?0:p,onChange:F=>S(parseFloat(F.target.value)),className:"w-16 h-1 bg-white/20 rounded-lg"})]}),e.jsxs("span",{className:"text-sm",children:[z(d)," / ",z(m)]})]}),e.jsx(_,{variant:"ghost",size:"sm",onClick:D,className:"text-white hover:bg-white/20",children:e.jsx(mZ,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("div",{className:"font-medium",children:z(t.duration)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"File Size:"}),e.jsx("div",{className:"font-medium",children:I(t.fileSize)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Views:"}),e.jsx("div",{className:"font-medium",children:t.viewCount.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Uploaded:"}),e.jsx("div",{className:"font-medium",children:new Date(t.createdAt).toLocaleDateString()})]})]}),b&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mb-1",children:[e.jsx("span",{children:"Viewing Progress"}),e.jsxs("span",{children:[Math.round(g),"%"]})]}),e.jsx(ei,{value:g,className:"h-2"})]})]})]})}function z6e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState([]),[a,i]=j.useState([]),[l,o]=j.useState(!0),[c,d]=j.useState(null),[u,m]=j.useState(!1),[h,g]=j.useState(""),[x,p]=j.useState("all"),y=["all","general","training","announcement","tutorial","policy","onboarding","safety","technical"];j.useEffect(()=>{v()},[]),j.useEffect(()=>{f()},[s,h,x]);const v=async()=>{try{const C=await ie("GET","/api/videos/approved");try{const P=C.headers.get("content-type");if(P&&P.includes("application/json")){const S=await C.json();n(S)}else throw new Error("Invalid response format")}catch(P){throw console.error("JSON parsing error:",P),new Error("Failed to parse videos response")}}catch(C){console.error("Error fetching videos:",C),r({title:"Error",description:"Failed to load video library",variant:"destructive"})}finally{o(!1)}},f=()=>{let C=[...s];h&&(C=C.filter(P=>P.title.toLowerCase().includes(h.toLowerCase())||P.description.toLowerCase().includes(h.toLowerCase())||P.tags.some(S=>S.toLowerCase().includes(h.toLowerCase())))),x!=="all"&&(C=C.filter(P=>P.category===x)),i(C)},b=C=>{d(C),m(!0)},N=C=>{const P=Math.floor(C/60),S=C%60;return`${P}:${S.toString().padStart(2,"0")}`},w=C=>{const P=["Bytes","KB","MB","GB"];if(C===0)return"0 Bytes";const S=Math.floor(Math.log(C)/Math.log(1024));return Math.round(C/Math.pow(1024,S)*100)/100+" "+P[S]};return l?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Video Library"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse training videos and educational content"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx($,{placeholder:"Search videos, descriptions, or tags...",value:h,onChange:C=>g(C.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(je,{value:x,onValueChange:p,children:[e.jsx(ge,{className:"w-40",children:e.jsx(be,{})}),e.jsx(ve,{children:y.map(C=>e.jsx(T,{value:C,children:C==="all"?"All Categories":C.charAt(0).toUpperCase()+C.slice(1)},C))})]})]})]}),a.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-12",children:[e.jsx(Eu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Videos Found"}),e.jsx("p",{className:"text-muted-foreground",children:h||x!=="all"?"Try adjusting your search or filter criteria":"No public videos are currently available"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(C=>e.jsx(O,{className:"group hover:shadow-lg transition-shadow cursor-pointer",children:e.jsxs("div",{onClick:()=>b(C),className:"relative",children:[e.jsxs("div",{className:"aspect-video bg-black rounded-t-lg relative overflow-hidden",children:[C.thumbnailUrl?e.jsx("img",{src:C.thumbnailUrl,alt:C.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/20 to-primary/40",children:e.jsx(Eu,{className:"h-12 w-12 text-primary/60"})}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors flex items-center justify-center",children:e.jsx("div",{className:"bg-white/90 group-hover:bg-white rounded-full p-3 group-hover:scale-110 transition-all",children:e.jsx(Ou,{className:"h-6 w-6 text-black ml-1"})})}),e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsxs(ae,{variant:"secondary",className:"bg-black/80 text-white border-0",children:[e.jsx(yt,{className:"h-3 w-3 mr-1"}),N(C.duration)]})})]}),e.jsx(G,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start gap-2",children:[e.jsx(Y,{className:"text-base line-clamp-2 group-hover:text-primary transition-colors",children:C.title}),e.jsx(ae,{variant:"outline",className:"shrink-0",children:C.category})]})}),e.jsxs(E,{className:"pt-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:C.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(gr,{className:"h-3 w-3 mr-1"}),C.viewCount.toLocaleString()," views"]}),e.jsx("div",{children:w(C.fileSize)})]}),C.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[C.tags.slice(0,3).map((P,S)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:P},S)),C.tags.length>3&&e.jsxs(ae,{variant:"outline",className:"text-xs",children:["+",C.tags.length-3]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs(_,{variant:"outline",size:"sm",className:"w-full",onClick:P=>{P.stopPropagation(),b(C)},children:[e.jsx(Ou,{className:"h-3 w-3 mr-1"}),"Watch Now"]})})]})]})},C.id))}),e.jsx(Tt,{open:u,onOpenChange:m,children:e.jsxs(Ct,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Pt,{children:e.jsx(kt,{className:"sr-only",children:"Video Player"})}),c&&e.jsx(q6e,{video:c,userId:t==null?void 0:t.id,onViewProgress:C=>{console.log(`Video progress: ${C}%`)}})]})})]})}function K6e(){const{user:t}=dt(),{toast:r}=Ue(),s=Ml(),[n,a]=j.useState(null),[i,l]=j.useState(0),[o,c]=j.useState(!1),[d,u]=j.useState({title:"",description:"",targetAudience:"general",categories:[]}),h=t&&["branch_manager","taluk_manager","pincode_agent","admin"].includes(t.userType),{data:g,isLoading:x}=fe({queryKey:["/api/videos/my-uploads"],enabled:!!t&&h}),{data:p,isLoading:y}=fe({queryKey:["/api/videos/analytics/dashboard"],enabled:!!t&&h}),v=Se({mutationFn:async P=>{const S=await fetch("/api/videos/upload",{method:"POST",credentials:"include",body:P});if(!S.ok){let A="Upload failed";try{const k=S.headers.get("content-type");k&&k.includes("application/json")?A=(await S.json()).message||A:A=await S.text()||A}catch{A=`HTTP ${S.status}: ${S.statusText}`}throw new Error(A)}try{const A=S.headers.get("content-type");if(A&&A.includes("application/json"))return await S.json();{const k=await S.text();throw new Error(`Expected JSON response but got: ${k}`)}}catch(A){throw new Error(`Failed to parse response: ${A.message}`)}},onSuccess:()=>{r({title:"Upload Successful",description:"Your video has been uploaded and is pending admin approval"}),u({title:"",description:"",targetAudience:"general",categories:[]}),a(null),l(0),s.invalidateQueries({queryKey:["/api/videos/my-uploads"]})},onError:P=>{r({title:"Upload Failed",description:P.message,variant:"destructive"})}}),f=P=>{var A;const S=(A=P.target.files)==null?void 0:A[0];if(S){if(S.size>100*1024*1024){r({title:"File Too Large",description:"Video file must be under 100MB",variant:"destructive"});return}if(!["video/mp4","video/avi","video/mov","video/wmv","video/flv"].includes(S.type)){r({title:"Invalid File Type",description:"Only MP4, AVI, MOV, WMV, FLV files are allowed",variant:"destructive"});return}a(S)}},b=async()=>{if(!n||!d.title){r({title:"Missing Information",description:"Please select a file and enter a title",variant:"destructive"});return}c(!0),l(0);const P=new FormData;P.append("video",n),P.append("title",d.title),P.append("description",d.description),P.append("targetAudience",d.targetAudience),P.append("categories",JSON.stringify(d.categories));const S=setInterval(()=>{l(A=>A>=90?(clearInterval(S),A):A+10)},500);try{await v.mutateAsync(P),l(100)}finally{clearInterval(S),c(!1)}},N=P=>{switch(P){case"approved":return e.jsx(Mt,{className:"h-4 w-4 text-green-500"});case"rejected":return e.jsx(Fr,{className:"h-4 w-4 text-red-500"});default:return e.jsx(lr,{className:"h-4 w-4 text-yellow-500"})}},w=P=>{if(P===0)return"0 Bytes";const S=1024,A=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(P)/Math.log(S));return parseFloat((P/Math.pow(S,k)).toFixed(2))+" "+A[k]},C=P=>{const S=Math.floor(P/3600),A=Math.floor(P%3600/60),k=P%60;return S>0?`${S}h ${A}m ${k}s`:A>0?`${A}m ${k}s`:`${k}s`};return t?h?e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Video Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Upload area-specific advertisement videos for your region"})]}),p&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Views"}),e.jsx(gr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:e.jsx("div",{className:"text-2xl font-bold",children:p.totalViews})})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Watch Time"}),e.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:e.jsx("div",{className:"text-2xl font-bold",children:C(p.totalWatchTime)})})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Avg Watch Time"}),e.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:e.jsx("div",{className:"text-2xl font-bold",children:C(p.averageWatchTime)})})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Completion Rate"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(E,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[p.completionRate,"%"]})})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Upload New Video"}),e.jsxs(he,{children:["Upload promotional content for your area (",t.district," - ",t.taluk,")"]})]}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"video-file",children:"Video File"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx($,{id:"video-file",type:"file",accept:".mp4,.avi,.mov,.wmv,.flv",onChange:f,disabled:o}),n&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.name," (",w(n.size),")"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"title",children:"Title *"}),e.jsx($,{id:"title",value:d.title,onChange:P=>u({...d,title:P.target.value}),placeholder:"Enter video title",disabled:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",value:d.description,onChange:P=>u({...d,description:P.target.value}),placeholder:"Describe your video content",disabled:o})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"audience",children:"Target Audience"}),e.jsxs(je,{value:d.targetAudience,onValueChange:P=>u({...d,targetAudience:P}),disabled:o,children:[e.jsx(ge,{children:e.jsx(be,{})}),e.jsxs(ve,{children:[e.jsx(T,{value:"general",children:"General Public"}),e.jsx(T,{value:"farmers",children:"Farmers"}),e.jsx(T,{value:"businesses",children:"Local Businesses"}),e.jsx(T,{value:"students",children:"Students"}),e.jsx(T,{value:"seniors",children:"Senior Citizens"})]})]})]}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[i,"%"]})]}),e.jsx(ei,{value:i})]}),e.jsxs(_,{onClick:b,disabled:!n||!d.title||o,className:"w-full",children:[e.jsx(Ri,{className:"mr-2 h-4 w-4"}),o?"Uploading...":"Upload Video"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"My Uploaded Videos"}),e.jsx(he,{children:"Track the status and performance of your uploaded videos"})]}),e.jsx(E,{children:x?e.jsx("div",{className:"text-center py-8",children:"Loading videos..."}):g&&g.length>0?e.jsx("div",{className:"space-y-4",children:g.map(P=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Eu,{className:"h-4 w-4"}),e.jsx("h3",{className:"font-medium",children:P.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[N(P.approvalStatus),e.jsx(ae,{variant:P.approvalStatus==="approved"?"default":P.approvalStatus==="rejected"?"destructive":"secondary",children:P.approvalStatus})]})]}),P.description&&e.jsx("p",{className:"text-sm text-muted-foreground",children:P.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Size: ",w(P.fileSize)]}),e.jsxs("span",{children:["Uploaded: ",new Date(P.createdAt).toLocaleDateString()]}),e.jsxs("span",{children:["Audience: ",P.targetAudience]})]}),P.adminNotes&&e.jsx(xa,{className:"mt-2",children:e.jsxs(ga,{children:[e.jsx("strong",{children:"Admin Notes:"})," ",P.adminNotes]})}),P.youtubeVideoId&&e.jsx("div",{className:"mt-2",children:e.jsxs(ae,{variant:"outline",children:["YouTube ID: ",P.youtubeVideoId]})})]},P.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No videos uploaded yet"})})]}),p&&p.topVideos.length>0&&e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Top Performing Videos"}),e.jsx(he,{children:"Your most watched videos with engagement metrics"})]}),e.jsx(E,{children:e.jsx("div",{className:"space-y-4",children:p.topVideos.map((P,S)=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-muted-foreground",children:["#",S+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:P.video.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[P.viewCount," views"]}),e.jsxs("span",{children:[C(P.totalWatchTime)," total watch time"]}),e.jsxs("span",{children:[P.averageCompletion,"% avg completion"]})]})]})]},P.video.id))})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsxs(xa,{children:[e.jsx(lr,{className:"h-4 w-4"}),e.jsx(ga,{children:"Only branch managers, taluk managers, and pincode agents can upload videos."})]})})})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Please log in to access video management"})})})})}const kN=1*1024*1024;function H6e(){const[t,r]=j.useState(null),[s,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(!1),[c,d]=j.useState(0),[u,m]=j.useState("idle"),h=j.useRef(null),{toast:g}=Ue(),x=f=>{var N;const b=(N=f.target.files)==null?void 0:N[0];if(b){if(!["video/mp4","video/avi","video/mov","video/wmv","video/flv"].includes(b.type)){g({title:"Invalid file type",description:"Please select a valid video file (MP4, AVI, MOV, WMV, FLV)",variant:"destructive"});return}if(b.size>150*1024*1024){g({title:"File too large",description:"Please select a video file smaller than 150MB",variant:"destructive"});return}r(b),m("idle")}},p=async(f,b,N,w,C=0)=>{const P=new FormData;P.append("chunk",f),P.append("chunkIndex",b.toString()),P.append("totalChunks",N.toString()),P.append("uploadId",w),b===0&&(P.append("title",s),P.append("description",a),P.append("originalName",t.name),P.append("totalSize",t.size.toString()));try{const S=await fetch("/api/videos/upload-chunk",{method:"POST",credentials:"include",body:P});if(!S.ok){if((S.status===413||S.status===502)&&C<3)return await new Promise(A=>setTimeout(A,1e3*(C+1))),p(f,b,N,w,C+1);throw new Error(`Upload failed: ${S.status} ${S.statusText}`)}return await S.json()}catch(S){if(C<3&&(S.message.includes("Entity Too Large")||S.message.includes("timeout")||S.message.includes("network")||S.name==="NetworkError"))return await new Promise(A=>setTimeout(A,1e3*Math.pow(2,C))),p(f,b,N,w,C+1);throw S}},y=async()=>{if(!t||!s.trim()){g({title:"Missing information",description:"Please select a file and enter a title",variant:"destructive"});return}o(!0),m("uploading"),d(0);try{const f=Math.ceil(t.size/kN),b=`upload_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;for(let N=0;N<f;N++){const w=N*kN,C=Math.min(w+kN,t.size),P=t.slice(w,C);await p(P,N,f,b);const S=(N+1)/f*100;d(S)}m("success"),g({title:"Upload successful",description:"Your video has been uploaded and is pending admin approval"}),r(null),n(""),i(""),h.current&&(h.current.value="")}catch(f){console.error("Upload error:",f),m("error"),g({title:"Upload failed",description:f.message||"An error occurred during upload",variant:"destructive"})}finally{o(!1)}},v=f=>{if(f===0)return"0 Bytes";const b=1024,N=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(f)/Math.log(b));return parseFloat((f/Math.pow(b,w)).toFixed(2))+" "+N[w]};return e.jsx("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Ri,{className:"h-5 w-5"}),"Upload New Video (Chunked Upload)"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Video File"}),e.jsx($,{ref:h,type:"file",accept:"video/*",onChange:x,disabled:l}),t&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",t.name," (",v(t.size),")"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx($,{value:s,onChange:f=>n(f.target.value),placeholder:"Enter video title",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx(at,{value:a,onChange:f=>i(f.target.value),placeholder:"Enter video description",rows:4,disabled:l})]}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Upload Progress"}),e.jsxs("span",{children:[Math.round(c),"%"]})]}),e.jsx(ei,{value:c})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(_,{onClick:y,disabled:!t||!s.trim()||l,className:"flex items-center gap-2",children:u==="uploading"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Uploading..."]}):u==="success"?e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"h-4 w-4"}),"Upload Complete"]}):u==="error"?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-4 w-4"}),"Upload Failed"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ri,{className:"h-4 w-4"}),"Upload Video"]})})})]})]})})}const Qx=512*1024;function W6e(){const[t,r]=j.useState(null),[s,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(!1),[c,d]=j.useState(0),[u,m]=j.useState("idle"),h=j.useRef(null),{toast:g}=Ue(),x=f=>{var N;const b=(N=f.target.files)==null?void 0:N[0];if(b){if(!["video/mp4","video/avi","video/mov","video/wmv","video/flv","video/webm"].includes(b.type)){g({title:"Invalid file type",description:"Please select a valid video file",variant:"destructive"});return}r(b),m("idle")}},p=async(f,b,N,w,C=0)=>{try{const S=new FormData;S.append("chunk",f),S.append("chunkIndex",b.toString()),S.append("totalChunks",N.toString()),S.append("uploadId",w),b===0&&(S.append("title",s),S.append("description",a),S.append("originalName",t.name),S.append("totalSize",t.size.toString()));const A=new AbortController,k=setTimeout(()=>A.abort(),3e4),D=await fetch("/api/videos/upload-chunk",{method:"POST",credentials:"include",body:S,signal:A.signal});if(clearTimeout(k),D.ok)return await D.json();throw new Error(`Upload failed with status: ${D.status}`)}catch(S){if(C<5){const A=Math.pow(2,C)*1e3;return await new Promise(k=>setTimeout(k,A)),p(f,b,N,w,C+1)}throw S}},y=async()=>{if(!t||!s.trim()){g({title:"Missing information",description:"Please select a file and enter a title",variant:"destructive"});return}o(!0),m("uploading"),d(0);try{const f=Date.now().toString()+Math.random().toString(36).substr(2,9),b=Math.ceil(t.size/Qx);g({title:"Starting upload",description:`Breaking file into ${b} small chunks for reliable upload`});for(let N=0;N<b;N++){const w=N*Qx,C=Math.min(w+Qx,t.size),P=t.slice(w,C);await p(P,N,b,f);const S=(N+1)/b*100;d(S),N<b-1&&await new Promise(A=>setTimeout(A,50))}m("success"),g({title:"Upload successful",description:"Your video has been uploaded and is pending admin approval"}),r(null),n(""),i(""),d(0),h.current&&(h.current.value="")}catch(f){console.error("Upload failed:",f),m("error"),g({title:"Upload failed",description:f.message||"Failed to upload video. Please try again.",variant:"destructive"})}finally{o(!1)}},v=f=>{if(f===0)return"0 Bytes";const b=1024,N=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(f)/Math.log(b));return parseFloat((f/Math.pow(b,w)).toFixed(2))+" "+N[w]};return e.jsx("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Ri,{className:"h-5 w-5"}),"Simple Video Upload"]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Video File"}),e.jsx($,{ref:h,type:"file",accept:"video/*",onChange:x,disabled:l}),t&&e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsxs("div",{children:["Selected: ",t.name]}),e.jsxs("div",{children:["Size: ",v(t.size)]}),e.jsxs("div",{children:["Will be split into: ",Math.ceil(t.size/Qx)," chunks"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx($,{value:s,onChange:f=>n(f.target.value),placeholder:"Enter video title",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx(at,{value:a,onChange:f=>i(f.target.value),placeholder:"Enter video description",rows:3,disabled:l})]}),e.jsxs(_,{onClick:y,disabled:!t||!s.trim()||l,className:"w-full",children:[e.jsx(Ri,{className:"mr-2 h-4 w-4"}),l?"Uploading...":"Upload Video"]}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Upload Progress"}),e.jsxs("span",{children:[c.toFixed(1),"%"]})]}),e.jsx(ei,{value:c,className:"w-full"})]}),u==="success"&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600 p-3 bg-green-50 rounded-lg",children:[e.jsx(Mt,{className:"h-5 w-5"}),e.jsx("span",{children:"Upload completed successfully!"})]}),u==="error"&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-600 p-3 bg-red-50 rounded-lg",children:[e.jsx(lr,{className:"h-5 w-5"}),e.jsx("span",{children:"Upload failed. Please try again."})]}),e.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[e.jsx("div",{children:" Uses 512KB chunks for maximum compatibility"}),e.jsx("div",{children:" Automatic retry on failed chunks"}),e.jsx("div",{children:" Works with large files and slow connections"}),e.jsx("div",{children:" Supported formats: MP4, AVI, MOV, WMV, WEBM"})]})]})]})})}function G6e(){const{user:t}=dt(),[r,s]=j.useState(null),a=t&&["branch_manager","taluk_manager","pincode_agent","admin"].includes(t.userType),{data:i,isLoading:l}=fe({queryKey:["/api/videos/analytics/dashboard"],enabled:!!t&&a}),{data:o,isLoading:c}=fe({queryKey:["/api/videos/analytics/detailed",r],enabled:!!r&&a}),d=m=>{const h=Math.floor(m/3600),g=Math.floor(m%3600/60),x=m%60;return h>0?`${h}h ${g}m ${x}s`:g>0?`${g}m ${x}s`:`${x}s`},u=m=>new Date(m).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return t?a?l?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:"Loading analytics..."})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Video Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Track screen time and engagement metrics for your uploaded videos"})]}),i&&e.jsxs(nr,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(sr,{className:"grid w-full grid-cols-3",children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"performance",children:"Performance"}),e.jsx(Ae,{value:"engagement",children:"Engagement"})]}),e.jsxs(Ve,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Views"}),e.jsx(gr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.totalViews}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all your videos"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Watch Time"}),e.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(i.totalWatchTime)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cumulative viewing time"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Avg Watch Time"}),e.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d(i.averageWatchTime)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per viewing session"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Completion Rate"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[i.completionRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Videos watched to end"})]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recent Video Views"}),e.jsx(he,{children:"Latest viewing sessions with device and engagement data"})]}),e.jsx(E,{children:i.recentViews.length>0?e.jsx("div",{className:"space-y-4",children:i.recentViews.map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(hZ,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{variant:"outline",children:m.deviceType}),e.jsx(ae,{variant:"outline",children:m.browserType})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u(m.createdAt)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium",children:d(m.watchTime)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.completionPercentage,"% completed"]})]})]},m.id))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No recent views"})})]})]}),e.jsx(Ve,{value:"performance",className:"space-y-6",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Top Performing Videos"}),e.jsx(he,{children:"Your most watched videos ranked by engagement"})]}),e.jsx(E,{children:i.topVideos.length>0?e.jsx("div",{className:"space-y-4",children:i.topVideos.map((m,h)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-lg font-bold text-muted-foreground",children:["#",h+1]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:m.video.title}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(gt,{className:"h-3 w-3"}),e.jsxs("span",{children:[m.video.district," - ",m.video.taluk]}),e.jsx(ae,{variant:"outline",className:"text-xs",children:m.video.targetAudience})]})]})]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>s(m.video.id),children:"View Details"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:m.viewCount}),e.jsx("div",{className:"text-muted-foreground",children:"Views"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:d(m.totalWatchTime)}),e.jsx("div",{className:"text-muted-foreground",children:"Total Watch Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-medium",children:[m.averageCompletion,"%"]}),e.jsx("div",{className:"text-muted-foreground",children:"Avg Completion"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Completion Rate"}),e.jsxs("span",{children:[m.averageCompletion,"%"]})]}),e.jsx(ei,{value:m.averageCompletion,className:"h-2"})]})]},m.video.id))}):e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No video data available"})})]})}),e.jsxs(Ve,{value:"engagement",className:"space-y-6",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Engagement Overview"}),e.jsx(he,{children:"How viewers interact with your video content"})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Viewing Patterns"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Completion Rate"}),e.jsxs("span",{className:"font-medium",children:[i.completionRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Video Sessions"}),e.jsx("span",{className:"font-medium",children:i.totalViews})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Session Duration"}),e.jsx("span",{className:"font-medium",children:d(i.averageWatchTime)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Device Distribution"}),e.jsxs("div",{className:"space-y-2",children:[i.recentViews.reduce((m,h)=>(m[h.deviceType]=(m[h.deviceType]||0)+1,m),{}),Object.entries(i.recentViews.reduce((m,h)=>(m[h.deviceType]=(m[h.deviceType]||0)+1,m),{})).map(([m,h])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm capitalize",children:m}),e.jsxs(ae,{variant:"outline",children:[h," views"]})]},m))]})]})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Screen Time Insights"}),e.jsx(he,{children:"Detailed viewer engagement and retention metrics"})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(Ai,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(i.totalWatchTime/3600),"h"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Hours Watched"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(yt,{className:"h-8 w-8 mx-auto mb-2 text-blue-500"}),e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(i.averageWatchTime/60),"m"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Session Length"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(Ou,{className:"h-8 w-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-2xl font-bold",children:i.totalViews}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Video Starts"})]})]})})]})]})]}),r&&o&&e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Y,{children:["Detailed Analytics: ",o.video.title]}),e.jsx(he,{children:"In-depth metrics for this specific video"})]}),e.jsx(_,{variant:"outline",onClick:()=>s(null),children:"Close Details"})]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Video Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Title:"})," ",o.video.title]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Target Audience:"})," ",o.video.targetAudience]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",o.video.district," - ",o.video.taluk]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Upload Date:"})," ",u(o.video.createdAt)]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"text-center p-3 border rounded",children:[e.jsx("div",{className:"font-bold",children:o.totalViews}),e.jsx("div",{className:"text-muted-foreground",children:"Total Views"})]}),e.jsxs("div",{className:"text-center p-3 border rounded",children:[e.jsxs("div",{className:"font-bold",children:[o.completionRate,"%"]}),e.jsx("div",{className:"text-muted-foreground",children:"Completion Rate"})]}),e.jsxs("div",{className:"text-center p-3 border rounded",children:[e.jsx("div",{className:"font-bold",children:d(o.totalWatchTime)}),e.jsx("div",{className:"text-muted-foreground",children:"Total Watch Time"})]}),e.jsxs("div",{className:"text-center p-3 border rounded",children:[e.jsx("div",{className:"font-bold",children:d(o.averageWatchTime)}),e.jsx("div",{className:"text-muted-foreground",children:"Avg Watch Time"})]})]})]})]})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Video analytics are only available for managers and administrators"})})})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Please log in to access video analytics"})})})})}function Y6e(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(null),[a,i]=j.useState(""),{data:l=[],isLoading:o}=fe({queryKey:["/api/admin/videos/pending"],queryFn:async()=>await(await ie("GET","/api/admin/videos/pending")).json()}),c=Se({mutationFn:async({videoId:h,action:g,notes:x})=>await(await ie("POST",`/api/admin/videos/${h}/approval`,{action:g,notes:x})).json(),onSuccess:()=>{r({title:"Video processed",description:"Video approval status updated successfully"}),pe.invalidateQueries({queryKey:["/api/admin/videos/pending"]}),n(null),i("")},onError:h=>{r({title:"Error",description:h.message||"Failed to process video approval",variant:"destructive"})}}),d=h=>{const g=["Bytes","KB","MB","GB"];if(h===0)return"0 Bytes";const x=Math.floor(Math.log(h)/Math.log(1024));return Math.round(h/Math.pow(1024,x)*100)/100+" "+g[x]},u=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=h=>{s&&c.mutate({videoId:s.id,action:h,notes:a})};return!t||t.userType!=="admin"?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Only administrators can access video approvals."})]})}):o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Video Approvals"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve uploaded videos for publication"})]}),l.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(C_,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No pending videos"}),e.jsx("p",{className:"text-muted-foreground",children:"All uploaded videos have been reviewed."})]})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Pending Videos (",l.length,")"]}),l.map(h=>e.jsx(O,{className:`cursor-pointer transition-colors ${(s==null?void 0:s.id)===h.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>n(h),children:e.jsxs(E,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:h.title}),e.jsx(ae,{variant:"outline",className:"ml-2 text-xs",children:h.category})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C_,{className:"w-3 h-3"}),e.jsx("span",{children:h.fileName})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tn,{className:"w-3 h-3"}),e.jsxs("span",{children:["User ID: ",h.uploaderId]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Jt,{className:"w-3 h-3"}),e.jsx("span",{children:u(h.createdAt)})]}),e.jsxs("div",{className:"text-xs",children:["Size: ",d(h.fileSize)]})]}),h.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:h.description})]})},h.id))]}),e.jsx("div",{className:"sticky top-6",children:s?e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"w-5 h-5"}),"Review Video"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description||"No description provided"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"File:"}),e.jsx("p",{className:"text-muted-foreground",children:s.fileName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Size:"}),e.jsx("p",{className:"text-muted-foreground",children:d(s.fileSize)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Category:"}),e.jsx("p",{className:"text-muted-foreground",children:s.category})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Target Area:"}),e.jsx("p",{className:"text-muted-foreground",children:s.targetArea||"All areas"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploaded:"}),e.jsx("p",{className:"text-muted-foreground",children:u(s.createdAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Uploader ID:"}),e.jsx("p",{className:"text-muted-foreground",children:s.uploaderId})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Approval Notes (optional)"}),e.jsx(at,{value:a,onChange:h=>i(h.target.value),placeholder:"Add notes about your approval decision...",rows:3})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(_,{onClick:()=>m("approve"),disabled:c.isPending,className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(_,{onClick:()=>m("reject"),disabled:c.isPending,variant:"destructive",className:"flex-1",children:[e.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Reject"]})]}),c.isPending&&e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Processing approval..."})]})]}):e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(gr,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select a video"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a video from the list to review and approve"})]})})})]})]})}function Q6e(){const t=()=>{const s=document.createElement("a");s.href="/nalamini-professional-overview.svg",s.download="nalamini-services-overview.svg",s.click()},r=()=>{window.open("/nalamini-professional-overview.svg","_blank")};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Nalamini Services Overview"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Professional presentation-ready thumbnail for YouTube and marketing materials"}),e.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[e.jsxs(_,{onClick:t,className:"flex items-center gap-2",children:[e.jsx(rZ,{className:"h-4 w-4"}),"Download SVG"]}),e.jsxs(_,{onClick:r,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(gr,{className:"h-4 w-4"}),"View Fullscreen"]})]})]}),e.jsxs(O,{className:"mb-8",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(T_,{className:"h-5 w-5"}),"Professional Services Overview"]})}),e.jsx(E,{children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:e.jsx("img",{src:"/nalamini-professional-overview.svg",alt:"Nalamini Services Overview",className:"w-full h-auto",style:{maxHeight:"500px",objectFit:"contain"}})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(O,{children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(T_,{className:"h-5 w-5 text-blue-600"})}),e.jsx("h3",{className:"font-semibold",children:"Presentation Ready"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Professional design suitable for business presentations and investor meetings"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-10 w-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(k$,{className:"h-5 w-5 text-red-600"})}),e.jsx("h3",{className:"font-semibold",children:"YouTube Optimized"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Perfect 1280x720 dimensions for YouTube thumbnails and video covers"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(gr,{className:"h-5 w-5 text-green-600"})}),e.jsx("h3",{className:"font-semibold",children:"High Quality"})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Vector-based SVG format ensures crisp quality at any size"})]})})]}),e.jsxs(O,{className:"mt-8",children:[e.jsx(G,{children:e.jsx(Y,{children:"Services Included"})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Taxi:"})," Transportation Services"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Transport Services:"})," Products/Packages across Tamil Nadu"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Rental Services:"})," Power tools, Construction and Medical Equipments"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Manufactures Hub:"})," Distribute Products across Tamil Nadu"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-cyan-500 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Online Farmer's Market:"})," Farm fresh Grocery to doorstep"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Recharge, utilities, bookings:"})," Mobile, DTH & Services"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Recycling:"})," Waste Management & Recycling"]})]})]})]})})]})]})})})}function X6e(){const{user:t}=dt(),{toast:r}=Ue();if(!t||t.userType!=="service_provider")return e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Restricted"}),e.jsx("p",{children:"Only service providers can view their grocery products."})]})});const{data:s=[],isLoading:n}=fe({queryKey:["/api/provider/grocery/products"]}),a=Se({mutationFn:async o=>{await ie("DELETE",`/api/provider/grocery/products/${o}`)},onSuccess:()=>{r({title:"Success",description:"Product deleted successfully."}),pe.invalidateQueries({queryKey:["/api/provider/grocery/products"]})},onError:o=>{r({title:"Error",description:o.message||"Failed to delete product.",variant:"destructive"})}}),i=o=>{confirm("Are you sure you want to delete this product?")&&a.mutate(o)},l=(o,c)=>c?o==="active"?e.jsx(ae,{variant:"default",className:"bg-green-600",children:"Active"}):o==="inactive"?e.jsx(ae,{variant:"secondary",children:"Inactive"}):e.jsx(ae,{variant:"outline",children:o}):e.jsx(ae,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Pending Approval"});return n?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"My Grocery Products"}),e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Qe,{className:"h-8 w-8 animate-spin"})})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Grocery Products"}),e.jsx(_,{asChild:!0,children:e.jsx("a",{href:"/provider/add-grocery-product",children:"Add New Product"})})]}),s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ft,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Products Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't added any grocery products."}),e.jsx(_,{asChild:!0,children:e.jsx("a",{href:"/provider/add-grocery-product",children:"Add Your First Product"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(o=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Y,{className:"text-lg",children:o.name}),l(o.status,o.adminApproved)]})}),e.jsxs(E,{children:[e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:o.description}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xl font-bold text-green-600",children:["",o.price]}),e.jsxs("span",{className:"text-sm text-gray-500 ml-1",children:["per ",o.unit]})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Stock: ",o.stock]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(gr,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Zr,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>i(o.id),disabled:a.isPending,children:e.jsx(Ir,{className:"h-4 w-4"})})]})]})]},o.id))})]})}const Z6e=Kt({name:R().min(2,"Name must be at least 2 characters"),phoneNumber:R().min(10,"Phone number must be at least 10 digits"),roleType:R(),location:R(),serviceType:R().optional()}),J6e=[{id:"farmer",name:"Farmers",icon:"",description:"Agricultural services and products"},{id:"manufacturer",name:"Manufacturers",icon:"",description:"Local product manufacturing"},{id:"booking_agent",name:"Booking Agents",icon:"",description:"Service booking coordination"},{id:"rental_agent",name:"Rental Agents",icon:"",description:"Equipment and vehicle rentals"},{id:"transport_agent",name:"Transport Agents",icon:"",description:"Logistics and transportation"},{id:"taxi_agent",name:"Taxi Agents",icon:"",description:"Taxi and ride services"},{id:"recycling_agent",name:"Recycling Agents",icon:"",description:"Waste management and recycling"}],eFe=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupattur","Tirupur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function tFe(){const[t,r]=j.useState("role-selection"),[s,n]=j.useState(null),[a,i]=j.useState(null),[l,o]=j.useState(null),[c,d]=j.useState(null),[u,m]=j.useState(null),[h,g]=j.useState(!1),{toast:x}=Ue(),{data:p=[]}=fe({queryKey:["/api/taluks",a],queryFn:()=>ie("GET",`/api/taluks?district=${a}`).then(z=>z.json()),enabled:!!a}),{data:y=[]}=fe({queryKey:["/api/pincodes",l],queryFn:()=>ie("GET",`/api/pincodes?taluk=${l}&district=${a}`).then(z=>z.json()),enabled:!!l&&!!a}),v=Gt({resolver:Yt(Z6e),defaultValues:{name:"",phoneNumber:"",roleType:"",location:"",serviceType:""}}),f=Se({mutationFn:async z=>(await ie("POST","/api/nominations",z)).json(),onSuccess:()=>{x({title:"Nomination Submitted Successfully!",description:"Your application has been sent to the admin for review."}),g(!1),b()},onError:()=>{x({title:"Submission Failed",description:"Please try again later.",variant:"destructive"})}}),b=()=>{r("role-selection"),n(null),i(null),o(null),d(null),m(null),v.reset()},N=z=>{n(z),r("district-selection")},w=z=>{i(z),s==="branch_manager"?A():r("taluk-selection")},C=z=>{o(z),s==="taluk_manager"?A():r("pincode-selection")},P=z=>{d(z),s==="pincode_agent"?A():s==="service_provider"&&r("service-selection")},S=z=>{m(z),A()},A=()=>{const z=s==="branch_manager"?a:s==="taluk_manager"?`${l}, ${a}`:`${c}, ${l}, ${a}`;v.setValue("roleType",s||""),v.setValue("location",z||""),v.setValue("serviceType",u||""),g(!0)},k=z=>{f.mutate(z)},D=()=>{t==="district-selection"?(r("role-selection"),n(null)):t==="taluk-selection"?(r("district-selection"),i(null)):t==="pincode-selection"?(r("taluk-selection"),o(null)):t==="service-selection"&&(r("pincode-selection"),d(null))},q=()=>{const z=[];return s&&z.push(s.replace("_"," ").toUpperCase()),a&&z.push(a),l&&z.push(l),c&&z.push(c),u&&z.push(u),z.join("  ")};return t==="role-selection"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Nalamini Opportunities Forum"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Join our growing network of service coordinators and providers across Tamil Nadu. Select your preferred role to explore opportunities in your area."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-blue-500",onClick:()=>N("branch_manager"),children:[e.jsxs(G,{className:"text-center pb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(An,{className:"h-8 w-8 text-blue-600"})}),e.jsx(Y,{className:"text-xl",children:"Branch Manager"})]}),e.jsxs(E,{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Oversee operations across an entire district"}),e.jsx(ae,{variant:"secondary",className:"mb-2",children:"District Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"38 Districts Available"})]})]}),e.jsxs(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-green-500",onClick:()=>N("taluk_manager"),children:[e.jsxs(G,{className:"text-center pb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(rr,{className:"h-8 w-8 text-green-600"})}),e.jsx(Y,{className:"text-xl",children:"Taluk Manager"})]}),e.jsxs(E,{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Manage services within a taluk"}),e.jsx(ae,{variant:"secondary",className:"mb-2",children:"Taluk Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Multiple Taluks Available"})]})]}),e.jsxs(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-purple-500",onClick:()=>N("pincode_agent"),children:[e.jsxs(G,{className:"text-center pb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(gt,{className:"h-8 w-8 text-purple-600"})}),e.jsx(Y,{className:"text-xl",children:"Pincode Agent"})]}),e.jsxs(E,{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Coordinate services in specific pincode areas"}),e.jsx(ae,{variant:"secondary",className:"mb-2",children:"Pincode Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Local Area Coverage"})]})]}),e.jsxs(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-orange-500",onClick:()=>N("service_provider"),children:[e.jsxs(G,{className:"text-center pb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(JX,{className:"h-8 w-8 text-orange-600"})}),e.jsx(Y,{className:"text-xl",children:"Service Provider"})]}),e.jsxs(E,{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Provide specialized services to customers"}),e.jsx(ae,{variant:"secondary",className:"mb-2",children:"Service Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"7 Service Types"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"How It Works"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(Mt,{className:"h-4 w-4 text-green-500 mr-1"}),"Select Role"]}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Mt,{className:"h-4 w-4 text-green-500 mr-1"}),"Choose Location"]}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Mt,{className:"h-4 w-4 text-green-500 mr-1"}),"Nominate Yourself"]})]})]})})]})}):t==="district-selection"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(_,{variant:"ghost",onClick:D,className:"mr-4",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Select District"}),e.jsx("p",{className:"text-gray-600 mt-1",children:q()})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:eFe.map(z=>e.jsx(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-blue-500",onClick:()=>w(z),children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(ev,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:z}),e.jsx(_,{className:"mt-3 w-full",size:"sm",onClick:I=>{I.stopPropagation(),w(z)},children:"Nominate Yourself"})]})},z))})]})}):t==="taluk-selection"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(_,{variant:"ghost",onClick:D,className:"mr-4",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Select Taluk in ",a]}),e.jsx("p",{className:"text-gray-600 mt-1",children:q()})]})]}),p.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:["Loading taluks for ",a,"..."]})}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map(z=>e.jsx(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-green-500",onClick:()=>C(z.name),children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(rr,{className:"h-6 w-6 text-green-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:z.name}),e.jsx(_,{className:"mt-3 w-full",size:"sm",onClick:I=>{I.stopPropagation(),C(z.name)},children:"Nominate Yourself"})]})},z.name))})]})}):t==="pincode-selection"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-violet-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(_,{variant:"ghost",onClick:D,className:"mr-4",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Select Pincode in ",l]}),e.jsx("p",{className:"text-gray-600 mt-1",children:q()})]})]}),y.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:["Loading pincodes for ",l,"..."]})}):e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:y.map(z=>e.jsx(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-purple-500",onClick:()=>P(z),children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(gt,{className:"h-5 w-5 text-purple-600"})}),e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:z}),e.jsx(_,{className:"mt-2 w-full",size:"sm",onClick:I=>{I.stopPropagation(),P(z)},children:"Nominate"})]})},z))})]})}):t==="service-selection"?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs(_,{variant:"ghost",onClick:D,className:"mr-4",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Select Service Type"}),e.jsx("p",{className:"text-gray-600 mt-1",children:q()})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J6e.map(z=>e.jsx(O,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 border-2 hover:border-orange-500",onClick:()=>S(z.name),children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:z.icon}),e.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:z.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:z.description}),e.jsx(_,{className:"w-full",onClick:I=>{I.stopPropagation(),S(z.name)},children:"Nominate Yourself"})]})},z.id))})]})}):e.jsx(e.Fragment,{children:e.jsx(Tt,{open:h,onOpenChange:g,children:e.jsxs(Ct,{className:"sm:max-w-md",children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Submit Your Nomination"})}),e.jsx(Qt,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(k),className:"space-y-4",children:[e.jsx(U,{control:v.control,name:"name",render:({field:z})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your full name",...z})}),e.jsx(H,{})]})}),e.jsx(U,{control:v.control,name:"phoneNumber",render:({field:z})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone Number"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter your phone number",...z})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Selected Position"}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-md text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Role:"})," ",s==null?void 0:s.replace("_"," ").toUpperCase()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Location:"})," ",v.getValues("location")]}),u&&e.jsxs("div",{children:[e.jsx("strong",{children:"Service:"})," ",u]})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>g(!1),className:"flex-1",children:"Cancel"}),e.jsx(_,{type:"submit",className:"flex-1",disabled:f.isPending,children:f.isPending?"Submitting...":"Submit Application"})]})]})})]})})})}const rFe=Kt({name:R().min(2,"Name must be at least 2 characters"),phoneNumber:R().regex(/^[0-9]{10}$/,"Phone number must be 10 digits"),roleAppliedFor:R().min(1,"Please select a role"),district:R().min(1,"Please select a district"),taluk:R().min(1,"Please select a taluk"),pincode:R().regex(/^[0-9]{6}$/,"Pincode must be 6 digits"),servicesProvided:R().min(10,"Please describe the service in at least 10 characters")}),sFe=Kt({otp:R().length(6,"OTP must be 6 digits")}),nFe=Kt({message:R().min(1,"Message cannot be empty")});function aFe(){const[t,r]=j.useState(!1),[s,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState(null),[c,d]=j.useState(!1),{toast:u}=Ue(),{data:m=[],isLoading:h}=fe({queryKey:["/api/nominations/approved"]}),{data:g=[]}=fe({queryKey:["/api/districts"]}),{data:x=[]}=fe({queryKey:["/api/public-messages",l==null?void 0:l.id],enabled:!!(l!=null&&l.id)}),p=Gt({resolver:Yt(rFe),defaultValues:{name:"",phoneNumber:"",roleAppliedFor:"",district:"",taluk:"",pincode:"",servicesProvided:""}}),y=Gt({resolver:Yt(sFe),defaultValues:{otp:""}}),v=Gt({resolver:Yt(nFe),defaultValues:{message:""}}),f=Se({mutationFn:async k=>(await ie("POST","/api/nominations",k)).json(),onSuccess:k=>{i(k),r(!1),n(!0),u({title:"Nomination Submitted",description:"Please verify your phone number with the OTP sent to you."})},onError:k=>{u({title:"Submission Failed",description:k.message,variant:"destructive"})}}),b=Se({mutationFn:async k=>(await ie("POST","/api/verify-otp",{phoneNumber:a.phoneNumber,otp:k.otp,purpose:"nomination"})).json(),onSuccess:()=>{n(!1),i(null),u({title:"Phone Verified",description:"Your nomination has been submitted for admin review."})},onError:k=>{u({title:"Verification Failed",description:k.message,variant:"destructive"})}}),N=Se({mutationFn:async k=>(await ie("POST","/api/public-messages",{nominationId:l.id,senderName:"Anonymous",message:k.message})).json(),onSuccess:()=>{v.reset(),pe.invalidateQueries({queryKey:["/api/public-messages",l.id]}),u({title:"Message Sent",description:"Your message has been posted."})},onError:k=>{u({title:"Failed to Send",description:k.message,variant:"destructive"})}}),{data:w=[]}=fe({queryKey:["/api/taluks",p.watch("district")],enabled:!!p.watch("district")}),C=k=>{f.mutate(k)},P=k=>{b.mutate(k)},S=k=>{N.mutate(k)},A=k=>{o(k),d(!0)};return e.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Opportunities Forum"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Connect with service providers and discover opportunities in your community. Submit nominations to showcase local talent and services."}),e.jsxs(Tt,{open:t,onOpenChange:r,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",onClick:()=>{console.log("Nominate button clicked"),r(!0)},children:[e.jsx(Ft,{className:"mr-2 h-5 w-5"}),"Nominate Yourself"]})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Submit a Nomination"}),e.jsx(Xt,{children:"Nominate someone who provides excellent services in your community."})]}),e.jsx(Qt,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(C),className:"space-y-4",children:[e.jsx(U,{control:p.control,name:"name",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"Full Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter full name",...k})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"phoneNumber",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"Phone Number"}),e.jsx(V,{children:e.jsx($,{placeholder:"10-digit phone number",...k})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"roleAppliedFor",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"Role/Profession"}),e.jsxs(je,{onValueChange:k.onChange,defaultValue:k.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select role"})})}),e.jsxs(ve,{children:[e.jsx(T,{value:"farmer",children:"Farmer"}),e.jsx(T,{value:"manufacturer",children:"Manufacturer"}),e.jsx(T,{value:"transport",children:"Transport Service"}),e.jsx(T,{value:"taxi",children:"Taxi Service"}),e.jsx(T,{value:"rental",children:"Rental Service"}),e.jsx(T,{value:"recycling",children:"Recycling Agent"}),e.jsx(T,{value:"other",children:"Other"})]})]}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"district",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"District"}),e.jsxs(je,{onValueChange:k.onChange,defaultValue:k.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})})}),e.jsx(ve,{children:g.map(D=>e.jsx(T,{value:D,children:D},D))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"taluk",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"Taluk"}),e.jsxs(je,{onValueChange:k.onChange,defaultValue:k.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select taluk"})})}),e.jsx(ve,{children:w.map(D=>e.jsx(T,{value:D.name,children:D.name},D.name))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"pincode",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{placeholder:"6-digit pincode",...k})}),e.jsx(H,{})]})}),e.jsx(U,{control:p.control,name:"servicesProvided",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe the services provided...",...k})}),e.jsx(H,{})]})}),e.jsxs(_,{type:"submit",className:"w-full",disabled:f.isPending,children:[f.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Nomination"]})]})})]})]})]}),e.jsx(Tt,{open:s,onOpenChange:n,children:e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Verify Phone Number"}),e.jsxs(Xt,{children:["Enter the 6-digit OTP sent to ",a==null?void 0:a.phoneNumber]})]}),e.jsx(Qt,{...y,children:e.jsxs("form",{onSubmit:y.handleSubmit(P),className:"space-y-4",children:[e.jsx(U,{control:y.control,name:"otp",render:({field:k})=>e.jsxs(L,{children:[e.jsx(B,{children:"OTP"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter 6-digit OTP",...k})}),e.jsx(H,{})]})}),e.jsxs(_,{type:"submit",className:"w-full",disabled:b.isPending,children:[b.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Verify OTP"]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[e.jsx(WX,{className:"h-6 w-6 text-yellow-500"}),"Featured Service Providers"]}),h?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(k=>e.jsx(O,{className:"animate-pulse",children:e.jsxs(E,{className:"p-6",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})},k))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(k=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{className:"text-lg",children:k.name}),e.jsx(ae,{variant:"secondary",children:k.role})]}),e.jsxs(he,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-4 w-4"}),k.taluk,", ",k.district," - ",k.pincode]})]}),e.jsxs(E,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:k.serviceProvided}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>A(k),children:[e.jsx(Tu,{className:"mr-1 h-4 w-4"}),"Chat"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(Uo,{className:"mr-1 h-4 w-4"}),"Contact"]})]})]})]},k.id))}),m.length===0&&!h&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(rr,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Featured Providers Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Be the first to nominate someone from your community!"})]})]}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(Pt,{children:[e.jsxs(kt,{children:["Chat with ",l==null?void 0:l.name]}),e.jsxs(Xt,{children:["Public messages for ",l==null?void 0:l.role," services"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-3 border rounded p-4",children:x.length===0?e.jsx("p",{className:"text-center text-muted-foreground",children:"No messages yet. Be the first to send one!"}):x.map(k=>e.jsxs("div",{className:"bg-muted rounded p-3",children:[e.jsx("div",{className:"font-medium text-sm",children:k.senderName}),e.jsx("div",{className:"text-sm mt-1",children:k.message}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(k.createdAt).toLocaleString()})]},k.id))}),e.jsx(Qt,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(S),className:"flex gap-2",children:[e.jsx(U,{control:v.control,name:"message",render:({field:k})=>e.jsxs(L,{className:"flex-1",children:[e.jsx(V,{children:e.jsx($,{placeholder:"Type your message...",...k})}),e.jsx(H,{})]})}),e.jsxs(_,{type:"submit",disabled:N.isPending,children:[N.isPending&&e.jsx(Qe,{className:"mr-2 h-4 w-4 animate-spin"}),"Send"]})]})})]})]})})]})}function iFe(){const[t,r]=j.useState(!1);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-center mb-8",children:"Nomination Test Page"}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(_,{onClick:()=>{console.log("Simple button clicked"),alert("Simple button works!")},className:"mr-4",children:"Test Simple Button"}),e.jsx(_,{onClick:()=>{console.log("State button clicked, current state:",t),r(!0)},className:"mr-4",children:"Test State Button"})]}),e.jsx("div",{className:"text-center",children:e.jsxs(Tt,{open:t,onOpenChange:r,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",onClick:()=>{console.log("Dialog trigger clicked")},children:[e.jsx(Ft,{className:"mr-2 h-5 w-5"}),"Open Nomination Dialog"]})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Test Nomination Form"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Name"}),e.jsx($,{id:"name",placeholder:"Enter your name"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"phone",children:"Phone"}),e.jsx($,{id:"phone",placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(_,{onClick:()=>{console.log("Form submitted"),alert("Form would be submitted here"),r(!1)},children:"Submit"})]})]})]})]})}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[e.jsxs("p",{children:["State: ",t?"Dialog Open":"Dialog Closed"]}),e.jsx("p",{children:"Check browser console for click events"})]})]})})}function lFe(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState("all"),[a,i]=j.useState(""),[l,o]=j.useState("all"),[c,d]=j.useState(),[u,m]=j.useState(),[h,g]=j.useState(!1),{data:x=[]}=fe({queryKey:["/api/rental-categories"]}),{data:p=[],isLoading:y}=fe({queryKey:["/api/rental-equipment",{category:s,search:a,location:l,startDate:c==null?void 0:c.toISOString(),endDate:u==null?void 0:u.toISOString()}]}),{data:v=[]}=fe({queryKey:["/api/rental-cart"],enabled:!!t}),f=Se({mutationFn:async({equipmentId:k,quantity:D,startDate:q,endDate:z})=>{const I=_D(z,q)+1;return(await ie("POST","/api/rental-cart",{equipmentId:k,quantity:D,startDate:vt(q,"yyyy-MM-dd"),endDate:vt(z,"yyyy-MM-dd"),totalDays:I})).json()},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/rental-cart"]}),r({title:"Equipment added to cart"})},onError:k=>{r({title:"Failed to add to cart",description:k.message,variant:"destructive"})}}),b=Se({mutationFn:async({id:k,quantity:D})=>(await ie("PATCH",`/api/rental-cart/${k}`,{quantity:D})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/rental-cart"]})}}),N=Se({mutationFn:async k=>(await ie("DELETE",`/api/rental-cart/${k}`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/rental-cart"]}),r({title:"Equipment removed from cart"})}}),w=(k,D)=>_D(D,k)+1,C=(k,D,q=1)=>{let z=k.dailyRate;if(D>=30&&k.monthlyRate){const I=Math.floor(D/30),F=D%30;z=(I*k.monthlyRate+F*k.dailyRate)/D}else if(D>=7&&k.weeklyRate){const I=Math.floor(D/7),F=D%7;z=(I*k.weeklyRate+F*k.dailyRate)/D}return z*D*q},P=k=>{if(!c||!u){r({title:"Please select rental dates",description:"Choose start and end dates for the rental period",variant:"destructive"});return}const D=w(c,u);if(D<k.minimumRentalDays){r({title:"Rental period too short",description:`Minimum rental period is ${k.minimumRentalDays} days`,variant:"destructive"});return}if(D>k.maximumRentalDays){r({title:"Rental period too long",description:`Maximum rental period is ${k.maximumRentalDays} days`,variant:"destructive"});return}f.mutate({equipmentId:k.id,quantity:1,startDate:c,endDate:u})},S=()=>v.reduce((k,D)=>{const q=q.find(z=>z.id===D.equipmentId);return q?k+C(q,D.totalDays,D.quantity):k},0),A=()=>v.reduce((k,D)=>{const q=q.find(z=>z.id===D.equipmentId);return q?k+q.securityDeposit*D.quantity:k},0);return e.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Equipment Rental"}),e.jsx("p",{className:"text-gray-600",children:"Rent professional equipment for your projects"})]}),e.jsxs(_,{onClick:()=>g(!h),className:"relative",children:[e.jsx(_r,{className:"w-4 h-4 mr-2"}),"Cart (",v.length,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{className:"text-lg",children:"Rental Dates"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:De("w-full justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),c?vt(c,"PPP"):"Pick a date"]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:c,onSelect:d,disabled:k=>k<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"End Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:De("w-full justify-start text-left font-normal",!u&&"text-muted-foreground"),children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),u?vt(u,"PPP"):"Pick a date"]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:u,onSelect:m,disabled:k=>!c||k<=c,initialFocus:!0})})]})]}),c&&u&&e.jsxs("div",{className:"text-sm text-center p-2 bg-blue-50 rounded",children:["Duration: ",w(c,u)," days"]})]})]}),e.jsxs(O,{children:[e.jsx(G,{children:e.jsx(Y,{className:"text-lg",children:"Filters"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Category"}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Categories"}),x.map(k=>e.jsx(T,{value:k.id.toString(),children:k.name},k.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Location"}),e.jsxs(je,{value:l,onValueChange:o,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Locations"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Locations"}),e.jsx(T,{value:"chennai",children:"Chennai"}),e.jsx(T,{value:"coimbatore",children:"Coimbatore"}),e.jsx(T,{value:"madurai",children:"Madurai"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsx($,{placeholder:"Search equipment...",value:a,onChange:k=>i(k.target.value)})]})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(nr,{defaultValue:"equipment",className:"space-y-6",children:[e.jsxs(sr,{children:[e.jsx(Ae,{value:"equipment",children:"Available Equipment"}),h&&e.jsxs(Ae,{value:"cart",children:["Cart (",v.length,")"]})]}),e.jsx(Ve,{value:"equipment",children:y?e.jsx("div",{className:"text-center py-8",children:"Loading equipment..."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:p.filter(k=>k.adminApproved&&k.status==="active").map(k=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:k.name}),e.jsxs(he,{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),k.location]})]}),e.jsx(ae,{variant:k.condition==="excellent"?"default":"secondary",children:k.condition})]})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ft,{className:"w-3 h-3 text-gray-500"}),e.jsxs("span",{children:[k.availableQuantity,"/",k.totalQuantity," available"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(yt,{className:"w-3 h-3 text-gray-500"}),e.jsxs("span",{children:[k.minimumRentalDays,"-",k.maximumRentalDays," days"]})]})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Daily Rate:"}),e.jsxs("span",{className:"text-lg font-bold",children:["",k.dailyRate]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsx("span",{children:"Security Deposit:"}),e.jsxs("span",{children:["",k.securityDeposit]})]}),k.deliveryAvailable&&e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:["",k.deliveryCharge]})]})]}),c&&u&&e.jsx("div",{className:"bg-blue-50 p-2 rounded text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Total (",w(c,u)," days):"]}),e.jsxs("span",{className:"font-semibold",children:["",C(k,w(c,u))]})]})}),e.jsx(_,{className:"w-full",onClick:()=>P(k),disabled:!t||f.isPending||k.availableQuantity===0,children:k.availableQuantity===0?"Out of Stock":"Add to Cart"})]})})]},k.id))})}),h&&e.jsx(Ve,{value:"cart",children:e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Rental Cart"}),e.jsx(he,{children:"Review your selected equipment"})]}),e.jsx(E,{children:v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_r,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Your cart is empty"})]}):e.jsxs("div",{className:"space-y-4",children:[v.map(k=>{const D=p.find(q=>q.id===k.equipmentId);return D?e.jsxs("div",{className:"flex justify-between items-center p-4 border rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:D.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[vt(new Date(k.startDate),"MMM dd")," - ",vt(new Date(k.endDate),"MMM dd, yyyy"),"(",k.totalDays," days)"]}),e.jsxs("p",{className:"text-sm font-medium",children:["",C(D,k.totalDays,k.quantity)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{size:"sm",variant:"outline",onClick:()=>b.mutate({id:k.id,quantity:k.quantity-1}),disabled:k.quantity<=1,children:e.jsx(Rc,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-8 text-center",children:k.quantity}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>b.mutate({id:k.id,quantity:k.quantity+1}),disabled:k.quantity>=D.availableQuantity,children:e.jsx(Ft,{className:"w-3 h-3"})}),e.jsx(_,{size:"sm",variant:"destructive",onClick:()=>N.mutate(k.id),children:"Remove"})]})]},k.id):null}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rental Total:"}),e.jsxs("span",{className:"font-semibold",children:["",S()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Security Deposit:"}),e.jsxs("span",{className:"font-semibold",children:["",A()]})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["",S()+A()]})]})]}),e.jsx(_,{className:"w-full mt-4",size:"lg",children:"Proceed to Checkout"})]})]})})]})})]})})]})]})}function oFe(){const{toast:t}=Ue(),{data:r=[],isLoading:s}=fe({queryKey:["/api/admin/rental-categories"]}),{data:n=[],isLoading:a}=fe({queryKey:["/api/admin/rental-equipment"]}),{data:i=[],isLoading:l}=fe({queryKey:["/api/admin/rental-orders"]}),o=Se({mutationFn:async u=>(await ie("PATCH",`/api/admin/rental-equipment/${u}/approve`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-equipment"]}),t({title:"Equipment approved successfully"})},onError:u=>{t({title:"Failed to approve equipment",description:u.message,variant:"destructive"})}}),c=Se({mutationFn:async u=>(await ie("PATCH",`/api/admin/rental-equipment/${u}/reject`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-equipment"]}),t({title:"Equipment rejected successfully"})},onError:u=>{t({title:"Failed to reject equipment",description:u.message,variant:"destructive"})}}),d=u=>{const m={pending:"secondary",active:"default",inactive:"destructive",maintenance:"outline"};return e.jsx(ae,{variant:m[u]||"secondary",children:u})};return e.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Rental Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage equipment rentals, categories, and orders"})]})}),e.jsxs(nr,{defaultValue:"equipment",className:"space-y-6",children:[e.jsxs(sr,{className:"grid w-full grid-cols-3",children:[e.jsx(Ae,{value:"equipment",children:"Equipment"}),e.jsx(Ae,{value:"categories",children:"Categories"}),e.jsx(Ae,{value:"orders",children:"Orders"})]}),e.jsxs(Ve,{value:"equipment",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Equipment Management"}),e.jsxs(_,{children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Equipment"]})]}),a?e.jsx("div",{className:"text-center py-8",children:"Loading equipment..."}):e.jsx("div",{className:"grid gap-4",children:n.map(u=>e.jsxs(O,{className:u.adminApproved?"":"border-orange-200 bg-orange-50",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:u.name}),e.jsxs(he,{children:["Category: ",u.categoryName||"Unknown"," | Provider: ",u.providerName||"Unknown"]}),e.jsxs(he,{className:"mt-1",children:["Daily Rate: ",u.dailyRate," | Security Deposit: ",u.securityDeposit]})]}),e.jsxs("div",{className:"flex gap-2",children:[d(u.status),u.adminApproved?e.jsx(ae,{variant:"default",children:"Approved"}):e.jsx(ae,{variant:"secondary",children:"Pending Approval"})]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",u.location]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Condition:"})," ",u.condition]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Available:"})," ",u.availableQuantity,"/",u.totalQuantity]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Min Days:"})," ",u.minimumRentalDays]})]}),u.description&&e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"font-medium",children:"Description:"})," ",u.description]}),!u.adminApproved&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{size:"sm",onClick:()=>o.mutate(u.id),disabled:o.isPending,children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Approve"]}),e.jsxs(_,{size:"sm",variant:"destructive",onClick:()=>c.mutate(u.id),disabled:c.isPending,children:[e.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Reject"]})]})]})]},u.id))})]}),e.jsxs(Ve,{value:"categories",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Rental Categories"}),e.jsxs(_,{children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Category"]})]}),s?e.jsx("div",{className:"text-center py-8",children:"Loading categories..."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(u=>e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{className:"text-lg",children:u.name}),e.jsx(he,{children:u.description})]}),e.jsx(E,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ae,{variant:u.isActive?"default":"secondary",children:u.isActive?"Active":"Inactive"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{size:"sm",variant:"outline",children:e.jsx(Zr,{className:"w-4 h-4"})}),e.jsx(_,{size:"sm",variant:"outline",children:e.jsx(Ir,{className:"w-4 h-4"})})]})]})})]},u.id))})]}),e.jsxs(Ve,{value:"orders",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Rental Orders"}),l?e.jsx("div",{className:"text-center py-8",children:"Loading orders..."}):e.jsx("div",{className:"grid gap-4",children:i.map(u=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Y,{className:"text-lg",children:["Order #",u.orderNumber]}),e.jsxs(he,{children:["Total: ",u.totalAmount," | Deposit: ",u.securityDeposit]})]}),e.jsxs("div",{className:"flex gap-2",children:[d(u.status),e.jsx(ae,{variant:"outline",children:u.paymentStatus})]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duration:"})," ",u.totalDays," days"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Start:"})," ",u.startDate]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"End:"})," ",u.endDate]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Delivery:"})," ",u.deliveryCharge]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(_,{size:"sm",variant:"outline",children:[e.jsx(gr,{className:"w-4 h-4 mr-2"}),"View Details"]})})]})]},u.id))})]})]})]})}function cFe(){const[t,r]=j.useState(!1),[s,n]=j.useState(null),[a,i]=j.useState({name:"",description:"",imageUrl:"",displayOrder:0}),{toast:l}=Ue(),{data:o=[],isLoading:c}=fe({queryKey:["/api/admin/rental-categories"]}),d=Se({mutationFn:async v=>(await ie("POST","/api/admin/rental-categories",v)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-categories"]}),r(!1),h(),l({title:"Success",description:"Rental category created successfully"})},onError:v=>{l({title:"Error",description:v.message,variant:"destructive"})}}),u=Se({mutationFn:async({id:v,data:f})=>(await ie("PUT",`/api/admin/rental-categories/${v}`,f)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-categories"]}),n(null),h(),l({title:"Success",description:"Rental category updated successfully"})},onError:v=>{l({title:"Error",description:v.message,variant:"destructive"})}}),m=Se({mutationFn:async v=>(await ie("DELETE",`/api/admin/rental-categories/${v}`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-categories"]}),l({title:"Success",description:"Rental category deleted successfully"})},onError:v=>{l({title:"Error",description:v.message,variant:"destructive"})}}),h=()=>{i({name:"",description:"",imageUrl:"",displayOrder:0})},g=()=>{if(!a.name.trim()){l({title:"Error",description:"Category name is required",variant:"destructive"});return}d.mutate(a)},x=()=>{!s||!a.name.trim()||u.mutate({id:s.id,data:a})},p=v=>{n(v),i({name:v.name,description:v.description||"",imageUrl:v.imageUrl||"",displayOrder:v.displayOrder})},y=v=>{confirm("Are you sure you want to delete this category?")&&m.mutate(v)};return c?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading rental categories..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Rental Categories Management"}),e.jsxs(Tt,{open:t,onOpenChange:r,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{onClick:()=>h(),children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Add Category"]})}),e.jsxs(Ct,{children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Create Rental Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Category Name *"}),e.jsx($,{id:"name",value:a.name,onChange:v=>i({...a,name:v.target.value}),placeholder:"e.g., Construction Equipment"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",value:a.description,onChange:v=>i({...a,description:v.target.value}),placeholder:"Category description"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"imageUrl",children:"Image URL"}),e.jsx($,{id:"imageUrl",value:a.imageUrl,onChange:v=>i({...a,imageUrl:v.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"displayOrder",children:"Display Order"}),e.jsx($,{id:"displayOrder",type:"number",value:a.displayOrder,onChange:v=>i({...a,displayOrder:parseInt(v.target.value)||0})})]}),e.jsx(_,{onClick:g,disabled:d.isPending,className:"w-full",children:d.isPending?"Creating...":"Create Category"})]})]})]})]}),o.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No rental categories found"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Create your first rental category to get started"})]})}):e.jsx("div",{className:"grid gap-4",children:o.map(v=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:v.name}),v.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(v),children:e.jsx(av,{className:"w-4 h-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>y(v.id),children:e.jsx(Ir,{className:"w-4 h-4"})})]})]})}),e.jsx(E,{children:e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("p",{children:["Display Order: ",v.displayOrder]}),e.jsxs("p",{children:["Status: ",v.isActive?"Active":"Inactive"]}),e.jsxs("p",{children:["Created: ",new Date(v.createdAt).toLocaleDateString()]})]})})]},v.id))}),e.jsx(Tt,{open:!!s,onOpenChange:()=>n(null),children:e.jsxs(Ct,{children:[e.jsx(Pt,{children:e.jsx(kt,{children:"Edit Rental Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-name",children:"Category Name *"}),e.jsx($,{id:"edit-name",value:a.name,onChange:v=>i({...a,name:v.target.value}),placeholder:"e.g., Construction Equipment"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-description",children:"Description"}),e.jsx(at,{id:"edit-description",value:a.description,onChange:v=>i({...a,description:v.target.value}),placeholder:"Category description"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-imageUrl",children:"Image URL"}),e.jsx($,{id:"edit-imageUrl",value:a.imageUrl,onChange:v=>i({...a,imageUrl:v.target.value}),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-displayOrder",children:"Display Order"}),e.jsx($,{id:"edit-displayOrder",type:"number",value:a.displayOrder,onChange:v=>i({...a,displayOrder:parseInt(v.target.value)||0})})]}),e.jsx(_,{onClick:x,disabled:u.isPending,className:"w-full",children:u.isPending?"Updating...":"Update Category"})]})]})})]})}const dFe=Kt({name:R().min(1,"Name is required"),description:R().optional(),categoryId:ct().min(1,"Category is required"),isActive:tr().default(!0),displayOrder:ct().min(0).default(0)});function uFe(){const{toast:t}=Ue(),[r,s]=j.useState(null),[n,a]=j.useState(!1),i=Gt({resolver:Yt(dFe),defaultValues:{name:"",description:"",categoryId:0,isActive:!0,displayOrder:0}}),{data:l=[]}=fe({queryKey:["/api/rental-categories"]}),{data:o=[],isLoading:c}=fe({queryKey:["/api/admin/rental-subcategories"]}),d=Se({mutationFn:async y=>(await ie("POST","/api/admin/rental-subcategories",y)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-subcategories"]}),pe.invalidateQueries({queryKey:["/api/rental-subcategories"]}),t({title:"Success",description:"Subcategory created successfully"}),a(!1),i.reset()},onError:y=>{t({title:"Error",description:"Failed to create subcategory",variant:"destructive"})}}),u=Se({mutationFn:async({id:y,data:v})=>(await ie("PATCH",`/api/admin/rental-subcategories/${y}`,v)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-subcategories"]}),pe.invalidateQueries({queryKey:["/api/rental-subcategories"]}),t({title:"Success",description:"Subcategory updated successfully"}),a(!1),s(null),i.reset()},onError:y=>{t({title:"Error",description:"Failed to update subcategory",variant:"destructive"})}}),m=Se({mutationFn:async y=>{await ie("DELETE",`/api/admin/rental-subcategories/${y}`)},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/rental-subcategories"]}),pe.invalidateQueries({queryKey:["/api/rental-subcategories"]}),t({title:"Success",description:"Subcategory deleted successfully"})},onError:y=>{t({title:"Error",description:"Failed to delete subcategory",variant:"destructive"})}}),h=y=>{r?u.mutate({id:r.id,data:{name:y.name,description:y.description||null,categoryId:y.categoryId,isActive:y.isActive,displayOrder:y.displayOrder}}):d.mutate({name:y.name,description:y.description||null,categoryId:y.categoryId,isActive:y.isActive,displayOrder:y.displayOrder})},g=y=>{s(y),i.reset({name:y.name,description:y.description||"",categoryId:y.categoryId,isActive:y.isActive,displayOrder:y.displayOrder}),a(!0)},x=y=>{confirm("Are you sure you want to delete this subcategory?")&&m.mutate(y)},p=()=>{s(null),i.reset({name:"",description:"",categoryId:0,isActive:!0,displayOrder:0}),a(!0)};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Rental Subcategories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage rental equipment subcategories"})]}),e.jsxs(Tt,{open:n,onOpenChange:a,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{onClick:p,children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Subcategory"]})}),e.jsxs(Ct,{className:"sm:max-w-[425px]",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:r?"Edit Subcategory":"Add New Subcategory"}),e.jsx(Xt,{children:r?"Update the subcategory details below.":"Create a new rental subcategory. Fill in the details below."})]}),e.jsx(Qt,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(h),className:"space-y-4",children:[e.jsx(U,{control:i.control,name:"name",render:({field:y})=>e.jsxs(L,{children:[e.jsx(B,{children:"Name"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter subcategory name",...y})}),e.jsx(H,{})]})}),e.jsx(U,{control:i.control,name:"description",render:({field:y})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Enter subcategory description",...y})}),e.jsx(H,{})]})}),e.jsx(U,{control:i.control,name:"categoryId",render:({field:y})=>e.jsxs(L,{children:[e.jsx(B,{children:"Parent Category"}),e.jsxs(je,{onValueChange:v=>y.onChange(parseInt(v)),value:y.value.toString(),children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a category"})})}),e.jsx(ve,{children:l.map(v=>e.jsx(T,{value:v.id.toString(),children:v.name},v.id))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:i.control,name:"displayOrder",render:({field:y})=>e.jsxs(L,{children:[e.jsx(B,{children:"Display Order"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"0",...y,onChange:v=>y.onChange(parseInt(v.target.value)||0)})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:d.isPending||u.isPending,children:r?"Update":"Create"})]})]})})]})]})]}),c?e.jsx("div",{className:"text-center py-8",children:"Loading subcategories..."}):e.jsx("div",{className:"grid gap-4",children:o.length===0?e.jsx(O,{children:e.jsx(E,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(ft,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{children:"No subcategories found. Add your first subcategory to get started."})]})})}):o.map(y=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[y.name,e.jsx(ae,{variant:y.isActive?"default":"secondary",children:y.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Mt,{className:"mr-1 h-3 w-3"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Fr,{className:"mr-1 h-3 w-3"}),"Inactive"]})})]}),e.jsxs(he,{children:["Category: ",y.categoryName," | Order: ",y.displayOrder]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{variant:"outline",size:"sm",onClick:()=>g(y),children:e.jsx(Zr,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>x(y.id),disabled:m.isPending,children:e.jsx(Ir,{className:"h-4 w-4"})})]})]})}),y.description&&e.jsx(E,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:y.description})})]},y.id))})]})}const mFe=Kt({name:R().min(1,"Equipment name is required"),categoryId:ct().min(1,"Please select a category"),subcategoryId:ct().optional(),description:R().optional(),dailyRate:ct().min(1,"Daily rate must be greater than 0"),weeklyRate:ct().optional(),monthlyRate:ct().optional(),securityDeposit:ct().min(0,"Security deposit cannot be negative"),totalQuantity:ct().min(1,"Total quantity must be at least 1"),condition:R().default("excellent"),location:R().min(1,"Location is required"),district:R().min(1,"District is required"),pincode:R().optional(),imageUrl:R().optional(),deliveryAvailable:tr().default(!1),deliveryCharge:ct().default(0),minimumRentalDays:ct().min(1,"Minimum rental days must be at least 1"),maximumRentalDays:ct().min(1,"Maximum rental days must be at least 1")});function AN(){const{user:t}=dt(),{toast:r}=Ue(),[s,n]=j.useState(!1),[a,i]=j.useState(0),{data:l=[]}=fe({queryKey:["/api/rental-categories"]}),{data:o=[]}=fe({queryKey:["/api/rental-subcategories"]}),{data:c=[],isLoading:d}=fe({queryKey:["/api/provider/rental-equipment"]}),u=Gt({resolver:Yt(mFe),defaultValues:{name:"",categoryId:0,subcategoryId:0,description:"",dailyRate:0,weeklyRate:0,monthlyRate:0,securityDeposit:0,totalQuantity:1,condition:"excellent",location:"",district:"",pincode:"",imageUrl:"",deliveryAvailable:!1,deliveryCharge:0,minimumRentalDays:1,maximumRentalDays:30}}),m=Se({mutationFn:async p=>(await ie("POST","/api/provider/rental-equipment",p)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/provider/rental-equipment"]}),n(!1),u.reset(),r({title:"Success",description:"Equipment added successfully. Awaiting admin approval."})},onError:p=>{r({title:"Error",description:p.message,variant:"destructive"})}}),h=p=>{m.mutate(p)},g=p=>p.adminApproved?p.status==="active"?e.jsxs(ae,{variant:"default",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(ae,{variant:"destructive",children:[e.jsx(Fr,{className:"w-3 h-3 mr-1"}),"Inactive"]}):e.jsxs(ae,{variant:"secondary",children:[e.jsx(lr,{className:"w-3 h-3 mr-1"}),"Pending Approval"]}),x=p=>{const y=l.find(v=>v.id===p);return(y==null?void 0:y.name)||"Unknown Category"};return d?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading your rental equipment..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Rental Equipment"}),e.jsx("p",{className:"text-gray-600",children:"Manage your rental equipment inventory"})]}),e.jsxs(_,{onClick:()=>n(!s),children:[e.jsx(Ft,{className:"w-4 h-4 mr-2"}),s?"Cancel":"Add Equipment"]})]}),s&&e.jsxs(O,{className:"mb-6",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Add New Equipment"}),e.jsx(he,{children:"Add equipment to your rental inventory. All equipment requires admin approval before going live."})]}),e.jsx(E,{children:e.jsx(Qt,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(h),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"name",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Equipment Name *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., JCB Excavator",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"categoryId",render:({field:p})=>{var y;return e.jsxs(L,{children:[e.jsx(B,{children:"Category *"}),e.jsxs(je,{onValueChange:v=>{const f=parseInt(v);p.onChange(f),i(f),u.setValue("subcategoryId",0)},value:(y=p.value)==null?void 0:y.toString(),children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select category"})})}),e.jsx(ve,{children:l.map(v=>e.jsx(T,{value:v.id.toString(),children:v.name},v.id))})]}),e.jsx(H,{})]})}}),e.jsx(U,{control:u.control,name:"subcategoryId",render:({field:p})=>{var y;return e.jsxs(L,{children:[e.jsx(B,{children:"Subcategory"}),e.jsxs(je,{onValueChange:v=>p.onChange(parseInt(v)),value:(y=p.value)==null?void 0:y.toString(),disabled:!a,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select subcategory (optional)"})})}),e.jsx(ve,{children:o.filter(v=>v.categoryId===a).map(v=>e.jsx(T,{value:v.id.toString(),children:v.name},v.id))})]}),e.jsx(H,{})]})}})]}),e.jsx(U,{control:u.control,name:"description",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Description"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Describe your equipment...",...p})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(U,{control:u.control,name:"dailyRate",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Daily Rate () *"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseFloat(y.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"weeklyRate",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Weekly Rate ()"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseFloat(y.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"monthlyRate",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Monthly Rate ()"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseFloat(y.target.value)||0)})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"securityDeposit",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Security Deposit () *"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseFloat(y.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"totalQuantity",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Total Quantity *"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseInt(y.target.value)||1)})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(U,{control:u.control,name:"location",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Location *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Chennai",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"district",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"District *"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., Chennai",...p})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"pincode",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pincode"}),e.jsx(V,{children:e.jsx($,{placeholder:"e.g., 600001",...p})}),e.jsx(H,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(U,{control:u.control,name:"minimumRentalDays",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Minimum Rental Days *"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseInt(y.target.value)||1)})}),e.jsx(H,{})]})}),e.jsx(U,{control:u.control,name:"maximumRentalDays",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Maximum Rental Days *"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseInt(y.target.value)||30)})}),e.jsx(H,{})]})})]}),e.jsx(U,{control:u.control,name:"deliveryAvailable",render:({field:p})=>e.jsxs(L,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{className:"text-base",children:"Delivery Available"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Do you offer delivery service for this equipment?"})]}),e.jsx(V,{children:e.jsx(gs,{checked:p.value,onCheckedChange:p.onChange})})]})}),u.watch("deliveryAvailable")&&e.jsx(U,{control:u.control,name:"deliveryCharge",render:({field:p})=>e.jsxs(L,{children:[e.jsx(B,{children:"Delivery Charge ()"}),e.jsx(V,{children:e.jsx($,{type:"number",...p,onChange:y=>p.onChange(parseFloat(y.target.value)||0)})}),e.jsx(H,{})]})}),e.jsx(_,{type:"submit",disabled:m.isPending,className:"w-full",children:m.isPending?"Adding Equipment...":"Add Equipment"})]})})})]}),c.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-6 text-center",children:[e.jsx(ft,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No rental equipment added yet"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Add your first piece of equipment to start renting"})]})}):e.jsx("div",{className:"grid gap-4",children:c.map(p=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:p.name}),e.jsx("p",{className:"text-sm text-gray-600",children:x(p.categoryId)})]}),g(p)]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Daily Rate: ",p.dailyRate]}),p.weeklyRate&&e.jsxs("p",{children:["Weekly Rate: ",p.weeklyRate]}),p.monthlyRate&&e.jsxs("p",{children:["Monthly Rate: ",p.monthlyRate]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["Security Deposit: ",p.securityDeposit]}),e.jsxs("p",{children:["Quantity: ",p.availableQuantity,"/",p.totalQuantity]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx(gt,{className:"w-3 h-3 inline mr-1"}),p.location,", ",p.district]}),e.jsxs("p",{children:[e.jsx(yt,{className:"w-3 h-3 inline mr-1"}),p.minimumRentalDays,"-",p.maximumRentalDays," days"]})]})]}),p.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-3",children:p.description})]})]},p.id))})]})}function hFe(){const[t,r]=j.useState("all"),[s,n]=j.useState(""),[a,i]=j.useState("all"),[l,o]=j.useState("all"),[c,d]=j.useState("all"),[u,m]=j.useState(null),[h,g]=j.useState(),[x,p]=j.useState(),{data:y=[]}=fe({queryKey:["/api/rental-categories"]}),{data:v=[],isLoading:f}=fe({queryKey:["/api/rental-equipment"]}),b=v.filter(S=>{var I;const A=t==="all"||S.categoryId.toString()===t,k=s===""||S.name.toLowerCase().includes(s.toLowerCase())||((I=S.description)==null?void 0:I.toLowerCase().includes(s.toLowerCase())),D=a==="all"||S.district===a,q=c==="all"||S.condition===c;let z=!0;if(l!=="all"){const F=S.dailyRate;switch(l){case"0-500":z=F<=500;break;case"500-1000":z=F>500&&F<=1e3;break;case"1000-2000":z=F>1e3&&F<=2e3;break;case"2000+":z=F>2e3;break}}return A&&k&&D&&q&&z&&S.isActive}),N=Array.from(new Set(v.map(S=>S.district))).sort(),w=S=>{switch(S.toLowerCase()){case"excellent":return"bg-green-100 text-green-800";case"good":return"bg-blue-100 text-blue-800";case"fair":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},C=(S,A)=>{if(A>=30&&S.monthlyRate){const k=Math.floor(A/30),D=A%30;return k*S.monthlyRate+D*S.dailyRate}else if(A>=7&&S.weeklyRate){const k=Math.floor(A/7),D=A%7;return k*S.weeklyRate+D*S.dailyRate}return A*S.dailyRate},P=()=>{if(h&&x){const S=Math.abs(x.getTime()-h.getTime());return Math.ceil(S/(1e3*60*60*24))}return 1};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"Rental Equipment Marketplace"}),e.jsx("p",{className:"text-gray-600",children:"Find and rent equipment for your projects"})]}),e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx($,{placeholder:"Search equipment...",value:s,onChange:S=>n(S.target.value),className:"pl-10"})]})}),e.jsxs(je,{value:t,onValueChange:r,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Categories"}),y.map(S=>e.jsx(T,{value:S.id.toString(),children:S.name},S.id))]})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Districts"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Districts"}),N.map(S=>e.jsx(T,{value:S,children:S},S))]})]}),e.jsxs(je,{value:l,onValueChange:o,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Prices"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Prices"}),e.jsx(T,{value:"0-500",children:"0 - 500/day"}),e.jsx(T,{value:"500-1000",children:"500 - 1000/day"}),e.jsx(T,{value:"1000-2000",children:"1000 - 2000/day"}),e.jsx(T,{value:"2000+",children:"2000+/day"})]})]}),e.jsxs(je,{value:c,onValueChange:d,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Conditions"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Conditions"}),e.jsx(T,{value:"excellent",children:"Excellent"}),e.jsx(T,{value:"good",children:"Good"}),e.jsx(T,{value:"fair",children:"Fair"})]})]})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-gray-600",children:["Showing ",b.length," of ",v.length," equipment"]})}),f?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((S,A)=>e.jsxs(O,{className:"animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg"}),e.jsxs(E,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},A))}):b.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-12 text-center",children:[e.jsx(ft,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No equipment found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters to see more results."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(S=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"relative",children:[S.imageUrl?e.jsx("img",{src:S.imageUrl,alt:S.name,className:"h-48 w-full object-cover rounded-t-lg"}):e.jsx("div",{className:"h-48 bg-gray-200 rounded-t-lg flex items-center justify-center",children:e.jsx(ft,{className:"h-12 w-12 text-gray-400"})}),e.jsx(ae,{className:De("absolute top-2 right-2",w(S.condition)),children:S.condition})]}),e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:S.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gt,{className:"h-4 w-4"}),S.location,", ",S.district]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(yt,{className:"h-4 w-4"}),"Min: ",S.minimumRentalDays," day(s) | Max: ",S.maximumRentalDays," day(s)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["",S.dailyRate,e.jsx("span",{className:"text-sm font-normal text-gray-600",children:"/day"})]}),S.weeklyRate&&e.jsxs("div",{className:"text-sm text-gray-600",children:["",S.weeklyRate,"/week"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Pl,{className:"h-4 w-4"}),"Security Deposit: ",S.securityDeposit]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Available: ",S.availableQuantity,"/",S.totalQuantity]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Tf,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm",children:"4.5"})]})]}),e.jsxs(Tt,{children:[e.jsx(hs,{asChild:!0,children:e.jsx(_,{className:"w-full mt-4",onClick:()=>m(S),disabled:S.availableQuantity===0,children:S.availableQuantity===0?"Not Available":"View Details & Book"})}),e.jsxs(Ct,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:S.name}),e.jsx(Xt,{children:"Equipment details and booking information"})]}),u&&e.jsxs("div",{className:"space-y-6",children:[S.imageUrl?e.jsx("img",{src:S.imageUrl,alt:S.name,className:"w-full h-64 object-cover rounded-lg"}):e.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(ft,{className:"h-16 w-16 text-gray-400"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Equipment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Condition:"})," ",S.condition]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",S.location,", ",S.district]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Available Quantity:"})," ",S.availableQuantity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery:"})," ",S.deliveryAvailable?`Yes (${S.deliveryCharge})`:"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pickup:"})," ",S.pickupAvailable?"Yes":"No"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Pricing"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Daily Rate:"})," ",S.dailyRate]}),S.weeklyRate&&e.jsxs("p",{children:[e.jsx("strong",{children:"Weekly Rate:"})," ",S.weeklyRate]}),S.monthlyRate&&e.jsxs("p",{children:[e.jsx("strong",{children:"Monthly Rate:"})," ",S.monthlyRate]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Security Deposit:"})," ",S.securityDeposit]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Min Rental:"})," ",S.minimumRentalDays," day(s)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Max Rental:"})," ",S.maximumRentalDays," day(s)"]})]})]})]}),S.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description})]}),S.specifications&&Object.keys(S.specifications).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Specifications"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(S.specifications).map(([A,k])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[A,":"]}),e.jsx("span",{children:String(k)})]},A))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Select Rental Period"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:De("w-full justify-start text-left font-normal",!h&&"text-muted-foreground"),children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),h?vt(h,"PPP"):"Pick start date"]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:h,onSelect:g,disabled:A=>A<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"End Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:De("w-full justify-start text-left font-normal",!x&&"text-muted-foreground"),children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),x?vt(x,"PPP"):"Pick end date"]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:x,onSelect:p,disabled:A=>A<(h||new Date),initialFocus:!0})})]})]})]}),h&&x&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Rental Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",P()," day(s)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rental Cost:"})," ",C(S,P())]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Security Deposit:"})," ",S.securityDeposit]}),S.deliveryAvailable&&e.jsxs("p",{children:[e.jsx("strong",{children:"Delivery Charge:"})," ",S.deliveryCharge]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("p",{className:"font-semibold",children:[e.jsx("strong",{children:"Total Amount:"})," ",C(S,P())+S.securityDeposit+(S.deliveryAvailable?S.deliveryCharge:0)]})})]})]})]}),e.jsx(_,{className:"w-full",size:"lg",disabled:!h||!x||P()<S.minimumRentalDays||P()>S.maximumRentalDays,children:"Book Equipment"})]})]})]})]})})]},S.id))})]})}function pFe(){const[t,r]=j.useState("all"),[s,n]=j.useState("all"),[a,i]=j.useState(""),[l,o]=j.useState("all"),[c,d]=j.useState("all"),[u,m]=j.useState("all"),[h,g]=j.useState("grid"),[x,p]=j.useState(null),[y,v]=j.useState(),[f,b]=j.useState(),{data:N=[],isLoading:w}=fe({queryKey:["/api/rental-categories"]}),{data:C=[],isLoading:P}=fe({queryKey:["/api/rental-subcategories"]}),{data:S=[],isLoading:A}=fe({queryKey:["/api/rental-equipment"]}),k=S.filter(F=>{var J,Re;const W=t==="all"||F.categoryId.toString()===t,X=s==="all"||((J=F.subcategoryId)==null?void 0:J.toString())===s,K=a===""||F.name.toLowerCase().includes(a.toLowerCase())||((Re=F.description)==null?void 0:Re.toLowerCase().includes(a.toLowerCase())),Z=l==="all"||F.district===l,ue=u==="all"||F.condition===u;let Ne=!0;if(c!=="all"){const Ee=F.dailyRate;switch(c){case"0-500":Ne=Ee<=500;break;case"500-1000":Ne=Ee>500&&Ee<=1e3;break;case"1000-2000":Ne=Ee>1e3&&Ee<=2e3;break;case"2000+":Ne=Ee>2e3;break}}return W&&X&&K&&Z&&ue&&Ne}),D=Array.from(new Set(S.map(F=>F.district))).sort(),q=t==="all"?C:C.filter(F=>F.categoryId.toString()===t),z=()=>{if(!y||!f)return 1;const F=Math.abs(f.getTime()-y.getTime()),W=Math.ceil(F/(1e3*60*60*24));return Math.max(1,W)},I=F=>{const W=z(),X=F.dailyRate*W,K=F.deliveryAvailable?F.deliveryCharge:0;return X+K};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Rental Services"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Find and rent equipment for your needs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:h==="grid"?"default":"outline",size:"sm",onClick:()=>g("grid"),children:e.jsx(iZ,{className:"w-4 h-4"})}),e.jsx(_,{variant:h==="list"?"default":"outline",size:"sm",onClick:()=>g("list"),children:e.jsx(oZ,{className:"w-4 h-4"})})]})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"w-5 h-5"}),"Filters"]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),e.jsx($,{placeholder:"Search equipment...",value:a,onChange:F=>i(F.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(je,{value:t,onValueChange:r,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Categories"}),N.map(F=>e.jsx(T,{value:F.id.toString(),children:F.name},F.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Subcategory"}),e.jsxs(je,{value:s,onValueChange:n,disabled:t==="all",children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Subcategories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Subcategories"}),q.map(F=>e.jsx(T,{value:F.id.toString(),children:F.name},F.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Location"}),e.jsxs(je,{value:l,onValueChange:o,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Locations"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Locations"}),D.map(F=>e.jsx(T,{value:F,children:F},F))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Price Range (per day)"}),e.jsxs(je,{value:c,onValueChange:d,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Prices"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Prices"}),e.jsx(T,{value:"0-500",children:"0 - 500"}),e.jsx(T,{value:"500-1000",children:"500 - 1000"}),e.jsx(T,{value:"1000-2000",children:"1000 - 2000"}),e.jsx(T,{value:"2000+",children:"2000+"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Condition"}),e.jsxs(je,{value:u,onValueChange:m,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"All Conditions"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Conditions"}),e.jsx(T,{value:"excellent",children:"Excellent"}),e.jsx(T,{value:"good",children:"Good"}),e.jsx(T,{value:"fair",children:"Fair"})]})]})]}),e.jsx("div",{children:e.jsx(_,{variant:"outline",onClick:()=>{r("all"),n("all"),i(""),o("all"),d("all"),m("all")},className:"mt-6",children:"Clear Filters"})})]})]})]}),A?e.jsx("div",{className:"text-center py-8",children:"Loading equipment..."}):k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ft,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No equipment found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters to find more equipment"})]}):e.jsx("div",{className:De("grid gap-6",h==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:k.map(F=>e.jsx(O,{className:De("hover:shadow-lg transition-shadow cursor-pointer",h==="list"&&"flex flex-row"),onClick:()=>p(F),children:h==="grid"?e.jsxs(e.Fragment,{children:[e.jsxs(G,{className:"pb-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(Y,{className:"text-lg line-clamp-2",children:F.name}),e.jsx(ae,{variant:F.condition==="excellent"?"default":"secondary",children:F.condition})]}),e.jsxs(he,{className:"text-sm",children:[F.categoryName," ",F.subcategoryName&&`> ${F.subcategoryName}`]})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gt,{className:"w-4 h-4"}),F.location,", ",F.district]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ft,{className:"w-4 h-4"}),"Available: ",F.availableQuantity,"/",F.totalQuantity]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(yt,{className:"w-4 h-4"}),"Min: ",F.minimumRentalDays," days"]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",F.dailyRate]}),e.jsx("p",{className:"text-sm text-gray-500",children:"per day"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(Pl,{className:"w-4 h-4"}),"",F.securityDeposit]}),e.jsx("p",{className:"text-xs text-gray-500",children:"security deposit"})]})]})}),e.jsx(_,{className:"w-full",size:"sm",children:"View Details"})]})})]}):e.jsx("div",{className:"flex w-full",children:e.jsxs(E,{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:F.name}),e.jsxs(he,{children:[F.categoryName," ",F.subcategoryName&&`> ${F.subcategoryName}`]})]}),e.jsx(ae,{variant:F.condition==="excellent"?"default":"secondary",children:F.condition})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(gt,{className:"w-4 h-4"}),F.location,", ",F.district]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ft,{className:"w-4 h-4"}),"Available: ",F.availableQuantity,"/",F.totalQuantity]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(yt,{className:"w-4 h-4"}),"Min: ",F.minimumRentalDays," days"]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["",F.dailyRate,"/day"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Security: ",F.securityDeposit]})]})]}),e.jsx(_,{size:"sm",children:"View Details"})]})})},F.id))}),e.jsx(Tt,{open:!!x,onOpenChange:()=>p(null),children:e.jsx(Ct,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:x&&e.jsxs(e.Fragment,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{className:"text-2xl",children:x.name}),e.jsxs(Xt,{children:[x.categoryName," ",x.subcategoryName&&`> ${x.subcategoryName}`," | Provider: ",x.providerName]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Pricing"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["Daily Rate: ",e.jsxs("span",{className:"font-bold text-primary",children:["",x.dailyRate]})]}),x.weeklyRate&&e.jsxs("p",{children:["Weekly Rate: ",e.jsxs("span",{className:"font-bold",children:["",x.weeklyRate]})]}),x.monthlyRate&&e.jsxs("p",{children:["Monthly Rate: ",e.jsxs("span",{className:"font-bold",children:["",x.monthlyRate]})]}),e.jsxs("p",{children:["Security Deposit: ",e.jsxs("span",{className:"font-bold",children:["",x.securityDeposit]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Availability"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["Available: ",x.availableQuantity,"/",x.totalQuantity]}),e.jsxs("p",{children:["Condition: ",e.jsx(ae,{variant:"outline",children:x.condition})]}),e.jsxs("p",{children:["Min Days: ",x.minimumRentalDays]}),e.jsxs("p",{children:["Max Days: ",x.maximumRentalDays]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Location & Delivery"}),e.jsxs("p",{className:"flex items-center gap-2 mb-2",children:[e.jsx(gt,{className:"w-4 h-4"}),x.location,", ",x.district,x.pincode&&` - ${x.pincode}`]}),x.deliveryAvailable&&e.jsxs("p",{className:"text-green-600",children:[" Delivery available (",x.deliveryCharge,")"]})]}),x.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:x.description})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-4",children:"Book Equipment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Start Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:De("w-full justify-start text-left font-normal",!y&&"text-muted-foreground"),children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),y?vt(y,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:y,onSelect:v,disabled:F=>F<new Date,initialFocus:!0})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"End Date"}),e.jsxs(wn,{children:[e.jsx(Sn,{asChild:!0,children:e.jsxs(_,{variant:"outline",className:De("w-full justify-start text-left font-normal",!f&&"text-muted-foreground"),children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),f?vt(f,"PPP"):e.jsx("span",{children:"Pick a date"})]})}),e.jsx(dn,{className:"w-auto p-0",children:e.jsx(un,{mode:"single",selected:f,onSelect:b,disabled:F=>F<(y||new Date),initialFocus:!0})})]})]})]}),y&&f&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("h5",{className:"font-semibold mb-2",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["Duration: ",z()," days"]}),e.jsxs("p",{children:["Equipment Cost: ",x.dailyRate,"  ",z()," = ",x.dailyRate*z()]}),x.deliveryAvailable&&e.jsxs("p",{children:["Delivery Charge: ",x.deliveryCharge]}),e.jsxs("p",{className:"font-bold text-lg",children:["Total: ",I(x)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Security Deposit: ",x.securityDeposit," (refundable)"]})]})]}),e.jsx(_,{className:"w-full",disabled:!y||!f||x.availableQuantity===0,children:x.availableQuantity===0?"Out of Stock":"Book Now"})]})]})]})})})]})}function fFe(){const{user:t}=dt(),[r,s]=j.useState(""),[n,a]=j.useState("all"),[i,l]=j.useState("all"),{data:o=[]}=fe({queryKey:["/api/rental-categories"]}),{data:c=[]}=fe({queryKey:["/api/rental-subcategories"]}),{data:d=[],isLoading:u}=fe({queryKey:["/api/provider/rental-equipment"]}),m=d.filter(p=>{var b;const y=p.name.toLowerCase().includes(r.toLowerCase())||((b=p.description)==null?void 0:b.toLowerCase().includes(r.toLowerCase())),v=n==="all"||p.categoryId.toString()===n,f=i==="all"||p.subcategoryId&&p.subcategoryId.toString()===i;return y&&v&&f}),h=p=>p.adminApproved?p.isActive?p.availableQuantity===0?e.jsx(ae,{variant:"outline",children:"Out of Stock"}):e.jsx(ae,{variant:"default",children:"Available"}):e.jsx(ae,{variant:"destructive",children:"Inactive"}):e.jsx(ae,{variant:"secondary",children:"Pending Approval"}),g=p=>{const y=o.find(v=>v.id===p);return(y==null?void 0:y.name)||"Unknown Category"},x=p=>{if(!p)return"No Subcategory";const y=c.find(v=>v.id===p);return(y==null?void 0:y.name)||"Unknown Subcategory"};return u?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Rental Equipment"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental equipment inventory and track performance"})]}),e.jsxs(_,{className:"w-fit",children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Equipment"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search equipment...",value:r,onChange:p=>s(p.target.value),className:"pl-10"})]}),e.jsxs(je,{value:n,onValueChange:a,children:[e.jsx(ge,{className:"w-full lg:w-[200px]",children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Categories"}),o.map(p=>e.jsx(T,{value:p.id.toString(),children:p.name},p.id))]})]}),e.jsxs(je,{value:i,onValueChange:l,children:[e.jsx(ge,{className:"w-full lg:w-[200px]",children:e.jsx(be,{placeholder:"All Subcategories"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Subcategories"}),c.filter(p=>n==="all"||p.categoryId.toString()===n).map(p=>e.jsx(T,{value:p.id.toString(),children:p.name},p.id))]})]})]})]}),m.length===0?e.jsx(O,{className:"text-center py-12",children:e.jsxs(E,{children:[e.jsx(ft,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Equipment Found"}),e.jsx("p",{className:"text-muted-foreground",children:d.length===0?"You haven't added any rental equipment yet.":"No equipment matches your current search and filters."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(p=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx(Y,{className:"text-lg",children:p.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:g(p.categoryId)}),p.subcategoryId&&e.jsx("p",{className:"text-xs text-muted-foreground",children:x(p.subcategoryId)})]})]}),h(p)]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Daily Rate:"}),e.jsxs("span",{className:"font-medium",children:["",p.dailyRate]})]}),p.weeklyRate&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Weekly Rate:"}),e.jsxs("span",{className:"font-medium",children:["",p.weeklyRate]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Available:"}),e.jsxs("span",{className:"font-medium",children:[p.availableQuantity,"/",p.totalQuantity]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Location:"}),e.jsx("span",{className:"font-medium",children:p.location})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(gr,{className:"mr-2 h-4 w-4"}),"View"]}),e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(Ir,{className:"h-4 w-4"})})]})]})]},p.id))})]})}function xFe(){const{user:t}=dt(),{data:r,isLoading:s}=fe({queryKey:["/api/provider/rental-items"],enabled:!!t});return s?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading rental items..."})]})})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Rental Items"}),e.jsx("p",{className:"text-gray-600",children:"Track and manage items currently rented from your equipment"})]}),!r||r.length===0?e.jsx(O,{className:"text-center py-12",children:e.jsxs(E,{children:[e.jsx(ft,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Rentals"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"You don't have any active rental items at the moment."}),e.jsxs(_,{children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),"Add Equipment"]})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(n=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{className:"text-lg font-semibold",children:n.itemName}),e.jsx(ae,{variant:n.status==="active"?"default":n.status==="completed"?"secondary":n.status==="pending"?"outline":"destructive",children:n.status})]}),e.jsxs(he,{className:"flex items-center",children:[e.jsx(ft,{className:"mr-1 h-4 w-4"}),n.category]})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(en,{className:"mr-1 h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["",n.amount]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(yt,{className:"mr-1 h-4 w-4"}),e.jsx("span",{children:vt(new Date(n.createdAt),"MMM dd")})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:vt(new Date(n.startDate),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"font-medium",children:vt(new Date(n.endDate),"MMM dd, yyyy")})]}),n.renterName&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Renter:"}),e.jsx("span",{className:"font-medium",children:n.renterName})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(_,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),n.status==="active"&&e.jsx(_,{variant:"default",size:"sm",className:"flex-1",children:"Contact Renter"})]})]})]},n.id))})]})}function gFe(){const{user:t}=dt(),{data:r,isLoading:s}=fe({queryKey:["/api/customer/rental-items"],enabled:!!t});return s?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your rental items..."})]})})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Rental Items"}),e.jsx("p",{className:"text-gray-600",children:"Manage your current and past rental bookings"})]}),!r||r.length===0?e.jsx(O,{className:"text-center py-12",children:e.jsxs(E,{children:[e.jsx(ft,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Rental History"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"You haven't rented any items yet. Browse our rental services to get started."}),e.jsxs(_,{children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),"Browse Rentals"]})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(n=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{className:"text-lg font-semibold",children:n.itemName}),e.jsx(ae,{variant:n.status==="active"?"default":n.status==="completed"?"secondary":n.status==="pending"?"outline":"destructive",children:n.status})]}),e.jsxs(he,{className:"flex items-center",children:[e.jsx(ft,{className:"mr-1 h-4 w-4"}),n.category]})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(en,{className:"mr-1 h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["",n.amount]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(yt,{className:"mr-1 h-4 w-4"}),e.jsx("span",{children:vt(new Date(n.createdAt),"MMM dd")})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:vt(new Date(n.startDate),"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"End Date:"}),e.jsx("span",{className:"font-medium",children:vt(new Date(n.endDate),"MMM dd, yyyy")})]}),n.providerName&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Provider:"}),e.jsx("span",{className:"font-medium",children:n.providerName})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(_,{variant:"outline",size:"sm",className:"flex-1",children:"View Details"}),n.status==="active"&&e.jsx(_,{variant:"default",size:"sm",className:"flex-1",children:"Contact Provider"}),n.status==="completed"&&e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Tf,{className:"mr-1 h-3 w-3"}),"Rate"]})]})]})]},n.id))})]})}const vFe=Kt({serviceType:R().min(1,"Service type is required"),amount:ct().min(1,"Amount must be greater than 0"),paymentMethod:R().min(1,"Payment method is required"),serviceData:Kt({pickup:R().optional(),dropoff:R().optional(),packageDetails:R().optional(),itemName:R().optional(),category:R().optional(),startDate:R().optional(),endDate:R().optional(),district:R().optional(),taluk:R().optional(),pincode:R().optional()}).optional()}),_N=[{id:"taxi",name:"Taxi Service",icon:Et,color:"bg-blue-500"},{id:"delivery",name:"Delivery Service",icon:ft,color:"bg-green-500"},{id:"rental",name:"Rental Service",icon:tv,color:"bg-purple-500"},{id:"local_products",name:"Local Products",icon:_r,color:"bg-orange-500"},{id:"grocery",name:"Grocery",icon:_r,color:"bg-pink-500"},{id:"recharge",name:"Recharge",icon:oa,color:"bg-cyan-500"},{id:"recycling",name:"Recycling",icon:zn,color:"bg-emerald-500"}],iM={new:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",closed:"bg-orange-100 text-orange-800",approved:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800"},yFe={new:yt,in_progress:lr,closed:Mt,approved:Mt,completed:Mt};function jFe(){const{toast:t}=Ue(),[r,s]=j.useState(""),[n,a]=j.useState(!1),[i,l]=j.useState(null),o=Gt({resolver:Yt(vFe),defaultValues:{serviceType:"",amount:0,paymentMethod:"razorpay",serviceData:{}}}),{data:c,isLoading:d}=fe({queryKey:["/api/service-requests/my-requests"],refetchInterval:3e4}),{data:u}=fe({queryKey:["/api/service-requests",i],enabled:!!i}),m=Se({mutationFn:async f=>await(await ie("POST","/api/service-requests",f)).json(),onSuccess:f=>{t({title:"Service Request Created",description:`Service request ${f.srNumber} has been created successfully.`}),a(!1),o.reset(),pe.invalidateQueries({queryKey:["/api/service-requests/my-requests"]})},onError:f=>{t({title:"Error",description:f.message||"Failed to create service request",variant:"destructive"})}}),h=Se({mutationFn:async({requestId:f,paymentData:b})=>await(await ie("POST",`/api/service-requests/${f}/payment`,b)).json(),onSuccess:()=>{t({title:"Payment Successful",description:"Your payment has been processed and the service request is now in progress."}),pe.invalidateQueries({queryKey:["/api/service-requests/my-requests"]})},onError:f=>{t({title:"Payment Failed",description:f.message||"Failed to process payment",variant:"destructive"})}}),g=f=>{m.mutate(f)},x=async(f,b)=>{const N={paymentId:`pay_${Date.now()}`,razorpayPaymentId:`razorpay_payment_${Date.now()}`,razorpayOrderId:`order_${Date.now()}`,razorpaySignature:"demo_signature"};h.mutate({requestId:f,paymentData:N})},p=f=>{const b=_N.find(N=>N.id===f);return b?b.icon:Os},y=f=>{const b=_N.find(N=>N.id===f);return b?b.name:f},v=f=>yFe[f]||yt;return d?e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(f=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},f))})]})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Service Request Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Manage all your service requests in one place"})]}),e.jsxs(Tt,{open:n,onOpenChange:a,children:[e.jsx(hs,{asChild:!0,children:e.jsx(_,{className:"bg-blue-600 hover:bg-blue-700",children:"Create New Request"})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Create Service Request"}),e.jsx(Xt,{children:"Choose a service and provide details for your request"})]}),e.jsx(Qt,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(g),className:"space-y-4",children:[e.jsx(U,{control:o.control,name:"serviceType",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Type"}),e.jsxs(je,{onValueChange:f.onChange,value:f.value,children:[e.jsx(V,{children:e.jsx(ge,{children:e.jsx(be,{placeholder:"Select a service"})})}),e.jsx(ve,{children:_N.map(b=>e.jsx(T,{value:b.id,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b.icon,{className:"h-4 w-4"}),e.jsx("span",{children:b.name})]})},b.id))})]}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"amount",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Amount ()"}),e.jsx(V,{children:e.jsx($,{type:"number",placeholder:"Enter amount",...f,onChange:b=>f.onChange(Number(b.target.value))})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"serviceData.pickup",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Pickup Location (if applicable)"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter pickup location",...f})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"serviceData.dropoff",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Destination/Delivery Location (if applicable)"}),e.jsx(V,{children:e.jsx($,{placeholder:"Enter destination",...f})}),e.jsx(H,{})]})}),e.jsx(U,{control:o.control,name:"serviceData.packageDetails",render:({field:f})=>e.jsxs(L,{children:[e.jsx(B,{children:"Service Details"}),e.jsx(V,{children:e.jsx(at,{placeholder:"Provide details about your service request",...f})}),e.jsx(H,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:m.isPending,className:"bg-blue-600 hover:bg-blue-700",children:m.isPending?"Creating...":"Create Request"})]})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(O,{children:e.jsxs(E,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:(c==null?void 0:c.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Requests"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:(c==null?void 0:c.filter(f=>f.status==="in_progress").length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(c==null?void 0:c.filter(f=>f.status==="completed").length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["",(c==null?void 0:c.reduce((f,b)=>f+b.amount,0))||0]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Spent"})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Your Service Requests"}),e.jsx(he,{children:"Track the status of all your service requests"})]}),e.jsx(E,{children:!c||c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Os,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No service requests yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first service request to get started"}),e.jsx(_,{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700",children:"Create Request"})]}):e.jsx("div",{className:"space-y-4",children:c.map(f=>{const b=p(f.serviceType),N=v(f.status);return e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(b,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y(f.serviceType)}),e.jsxs("div",{className:"text-sm text-gray-600",children:["SR: ",f.srNumber]}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(f.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["",f.amount]}),e.jsxs(ae,{className:iM[f.status],children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),f.status.replace("_"," ")]})]}),e.jsxs("div",{className:"flex space-x-2",children:[f.paymentStatus==="pending"&&e.jsxs(_,{size:"sm",onClick:()=>x(f.id,f.amount),disabled:h.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(fa,{className:"h-4 w-4 mr-1"}),"Pay Now"]}),e.jsxs(Tt,{children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{size:"sm",variant:"outline",onClick:()=>l(f.id),children:[e.jsx(gr,{className:"h-4 w-4 mr-1"}),"View"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Service Request Details"}),e.jsxs(Xt,{children:[f.srNumber," - ",y(f.serviceType)]})]}),u&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsx(ae,{className:iM[u.status],children:u.status.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount"}),e.jsxs("div",{children:["",u.amount]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Payment Status"}),e.jsx("div",{children:u.paymentStatus})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Created"}),e.jsx("div",{children:new Date(u.createdAt).toLocaleString()})]})]}),u.serviceData&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Service Details"}),e.jsx("pre",{className:"bg-gray-100 p-3 rounded text-sm",children:JSON.stringify(JSON.parse(u.serviceData),null,2)})]}),u.statusHistory&&u.statusHistory.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Status History"}),e.jsx("div",{className:"space-y-2 mt-2",children:u.statusHistory.map((w,C)=>e.jsxs("div",{className:"border-l-2 border-blue-200 pl-3",children:[e.jsx("div",{className:"text-sm font-medium",children:w.toStatus.replace("_"," ")}),e.jsx("div",{className:"text-xs text-gray-600",children:new Date(w.createdAt).toLocaleString()}),w.reason&&e.jsxs("div",{className:"text-xs text-gray-600",children:["Reason: ",w.reason]})]},C))})]})]})]})]})]})]})]})},f.id)})})})]})]})}const bFe=()=>{const[t,r]=j.useState(""),[s,n]=j.useState("all"),[a,i]=j.useState("all"),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(""),[h,g]=j.useState(""),{toast:x}=Ue(),{data:p=[],isLoading:y,error:v}=fe({queryKey:["/api/service-requests/all"]});console.log("Admin Service Requests Debug:",{serviceRequests:p,isLoading:y,error:v,length:p==null?void 0:p.length,firstItem:p==null?void 0:p[0]});const f=Se({mutationFn:async({id:S,status:A,notes:k})=>(await ie("PATCH",`/api/service-requests/${S}/status`,{status:A,notes:k})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/all"]}),x({title:"Status Updated",description:"Service request status has been updated successfully."}),d(!1),o(null),m(""),g("")},onError:S=>{x({title:"Update Failed",description:S.message||"Failed to update service request status.",variant:"destructive"})}}),b=Se({mutationFn:async({id:S,stakeholderType:A,stakeholderId:k})=>(await ie("PATCH",`/api/service-requests/${S}/assign`,{stakeholderType:A,stakeholderId:k})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/all"]}),x({title:"Assignment Updated",description:"Service request has been assigned successfully."})},onError:S=>{x({title:"Assignment Failed",description:S.message||"Failed to assign service request.",variant:"destructive"})}}),N=p.filter(S=>{const A=S.srNumber.toLowerCase().includes(t.toLowerCase())||S.serviceType.toLowerCase().includes(t.toLowerCase())||S.userId.toString().includes(t),k=s==="all"||S.status===s,D=a==="all"||S.serviceType===a;return A&&k&&D}),w={new:N.filter(S=>S.status==="new"),in_progress:N.filter(S=>S.status==="in_progress"),completed:N.filter(S=>["completed","approved","closed"].includes(S.status)),cancelled:N.filter(S=>S.status==="cancelled")},C=S=>{o(S),m(S.status),d(!0)},P=()=>{!l||!u||f.mutate({id:l.id,status:u,notes:h})};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Error Loading Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:v.message})]})}):!p||p.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Service Request Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track all service requests"})]}),e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Service Requests Found"}),e.jsx("p",{className:"text-muted-foreground",children:"No service requests are currently in the system."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Service Request Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track all service requests across the platform"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by SR number, service, or user ID...",value:t,onChange:S=>r(S.target.value),className:"pl-10 w-full sm:w-80"})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"Service Type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Services"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"}),e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"recycling",children:"Recycling"})]})]}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{className:"w-full sm:w-32",children:e.jsx(be,{placeholder:"Status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"new",children:"New"}),e.jsx(T,{value:"in_progress",children:"In Progress"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"approved",children:"Approved"}),e.jsx(T,{value:"closed",children:"Closed"}),e.jsx(T,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"New"}),e.jsx("p",{className:"text-2xl font-bold",children:w.new.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:w.in_progress.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:w.completed.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fr,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold",children:w.cancelled.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",N.reduce((S,A)=>S+Number(A.amount),0).toLocaleString()]})]})]})})})]}),e.jsxs(nr,{defaultValue:"new",className:"space-y-4",children:[e.jsxs(sr,{children:[e.jsxs(Ae,{value:"new",children:["New (",w.new.length,")"]}),e.jsxs(Ae,{value:"in_progress",children:["In Progress (",w.in_progress.length,")"]}),e.jsxs(Ae,{value:"completed",children:["Completed (",w.completed.length,")"]}),e.jsxs(Ae,{value:"cancelled",children:["Cancelled (",w.cancelled.length,")"]})]}),e.jsx(Ve,{value:"new",className:"space-y-4",children:w.new.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No new service requests"})]})}):w.new.map(S=>e.jsx(Xx,{request:S,onUpdateStatus:C,onAssignStakeholder:b.mutate},S.id))}),e.jsx(Ve,{value:"in_progress",className:"space-y-4",children:w.in_progress.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No service requests in progress"})]})}):w.in_progress.map(S=>e.jsx(Xx,{request:S,onUpdateStatus:C,onAssignStakeholder:b.mutate},S.id))}),e.jsx(Ve,{value:"completed",className:"space-y-4",children:w.completed.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No completed service requests"})]})}):w.completed.map(S=>e.jsx(Xx,{request:S,onUpdateStatus:C,onAssignStakeholder:b.mutate},S.id))}),e.jsx(Ve,{value:"cancelled",className:"space-y-4",children:w.cancelled.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No cancelled service requests"})]})}):w.cancelled.map(S=>e.jsx(Xx,{request:S,onUpdateStatus:C,onAssignStakeholder:b.mutate},S.id))})]}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Update Service Request Status"}),e.jsxs(Xt,{children:["Update the status and add notes for service request ",l==null?void 0:l.srNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(je,{value:u,onValueChange:m,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"new",children:"New"}),e.jsx(T,{value:"in_progress",children:"In Progress"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"approved",children:"Approved"}),e.jsx(T,{value:"closed",children:"Closed"}),e.jsx(T,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),e.jsx(at,{placeholder:"Add notes about this status update...",value:h,onChange:S=>g(S.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(_,{onClick:P,disabled:f.isPending,children:f.isPending?"Updating...":"Update Status"})]})]})]})})]})},Xx=({request:t,onUpdateStatus:r,onAssignStakeholder:s})=>{const n=o=>{switch(o){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},a=o=>{switch(o.toLowerCase()){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"approved":return"bg-purple-100 text-purple-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},i=o=>{switch(o.toLowerCase()){case"pending":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=t.serviceData?JSON.parse(t.serviceData):{};return e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:n(t.serviceType)}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.srNumber}),e.jsxs(he,{className:"capitalize",children:[t.serviceType," Service Request  User ID: ",t.userId]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(ae,{className:a(t.status),children:t.status.replace("_"," ").toUpperCase()}),e.jsxs(ae,{className:i(t.paymentStatus),children:["Payment: ",t.paymentStatus]})]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["",Number(t.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:vt(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.paymentMethod||"Razorpay"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.assignedTo?`Assigned: ${t.assignedTo}`:"Unassigned"})]})]}),(t.pincodeAgentId||t.talukManagerId||t.branchManagerId)&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Stakeholder Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[t.pincodeAgentId&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(tn,{className:"h-3 w-3"}),e.jsxs("span",{children:["Agent: ",t.pincodeAgentId]})]}),t.talukManagerId&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(An,{className:"h-3 w-3"}),e.jsxs("span",{children:["Taluk Manager: ",t.talukManagerId]})]}),t.branchManagerId&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(An,{className:"h-3 w-3"}),e.jsxs("span",{children:["Branch Manager: ",t.branchManagerId]})]})]})]}),t.serviceType==="taxi"&&l.pickup&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Trip Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",l.pickup,"  To: ",l.dropoff]}),l.distance&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distance: ",l.distance," km"]})]}),t.serviceType==="delivery"&&l.pickupAddress&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Delivery Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",l.pickupAddress,"  To: ",l.deliveryAddress]}),l.packageDetails&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Package: ",l.packageDetails]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Updated: ",vt(new Date(t.updatedAt),"MMM dd, HH:mm")]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>r(t),children:[e.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})]})]})]})},NFe=()=>{const[t,r]=j.useState(""),[s,n]=j.useState("all"),[a,i]=j.useState("all"),{data:l=[],isLoading:o,error:c}=fe({queryKey:["/api/service-requests/my-requests"]});console.log("Customer Service Requests Debug:",{serviceRequests:l,isLoading:o,error:c,length:l==null?void 0:l.length,firstItem:l==null?void 0:l[0]});const d=l.filter(m=>{const h=m.srNumber.toLowerCase().includes(t.toLowerCase())||m.serviceType.toLowerCase().includes(t.toLowerCase()),g=s==="all"||m.status===s,x=a==="all"||m.serviceType===a;return h&&g&&x}),u={active:d.filter(m=>["new","in_progress"].includes(m.status)),completed:d.filter(m=>["completed","approved"].includes(m.status)),cancelled:d.filter(m=>m.status==="cancelled")};return o?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold",children:"Error Loading Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:c.message})]})}):!l||l.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your service requests and their status"})]}),e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"No Service Requests Found"}),e.jsx("p",{className:"text-muted-foreground",children:"You haven't made any service requests yet."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Track all your service requests across different services"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by request number or service...",value:t,onChange:m=>r(m.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"Service Type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Services"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"}),e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"recycling",children:"Recycling"})]})]}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{className:"w-full sm:w-32",children:e.jsx(be,{placeholder:"Status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"new",children:"New"}),e.jsx(T,{value:"in_progress",children:"In Progress"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"approved",children:"Approved"}),e.jsx(T,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold",children:u.active.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:u.completed.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fr,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold",children:u.cancelled.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",d.reduce((m,h)=>m+Number(h.amount),0).toLocaleString()]})]})]})})})]}),e.jsxs(nr,{defaultValue:"active",className:"space-y-4",children:[e.jsxs(sr,{children:[e.jsxs(Ae,{value:"active",children:["Active (",u.active.length,")"]}),e.jsxs(Ae,{value:"completed",children:["Completed (",u.completed.length,")"]}),e.jsxs(Ae,{value:"cancelled",children:["Cancelled (",u.cancelled.length,")"]})]}),e.jsx(Ve,{value:"active",className:"space-y-4",children:u.active.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active service requests"})]})}):u.active.map(m=>e.jsx(TN,{request:m},m.id))}),e.jsx(Ve,{value:"completed",className:"space-y-4",children:u.completed.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No completed service requests"})]})}):u.completed.map(m=>e.jsx(TN,{request:m},m.id))}),e.jsx(Ve,{value:"cancelled",className:"space-y-4",children:u.cancelled.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Fr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No cancelled service requests"})]})}):u.cancelled.map(m=>e.jsx(TN,{request:m},m.id))})]})]})},TN=({request:t})=>{const r=i=>{switch(i){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},s=i=>{switch(i.toLowerCase()){case"new":return"bg-blue-100 text-blue-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"approved":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},n=i=>{switch(i.toLowerCase()){case"pending":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},a=t.serviceData?JSON.parse(t.serviceData):{};return e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:r(t.serviceType)}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.srNumber}),e.jsxs(he,{className:"capitalize",children:[t.serviceType," Service Request"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(ae,{className:s(t.status),children:t.status.replace("_"," ").toUpperCase()}),e.jsxs(ae,{className:n(t.paymentStatus),children:["Payment: ",t.paymentStatus]})]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["",Number(t.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:vt(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.paymentMethod||"Razorpay"})]})]}),t.serviceType==="taxi"&&a.pickup&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Trip Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",a.pickup,"  To: ",a.dropoff]}),a.distance&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distance: ",a.distance," km"]})]}),t.serviceType==="delivery"&&a.pickupAddress&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Delivery Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",a.pickupAddress,"  To: ",a.deliveryAddress]}),a.packageDetails&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Package: ",a.packageDetails]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Updated: ",vt(new Date(t.updatedAt),"MMM dd, HH:mm")]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"View Details"]})]})]})]})},wFe=()=>{const[t,r]=j.useState(""),[s,n]=j.useState("all"),[a,i]=j.useState("all"),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(""),[h,g]=j.useState(""),{toast:x}=Ue(),{data:p=[],isLoading:y}=fe({queryKey:["/api/service-requests/agent-requests"]}),v=Se({mutationFn:async({id:P,status:S,notes:A})=>(await ie("PATCH",`/api/service-requests/${P}/agent-update`,{status:S,notes:A})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/agent-requests"]}),x({title:"Status Updated",description:"Service request status has been updated successfully."}),d(!1),o(null),m(""),g("")},onError:P=>{x({title:"Update Failed",description:P.message||"Failed to update service request status.",variant:"destructive"})}}),f=Se({mutationFn:async P=>(await ie("PATCH",`/api/service-requests/${P}/accept`,{})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/agent-requests"]}),x({title:"Request Accepted",description:"Service request has been accepted and assigned to you."})},onError:P=>{x({title:"Accept Failed",description:P.message||"Failed to accept service request.",variant:"destructive"})}}),b=p.filter(P=>{const S=P.srNumber.toLowerCase().includes(t.toLowerCase())||P.serviceType.toLowerCase().includes(t.toLowerCase())||P.userId.toString().includes(t),A=s==="all"||P.status===s,k=a==="all"||P.serviceType===a;return S&&A&&k}),N={new:b.filter(P=>P.status==="new"),assigned:b.filter(P=>P.status==="assigned"),in_progress:b.filter(P=>P.status==="in_progress"),completed:b.filter(P=>["completed","closed"].includes(P.status))},w=P=>{o(P),m(P.status),d(!0)},C=()=>{!l||!u||v.mutate({id:l.id,status:u,notes:h})};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Pincode Agent - Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage service requests assigned to your pincode area"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by SR number, service, or user ID...",value:t,onChange:P=>r(P.target.value),className:"pl-10 w-full sm:w-80"})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"Service Type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Services"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"}),e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"recycling",children:"Recycling"})]})]}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{className:"w-full sm:w-32",children:e.jsx(be,{placeholder:"Status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"new",children:"New"}),e.jsx(T,{value:"assigned",children:"Assigned"}),e.jsx(T,{value:"in_progress",children:"In Progress"}),e.jsx(T,{value:"completed",children:"Completed"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"New Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:N.new.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tn,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Assigned"}),e.jsx("p",{className:"text-2xl font-bold",children:N.assigned.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:N.in_progress.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:N.completed.length})]})]})})})]}),e.jsxs(nr,{defaultValue:"new",className:"space-y-4",children:[e.jsxs(sr,{children:[e.jsxs(Ae,{value:"new",children:["New (",N.new.length,")"]}),e.jsxs(Ae,{value:"assigned",children:["Assigned (",N.assigned.length,")"]}),e.jsxs(Ae,{value:"in_progress",children:["In Progress (",N.in_progress.length,")"]}),e.jsxs(Ae,{value:"completed",children:["Completed (",N.completed.length,")"]})]}),e.jsx(Ve,{value:"new",className:"space-y-4",children:N.new.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No new service requests in your area"})]})}):N.new.map(P=>e.jsx(Zx,{request:P,onUpdateStatus:w,onAcceptRequest:f.mutate,showAcceptButton:!0},P.id))}),e.jsx(Ve,{value:"assigned",className:"space-y-4",children:N.assigned.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(tn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No assigned service requests"})]})}):N.assigned.map(P=>e.jsx(Zx,{request:P,onUpdateStatus:w,onAcceptRequest:f.mutate,showAcceptButton:!1},P.id))}),e.jsx(Ve,{value:"in_progress",className:"space-y-4",children:N.in_progress.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No service requests in progress"})]})}):N.in_progress.map(P=>e.jsx(Zx,{request:P,onUpdateStatus:w,onAcceptRequest:f.mutate,showAcceptButton:!1},P.id))}),e.jsx(Ve,{value:"completed",className:"space-y-4",children:N.completed.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No completed service requests"})]})}):N.completed.map(P=>e.jsx(Zx,{request:P,onUpdateStatus:w,onAcceptRequest:f.mutate,showAcceptButton:!1},P.id))})]}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Update Service Request Status"}),e.jsxs(Xt,{children:["Update the status and add notes for service request ",l==null?void 0:l.srNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(je,{value:u,onValueChange:m,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"assigned",children:"Assigned"}),e.jsx(T,{value:"in_progress",children:"In Progress"}),e.jsx(T,{value:"completed",children:"Completed"}),e.jsx(T,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),e.jsx(at,{placeholder:"Add notes about this status update...",value:h,onChange:P=>g(P.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(_,{onClick:C,disabled:v.isPending,children:v.isPending?"Updating...":"Update Status"})]})]})]})})]})},Zx=({request:t,onUpdateStatus:r,onAcceptRequest:s,showAcceptButton:n})=>{const a=o=>{switch(o){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},i=o=>{switch(o.toLowerCase()){case"new":return"bg-blue-100 text-blue-800";case"assigned":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=t.serviceData?JSON.parse(t.serviceData):{};return e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:a(t.serviceType)}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.srNumber}),e.jsxs(he,{className:"capitalize",children:[t.serviceType," Service Request  User ID: ",t.userId]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx(ae,{className:i(t.status),children:t.status.replace("_"," ").toUpperCase()})})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["",Number(t.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:vt(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.paymentMethod||"Razorpay"})]})]}),t.serviceType==="taxi"&&l.pickup&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Trip Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",l.pickup,"  To: ",l.dropoff]}),l.distance&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distance: ",l.distance," km"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Updated: ",vt(new Date(t.updatedAt),"MMM dd, HH:mm")]}),e.jsxs("div",{className:"flex space-x-2",children:[n&&e.jsxs(_,{variant:"default",size:"sm",onClick:()=>s(t.id),children:[e.jsx(tn,{className:"h-4 w-4 mr-2"}),"Accept Request"]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>r(t),children:[e.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})]})]})]})},SFe=()=>{const[t,r]=j.useState(""),[s,n]=j.useState("all"),[a,i]=j.useState("all"),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(""),[h,g]=j.useState(""),{toast:x}=Ue(),{data:p=[],isLoading:y}=fe({queryKey:["/api/service-requests/manager-requests"]}),v=Se({mutationFn:async({id:S,status:A,notes:k})=>(await ie("PATCH",`/api/service-requests/${S}/manager-update`,{status:A,notes:k})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/manager-requests"]}),x({title:"Status Updated",description:"Service request status has been updated successfully."}),d(!1),o(null),m(""),g("")},onError:S=>{x({title:"Update Failed",description:S.message||"Failed to update service request status.",variant:"destructive"})}}),f=Se({mutationFn:async S=>(await ie("PATCH",`/api/service-requests/${S}/approve`,{})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/manager-requests"]}),x({title:"Request Approved",description:"Service request has been approved and forwarded."})},onError:S=>{x({title:"Approval Failed",description:S.message||"Failed to approve service request.",variant:"destructive"})}}),b=Se({mutationFn:async S=>(await ie("PATCH",`/api/service-requests/${S}/escalate`,{})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/manager-requests"]}),x({title:"Request Escalated",description:"Service request has been escalated to branch manager."})},onError:S=>{x({title:"Escalation Failed",description:S.message||"Failed to escalate service request.",variant:"destructive"})}}),N=p.filter(S=>{const A=S.srNumber.toLowerCase().includes(t.toLowerCase())||S.serviceType.toLowerCase().includes(t.toLowerCase())||S.userId.toString().includes(t),k=s==="all"||S.status===s,D=a==="all"||S.serviceType===a;return A&&k&&D}),w={pending_approval:N.filter(S=>S.status==="completed"&&!S.approvedAt),approved:N.filter(S=>S.status==="approved"),escalated:N.filter(S=>S.status==="escalated"),all:N},C=S=>{o(S),m(S.status),d(!0)},P=()=>{!l||!u||v.mutate({id:l.id,status:u,notes:h})};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Taluk Manager - Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and approve service requests in your taluk area"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by SR number, service, or user ID...",value:t,onChange:S=>r(S.target.value),className:"pl-10 w-full sm:w-80"})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"Service Type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Services"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"}),e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"recycling",children:"Recycling"})]})]}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{className:"w-full sm:w-32",children:e.jsx(be,{placeholder:"Status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"completed",children:"Pending Approval"}),e.jsx(T,{value:"approved",children:"Approved"}),e.jsx(T,{value:"escalated",children:"Escalated"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Pending Approval"}),e.jsx("p",{className:"text-2xl font-bold",children:w.pending_approval.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold",children:w.approved.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(An,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Escalated"}),e.jsx("p",{className:"text-2xl font-bold",children:w.escalated.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:w.all.length})]})]})})})]}),e.jsxs(nr,{defaultValue:"pending_approval",className:"space-y-4",children:[e.jsxs(sr,{children:[e.jsxs(Ae,{value:"pending_approval",children:["Pending Approval (",w.pending_approval.length,")"]}),e.jsxs(Ae,{value:"approved",children:["Approved (",w.approved.length,")"]}),e.jsxs(Ae,{value:"escalated",children:["Escalated (",w.escalated.length,")"]}),e.jsxs(Ae,{value:"all",children:["All Requests (",w.all.length,")"]})]}),e.jsx(Ve,{value:"pending_approval",className:"space-y-4",children:w.pending_approval.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No requests pending approval"})]})}):w.pending_approval.map(S=>e.jsx(Jx,{request:S,onUpdateStatus:C,onApproveRequest:f.mutate,onEscalateRequest:b.mutate,showApprovalActions:!0},S.id))}),e.jsx(Ve,{value:"approved",className:"space-y-4",children:w.approved.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No approved requests"})]})}):w.approved.map(S=>e.jsx(Jx,{request:S,onUpdateStatus:C,onApproveRequest:f.mutate,onEscalateRequest:b.mutate,showApprovalActions:!1},S.id))}),e.jsx(Ve,{value:"escalated",className:"space-y-4",children:w.escalated.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(An,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No escalated requests"})]})}):w.escalated.map(S=>e.jsx(Jx,{request:S,onUpdateStatus:C,onApproveRequest:f.mutate,onEscalateRequest:b.mutate,showApprovalActions:!1},S.id))}),e.jsx(Ve,{value:"all",className:"space-y-4",children:w.all.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(rr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No service requests in your taluk"})]})}):w.all.map(S=>e.jsx(Jx,{request:S,onUpdateStatus:C,onApproveRequest:f.mutate,onEscalateRequest:b.mutate,showApprovalActions:S.status==="completed"&&!S.approvedAt},S.id))})]}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Update Service Request Status"}),e.jsxs(Xt,{children:["Update the status and add notes for service request ",l==null?void 0:l.srNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(je,{value:u,onValueChange:m,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"approved",children:"Approved"}),e.jsx(T,{value:"escalated",children:"Escalate to Branch Manager"}),e.jsx(T,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),e.jsx(at,{placeholder:"Add notes about this status update...",value:h,onChange:S=>g(S.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(_,{onClick:P,disabled:v.isPending,children:v.isPending?"Updating...":"Update Status"})]})]})]})})]})},Jx=({request:t,onUpdateStatus:r,onApproveRequest:s,onEscalateRequest:n,showApprovalActions:a})=>{const i=c=>{switch(c){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},l=c=>{switch(c.toLowerCase()){case"new":return"bg-blue-100 text-blue-800";case"assigned":return"bg-yellow-100 text-yellow-800";case"in_progress":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"approved":return"bg-purple-100 text-purple-800";case"escalated":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=t.serviceData?JSON.parse(t.serviceData):{};return e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:i(t.serviceType)}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.srNumber}),e.jsxs(he,{className:"capitalize",children:[t.serviceType," Service Request  User ID: ",t.userId]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(ae,{className:l(t.status),children:t.status.replace("_"," ").toUpperCase()}),t.pincodeAgentId&&e.jsxs(ae,{variant:"outline",children:["Agent: ",t.pincodeAgentId]})]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["",Number(t.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:vt(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.paymentMethod||"Razorpay"})]})]}),t.serviceType==="taxi"&&o.pickup&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Trip Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",o.pickup,"  To: ",o.dropoff]}),o.distance&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distance: ",o.distance," km"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Updated: ",vt(new Date(t.updatedAt),"MMM dd, HH:mm")]}),e.jsxs("div",{className:"flex space-x-2",children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>s(t.id),children:[e.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>n(t.id),children:[e.jsx(An,{className:"h-4 w-4 mr-2"}),"Escalate"]})]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>r(t),children:[e.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})]})]})]})},CFe=()=>{const[t,r]=j.useState(""),[s,n]=j.useState("all"),[a,i]=j.useState("all"),[l,o]=j.useState(null),[c,d]=j.useState(!1),[u,m]=j.useState(""),[h,g]=j.useState(""),{toast:x}=Ue(),{data:p=[],isLoading:y}=fe({queryKey:["/api/service-requests/branch-manager-requests"]}),v=Se({mutationFn:async({id:S,status:A,notes:k})=>(await ie("PATCH",`/api/service-requests/${S}/branch-manager-update`,{status:A,notes:k})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/branch-manager-requests"]}),x({title:"Status Updated",description:"Service request status has been updated successfully."}),d(!1),o(null),m(""),g("")},onError:S=>{x({title:"Update Failed",description:S.message||"Failed to update service request status.",variant:"destructive"})}}),f=Se({mutationFn:async S=>(await ie("PATCH",`/api/service-requests/${S}/final-approval`,{})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/branch-manager-requests"]}),x({title:"Final Approval Granted",description:"Service request has been given final approval."})},onError:S=>{x({title:"Approval Failed",description:S.message||"Failed to grant final approval.",variant:"destructive"})}}),b=Se({mutationFn:async S=>(await ie("PATCH",`/api/service-requests/${S}/escalate-to-admin`,{})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/branch-manager-requests"]}),x({title:"Escalated to Admin",description:"Service request has been escalated to admin for review."})},onError:S=>{x({title:"Escalation Failed",description:S.message||"Failed to escalate to admin.",variant:"destructive"})}}),N=p.filter(S=>{const A=S.srNumber.toLowerCase().includes(t.toLowerCase())||S.serviceType.toLowerCase().includes(t.toLowerCase())||S.userId.toString().includes(t),k=s==="all"||S.status===s,D=a==="all"||S.serviceType===a;return A&&k&&D}),w={escalated:N.filter(S=>S.status==="escalated"),pending_final_approval:N.filter(S=>S.status==="approved"&&!S.approvedAt),final_approved:N.filter(S=>S.status==="final_approved"),admin_escalated:N.filter(S=>S.status==="admin_escalated"),all:N},C=S=>{o(S),m(S.status),d(!0)},P=()=>{!l||!u||v.mutate({id:l.id,status:u,notes:h})};return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Branch Manager - Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Final review and approval of escalated service requests"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by SR number, service, or user ID...",value:t,onChange:S=>r(S.target.value),className:"pl-10 w-full sm:w-80"})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"Service Type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Services"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"}),e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"recycling",children:"Recycling"})]})]}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{className:"w-full sm:w-32",children:e.jsx(be,{placeholder:"Status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"escalated",children:"Escalated"}),e.jsx(T,{value:"approved",children:"Pending Final Approval"}),e.jsx(T,{value:"final_approved",children:"Final Approved"}),e.jsx(T,{value:"admin_escalated",children:"Admin Escalated"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(An,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Escalated"}),e.jsx("p",{className:"text-2xl font-bold",children:w.escalated.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Pending Final"}),e.jsx("p",{className:"text-2xl font-bold",children:w.pending_final_approval.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pl,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Final Approved"}),e.jsx("p",{className:"text-2xl font-bold",children:w.final_approved.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ai,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Admin Escalated"}),e.jsx("p",{className:"text-2xl font-bold",children:w.admin_escalated.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:w.all.length})]})]})})})]}),e.jsxs(nr,{defaultValue:"escalated",className:"space-y-4",children:[e.jsxs(sr,{children:[e.jsxs(Ae,{value:"escalated",children:["Escalated (",w.escalated.length,")"]}),e.jsxs(Ae,{value:"pending_final_approval",children:["Pending Final (",w.pending_final_approval.length,")"]}),e.jsxs(Ae,{value:"final_approved",children:["Final Approved (",w.final_approved.length,")"]}),e.jsxs(Ae,{value:"admin_escalated",children:["Admin Escalated (",w.admin_escalated.length,")"]}),e.jsxs(Ae,{value:"all",children:["All Requests (",w.all.length,")"]})]}),e.jsx(Ve,{value:"escalated",className:"space-y-4",children:w.escalated.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(An,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No escalated requests requiring your attention"})]})}):w.escalated.map(S=>e.jsx(jh,{request:S,onUpdateStatus:C,onFinalApproval:f.mutate,onEscalateToAdmin:b.mutate,showFinalApprovalActions:!0},S.id))}),e.jsx(Ve,{value:"pending_final_approval",className:"space-y-4",children:w.pending_final_approval.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No requests pending final approval"})]})}):w.pending_final_approval.map(S=>e.jsx(jh,{request:S,onUpdateStatus:C,onFinalApproval:f.mutate,onEscalateToAdmin:b.mutate,showFinalApprovalActions:!0},S.id))}),e.jsx(Ve,{value:"final_approved",className:"space-y-4",children:w.final_approved.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Pl,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No final approved requests"})]})}):w.final_approved.map(S=>e.jsx(jh,{request:S,onUpdateStatus:C,onFinalApproval:f.mutate,onEscalateToAdmin:b.mutate,showFinalApprovalActions:!1},S.id))}),e.jsx(Ve,{value:"admin_escalated",className:"space-y-4",children:w.admin_escalated.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Ai,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No requests escalated to admin"})]})}):w.admin_escalated.map(S=>e.jsx(jh,{request:S,onUpdateStatus:C,onFinalApproval:f.mutate,onEscalateToAdmin:b.mutate,showFinalApprovalActions:!1},S.id))}),e.jsx(Ve,{value:"all",className:"space-y-4",children:w.all.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(rr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No service requests in your branch"})]})}):w.all.map(S=>e.jsx(jh,{request:S,onUpdateStatus:C,onFinalApproval:f.mutate,onEscalateToAdmin:b.mutate,showFinalApprovalActions:S.status==="escalated"||S.status==="approved"&&!S.approvedAt},S.id))})]}),e.jsx(Tt,{open:c,onOpenChange:d,children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Update Service Request Status"}),e.jsxs(Xt,{children:["Update the status and add notes for service request ",l==null?void 0:l.srNumber]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(je,{value:u,onValueChange:m,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"final_approved",children:"Final Approved"}),e.jsx(T,{value:"admin_escalated",children:"Escalate to Admin"}),e.jsx(T,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),e.jsx(at,{placeholder:"Add notes about this status update...",value:h,onChange:S=>g(S.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(_,{onClick:P,disabled:v.isPending,children:v.isPending?"Updating...":"Update Status"})]})]})]})})]})},jh=({request:t,onUpdateStatus:r,onFinalApproval:s,onEscalateToAdmin:n,showFinalApprovalActions:a})=>{const i=c=>{switch(c){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},l=c=>{switch(c.toLowerCase()){case"escalated":return"bg-red-100 text-red-800";case"approved":return"bg-purple-100 text-purple-800";case"final_approved":return"bg-green-100 text-green-800";case"admin_escalated":return"bg-orange-100 text-orange-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},o=t.serviceData?JSON.parse(t.serviceData):{};return e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:i(t.serviceType)}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.srNumber}),e.jsxs(he,{className:"capitalize",children:[t.serviceType," Service Request  User ID: ",t.userId]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(ae,{className:l(t.status),children:t.status.replace("_"," ").toUpperCase()}),e.jsxs("div",{className:"flex space-x-1",children:[t.pincodeAgentId&&e.jsxs(ae,{variant:"outline",className:"text-xs",children:["Agent: ",t.pincodeAgentId]}),t.talukManagerId&&e.jsxs(ae,{variant:"outline",className:"text-xs",children:["Manager: ",t.talukManagerId]})]})]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["",Number(t.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:vt(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.paymentMethod||"Razorpay"})]})]}),t.serviceType==="taxi"&&o.pickup&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Trip Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",o.pickup,"  To: ",o.dropoff]}),o.distance&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distance: ",o.distance," km"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Updated: ",vt(new Date(t.updatedAt),"MMM dd, HH:mm")]}),e.jsxs("div",{className:"flex space-x-2",children:[a&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{variant:"default",size:"sm",onClick:()=>s(t.id),children:[e.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Final Approval"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>n(t.id),children:[e.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Escalate to Admin"]})]}),e.jsxs(_,{variant:"outline",size:"sm",children:[e.jsx(gr,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>r(t),children:[e.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Update Status"]})]})]})]})]})},PFe=()=>{const[t,r]=j.useState(""),[s,n]=j.useState("all"),[a,i]=j.useState("all"),{toast:l}=Ue(),{data:o=[],isLoading:c,refetch:d}=fe({queryKey:["/api/service-requests/provider-requests"]}),u=Se({mutationFn:async({id:x,status:p,notes:y})=>(await ie("PATCH",`/api/service-requests/${x}/provider-update`,{status:p,notes:y})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/service-requests/provider-requests"]}),l({title:"Status Updated",description:"Service request status has been updated successfully."})},onError:x=>{l({title:"Update Failed",description:x.message||"Failed to update service request status.",variant:"destructive"})}}),m=o.filter(x=>{const p=x.srNumber.toLowerCase().includes(t.toLowerCase())||x.serviceType.toLowerCase().includes(t.toLowerCase()),y=s==="all"||x.status===s,v=a==="all"||x.serviceType===a;return p&&y&&v}),h={assigned:m.filter(x=>x.status==="assigned"),active:m.filter(x=>["in_progress"].includes(x.status)),completed:m.filter(x=>["completed"].includes(x.status)),all:m},g=x=>{const p=x.status;let y="";p==="assigned"?y="in_progress":p==="in_progress"&&(y="completed"),y&&u.mutate({id:x.id,status:y,notes:"Status updated by service provider"})};return c?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Service Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage service requests assigned to you"})]}),e.jsxs("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search by request number or service...",value:t,onChange:x=>r(x.target.value),className:"pl-10 w-full sm:w-64"})]}),e.jsxs(je,{value:a,onValueChange:i,children:[e.jsx(ge,{className:"w-full sm:w-40",children:e.jsx(be,{placeholder:"Service Type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Services"}),e.jsx(T,{value:"taxi",children:"Taxi"}),e.jsx(T,{value:"delivery",children:"Delivery"}),e.jsx(T,{value:"rental",children:"Rental"}),e.jsx(T,{value:"grocery",children:"Grocery"}),e.jsx(T,{value:"recharge",children:"Recharge"}),e.jsx(T,{value:"recycling",children:"Recycling"})]})]}),e.jsxs(je,{value:s,onValueChange:n,children:[e.jsx(ge,{className:"w-full sm:w-32",children:e.jsx(be,{placeholder:"Status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"assigned",children:"Assigned"}),e.jsx(T,{value:"in_progress",children:"In Progress"}),e.jsx(T,{value:"completed",children:"Completed"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(lr,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Assigned"}),e.jsx("p",{className:"text-2xl font-bold",children:h.assigned.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yt,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold",children:h.active.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:h.completed.length})]})]})})}),e.jsx(O,{children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Total Earnings"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",m.reduce((x,p)=>x+Number(p.amount),0).toLocaleString()]})]})]})})})]}),e.jsxs(nr,{defaultValue:"assigned",className:"space-y-4",children:[e.jsxs(sr,{children:[e.jsxs(Ae,{value:"assigned",children:["Assigned (",h.assigned.length,")"]}),e.jsxs(Ae,{value:"active",children:["In Progress (",h.active.length,")"]}),e.jsxs(Ae,{value:"completed",children:["Completed (",h.completed.length,")"]}),e.jsxs(Ae,{value:"all",children:["All (",h.all.length,")"]})]}),e.jsx(Ve,{value:"assigned",className:"space-y-4",children:h.assigned.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(lr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No assigned service requests"})]})}):h.assigned.map(x=>e.jsx(eg,{request:x,onUpdateStatus:g,isUpdating:u.isPending},x.id))}),e.jsx(Ve,{value:"active",className:"space-y-4",children:h.active.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(yt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active service requests"})]})}):h.active.map(x=>e.jsx(eg,{request:x,onUpdateStatus:g,isUpdating:u.isPending},x.id))}),e.jsx(Ve,{value:"completed",className:"space-y-4",children:h.completed.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No completed service requests"})]})}):h.completed.map(x=>e.jsx(eg,{request:x,onUpdateStatus:g,isUpdating:u.isPending},x.id))}),e.jsx(Ve,{value:"all",className:"space-y-4",children:h.all.length===0?e.jsx(O,{children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(tn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No service requests found"})]})}):h.all.map(x=>e.jsx(eg,{request:x,onUpdateStatus:g,isUpdating:u.isPending},x.id))})]})]})},eg=({request:t,onUpdateStatus:r,isUpdating:s})=>{const n=d=>{switch(d){case"taxi":return e.jsx(Et,{className:"h-5 w-5"});case"delivery":return e.jsx(ft,{className:"h-5 w-5"});case"rental":return e.jsx(Os,{className:"h-5 w-5"});case"grocery":return e.jsx(_r,{className:"h-5 w-5"});case"recharge":return e.jsx(oa,{className:"h-5 w-5"});case"recycling":return e.jsx(zn,{className:"h-5 w-5"});default:return e.jsx(Et,{className:"h-5 w-5"})}},a=d=>{switch(d.toLowerCase()){case"new":return"bg-blue-100 text-blue-800";case"assigned":return"bg-purple-100 text-purple-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},i=d=>{switch(d.toLowerCase()){case"pending":return"bg-orange-100 text-orange-800";case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=t.serviceData?JSON.parse(t.serviceData):{},c=(()=>{switch(t.status){case"assigned":return{text:"Start Service",action:()=>r(t)};case"in_progress":return{text:"Mark Complete",action:()=>r(t)};default:return null}})();return e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:n(t.serviceType)}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:t.srNumber}),e.jsxs(he,{className:"capitalize",children:[t.serviceType," Service Request"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(ae,{className:a(t.status),children:t.status.replace("_"," ").toUpperCase()}),e.jsxs(ae,{className:i(t.paymentStatus),children:["Payment: ",t.paymentStatus]})]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(en,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["",Number(t.amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:vt(new Date(t.createdAt),"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:t.paymentMethod||"Razorpay"})]})]}),t.serviceType==="taxi"&&l.pickup&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Trip Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",l.pickup,"  To: ",l.dropoff]}),l.distance&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Distance: ",l.distance," km"]})]}),t.serviceType==="delivery"&&l.pickupAddress&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Delivery Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["From: ",l.pickupAddress,"  To: ",l.deliveryAddress]}),l.packageDetails&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Package: ",l.packageDetails]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Updated: ",vt(new Date(t.updatedAt),"MMM dd, HH:mm")]}),c&&e.jsx(_,{onClick:c.action,disabled:s,size:"sm",children:s?"Updating...":c.text})]})]})]})},kFe=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function lM(){const[t,r]=j.useState({district:"",taluk:"",pincode:""}),[s,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState({pickupLocation:"",dropoffLocation:"",scheduledDateTime:"",estimatedDistance:"",specialInstructions:""}),{toast:c}=Ue(),{data:d=[],isLoading:u}=fe({queryKey:["/api/taxi/vehicles",t.district,t.taluk,t.pincode],queryFn:()=>{const N=new URLSearchParams;return t.district&&N.append("district",t.district),t.taluk&&N.append("taluk",t.taluk),t.pincode&&N.append("pincode",t.pincode),fetch(`/api/taxi/vehicles?${N.toString()}`).then(w=>w.json())},enabled:!!t.district}),{data:m=[],isLoading:h}=fe({queryKey:["/api/taxi/my-bookings"]}),g=Se({mutationFn:async N=>{const C=await(await ie("POST","/api/taxi/bookings",N)).json(),P={serviceType:"taxi",amount:N.totalAmount,paymentMethod:"razorpay",serviceData:{pickup:N.pickupLocation,dropoff:N.dropoffLocation,vehicleType:a==null?void 0:a.vehicleType,scheduledDateTime:N.scheduledDateTime,estimatedDistance:N.estimatedDistance,passengerCount:N.passengerCount,specialInstructions:N.specialInstructions,vehicleId:N.vehicleId,bookingId:C.id}},A=await(await ie("POST","/api/service-requests",P)).json();return{booking:C,serviceRequest:A}},onSuccess:N=>{pe.invalidateQueries({queryKey:["/api/taxi/my-bookings"]}),pe.invalidateQueries({queryKey:["/api/service-requests/my-requests"]}),n(!1),x(),c({title:"Success",description:`Taxi booking created successfully! Service request ${N.serviceRequest.srNumber} has been generated.`})},onError:()=>{c({title:"Error",description:"Failed to create taxi booking",variant:"destructive"})}}),x=()=>{o({pickupLocation:"",dropoffLocation:"",scheduledDateTime:"",estimatedDistance:"",specialInstructions:""}),i(null)},p=()=>{if(!t.district){c({title:"Validation Error",description:"Please select a district to search for vehicles",variant:"destructive"});return}},y=N=>{i(N),n(!0)},v=()=>{if(!a)return 0;const N=parseFloat(l.estimatedDistance)||0;return a.baseFarePerKm*N},f=N=>{if(N.preventDefault(),!a){c({title:"Error",description:"Vehicle must be selected",variant:"destructive"});return}if(!l.pickupLocation||!l.dropoffLocation||!l.scheduledDateTime){c({title:"Validation Error",description:"Pickup location, drop-off location, and scheduled time are required",variant:"destructive"});return}const w=parseFloat(l.estimatedDistance)||0,C=v(),P={vehicleId:a.id,providerId:a.providerId,pickupLocation:l.pickupLocation,dropoffLocation:l.dropoffLocation,scheduledDateTime:l.scheduledDateTime,estimatedDistance:w,estimatedFare:C,specialInstructions:l.specialInstructions,bookingType:"scheduled",pickupPincode:t.pincode||"600001",dropoffPincode:"600002",totalAmount:C,passengerCount:1};g.mutate(P)},b=d.filter(N=>N.adminApproved&&N.status==="available");return u?e.jsx("div",{className:"container mx-auto p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-4",children:"Loading taxi services..."})]})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Taxi Booking Service"}),e.jsx("p",{className:"text-muted-foreground",children:"Book reliable taxi services in your area"})]}),e.jsxs(O,{className:"mb-8",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Select Your Location"}),e.jsx(he,{children:"Choose your pickup area to find available vehicles"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"District"}),e.jsxs("select",{value:t.district,onChange:N=>r({...t,district:N.target.value,taluk:"",pincode:""}),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select District"}),kFe.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Taluk"}),e.jsx($,{value:t.taluk,onChange:N=>r({...t,taluk:N.target.value}),placeholder:"Enter taluk"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Pincode"}),e.jsx($,{value:t.pincode,onChange:N=>r({...t,pincode:N.target.value}),placeholder:"Enter pincode"})]})]}),t.district&&e.jsx("div",{className:"mt-4",children:e.jsx(_,{onClick:p,className:"w-full md:w-auto",children:"Search Vehicles"})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Available Vehicles"}),t.district?e.jsx("p",{className:"text-muted-foreground mb-4",children:b.length>0?`Found ${b.length} vehicle(s) in ${t.district}${t.taluk?`, ${t.taluk}`:""}${t.pincode?` - ${t.pincode}`:""}`:`No vehicles available in ${t.district}${t.taluk?`, ${t.taluk}`:""}${t.pincode?` - ${t.pincode}`:""}`}):e.jsx("p",{className:"text-muted-foreground mb-4",children:"Please select a district to view available vehicles"}),t.district?b.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-12",children:[e.jsx(Et,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Vehicles Available"}),e.jsx("p",{className:"text-muted-foreground",children:"No taxi vehicles found in the selected area. Try a different location."})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(N=>e.jsxs(O,{className:"relative",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),N.brand," ",N.model]}),e.jsx(ae,{variant:"default",children:"Available"})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:N.vehicleType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[N.seatingCapacity," seater"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:N.fuelType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:N.district})]})]}),N.acAvailable&&e.jsx(ae,{variant:"outline",className:"w-fit",children:"AC Available"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Vehicle: ",N.vehicleNumber]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fare per km"}),e.jsxs("p",{className:"text-lg font-semibold",children:["",N.baseFarePerKm]})]}),e.jsxs(_,{onClick:()=>y(N),className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),"Book Now"]})]})]})]},N.id))}):e.jsx(O,{children:e.jsxs(E,{className:"text-center py-12",children:[e.jsx(gt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Select Your Location"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose your district to see available taxi vehicles in your area"})]})})]}),e.jsx(Tt,{open:s,onOpenChange:n,children:e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Book Taxi"}),e.jsx(Xt,{children:a&&`Book ${a.brand} ${a.model} (${a.vehicleNumber})`})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Pickup Location *"}),e.jsx(at,{value:l.pickupLocation,onChange:N=>o({...l,pickupLocation:N.target.value}),placeholder:"Enter detailed pickup address",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Drop-off Location *"}),e.jsx(at,{value:l.dropoffLocation,onChange:N=>o({...l,dropoffLocation:N.target.value}),placeholder:"Enter detailed drop-off address",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Scheduled Time *"}),e.jsx($,{type:"datetime-local",value:l.scheduledDateTime,onChange:N=>o({...l,scheduledDateTime:N.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Estimated Distance (km)"}),e.jsx($,{type:"number",step:"0.1",value:l.estimatedDistance,onChange:N=>o({...l,estimatedDistance:N.target.value}),placeholder:"Enter approximate distance"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{children:"Special Instructions"}),e.jsx(at,{value:l.specialInstructions,onChange:N=>o({...l,specialInstructions:N.target.value}),placeholder:"Any special instructions"})]}),l.estimatedDistance&&a&&e.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Estimated Fare:"}),e.jsxs("span",{className:"text-lg font-bold",children:["",v().toFixed(2)]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[l.estimatedDistance," km  ",a.baseFarePerKm,"/km"]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:g.isPending,children:g.isPending?"Creating...":"Create Booking"})]})]})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"My Bookings"}),h?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-primary border-t-transparent rounded-full mx-auto"})}):m.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(yt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No bookings yet. Book your first taxi above!"})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:m.map(N=>e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"text-lg",children:["Booking #",N.id]}),e.jsx(ae,{variant:N.status==="confirmed"?"default":N.status==="completed"?"secondary":N.status==="cancelled"?"destructive":"outline",children:N.status})]})}),e.jsxs(E,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-green-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Pickup"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.pickupLocation})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-red-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Drop-off"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.dropoffLocation})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:new Date(N.scheduledDateTime).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.estimatedDistance," km"]}),e.jsxs("span",{className:"font-semibold",children:["",N.estimatedFare]})]})]})]},N.id))})]})]})}function AFe(){const{toast:t}=Ue(),[r,s]=j.useState(!1),[n,a]=j.useState(null),[i,l]=j.useState({vehicleNumber:"",vehicleType:"",brand:"",model:"",year:new Date().getFullYear(),color:"",seatingCapacity:4,fuelType:"",acAvailable:!1,gpsEnabled:!1,insuranceValid:!1,pucValid:!1,rcNumber:"",insuranceNumber:"",driverLicenseNumber:"",baseFarePerKm:10,baseWaitingCharge:50,nightChargeMultiplier:1.2,tollChargesApplicable:!0,availableAreas:"",currentLocation:"",district:"",pincode:"",imageUrl:""}),{data:o=[],isLoading:c}=fe({queryKey:["/api/taxi/my-vehicles"],queryFn:async()=>(await ie("GET","/api/taxi/my-vehicles")).json()}),d=Se({mutationFn:async f=>(await ie("POST","/api/taxi/vehicles",f)).json(),onSuccess:()=>{t({title:"Vehicle Added",description:"Your taxi vehicle has been added successfully!"}),s(!1),a(null),m(),pe.invalidateQueries({queryKey:["/api/taxi/my-vehicles"]})},onError:f=>{t({title:"Failed to Add Vehicle",description:f.message||"Failed to add vehicle",variant:"destructive"})}}),u=Se({mutationFn:async({id:f,data:b})=>(await ie("PUT",`/api/taxi/vehicles/${f}`,b)).json(),onSuccess:()=>{t({title:"Vehicle Updated",description:"Your taxi vehicle has been updated successfully!"}),s(!1),a(null),m(),pe.invalidateQueries({queryKey:["/api/taxi/my-vehicles"]})},onError:f=>{t({title:"Failed to Update Vehicle",description:f.message||"Failed to update vehicle",variant:"destructive"})}}),m=()=>{l({vehicleNumber:"",vehicleType:"",brand:"",model:"",year:new Date().getFullYear(),color:"",seatingCapacity:4,fuelType:"",acAvailable:!1,gpsEnabled:!1,insuranceValid:!1,pucValid:!1,rcNumber:"",insuranceNumber:"",driverLicenseNumber:"",baseFarePerKm:10,baseWaitingCharge:50,nightChargeMultiplier:1.2,tollChargesApplicable:!0,availableAreas:"",currentLocation:"",district:"",pincode:"",imageUrl:""})},h=()=>{s(!0),a(null),m()},g=f=>{a(f),l({vehicleNumber:f.vehicleNumber,vehicleType:f.vehicleType,brand:f.brand,model:f.model,year:f.year,color:f.color,seatingCapacity:f.seatingCapacity,fuelType:f.fuelType,acAvailable:f.acAvailable,gpsEnabled:f.gpsEnabled,insuranceValid:f.insuranceValid,pucValid:f.pucValid,rcNumber:f.rcNumber,insuranceNumber:f.insuranceNumber,driverLicenseNumber:f.driverLicenseNumber,baseFarePerKm:f.baseFarePerKm,baseWaitingCharge:f.baseWaitingCharge,nightChargeMultiplier:f.nightChargeMultiplier,tollChargesApplicable:f.tollChargesApplicable,availableAreas:f.availableAreas,currentLocation:f.currentLocation,district:f.district,pincode:f.pincode,imageUrl:f.imageUrl||""}),s(!0)},x=f=>{f.preventDefault(),n?u.mutate({id:n.id,data:i}):d.mutate(i)},p=["Two Wheeler","Three Wheeler","4 Seaters","6 Seaters","12 Seaters"],y=["Petrol","Diesel","CNG","Electric","Hybrid"],v=["Chennai","Coimbatore","Madurai","Salem","Tiruchirappalli","Tiruppur"];return c?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"text-center",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Loading Your Vehicles..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"My Taxi Vehicles"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your taxi fleet and vehicle details"})]}),e.jsxs(_,{onClick:h,className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),"Add Vehicle"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(f=>e.jsxs(O,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Y,{className:"text-lg",children:[f.brand," ",f.model]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.vehicleNumber})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(ae,{variant:f.adminApproved?"default":"secondary",children:f.adminApproved?"Approved":"Pending"}),e.jsx(ae,{variant:"outline",children:f.vehicleType})]})]})}),e.jsxs(E,{className:"space-y-4",children:[f.imageUrl&&e.jsx("img",{src:f.imageUrl,alt:`${f.brand} ${f.model}`,className:"w-full h-48 object-cover rounded-md"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[f.seatingCapacity," seats"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:f.fuelType})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:f.district})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:f.year})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.acAvailable&&e.jsx(ae,{variant:"outline",children:"AC"}),f.gpsEnabled&&e.jsx(ae,{variant:"outline",children:"GPS"}),f.insuranceValid&&e.jsx(ae,{variant:"outline",children:"Insured"}),f.pucValid&&e.jsx(ae,{variant:"outline",children:"PUC Valid"})]}),e.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Base Fare:"}),e.jsxs("span",{className:"text-primary font-bold",children:["",f.baseFarePerKm,"/km"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Waiting:"}),e.jsxs("span",{className:"text-primary font-bold",children:["",f.baseWaitingCharge,"/hr"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[f.status==="available"?e.jsx(Mt,{className:"h-4 w-4 text-green-500"}):e.jsx(Fr,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-sm capitalize",children:f.status})]}),e.jsx(_,{size:"sm",variant:"outline",onClick:()=>g(f),children:e.jsx(Zr,{className:"h-4 w-4"})})]})]})]},f.id))}),o.length===0&&e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:"No vehicles added yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by adding your first taxi vehicle to begin accepting bookings."}),e.jsx(_,{onClick:h,children:"Add Your First Vehicle"})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(O,{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(G,{children:e.jsx(Y,{children:n?"Edit Vehicle":"Add New Vehicle"})}),e.jsx(E,{children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"vehicleNumber",children:"Vehicle Number *"}),e.jsx($,{id:"vehicleNumber",value:i.vehicleNumber,onChange:f=>l(b=>({...b,vehicleNumber:f.target.value})),placeholder:"TN 01 AB 1234",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"vehicleType",children:"Vehicle Type *"}),e.jsxs(je,{value:i.vehicleType,onValueChange:f=>{let b=4;f==="Two Wheeler"?b=1:f==="Three Wheeler"?b=3:f==="4 Seaters"?b=4:f==="6 Seaters"?b=6:f==="12 Seaters"&&(b=12),l(N=>({...N,vehicleType:f,seatingCapacity:b}))},children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select vehicle type"})}),e.jsx(ve,{children:p.map(f=>e.jsx(T,{value:f,children:f},f))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"brand",children:"Brand *"}),e.jsx($,{id:"brand",value:i.brand,onChange:f=>l(b=>({...b,brand:f.target.value})),placeholder:"Toyota, Maruti, etc.",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"model",children:"Model *"}),e.jsx($,{id:"model",value:i.model,onChange:f=>l(b=>({...b,model:f.target.value})),placeholder:"Innova, Swift, etc.",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"year",children:"Year *"}),e.jsx($,{id:"year",type:"number",value:i.year,onChange:f=>l(b=>({...b,year:parseInt(f.target.value)||new Date().getFullYear()})),min:"2000",max:new Date().getFullYear(),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"color",children:"Color *"}),e.jsx($,{id:"color",value:i.color,onChange:f=>l(b=>({...b,color:f.target.value})),placeholder:"White, Black, etc.",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"seatingCapacity",children:"Seating Capacity *"}),e.jsxs(je,{value:i.seatingCapacity.toString(),onValueChange:f=>l(b=>({...b,seatingCapacity:parseInt(f)})),children:[e.jsx(ge,{children:e.jsx(be,{})}),e.jsx(ve,{children:[2,3,4,5,6,7,8,9,10,12,15,17].map(f=>e.jsxs(T,{value:f.toString(),children:[f," seats"]},f))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"fuelType",children:"Fuel Type *"}),e.jsxs(je,{value:i.fuelType,onValueChange:f=>l(b=>({...b,fuelType:f})),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select fuel type"})}),e.jsx(ve,{children:y.map(f=>e.jsx(T,{value:f,children:f},f))})]})]})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Vehicle Features"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"acAvailable",checked:i.acAvailable,onCheckedChange:f=>l(b=>({...b,acAvailable:f}))}),e.jsx(re,{htmlFor:"acAvailable",children:"AC Available"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"gpsEnabled",checked:i.gpsEnabled,onCheckedChange:f=>l(b=>({...b,gpsEnabled:f}))}),e.jsx(re,{htmlFor:"gpsEnabled",children:"GPS Enabled"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"insuranceValid",checked:i.insuranceValid,onCheckedChange:f=>l(b=>({...b,insuranceValid:f}))}),e.jsx(re,{htmlFor:"insuranceValid",children:"Insurance Valid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"pucValid",checked:i.pucValid,onCheckedChange:f=>l(b=>({...b,pucValid:f}))}),e.jsx(re,{htmlFor:"pucValid",children:"PUC Valid"})]})]})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Legal Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"rcNumber",children:"RC Number *"}),e.jsx($,{id:"rcNumber",value:i.rcNumber,onChange:f=>l(b=>({...b,rcNumber:f.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"insuranceNumber",children:"Insurance Number *"}),e.jsx($,{id:"insuranceNumber",value:i.insuranceNumber,onChange:f=>l(b=>({...b,insuranceNumber:f.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"driverLicenseNumber",children:"Driver License Number *"}),e.jsx($,{id:"driverLicenseNumber",value:i.driverLicenseNumber,onChange:f=>l(b=>({...b,driverLicenseNumber:f.target.value})),required:!0})]})]})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"baseFarePerKm",children:"Base Fare (/km) *"}),e.jsx($,{id:"baseFarePerKm",type:"number",step:"0.01",value:i.baseFarePerKm,onChange:f=>l(b=>({...b,baseFarePerKm:parseFloat(f.target.value)||0})),min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"baseWaitingCharge",children:"Waiting Charge (/hr) *"}),e.jsx($,{id:"baseWaitingCharge",type:"number",step:"0.01",value:i.baseWaitingCharge,onChange:f=>l(b=>({...b,baseWaitingCharge:parseFloat(f.target.value)||0})),min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"nightChargeMultiplier",children:"Night Charge Multiplier"}),e.jsx($,{id:"nightChargeMultiplier",type:"number",step:"0.1",value:i.nightChargeMultiplier,onChange:f=>l(b=>({...b,nightChargeMultiplier:parseFloat(f.target.value)||1})),min:"1",max:"3"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"tollChargesApplicable",checked:i.tollChargesApplicable,onCheckedChange:f=>l(b=>({...b,tollChargesApplicable:f}))}),e.jsx(re,{htmlFor:"tollChargesApplicable",children:"Toll charges applicable"})]})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Location Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"district",children:"District *"}),e.jsxs(je,{value:i.district,onValueChange:f=>l(b=>({...b,district:f})),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})}),e.jsx(ve,{children:v.map(f=>e.jsx(T,{value:f,children:f},f))})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pincode",children:"Pincode *"}),e.jsx($,{id:"pincode",value:i.pincode,onChange:f=>l(b=>({...b,pincode:f.target.value})),placeholder:"600001",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"currentLocation",children:"Current Location"}),e.jsx($,{id:"currentLocation",value:i.currentLocation,onChange:f=>l(b=>({...b,currentLocation:f.target.value})),placeholder:"T. Nagar, Chennai"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"imageUrl",children:"Vehicle Image URL"}),e.jsx($,{id:"imageUrl",type:"url",value:i.imageUrl,onChange:f=>l(b=>({...b,imageUrl:f.target.value})),placeholder:"https://example.com/vehicle-image.jpg"})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"availableAreas",children:"Available Areas"}),e.jsx(at,{id:"availableAreas",value:i.availableAreas,onChange:f=>l(b=>({...b,availableAreas:f.target.value})),placeholder:"List areas where your vehicle is available for service..."})]})]}),e.jsx(Tr,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>{s(!1),a(null),m()},children:"Cancel"}),e.jsx(_,{type:"submit",disabled:d.isPending||u.isPending,children:d.isPending||u.isPending?n?"Updating...":"Adding...":n?"Update Vehicle":"Add Vehicle"})]})]})})]})})]})}const _Fe=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function TFe(){const[t,r]=j.useState({district:"",taluk:"",pincode:""}),[s,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState(null),[c,d]=j.useState({pickupAddress:"",deliveryAddress:"",packageDetails:"",weight:"",distance:"",scheduledTime:"",notes:""}),{toast:u}=Ue(),{data:m=[],isLoading:h}=fe({queryKey:["/api/delivery/categories"]}),{data:g=[],isLoading:x}=fe({queryKey:["/api/delivery/agents",t.district,t.taluk,t.pincode],queryFn:()=>{const S=new URLSearchParams;return t.district&&S.append("district",t.district),t.taluk&&S.append("taluk",t.taluk),t.pincode&&S.append("pincode",t.pincode),fetch(`/api/delivery/agents?${S.toString()}`).then(A=>A.json())},enabled:!!t.district}),{data:p=[],isLoading:y}=fe({queryKey:["/api/delivery/orders"]}),v=Se({mutationFn:async S=>{const k=await(await ie("POST","/api/delivery/orders",S)).json(),D={serviceType:"delivery",amount:S.totalAmount,paymentMethod:"razorpay",serviceData:{pickup:S.pickupAddress,dropoff:S.deliveryAddress,packageDetails:S.packageDetails,weight:S.weight,distance:S.distance,scheduledTime:S.scheduledTime,notes:S.notes,agentId:S.agentId,categoryId:S.categoryId,orderId:k.id}},z=await(await ie("POST","/api/service-requests",D)).json();return{order:k,serviceRequest:z}},onSuccess:S=>{pe.invalidateQueries({queryKey:["/api/delivery/orders"]}),pe.invalidateQueries({queryKey:["/api/service-requests/my-requests"]}),n(!1),f(),u({title:"Success",description:`Delivery order created successfully! Service request ${S.serviceRequest.srNumber} has been generated.`})},onError:()=>{u({title:"Error",description:"Failed to create delivery order",variant:"destructive"})}}),f=()=>{d({pickupAddress:"",deliveryAddress:"",packageDetails:"",weight:"",distance:"",scheduledTime:"",notes:""}),i(null),o(null)},b=()=>{if(!t.district){u({title:"Validation Error",description:"Please select a district to search for agents",variant:"destructive"});return}},N=(S,A)=>{i(S),o(A),n(!0)},w=()=>{if(!l)return 0;const S=parseFloat(c.weight)||0,A=parseFloat(c.distance)||0;return l.basePrice+l.pricePerKm*A+l.pricePerKg*S},C=S=>{if(S.preventDefault(),!a||!l){u({title:"Error",description:"Agent and category must be selected",variant:"destructive"});return}if(!c.pickupAddress||!c.deliveryAddress||!c.packageDetails){u({title:"Validation Error",description:"Pickup address, delivery address, and package details are required",variant:"destructive"});return}const A={agentId:a.id,categoryId:l.id,pickupAddress:c.pickupAddress,deliveryAddress:c.deliveryAddress,packageDetails:c.packageDetails,weight:parseFloat(c.weight)||0,distance:parseFloat(c.distance)||0,baseAmount:l.basePrice,totalAmount:w(),scheduledTime:c.scheduledTime,notes:c.notes};v.mutate(A)},P=S=>{switch(S){case"delivered":return"default";case"in_transit":return"default";case"picked_up":return"secondary";case"assigned":return"secondary";case"cancelled":return"destructive";default:return"outline"}};return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Find delivery agents in your area and place orders"})]}),e.jsxs(O,{className:"mb-6",children:[e.jsxs(G,{children:[e.jsxs(Y,{className:"flex items-center",children:[e.jsx(gt,{className:"mr-2 h-5 w-5"}),"Search by Location"]}),e.jsx(he,{children:"Enter your location to find available delivery agents"})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"district",children:"District *"}),e.jsxs("select",{id:"district",value:t.district,onChange:S=>r({...t,district:S.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx("option",{value:"",children:"Select District"}),_Fe.map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"taluk",children:"Taluk"}),e.jsx($,{id:"taluk",value:t.taluk,onChange:S=>r({...t,taluk:S.target.value}),placeholder:"Enter taluk (optional)"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pincode",children:"Pincode"}),e.jsx($,{id:"pincode",value:t.pincode,onChange:S=>r({...t,pincode:S.target.value}),placeholder:"6-digit pincode (optional)"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(_,{onClick:b,className:"w-full",children:"Search Agents"})})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx(ft,{className:"mr-2 h-5 w-5"}),"Delivery Categories"]})}),e.jsx(E,{children:h?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"})}):m.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No categories available"}):e.jsx("div",{className:"space-y-3",children:m.map(S=>e.jsx(_,{variant:(l==null?void 0:l.id)===S.id?"default":"outline",className:"w-full h-auto p-4 text-left justify-start",onClick:()=>o(S),children:e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-medium text-left",children:S.name}),e.jsx("p",{className:"text-sm text-muted-foreground text-left",children:S.description}),e.jsxs("div",{className:"mt-2 space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Price:"}),e.jsxs("span",{className:"font-medium",children:["",S.basePrice]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Per KM:"}),e.jsxs("span",{className:"font-medium",children:["",S.pricePerKm]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Per KG:"}),e.jsxs("span",{className:"font-medium",children:["",S.pricePerKg]})]})]})]})},S.id))})})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx($n,{className:"mr-2 h-5 w-5"}),"Available Delivery Agents",t.district&&e.jsxs("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["in ",t.district]})]})}),e.jsx(E,{children:t.district?x?e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"})}):g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($n,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No agents available"}),e.jsxs("p",{className:"text-muted-foreground",children:["No delivery agents found in ",t.district,t.taluk&&`, ${t.taluk}`,t.pincode&&` - ${t.pincode}`]})]}):e.jsx("div",{className:"space-y-4",children:g.map(S=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:S.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Uo,{className:"h-3 w-3 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:S.phone})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tf,{className:"h-4 w-4 text-yellow-400 mr-1"}),e.jsxs("span",{className:"font-medium",children:[S.rating,"/5"]})]}),e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsx(ae,{variant:S.isOnline?"default":"secondary",className:"text-xs",children:S.isOnline?"Online":"Offline"}),e.jsx(ae,{variant:S.isAvailable?"default":"destructive",className:"text-xs",children:S.isAvailable?"Available":"Busy"})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(yt,{className:"h-3 w-3 mr-1"}),"Available: ",S.availableStartTime," - ",S.availableEndTime]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(gt,{className:"h-3 w-3 mr-1"}),S.taluk,", ",S.district," - ",S.pincode]})]}),e.jsx("div",{className:"flex gap-2",children:m.map(A=>e.jsxs(_,{size:"sm",variant:"outline",onClick:()=>N(S,A),disabled:!S.isOnline||!S.isAvailable,children:[e.jsx(Ft,{className:"h-3 w-3 mr-1"}),A.name]},A.id))})]},S.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gt,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select your location"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose a district to see available delivery agents"})]})})]})})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(G,{children:e.jsx(Y,{children:"My Delivery Orders"})}),e.jsx(E,{children:y?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto"})}):p.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ft,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Your delivery orders will appear here"})]}):e.jsx("div",{className:"space-y-4",children:p.map(S=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:["Order #",S.orderNumber]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:S.packageDetails}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[e.jsxs("div",{children:["From: ",S.pickupAddress]}),e.jsxs("div",{children:["To: ",S.deliveryAddress]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(ae,{variant:P(S.status),children:S.status.replace("_"," ").toUpperCase()}),e.jsxs("div",{className:"text-sm font-medium mt-1",children:["",S.totalAmount]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(S.createdAt).toLocaleDateString()})]})]})},S.id))})})]}),e.jsx(Tt,{open:s,onOpenChange:n,children:e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Create Delivery Order"}),e.jsx(Xt,{children:a&&l&&e.jsxs(e.Fragment,{children:["Agent: ",a.name," | Category: ",l.name]})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pickupAddress",children:"Pickup Address *"}),e.jsx(at,{id:"pickupAddress",value:c.pickupAddress,onChange:S=>d({...c,pickupAddress:S.target.value}),placeholder:"Complete pickup address",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"deliveryAddress",children:"Delivery Address *"}),e.jsx(at,{id:"deliveryAddress",value:c.deliveryAddress,onChange:S=>d({...c,deliveryAddress:S.target.value}),placeholder:"Complete delivery address",rows:3,required:!0})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"packageDetails",children:"Package Details *"}),e.jsx(at,{id:"packageDetails",value:c.packageDetails,onChange:S=>d({...c,packageDetails:S.target.value}),placeholder:"Describe what you're sending",rows:2,required:!0})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"weight",children:"Weight (KG)"}),e.jsx($,{id:"weight",type:"number",step:"0.1",value:c.weight,onChange:S=>d({...c,weight:S.target.value}),placeholder:"Package weight"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"distance",children:"Distance (KM)"}),e.jsx($,{id:"distance",type:"number",step:"0.1",value:c.distance,onChange:S=>d({...c,distance:S.target.value}),placeholder:"Delivery distance"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"scheduledTime",children:"Scheduled Time"}),e.jsx($,{id:"scheduledTime",type:"datetime-local",value:c.scheduledTime,onChange:S=>d({...c,scheduledTime:S.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(at,{id:"notes",value:c.notes,onChange:S=>d({...c,notes:S.target.value}),placeholder:"Any special instructions",rows:2})]}),l&&e.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Price:"}),e.jsxs("span",{children:["",l.basePrice]})]}),c.distance&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Distance (",c.distance," KM @ ",l.pricePerKm,"/KM):"]}),e.jsxs("span",{children:["",(parseFloat(c.distance)*l.pricePerKm).toFixed(2)]})]}),c.weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Weight (",c.weight," KG @ ",l.pricePerKg,"/KG):"]}),e.jsxs("span",{children:["",(parseFloat(c.weight)*l.pricePerKg).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["",w().toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:v.isPending,children:v.isPending?"Creating...":"Create Order"})]})]})]})})]})}const oM=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function OFe(){var P,S,A;const[t,r]=j.useState({name:"",phone:"",email:"",address:"",district:"",taluk:"",pincode:"",categoryId:"",availableStartTime:"09:00",availableEndTime:"18:00",operationAreas:{districts:[],taluks:[],pincodes:[]}}),[s,n]=j.useState(""),[a,i]=j.useState(""),[l,o]=j.useState(""),{toast:c}=Ue(),{data:d,isLoading:u}=fe({queryKey:["/api/provider/delivery/status"]}),{data:m}=fe({queryKey:["/api/delivery/categories"]}),h=Se({mutationFn:async k=>(await ie("POST","/api/provider/delivery/register",k)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/provider/delivery/status"]}),c({title:"Success",description:"Delivery agent registration submitted successfully"})},onError:k=>{c({title:"Error",description:k.message||"Failed to register as delivery agent",variant:"destructive"})}}),g=Se({mutationFn:async k=>(await ie("PUT","/api/provider/delivery/status",k)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/provider/delivery/status"]}),c({title:"Success",description:"Status updated successfully"})},onError:()=>{c({title:"Error",description:"Failed to update status",variant:"destructive"})}}),x=k=>{if(k.preventDefault(),!t.name||!t.phone||!t.district||!t.categoryId){c({title:"Validation Error",description:"Name, phone, district, and delivery category are required",variant:"destructive"});return}if(t.operationAreas.districts.length===0){c({title:"Validation Error",description:"Please add at least one operation district",variant:"destructive"});return}h.mutate(t)},p=()=>{s&&!t.operationAreas.districts.includes(s)&&(r({...t,operationAreas:{...t.operationAreas,districts:[...t.operationAreas.districts,s]}}),n(""))},y=k=>{r({...t,operationAreas:{...t.operationAreas,districts:t.operationAreas.districts.filter(D=>D!==k)}})},v=()=>{a&&!t.operationAreas.taluks.includes(a)&&(r({...t,operationAreas:{...t.operationAreas,taluks:[...t.operationAreas.taluks,a]}}),i(""))},f=k=>{r({...t,operationAreas:{...t.operationAreas,taluks:t.operationAreas.taluks.filter(D=>D!==k)}})},b=()=>{l&&!t.operationAreas.pincodes.includes(l)&&(r({...t,operationAreas:{...t.operationAreas,pincodes:[...t.operationAreas.pincodes,l]}}),o(""))},N=k=>{r({...t,operationAreas:{...t.operationAreas,pincodes:t.operationAreas.pincodes.filter(D=>D!==k)}})},w=()=>{d&&d.adminApproved&&g.mutate({isOnline:!d.isOnline,isAvailable:d.isAvailable})},C=()=>{d&&d.adminApproved&&g.mutate({isOnline:d.isOnline,isAvailable:!d.isAvailable})};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):d?e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Agent Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your delivery agent profile and status"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx($n,{className:"mr-2 h-5 w-5"}),"Registration Status"]})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Verification Status:"}),e.jsxs(ae,{variant:d.verificationStatus==="verified"?"default":d.verificationStatus==="rejected"?"destructive":"secondary",children:[d.verificationStatus==="verified"&&e.jsx(Mt,{className:"mr-1 h-3 w-3"}),d.verificationStatus==="rejected"&&e.jsx(lr,{className:"mr-1 h-3 w-3"}),d.verificationStatus==="pending"&&e.jsx(yt,{className:"mr-1 h-3 w-3"}),d.verificationStatus.charAt(0).toUpperCase()+d.verificationStatus.slice(1)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Admin Approved:"}),e.jsx(ae,{variant:d.adminApproved?"default":"secondary",children:d.adminApproved?"Yes":"No"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Agent Name:"}),e.jsx("span",{className:"font-medium",children:d.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Rating:"}),e.jsxs("span",{className:"font-medium",children:[" ",d.rating,"/5"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Registered:"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(d.createdAt).toLocaleDateString()})]})]})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsxs(Y,{className:"flex items-center",children:[e.jsx(yt,{className:"mr-2 h-5 w-5"}),"Availability Status"]}),e.jsx(he,{children:d.adminApproved?"Control your online and availability status":"Status controls will be enabled after admin approval"})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Online Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Shows if you're currently active"})]}),e.jsx(_,{variant:d.isOnline?"default":"outline",size:"sm",onClick:w,disabled:!d.adminApproved||g.isPending,children:d.isOnline?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Available for Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ready to accept new delivery orders"})]}),e.jsx(_,{variant:d.isAvailable?"default":"outline",size:"sm",onClick:C,disabled:!d.adminApproved||g.isPending,children:d.isAvailable?"Available":"Busy"})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Available Hours: ",d.availableStartTime," - ",d.availableEndTime]})})]})})]})]}),e.jsxs(O,{className:"mt-6",children:[e.jsx(G,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx(gt,{className:"mr-2 h-5 w-5"}),"Operation Areas"]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[((P=d.operationAreas)==null?void 0:P.districts)&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Districts"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.operationAreas.districts.map((k,D)=>e.jsx(ae,{variant:"outline",children:k},D))})]}),((S=d.operationAreas)==null?void 0:S.taluks)&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Taluks"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.operationAreas.taluks.map((k,D)=>e.jsx(ae,{variant:"outline",children:k},D))})]}),((A=d.operationAreas)==null?void 0:A.pincodes)&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Pincodes"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:d.operationAreas.pincodes.map((k,D)=>e.jsx(ae,{variant:"outline",children:k},D))})]})]})})]})]}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Register as Delivery Agent"}),e.jsx("p",{className:"text-muted-foreground",children:"Join our delivery network and start earning"})]}),e.jsxs(O,{className:"max-w-4xl mx-auto",children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Delivery Agent Registration"}),e.jsx(he,{children:"Please fill in your details to register as a delivery agent. Your application will be reviewed by our admin team."})]}),e.jsx(E,{children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Basic Information"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Full Name *"}),e.jsx($,{id:"name",value:t.name,onChange:k=>r({...t,name:k.target.value}),placeholder:"Your full name",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"phone",children:"Phone Number *"}),e.jsx($,{id:"phone",value:t.phone,onChange:k=>r({...t,phone:k.target.value}),placeholder:"Your mobile number",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"email",children:"Email (Optional)"}),e.jsx($,{id:"email",type:"email",value:t.email,onChange:k=>r({...t,email:k.target.value}),placeholder:"your.email@example.com"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"categoryId",children:"Delivery Vehicle Type *"}),e.jsxs("select",{id:"categoryId",value:t.categoryId,onChange:k=>r({...t,categoryId:k.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",required:!0,children:[e.jsx("option",{value:"",children:"Select Vehicle Type"}),m==null?void 0:m.map(k=>e.jsx("option",{value:k.id,children:k.name},k.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Address Information"}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"address",children:"Full Address"}),e.jsx(at,{id:"address",value:t.address,onChange:k=>r({...t,address:k.target.value}),placeholder:"Your complete address",rows:3})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"district",children:"District *"}),e.jsxs("select",{id:"district",value:t.district,onChange:k=>r({...t,district:k.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",required:!0,children:[e.jsx("option",{value:"",children:"Select District"}),oM.map(k=>e.jsx("option",{value:k,children:k},k))]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"taluk",children:"Taluk"}),e.jsx($,{id:"taluk",value:t.taluk,onChange:k=>r({...t,taluk:k.target.value}),placeholder:"Your taluk"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pincode",children:"Pincode"}),e.jsx($,{id:"pincode",value:t.pincode,onChange:k=>r({...t,pincode:k.target.value}),placeholder:"6-digit pincode"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Availability Hours"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"startTime",children:"Available From"}),e.jsx($,{id:"startTime",type:"time",value:t.availableStartTime,onChange:k=>r({...t,availableStartTime:k.target.value})})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"endTime",children:"Available Until"}),e.jsx($,{id:"endTime",type:"time",value:t.availableEndTime,onChange:k=>r({...t,availableEndTime:k.target.value})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Operation Areas"}),e.jsxs("div",{children:[e.jsx(re,{children:"Service Districts *"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("select",{value:s,onChange:k=>n(k.target.value),className:"flex h-10 flex-1 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx("option",{value:"",children:"Select District"}),oM.map(k=>e.jsx("option",{value:k,children:k},k))]}),e.jsx(_,{type:"button",onClick:p,size:"sm",children:e.jsx(Ft,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.operationAreas.districts.map((k,D)=>e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:[k,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>y(k)})]},D))})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Service Taluks (Optional)"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx($,{value:a,onChange:k=>i(k.target.value),placeholder:"Enter taluk name",className:"flex-1"}),e.jsx(_,{type:"button",onClick:v,size:"sm",children:e.jsx(Ft,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.operationAreas.taluks.map((k,D)=>e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:[k,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>f(k)})]},D))})]}),e.jsxs("div",{children:[e.jsx(re,{children:"Service Pincodes (Optional)"}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx($,{value:l,onChange:k=>o(k.target.value),placeholder:"Enter 6-digit pincode",className:"flex-1"}),e.jsx(_,{type:"button",onClick:b,size:"sm",children:e.jsx(Ft,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.operationAreas.pincodes.map((k,D)=>e.jsxs(ae,{variant:"secondary",className:"flex items-center gap-1",children:[k,e.jsx(Es,{className:"h-3 w-3 cursor-pointer",onClick:()=>N(k)})]},D))})]})]}),e.jsx("div",{className:"pt-6 border-t",children:e.jsx(_,{type:"submit",className:"w-full",disabled:h.isPending,children:h.isPending?"Submitting...":"Register as Delivery Agent"})})]})})]})]})}function EFe(){const[t,r]=j.useState(!1),[s,n]=j.useState(null),[a,i]=j.useState(!1),[l,o]=j.useState({name:"",description:"",basePrice:"",pricePerKm:"",pricePerKg:"",isActive:!0}),[c,d]=j.useState({name:"",description:"",basePrice:"",pricePerKm:"",pricePerKg:""}),{toast:u}=Ue(),{data:m=[],isLoading:h}=fe({queryKey:["/api/delivery-categories"]}),g=Se({mutationFn:async C=>await(await ie("POST","/api/delivery-categories",C)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/delivery-categories"]}),r(!1),y(),u({title:"Success",description:"Delivery category created successfully"})},onError:C=>{u({title:"Error",description:C.message,variant:"destructive"})}}),x=Se({mutationFn:async({id:C,data:P})=>await(await ie("PUT",`/api/delivery-categories/${C}`,P)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/delivery-categories"]}),n(null),y(),u({title:"Success",description:"Delivery category updated successfully"})},onError:C=>{u({title:"Error",description:C.message,variant:"destructive"})}}),p=Se({mutationFn:async C=>{await ie("DELETE",`/api/delivery-categories/${C}`)},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/delivery-categories"]}),u({title:"Success",description:"Delivery category deleted successfully"})},onError:C=>{u({title:"Error",description:C.message,variant:"destructive"})}}),y=()=>{o({name:"",description:"",basePrice:"",pricePerKm:"",pricePerKg:"",isActive:!0}),d({name:"",description:"",basePrice:"",pricePerKm:"",pricePerKg:""})},v=()=>{const C={name:"",description:"",basePrice:"",pricePerKm:"",pricePerKg:""};return l.name.trim()||(C.name="Category name is required"),l.description.trim()||(C.description="Description is required"),(!l.basePrice||parseFloat(l.basePrice)<0)&&(C.basePrice="Valid base price is required"),(!l.pricePerKm||parseFloat(l.pricePerKm)<0)&&(C.pricePerKm="Valid price per KM is required"),(!l.pricePerKg||parseFloat(l.pricePerKg)<0)&&(C.pricePerKg="Valid price per KG is required"),d(C),Object.values(C).every(P=>P==="")},f=C=>{if(C.preventDefault(),!v())return;const P={name:l.name.trim(),description:l.description.trim(),basePrice:parseFloat(l.basePrice),pricePerKm:parseFloat(l.pricePerKm),pricePerKg:parseFloat(l.pricePerKg),isActive:l.isActive};s?x.mutate({id:s.id,data:P}):g.mutate(P)},b=C=>{n(C),o({name:C.name,description:C.description,basePrice:C.basePrice.toString(),pricePerKm:C.pricePerKm.toString(),pricePerKg:C.pricePerKg.toString(),isActive:C.isActive}),d({name:"",description:"",basePrice:"",pricePerKm:"",pricePerKg:""})},N=()=>{n(null),y()};if(h)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const w=a?m:m.filter(C=>C.isActive);return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Delivery Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage delivery service categories and pricing"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"show-inactive",checked:a,onCheckedChange:i}),e.jsxs(re,{htmlFor:"show-inactive",className:"text-sm",children:[a?e.jsx(gr,{className:"h-4 w-4"}):e.jsx(Vw,{className:"h-4 w-4"}),"Show Inactive"]})]}),e.jsxs(Tt,{open:t,onOpenChange:r,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Category"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(Pt,{children:[e.jsxs(kt,{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"h-5 w-5"}),"Create Delivery Category"]}),e.jsx(Xt,{children:"Add a new delivery category with pricing structure and service details."})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs(re,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(ft,{className:"h-4 w-4"}),"Category Name *"]}),e.jsx($,{id:"name",value:l.name,onChange:C=>o({...l,name:C.target.value}),placeholder:"e.g., Express Delivery, Same Day Delivery",className:c.name?"border-red-500":""}),c.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description *"}),e.jsx(at,{id:"description",value:l.description,onChange:C=>o({...l,description:C.target.value}),placeholder:"Detailed description of the delivery service category",rows:3,className:c.description?"border-red-500":""}),c.description&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.description})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs(re,{htmlFor:"basePrice",className:"flex items-center gap-2",children:[e.jsx(en,{className:"h-4 w-4"}),"Base Price () *"]}),e.jsx($,{id:"basePrice",type:"number",step:"0.01",min:"0",value:l.basePrice,onChange:C=>o({...l,basePrice:C.target.value}),placeholder:"0.00",className:c.basePrice?"border-red-500":""}),c.basePrice&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.basePrice})]}),e.jsxs("div",{children:[e.jsxs(re,{htmlFor:"pricePerKm",className:"flex items-center gap-2",children:[e.jsx($n,{className:"h-4 w-4"}),"Price per KM () *"]}),e.jsx($,{id:"pricePerKm",type:"number",step:"0.01",min:"0",value:l.pricePerKm,onChange:C=>o({...l,pricePerKm:C.target.value}),placeholder:"0.00",className:c.pricePerKm?"border-red-500":""}),c.pricePerKm&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.pricePerKm})]}),e.jsxs("div",{children:[e.jsxs(re,{htmlFor:"pricePerKg",className:"flex items-center gap-2",children:[e.jsx(ft,{className:"h-4 w-4"}),"Price per KG () *"]}),e.jsx($,{id:"pricePerKg",type:"number",step:"0.01",min:"0",value:l.pricePerKg,onChange:C=>o({...l,pricePerKg:C.target.value}),placeholder:"0.00",className:c.pricePerKg?"border-red-500":""}),c.pricePerKg&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:c.pricePerKg})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"isActive",checked:l.isActive,onCheckedChange:C=>o({...l,isActive:C})}),e.jsx(re,{htmlFor:"isActive",children:"Active Category"})]}),e.jsxs(xa,{children:[e.jsx(Ai,{className:"h-4 w-4"}),e.jsx(ga,{children:"The final delivery price will be calculated as: Base Price + (Distance  Price per KM) + (Weight  Price per KG)"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:g.isPending,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:g.isPending?"Creating...":"Create Category"})]})]})]})]})]})]}),w.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(ft,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No delivery categories"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first delivery category to get started."}),e.jsxs(_,{onClick:()=>r(!0),children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Category"]})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.map(C=>e.jsxs(O,{children:[e.jsx(G,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg",children:C.name}),e.jsx(he,{children:C.description})]}),e.jsx(ae,{variant:C.isActive?"default":"secondary",children:C.isActive?"Active":"Inactive"})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Base Price:"}),e.jsxs("span",{className:"font-medium",children:["",C.basePrice]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Per KM:"}),e.jsxs("span",{className:"font-medium",children:["",C.pricePerKm]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Per KG:"}),e.jsxs("span",{className:"font-medium",children:["",C.pricePerKg]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>b(C),className:"flex-1",children:[e.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p.mutate(C.id),disabled:p.isPending,className:"text-destructive hover:text-destructive",children:e.jsx(Ir,{className:"h-4 w-4"})})]})]})]},C.id))}),e.jsx(Tt,{open:!!s,onOpenChange:C=>!C&&N(),children:e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Edit Delivery Category"}),e.jsx(Xt,{children:"Update the delivery category information and pricing."})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-name",children:"Category Name"}),e.jsx($,{id:"edit-name",value:l.name,onChange:C=>o({...l,name:C.target.value}),placeholder:"e.g., Express Delivery",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-description",children:"Description"}),e.jsx($,{id:"edit-description",value:l.description,onChange:C=>o({...l,description:C.target.value}),placeholder:"Brief description of the category"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-basePrice",children:"Base Price ()"}),e.jsx($,{id:"edit-basePrice",type:"number",step:"0.01",value:l.basePrice,onChange:C=>o({...l,basePrice:C.target.value}),placeholder:"Base charge amount",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-pricePerKm",children:"Price per KM ()"}),e.jsx($,{id:"edit-pricePerKm",type:"number",step:"0.01",value:l.pricePerKm,onChange:C=>o({...l,pricePerKm:C.target.value}),placeholder:"Additional charge per kilometer"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-pricePerKg",children:"Price per KG ()"}),e.jsx($,{id:"edit-pricePerKg",type:"number",step:"0.01",value:l.pricePerKg,onChange:C=>o({...l,pricePerKg:C.target.value}),placeholder:"Additional charge per kilogram"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:N,children:"Cancel"}),e.jsx(_,{type:"submit",disabled:x.isPending,children:x.isPending?"Updating...":"Update Category"})]})]})]})})]})}function DFe(){const{toast:t}=Ue(),{data:r=[],isLoading:s}=fe({queryKey:["/api/admin/delivery/agents/pending"]}),n=Se({mutationFn:async({id:l,approved:o})=>(await ie("PUT",`/api/admin/delivery/agents/${l}/approve`,{approved:o})).json(),onSuccess:(l,{approved:o})=>{pe.invalidateQueries({queryKey:["/api/admin/delivery/agents/pending"]}),t({title:"Success",description:`Delivery agent ${o?"approved":"rejected"} successfully`})},onError:()=>{t({title:"Error",description:"Failed to update agent status",variant:"destructive"})}}),a=l=>{n.mutate({id:l,approved:!0})},i=l=>{n.mutate({id:l,approved:!1})};return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Delivery Agent Approvals"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve delivery agent registrations"})]}),r.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(yt,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No pending approvals"}),e.jsx("p",{className:"text-muted-foreground",children:"All delivery agent registrations have been reviewed."})]})}):e.jsx("div",{className:"grid gap-6",children:r.map(l=>{var o,c,d;return e.jsxs(O,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:l.name}),e.jsxs(he,{children:["Applied on ",new Date(l.createdAt).toLocaleDateString()]})]}),e.jsxs(ae,{variant:"secondary",children:[e.jsx(yt,{className:"mr-1 h-3 w-3"}),"Pending Review"]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[e.jsx(tn,{className:"mr-2 h-4 w-4"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Uo,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:l.phone})]}),l.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(lj,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:l.email})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(gt,{className:"mr-2 h-4 w-4 text-muted-foreground mt-1"}),e.jsxs("div",{children:[e.jsx("p",{children:l.address}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.taluk,", ",l.district," - ",l.pincode]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Service Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Available Hours:"}),e.jsxs("p",{children:[l.availableStartTime," - ",l.availableEndTime]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Operation Areas:"}),e.jsxs("div",{className:"mt-1",children:[((o=l.operationAreas)==null?void 0:o.districts)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Districts:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.operationAreas.districts.map((u,m)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:u},m))})]}),((c=l.operationAreas)==null?void 0:c.taluks)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs font-medium",children:"Taluks:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.operationAreas.taluks.map((u,m)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:u},m))})]}),((d=l.operationAreas)==null?void 0:d.pincodes)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium",children:"Pincodes:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:l.operationAreas.pincodes.map((u,m)=>e.jsx(ae,{variant:"outline",className:"text-xs",children:u},m))})]})]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[e.jsxs(_,{onClick:()=>a(l.id),disabled:n.isPending,className:"flex-1",children:[e.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Approve Agent"]}),e.jsxs(_,{variant:"outline",onClick:()=>i(l.id),disabled:n.isPending,className:"flex-1 text-destructive hover:text-destructive",children:[e.jsx(Es,{className:"mr-2 h-4 w-4"}),"Reject"]})]})]})]},l.id)})})]})}function MFe(){const{toast:t}=Ue(),[r,s]=j.useState(""),[n,a]=j.useState(""),[i,l]=j.useState(""),{data:o=[],isLoading:c}=fe({queryKey:["/api/admin/delivery/agents"]}),{data:d=[],isLoading:u}=fe({queryKey:["/api/admin/delivery/agents/approved"]}),{data:m=[],isLoading:h}=fe({queryKey:["/api/admin/delivery/agents/pending"]}),{data:g=[]}=fe({queryKey:["/api/delivery-categories"]}),x=Se({mutationFn:async({id:N,isOnline:w,isAvailable:C})=>(await ie("PUT",`/api/admin/delivery/agents/${N}/status`,{isOnline:w,isAvailable:C})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/delivery/agents"]}),pe.invalidateQueries({queryKey:["/api/admin/delivery/agents/approved"]}),t({title:"Success",description:"Agent status updated successfully"})},onError:()=>{t({title:"Error",description:"Failed to update agent status",variant:"destructive"})}}),p=Se({mutationFn:async({id:N,approved:w})=>(await ie("PUT",`/api/admin/delivery/agents/${N}/approve`,{approved:w})).json(),onSuccess:(N,{approved:w})=>{pe.invalidateQueries({queryKey:["/api/admin/delivery/agents"]}),pe.invalidateQueries({queryKey:["/api/admin/delivery/agents/approved"]}),pe.invalidateQueries({queryKey:["/api/admin/delivery/agents/pending"]}),t({title:"Success",description:`Delivery agent ${w?"approved":"rejected"} successfully`})},onError:()=>{t({title:"Error",description:"Failed to update agent approval status",variant:"destructive"})}}),y=N=>{const w=g.find(C=>C.id===N);return(w==null?void 0:w.name)||"Unknown"},v=N=>N.filter(w=>{const C=w.name.toLowerCase().includes(r.toLowerCase())||w.mobileNumber.includes(r)||w.district.toLowerCase().includes(r.toLowerCase()),P=!n||w.district===n,S=!i||i==="online"&&w.isOnline||i==="offline"&&!w.isOnline||i==="available"&&w.isAvailable||i==="unavailable"&&!w.isAvailable;return C&&P&&S}),f=[...new Set(o.map(N=>N.district))],b=(N,w=!1)=>e.jsxs(O,{className:"mb-4",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Y,{className:"text-xl",children:N.name}),e.jsxs(he,{children:[y(N.categoryId),"  ",N.district,", ",N.taluk]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{variant:N.adminApproved?"default":"secondary",children:N.adminApproved?"Approved":"Pending"}),e.jsx(ae,{variant:N.isOnline?"default":"secondary",children:N.isOnline?"Online":"Offline"}),e.jsx(ae,{variant:N.isAvailable?"default":"secondary",children:N.isAvailable?"Available":"Busy"})]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[e.jsx(tn,{className:"mr-2 h-4 w-4"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Uo,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:N.mobileNumber})]}),N.email&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(lj,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:N.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(gt,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:N.address})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[e.jsx($n,{className:"mr-2 h-4 w-4"}),"Service Details"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(yt,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[N.availableStartTime," - ",N.availableEndTime]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tf,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[N.rating,"/5 (",N.totalDeliveries," deliveries)"]})]})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2 justify-end",children:[w&&!N.adminApproved&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{onClick:()=>p.mutate({id:N.id,approved:!0}),disabled:p.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Mt,{className:"mr-2 h-4 w-4"}),"Approve"]}),e.jsxs(_,{onClick:()=>p.mutate({id:N.id,approved:!1}),disabled:p.isPending,variant:"destructive",children:[e.jsx(Fr,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),N.adminApproved&&e.jsx(_,{onClick:()=>x.mutate({id:N.id,isOnline:!N.isOnline,isAvailable:N.isAvailable}),disabled:x.isPending,variant:N.isOnline?"outline":"default",children:N.isOnline?"Set Offline":"Set Online"})]})]})]},N.id);return c||u||h?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"Delivery Agents Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and monitor delivery agent registrations"})]})}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search agents...",value:r,onChange:N=>s(N.target.value),className:"pl-10"})]}),e.jsxs(je,{value:n,onValueChange:a,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Filter by district"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"",children:"All Districts"}),f.map(N=>e.jsx(T,{value:N,children:N},N))]})]}),e.jsxs(je,{value:i,onValueChange:l,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Filter by status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"",children:"All Status"}),e.jsx(T,{value:"online",children:"Online"}),e.jsx(T,{value:"offline",children:"Offline"}),e.jsx(T,{value:"available",children:"Available"}),e.jsx(T,{value:"unavailable",children:"Unavailable"})]})]}),e.jsxs(_,{onClick:()=>{s(""),a(""),l("")},variant:"outline",children:[e.jsx(sd,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]}),e.jsxs(nr,{defaultValue:"all",className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-3",children:[e.jsxs(Ae,{value:"all",children:["All Agents (",o.length,")"]}),e.jsxs(Ae,{value:"approved",children:["Approved (",d.length,")"]}),e.jsxs(Ae,{value:"pending",children:["Pending (",m.length,")"]})]}),e.jsx(Ve,{value:"all",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:v(o).length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(gr,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No agents found"}),e.jsx("p",{className:"text-muted-foreground",children:"No delivery agents match your current filters."})]})}):v(o).map(N=>b(N))})}),e.jsx(Ve,{value:"approved",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:v(d).length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Mt,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No approved agents"}),e.jsx("p",{className:"text-muted-foreground",children:"No approved delivery agents match your current filters."})]})}):v(d).map(N=>b(N))})}),e.jsx(Ve,{value:"pending",className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:v(m).length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(yt,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No pending approvals"}),e.jsx("p",{className:"text-muted-foreground",children:"All delivery agent registrations have been reviewed."})]})}):v(m).map(N=>b(N,!0))})})]})]})}function cM(){const{toast:t}=Ue(),[r,s]=j.useState("pending"),{data:n,isLoading:a}=fe({queryKey:["/api/admin/taxi/vehicles/pending"],enabled:r==="pending"}),{data:i,isLoading:l}=fe({queryKey:["/api/admin/taxi/vehicles/approved"],enabled:r==="approved"}),o=Se({mutationFn:async({vehicleId:u,approved:m})=>(await ie("PUT",`/api/admin/taxi/vehicles/${u}/approve`,{approved:m})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/taxi/vehicles/pending"]}),pe.invalidateQueries({queryKey:["/api/admin/taxi/vehicles/approved"]}),t({title:"Vehicle Updated",description:"Vehicle approval status updated successfully"})},onError:u=>{t({title:"Error",description:u.message,variant:"destructive"})}}),c=(u,m)=>{o.mutate({vehicleId:u,approved:m})},d=({vehicle:u})=>e.jsxs(O,{className:"mb-4",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),u.vehicleNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.brand," ",u.model," (",u.year,")"]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsx(ae,{variant:u.adminApproved?"default":"secondary",children:u.adminApproved?"Approved":"Pending"}),e.jsx(ae,{variant:u.isActive?"default":"secondary",children:u.isActive?"Active":"Inactive"})]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Type: ",u.vehicleType]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Seats: ",u.seatingCapacity]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Fuel: ",u.fuelType]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["District: ",u.district]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pl,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Insurance: ",u.insuranceValid?"Valid":"Invalid"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Registered: ",new Date(u.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Vehicle Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Color: ",u.color]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["RC Number: ",u.rcNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Insurance: ",u.insuranceNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["License: ",u.driverLicenseNumber]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Pricing & Features"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Base Fare: ",u.baseFarePerKm,"/km"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Waiting Charge: ",u.baseWaitingCharge]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["AC Available: ",u.acAvailable?"Yes":"No"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["GPS Enabled: ",u.gpsEnabled?"Yes":"No"]})]})]}),u.availableAreas&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Available Areas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.availableAreas})]}),!u.adminApproved&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>c(u.id,!0),disabled:o.isPending,className:"flex-1",children:[e.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>c(u.id,!1),disabled:o.isPending,className:"flex-1",children:[e.jsx(Fr,{className:"h-4 w-4 mr-2"}),"Reject"]})]})]})]});return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Taxi Vehicle Approvals"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve taxi vehicle registrations"})]}),e.jsxs(nr,{value:r,onValueChange:s,className:"w-full",children:[e.jsxs(sr,{className:"grid w-full grid-cols-2",children:[e.jsxs(Ae,{value:"pending",children:["Pending Approvals (",(n==null?void 0:n.length)||0,")"]}),e.jsxs(Ae,{value:"approved",children:["Approved Vehicles (",(i==null?void 0:i.length)||0,")"]})]}),e.jsx(Ve,{value:"pending",className:"mt-6",children:a?e.jsx("div",{className:"text-center py-8",children:"Loading pending vehicles..."}):(n==null?void 0:n.length)===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No pending vehicle approvals"})]})}):e.jsx("div",{className:"space-y-4",children:n==null?void 0:n.map(u=>e.jsx(d,{vehicle:u},u.id))})}),e.jsx(Ve,{value:"approved",className:"mt-6",children:l?e.jsx("div",{className:"text-center py-8",children:"Loading approved vehicles..."}):(i==null?void 0:i.length)===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No approved vehicles yet"})]})}):e.jsx("div",{className:"space-y-4",children:i==null?void 0:i.map(u=>e.jsx(d,{vehicle:u},u.id))})})]})]})}function IFe(){const{toast:t}=Ue(),[r,s]=j.useState(""),[n,a]=j.useState("all"),[i,l]=j.useState("all"),{data:o,isLoading:c}=fe({queryKey:["/api/admin/taxi/vehicles"]}),d=Se({mutationFn:async({vehicleId:v,isActive:f})=>(await ie("PUT",`/api/admin/taxi/vehicles/${v}/status`,{isActive:f})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/taxi/vehicles"]}),t({title:"Status Updated",description:"Vehicle status updated successfully"})},onError:v=>{t({title:"Error",description:v.message,variant:"destructive"})}}),u=Se({mutationFn:async({vehicleId:v,approved:f})=>(await ie("PUT",`/api/admin/taxi/vehicles/${v}/approve`,{approved:f})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/taxi/vehicles"]}),t({title:"Approval Updated",description:"Vehicle approval status updated successfully"})},onError:v=>{t({title:"Error",description:v.message,variant:"destructive"})}}),m=(v,f)=>{d.mutate({vehicleId:v,isActive:!f})},h=(v,f)=>{u.mutate({vehicleId:v,approved:!f})},g=o==null?void 0:o.filter(v=>{const f=v.vehicleNumber.toLowerCase().includes(r.toLowerCase())||v.brand.toLowerCase().includes(r.toLowerCase())||v.model.toLowerCase().includes(r.toLowerCase())||v.district.toLowerCase().includes(r.toLowerCase()),b=n==="all"||n==="active"&&v.isActive||n==="inactive"&&!v.isActive||n==="approved"&&v.adminApproved||n==="pending"&&!v.adminApproved,N=i==="all"||v.vehicleType===i;return f&&b&&N}),x=v=>v.adminApproved?v.isActive?"default":"secondary":"destructive",p=v=>v.adminApproved?v.isActive?"Active":"Inactive":"Not Approved",y=({vehicle:v})=>e.jsxs(O,{className:"mb-4",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),v.vehicleNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[v.brand," ",v.model," (",v.year,")"]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.jsx(ae,{variant:x(v),children:p(v)}),e.jsx(ae,{variant:"outline",children:v.vehicleType})]})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Seats: ",v.seatingCapacity]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_o,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Fuel: ",v.fuelType]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["District: ",v.district]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pl,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Insurance: ",v.insuranceValid?"Valid":"Invalid"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Registered: ",new Date(v.createdAt).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm",children:["Fare: ",v.baseFarePerKm,"/km"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Vehicle Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Color: ",v.color]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["RC Number: ",v.rcNumber]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["License: ",v.driverLicenseNumber]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Features"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["AC Available: ",v.acAvailable?"Yes":"No"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["GPS Enabled: ",v.gpsEnabled?"Yes":"No"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["PUC Valid: ",v.pucValid?"Yes":"No"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t",children:[e.jsx(_,{variant:v.adminApproved?"destructive":"default",size:"sm",onClick:()=>h(v.id,v.adminApproved),disabled:u.isPending,children:v.adminApproved?"Revoke Approval":"Approve"}),v.adminApproved&&e.jsx(_,{variant:v.isActive?"secondary":"default",size:"sm",onClick:()=>m(v.id,v.isActive),disabled:d.isPending,children:v.isActive?e.jsxs(e.Fragment,{children:[e.jsx(fZ,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(xZ,{className:"h-4 w-4 mr-2"}),"Activate"]})})]})]})]});return e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Taxi Vehicles Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all taxi vehicle registrations and their status"})]}),e.jsxs(O,{className:"mb-6",children:[e.jsx(G,{children:e.jsx(Y,{children:"Filters"})}),e.jsx(E,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx($,{placeholder:"Search vehicles...",value:r,onChange:v=>s(v.target.value),className:"pl-10"})]}),e.jsxs(je,{value:n,onValueChange:a,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Filter by status"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"approved",children:"Approved"}),e.jsx(T,{value:"pending",children:"Pending Approval"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(je,{value:i,onValueChange:l,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Filter by vehicle type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Types"}),e.jsx(T,{value:"sedan",children:"Sedan"}),e.jsx(T,{value:"suv",children:"SUV"}),e.jsx(T,{value:"hatchback",children:"Hatchback"}),e.jsx(T,{value:"auto",children:"Auto Rickshaw"}),e.jsx(T,{value:"bike",children:"Bike"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(O,{children:e.jsxs(E,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Vehicles"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.filter(v=>v.adminApproved).length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Approved"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.filter(v=>v.isActive&&v.adminApproved).length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]})}),e.jsx(O,{children:e.jsxs(E,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-bold",children:(o==null?void 0:o.filter(v=>!v.adminApproved).length)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending"})]})})]}),c?e.jsx("div",{className:"text-center py-8",children:"Loading vehicles..."}):(g==null?void 0:g.length)===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:(o==null?void 0:o.length)===0?"No vehicles registered yet":"No vehicles match your search criteria"})]})}):e.jsx("div",{className:"space-y-4",children:g==null?void 0:g.map(v=>e.jsx(y,{vehicle:v},v.id))})]})}function dM(){const{toast:t}=Ue(),[r,s]=j.useState(!1),[n,a]=j.useState(null),[i,l]=j.useState({name:"",description:"",basePrice:"",pricePerKm:"",waitingChargePerMinute:"",maxPassengers:""}),{data:o=[],isLoading:c}=fe({queryKey:["/api/taxi/categories"]}),d=Se({mutationFn:async y=>(await ie("POST","/api/taxi-categories",y)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi/categories"]}),s(!1),h(),t({title:"Success",description:"Taxi category created successfully"})},onError:y=>{t({title:"Error",description:y.message||"Failed to create category",variant:"destructive"})}}),u=Se({mutationFn:async({id:y,...v})=>(await ie("PUT",`/api/taxi-categories/${y}`,v)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi/categories"]}),a(null),h(),t({title:"Success",description:"Taxi category updated successfully"})},onError:y=>{t({title:"Error",description:y.message||"Failed to update category",variant:"destructive"})}}),m=Se({mutationFn:async y=>{await ie("DELETE",`/api/taxi-categories/${y}`)},onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi/categories"]}),t({title:"Success",description:"Taxi category deleted successfully"})},onError:y=>{t({title:"Error",description:y.message||"Failed to delete category",variant:"destructive"})}}),h=()=>{l({name:"",description:"",basePrice:"",pricePerKm:"",waitingChargePerMinute:"",maxPassengers:""})},g=y=>{y.preventDefault();const v={name:i.name,description:i.description,basePrice:parseFloat(i.basePrice),pricePerKm:parseFloat(i.pricePerKm),waitingChargePerMinute:parseFloat(i.waitingChargePerMinute),maxPassengers:parseInt(i.maxPassengers)};n?u.mutate({...v,id:n.id}):d.mutate(v)},x=y=>{a(y),l({name:y.name,description:y.description,basePrice:y.basePrice.toString(),pricePerKm:y.pricePerKm.toString(),waitingChargePerMinute:y.waitingChargePerMinute.toString(),maxPassengers:y.maxPassengers.toString()})},p=y=>{confirm("Are you sure you want to delete this taxi category?")&&m.mutate(y)};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Taxi Categories Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage taxi service categories and pricing"})]}),e.jsxs(Tt,{open:r,onOpenChange:s,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{className:"flex items-center",children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Category"]})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Create New Taxi Category"}),e.jsx(Xt,{children:"Add a new taxi service category with pricing details"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Category Name"}),e.jsx($,{id:"name",value:i.name,onChange:y=>l({...i,name:y.target.value}),placeholder:"e.g., Two Wheeler, 4 Seaters",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",value:i.description,onChange:y=>l({...i,description:y.target.value}),placeholder:"Category description",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"basePrice",children:"Base Price ()"}),e.jsx($,{id:"basePrice",type:"number",step:"0.01",value:i.basePrice,onChange:y=>l({...i,basePrice:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pricePerKm",children:"Price per KM ()"}),e.jsx($,{id:"pricePerKm",type:"number",step:"0.01",value:i.pricePerKm,onChange:y=>l({...i,pricePerKm:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"waitingCharge",children:"Waiting Charge/Min ()"}),e.jsx($,{id:"waitingCharge",type:"number",step:"0.01",value:i.waitingChargePerMinute,onChange:y=>l({...i,waitingChargePerMinute:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"maxPassengers",children:"Max Passengers"}),e.jsx($,{id:"maxPassengers",type:"number",value:i.maxPassengers,onChange:y=>l({...i,maxPassengers:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:d.isPending,children:d.isPending?"Creating...":"Create Category"})]})]})]})]})]}),e.jsx(Tt,{open:!!n,onOpenChange:()=>a(null),children:e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:"Edit Taxi Category"}),e.jsx(Xt,{children:"Update taxi service category details and pricing"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-name",children:"Category Name"}),e.jsx($,{id:"edit-name",value:i.name,onChange:y=>l({...i,name:y.target.value}),placeholder:"e.g., Two Wheeler, 4 Seaters",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-description",children:"Description"}),e.jsx(at,{id:"edit-description",value:i.description,onChange:y=>l({...i,description:y.target.value}),placeholder:"Category description",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-basePrice",children:"Base Price ()"}),e.jsx($,{id:"edit-basePrice",type:"number",step:"0.01",value:i.basePrice,onChange:y=>l({...i,basePrice:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-pricePerKm",children:"Price per KM ()"}),e.jsx($,{id:"edit-pricePerKm",type:"number",step:"0.01",value:i.pricePerKm,onChange:y=>l({...i,pricePerKm:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-waitingCharge",children:"Waiting Charge/Min ()"}),e.jsx($,{id:"edit-waitingCharge",type:"number",step:"0.01",value:i.waitingChargePerMinute,onChange:y=>l({...i,waitingChargePerMinute:y.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"edit-maxPassengers",children:"Max Passengers"}),e.jsx($,{id:"edit-maxPassengers",type:"number",value:i.maxPassengers,onChange:y=>l({...i,maxPassengers:y.target.value}),required:!0})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>a(null),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:u.isPending,children:u.isPending?"Updating...":"Update Category"})]})]})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(y=>e.jsxs(O,{className:"relative",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(Y,{className:"flex items-center",children:[e.jsx(Et,{className:"mr-2 h-5 w-5"}),y.name]}),e.jsx(he,{className:"mt-2",children:y.description})]}),e.jsx(ae,{variant:y.isActive?"default":"secondary",children:y.isActive?"Active":"Inactive"})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Base Price:"})]}),e.jsxs("span",{className:"font-medium",children:["",y.basePrice]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(en,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Per KM:"})]}),e.jsxs("span",{className:"font-medium",children:["",y.pricePerKm]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(yt,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Waiting/Min:"})]}),e.jsxs("span",{className:"font-medium",children:["",y.waitingChargePerMinute]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(rr,{className:"h-4 w-4 mr-1 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Max Passengers:"})]}),e.jsx("span",{className:"font-medium",children:y.maxPassengers})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>x(y),className:"flex-1",children:[e.jsx(Zr,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>p(y.id),className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:e.jsx(Ir,{className:"h-4 w-4"})})]})]})]},y.id))}),o.length===0&&e.jsx(O,{className:"text-center py-8",children:e.jsxs(E,{children:[e.jsx(Et,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Taxi Categories"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start by creating your first taxi service category"}),e.jsxs(_,{onClick:()=>s(!0),children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add First Category"]})]})})]})}function RFe(){const{user:t}=dt(),[r,s]=j.useState("overview"),{data:n=[],isLoading:a}=fe({queryKey:["/api/taxi/categories"]}),{data:i=[],isLoading:l}=fe({queryKey:["/api/taxi/providers"]}),{data:o={},isLoading:c}=fe({queryKey:["/api/admin/taxi-stats"]});return!t||t.userType!=="admin"?e.jsx("div",{children:"Access denied. Admin only."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Taxi Service Administration"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage taxi categories, providers, and service settings"})]})}),e.jsxs(nr,{value:r,onValueChange:s,className:"space-y-6",children:[e.jsxs(sr,{className:"grid w-full grid-cols-4",children:[e.jsxs(Ae,{value:"overview",className:"flex items-center gap-2",children:[e.jsx(Ai,{className:"h-4 w-4"}),"Overview"]}),e.jsxs(Ae,{value:"categories",className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4"}),"Categories"]}),e.jsxs(Ae,{value:"providers",className:"flex items-center gap-2",children:[e.jsx(rr,{className:"h-4 w-4"}),"Providers"]}),e.jsxs(Ae,{value:"settings",className:"flex items-center gap-2",children:[e.jsx(Fc,{className:"h-4 w-4"}),"Settings"]})]}),e.jsxs(Ve,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Categories"}),e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.filter(d=>d.isActive).length," active"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Providers"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.filter(d=>d.isApproved).length," approved"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Online Providers"}),e.jsx(Mt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.filter(d=>d.isOnline&&d.isApproved).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for rides"})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Avg. Base Price"}),e.jsx(en,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",n.length>0?Math.round(n.reduce((d,u)=>d+u.basePrice,0)/n.length):0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all categories"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Recent Categories"}),e.jsx(he,{children:"Latest taxi categories added to the system"})]}),e.jsx(E,{children:e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["",d.basePrice," base + ",d.pricePerKm,"/km"]})]}),e.jsx(ae,{variant:d.isActive?"default":"secondary",children:d.isActive?"Active":"Inactive"})]},d.id))})})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Provider Status"}),e.jsx(he,{children:"Current status of taxi service providers"})]}),e.jsx(E,{children:e.jsx("div",{className:"space-y-3",children:i.slice(0,5).map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.vehicleType,"  ",d.totalRides||0," rides"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:d.isOnline?"default":"secondary",children:d.isOnline?"Online":"Offline"}),e.jsx(ae,{variant:d.isApproved?"default":"destructive",children:d.isApproved?"Approved":"Pending"})]})]},d.id))})})]})]})]}),e.jsxs(Ve,{value:"categories",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Taxi Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage taxi service categories and pricing structure"})]}),e.jsx(Ot,{href:"/admin/taxi-categories",children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),"Manage Categories"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading categories..."})]}):n.length===0?e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx(Et,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No categories found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first taxi category to get started"}),e.jsx(Ot,{href:"/admin/taxi-categories",children:e.jsxs(_,{children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),"Add Category"]})})]}):n.map(d=>e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{className:"text-lg",children:d.name}),e.jsx(ae,{variant:d.isActive?"default":"secondary",children:d.isActive?"Active":"Inactive"})]}),e.jsx(he,{children:d.description})]}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Base Price"}),e.jsxs("p",{className:"font-medium",children:["",d.basePrice]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Per KM"}),e.jsxs("p",{className:"font-medium",children:["",d.pricePerKm]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Waiting"}),e.jsxs("p",{className:"font-medium",children:["",d.waitingChargePerMinute,"/min"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Max Passengers"}),e.jsx("p",{className:"font-medium",children:d.maxPassengers})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3",children:[e.jsx(Ot,{href:"/admin/taxi-categories",children:e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(gr,{className:"mr-2 h-4 w-4"}),"View"]})]})]})]},d.id))})]}),e.jsxs(Ve,{value:"providers",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Taxi Providers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage taxi service providers and approvals"})]}),e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),"Add Provider"]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Provider List"}),e.jsx(he,{children:"All registered taxi service providers"})]}),e.jsx(E,{children:l?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading providers..."})]}):i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(rr,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No providers found"}),e.jsx("p",{className:"text-muted-foreground",children:"Taxi providers will appear here once they register"})]}):e.jsx("div",{className:"space-y-4",children:i.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-primary/10",children:e.jsx(Et,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.phone,"  ",d.vehicleType]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["License: ",d.licenseNumber]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"font-medium",children:["Rating: ",d.rating||0,"/5"]}),e.jsxs("p",{className:"text-muted-foreground",children:[d.totalRides||0," rides"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ae,{variant:d.isOnline?"default":"secondary",children:d.isOnline?"Online":"Offline"}),e.jsx(ae,{variant:d.isApproved?"default":"destructive",children:d.isApproved?"Approved":"Pending"})]}),e.jsx(_,{variant:"outline",size:"sm",children:e.jsx(Zr,{className:"h-4 w-4"})})]})]},d.id))})})]})]}),e.jsxs(Ve,{value:"settings",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Service Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure taxi service parameters and policies"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Pricing Settings"}),e.jsx(he,{children:"Global pricing configurations"})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Commission Rate"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:"15%"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Service Tax"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:"5%"})]})]}),e.jsxs(_,{variant:"outline",className:"w-full",children:[e.jsx(Fc,{className:"mr-2 h-4 w-4"}),"Configure Pricing"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Service Areas"}),e.jsx(he,{children:"Manage service coverage areas"})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Active Districts"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:"32"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"across Tamil Nadu"})]}),e.jsxs(_,{variant:"outline",className:"w-full",children:[e.jsx(gt,{className:"mr-2 h-4 w-4"}),"Manage Areas"]})]})]})]})]})]})]})}function FFe(){const[t,r]=j.useState("categories"),[s,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState({name:"",description:"",basePrice:"",pricePerKm:"",waitingChargePerMinute:"",maxPassengers:"",isActive:!0}),{toast:c}=Ue(),{data:d=[],isLoading:u}=fe({queryKey:["/api/taxi-categories"]}),{data:m=[],isLoading:h}=fe({queryKey:["/api/taxi/providers"]}),{data:g=[],isLoading:x}=fe({queryKey:["/api/admin/taxi/vehicles"]}),p=Se({mutationFn:async S=>await(await ie("POST","/api/taxi-categories",S)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi-categories"]}),n(!1),w(),c({title:"Success",description:"Taxi category created successfully"})},onError:S=>{c({title:"Error",description:S.message,variant:"destructive"})}}),y=Se({mutationFn:async({id:S,data:A})=>await(await ie("PUT",`/api/taxi-categories/${S}`,A)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi-categories"]}),i(null),w(),c({title:"Success",description:"Taxi category updated successfully"})}}),v=Se({mutationFn:async({id:S,isActive:A})=>await(await ie("PUT",`/api/taxi-categories/${S}`,{isActive:A})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi-categories"]}),c({title:"Success",description:"Category status updated"})}}),f=Se({mutationFn:async S=>await(await ie("PATCH",`/api/taxi/providers/${S}/approve`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi/providers"]}),c({title:"Success",description:"Provider approved successfully"})}}),b=Se({mutationFn:async S=>await(await ie("PATCH",`/api/taxi/providers/${S}/reject`)).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/taxi/providers"]}),c({title:"Success",description:"Provider rejected"})}}),N=Se({mutationFn:async S=>await(await ie("PUT",`/api/admin/taxi/vehicles/${S}/approve`,{approved:!0})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/taxi/vehicles"]}),c({title:"Success",description:"Vehicle approved successfully"})}});Se({mutationFn:async S=>await(await ie("PUT",`/api/admin/taxi/vehicles/${S}/approve`,{approved:!1})).json(),onSuccess:()=>{pe.invalidateQueries({queryKey:["/api/admin/taxi/vehicles"]}),c({title:"Success",description:"Vehicle rejected"})}});const w=()=>{o({name:"",description:"",basePrice:"",pricePerKm:"",waitingChargePerMinute:"",maxPassengers:"",isActive:!0})},C=S=>{S.preventDefault();const A={...l,basePrice:parseFloat(l.basePrice),pricePerKm:parseFloat(l.pricePerKm),waitingChargePerMinute:parseFloat(l.waitingChargePerMinute),maxPassengers:parseInt(l.maxPassengers)};a?y.mutate({id:a.id,data:A}):p.mutate(A)},P=S=>{i(S),o({name:S.name,description:S.description,basePrice:S.basePrice.toString(),pricePerKm:S.pricePerKm.toString(),waitingChargePerMinute:S.waitingChargePerMinute.toString(),maxPassengers:S.maxPassengers.toString(),isActive:S.isActive}),n(!0)};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Taxi Service Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage taxi categories, providers, and vehicle approvals"})]}),e.jsxs(nr,{value:t,onValueChange:r,children:[e.jsxs(sr,{className:"grid w-full grid-cols-4",children:[e.jsx(Ae,{value:"categories",children:"Categories"}),e.jsx(Ae,{value:"providers",children:"Service Providers"}),e.jsx(Ae,{value:"vehicles",children:"Vehicle Approvals"}),e.jsx(Ae,{value:"stats",children:"Statistics"})]}),e.jsxs(Ve,{value:"categories",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Taxi Categories"}),e.jsxs(Tt,{open:s,onOpenChange:n,children:[e.jsx(hs,{asChild:!0,children:e.jsxs(_,{onClick:()=>{i(null),w()},children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Add Category"]})}),e.jsxs(Ct,{children:[e.jsxs(Pt,{children:[e.jsx(kt,{children:a?"Edit Category":"Create Category"}),e.jsx(Xt,{children:a?"Update taxi category details":"Add a new taxi category"})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"name",children:"Category Name"}),e.jsx($,{id:"name",required:!0,value:l.name,onChange:S=>o({...l,name:S.target.value})})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"description",children:"Description"}),e.jsx(at,{id:"description",value:l.description,onChange:S=>o({...l,description:S.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"basePrice",children:"Base Price ()"}),e.jsx($,{id:"basePrice",type:"number",step:"0.01",required:!0,value:l.basePrice,onChange:S=>o({...l,basePrice:S.target.value})})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pricePerKm",children:"Price per KM ()"}),e.jsx($,{id:"pricePerKm",type:"number",step:"0.01",required:!0,value:l.pricePerKm,onChange:S=>o({...l,pricePerKm:S.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"waitingCharge",children:"Waiting Charge (/min)"}),e.jsx($,{id:"waitingCharge",type:"number",step:"0.01",value:l.waitingChargePerMinute,onChange:S=>o({...l,waitingChargePerMinute:S.target.value})})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"maxPassengers",children:"Max Passengers"}),e.jsx($,{id:"maxPassengers",type:"number",required:!0,value:l.maxPassengers,onChange:S=>o({...l,maxPassengers:S.target.value})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gs,{id:"isActive",checked:l.isActive,onCheckedChange:S=>o({...l,isActive:S})}),e.jsx(re,{htmlFor:"isActive",children:"Active"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(_,{type:"submit",disabled:p.isPending||y.isPending,children:a?"Update":"Create"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:u?e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading categories..."})})}):d.length===0?e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No taxi categories found"}),e.jsx("p",{className:"text-sm",children:"Create your first taxi category to get started"})]})})}):d.map(S=>e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S.name}),e.jsx(ae,{variant:S.isActive?"default":"secondary",children:S.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:S.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Base Price:"}),e.jsxs("span",{className:"font-medium ml-1",children:["",S.basePrice]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Per KM:"}),e.jsxs("span",{className:"font-medium ml-1",children:["",S.pricePerKm]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Waiting:"}),e.jsxs("span",{className:"font-medium ml-1",children:["",S.waitingChargePerMinute,"/min"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Max Passengers:"}),e.jsx("span",{className:"font-medium ml-1",children:S.maxPassengers})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gs,{checked:S.isActive,onCheckedChange:A=>v.mutate({id:S.id,isActive:A})}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>P(S),children:e.jsx(Zr,{className:"h-4 w-4"})})]})]})})},S.id))})]}),e.jsxs(Ve,{value:"providers",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Service Provider Approvals"}),e.jsx("div",{className:"grid gap-4",children:h?e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading providers..."})})}):m.length===0?e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No service providers found"})]})})}):m.map(S=>e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S.businessName}),e.jsx(ae,{variant:S.status==="approved"?"default":S.status==="rejected"?"destructive":"secondary",children:S.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[" ",S.address,", ",S.district]}),e.jsxs("p",{children:[" ",S.phone]}),e.jsxs("p",{children:[" ",S.email]}),e.jsxs("p",{children:[" Applied: ",new Date(S.createdAt).toLocaleDateString()]})]})]}),S.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{size:"sm",variant:"outline",onClick:()=>b.mutate(S.id),disabled:b.isPending,children:[e.jsx(Es,{className:"h-4 w-4 mr-1"}),"Reject"]}),e.jsxs(_,{size:"sm",onClick:()=>f.mutate(S.id),disabled:f.isPending,children:[e.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Approve"]})]})]})})},S.id))})]}),e.jsxs(Ve,{value:"vehicles",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Vehicle Approvals"}),e.jsx("div",{className:"grid gap-4",children:x?e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsx("div",{className:"text-center",children:"Loading vehicles..."})})}):g.length===0?e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No vehicles found"})]})})}):g.map(S=>e.jsx(O,{children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[S.make," ",S.model]}),e.jsx(ae,{variant:S.adminApproved?"default":"secondary",children:S.adminApproved?"Approved":"Pending"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["License: ",S.licensePlate]}),e.jsxs("p",{children:["Year: ",S.year]}),e.jsxs("p",{children:["Color: ",S.color]}),e.jsxs("p",{children:["Driver: ",S.driverName]}),e.jsxs("p",{children:["Phone: ",S.driverPhone]})]})]}),!S.adminApproved&&e.jsxs(_,{size:"sm",onClick:()=>N.mutate(S.id),disabled:N.isPending,children:[e.jsx(Ks,{className:"h-4 w-4 mr-1"}),"Approve"]})]})})},S.id))})]}),e.jsxs(Ve,{value:"stats",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Taxi Service Statistics"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Total Categories"}),e.jsx(Fc,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:d.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.filter(S=>S.isActive).length," active"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Service Providers"}),e.jsx(rr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.filter(S=>S.status==="approved").length," approved"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Vehicles"}),e.jsx(Et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.filter(S=>S.adminApproved).length," approved"]})]})]}),e.jsxs(O,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Y,{className:"text-sm font-medium",children:"Pending Approvals"}),e.jsx(gr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.filter(S=>S.status==="pending").length+g.filter(S=>!S.adminApproved).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]})]})]})]})}const $Fe=["Ariyalur","Chengalpattu","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kallakurichi","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Mayiladuthurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Ranipet","Salem","Sivaganga","Tenkasi","Thanjavur","Theni","Thoothukudi","Tiruchirappalli","Tirunelveli","Tirupathur","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Villupuram","Virudhunagar"];function LFe(){const[t,r]=j.useState({district:"",taluk:"",pincode:""}),[s,n]=j.useState(!1),[a,i]=j.useState(null),[l,o]=j.useState({pickupLocation:"",dropoffLocation:"",pickupTime:"",estimatedDistance:"",notes:""}),[c,d]=j.useState("all"),{toast:u}=Ue(),{data:m=[],isLoading:h}=fe({queryKey:["/api/taxi/vehicles"],queryFn:async()=>{const N=await(await ie("GET","/api/taxi/vehicles")).json();return console.log("VEHICLES DEBUG:",N),N}}),g=Se({mutationFn:async b=>(await ie("POST","/api/taxi/bookings",b)).json(),onSuccess:()=>{u({title:"Booking Created",description:"Your taxi booking has been submitted successfully."}),n(!1),o({pickupLocation:"",dropoffLocation:"",pickupTime:"",estimatedDistance:"",notes:""}),pe.invalidateQueries({queryKey:["/api/taxi/bookings"]})},onError:b=>{u({title:"Booking Failed",description:b.message||"Failed to create booking",variant:"destructive"})}}),x=b=>{i(b),n(!0)},p=b=>{if(b.preventDefault(),!a)return;const N={vehicleId:a.id,pickupLocation:l.pickupLocation,dropoffLocation:l.dropoffLocation,pickupTime:l.pickupTime,estimatedDistance:parseFloat(l.estimatedDistance)||0,notes:l.notes};g.mutate(N)},y=m.filter(b=>c==="all"?!0:b.vehicleType===c),v=y.filter(b=>!t.district||t.district===""?!0:b.district===t.district);console.log("DEBUG: vehicles.length =",m.length),console.log("DEBUG: filteredVehicles.length =",y.length),console.log("DEBUG: locationFilteredVehicles.length =",v.length),console.log("DEBUG: selectedLocation =",t),console.log("DEBUG: filterType =",c);const f=m.reduce((b,N)=>(b.includes(N.vehicleType)||b.push(N.vehicleType),b),[]);return h?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Loading Available Vehicles..."}),e.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mt-4"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Book a Taxi"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose from available vehicles in Tamil Nadu"})]}),e.jsxs(O,{children:[e.jsxs(G,{children:[e.jsx(Y,{children:"Filter Vehicles"}),e.jsx(he,{children:"Filter by location and vehicle type"})]}),e.jsx(E,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"district",children:"District"}),e.jsxs(je,{value:t.district,onValueChange:b=>r({...t,district:b}),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select district"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"",children:"All Districts"}),$Fe.map(b=>e.jsx(T,{value:b,children:b},b))]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"vehicleType",children:"Vehicle Type"}),e.jsxs(je,{value:c,onValueChange:d,children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select vehicle type"})}),e.jsxs(ve,{children:[e.jsx(T,{value:"all",children:"All Types"}),f.map((b,N)=>e.jsx(T,{value:b,children:b},N))]})]})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pincode",children:"Pincode (Optional)"}),e.jsx($,{id:"pincode",placeholder:"Enter pincode",value:t.pincode,onChange:b=>r({...t,pincode:b.target.value})})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Available Vehicles (",v.length,")"]}),v.length===0?e.jsx(O,{children:e.jsxs(E,{className:"text-center py-8",children:[e.jsx(Et,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No vehicles available with the selected filters."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filters or check back later."})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:v.map(b=>e.jsxs(O,{className:"relative",children:[e.jsxs(G,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5"}),b.brand," ",b.model]}),e.jsx(ae,{variant:b.status==="available"?"default":"secondary",children:b.status==="available"?"Available":"Unavailable"})]}),e.jsxs(he,{children:[b.vehicleType,"  ",b.vehicleNumber]})]}),e.jsxs(E,{children:[b.imageUrl&&e.jsx("img",{src:b.imageUrl,alt:`${b.brand} ${b.model}`,className:"w-full h-32 object-cover rounded-md mb-4"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Vehicle Type:"}),e.jsx("span",{className:"font-medium",children:b.vehicleType})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(rr,{className:"h-3 w-3"}),"Seating:"]}),e.jsxs("span",{className:"font-medium",children:[b.seatingCapacity," passengers"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Rate per KM:"}),e.jsxs("span",{className:"font-medium text-primary",children:["",b.baseFarePerKm]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Waiting Charge:"}),e.jsxs("span",{className:"font-medium text-primary",children:["",b.baseWaitingCharge,"/hr"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_o,{className:"h-3 w-3"}),"Fuel:"]}),e.jsx("span",{className:"font-medium",children:b.fuelType})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gt,{className:"h-3 w-3"}),"Location:"]}),e.jsx("span",{className:"font-medium",children:b.district})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[b.acAvailable&&e.jsx(ae,{variant:"outline",children:"AC"}),b.gpsEnabled&&e.jsx(ae,{variant:"outline",children:"GPS"}),b.insuranceValid&&e.jsx(ae,{variant:"outline",children:"Insured"}),b.pucValid&&e.jsx(ae,{variant:"outline",children:"PUC Valid"})]}),e.jsxs(_,{className:"w-full",onClick:()=>x(b),disabled:b.status!=="available"||!b.adminApproved,children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Book This Vehicle"]})]})]},b.id))})]}),e.jsx(Tt,{open:s,onOpenChange:n,children:e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(Pt,{children:[e.jsxs(kt,{children:["Book ",a==null?void 0:a.brand," ",a==null?void 0:a.model]}),e.jsx(Xt,{children:"Fill in the details for your taxi booking"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pickupLocation",children:"Pickup Location *"}),e.jsx($,{id:"pickupLocation",value:l.pickupLocation,onChange:b=>o(N=>({...N,pickupLocation:b.target.value})),placeholder:"Enter pickup location",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"dropoffLocation",children:"Drop-off Location *"}),e.jsx($,{id:"dropoffLocation",value:l.dropoffLocation,onChange:b=>o(N=>({...N,dropoffLocation:b.target.value})),placeholder:"Enter drop-off location",required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"pickupTime",children:"Pickup Time *"}),e.jsx($,{id:"pickupTime",type:"datetime-local",value:l.pickupTime,onChange:b=>o(N=>({...N,pickupTime:b.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"estimatedDistance",children:"Estimated Distance (km)"}),e.jsx($,{id:"estimatedDistance",type:"number",step:"0.1",value:l.estimatedDistance,onChange:b=>o(N=>({...N,estimatedDistance:b.target.value})),placeholder:"Enter estimated distance"})]}),e.jsxs("div",{children:[e.jsx(re,{htmlFor:"notes",children:"Additional Notes"}),e.jsx(at,{id:"notes",value:l.notes,onChange:b=>o(N=>({...N,notes:b.target.value})),placeholder:"Any special requirements...",rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{type:"submit",className:"flex-1",disabled:g.isPending,children:g.isPending?"Booking...":"Confirm Booking"}),e.jsx(_,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"})]})]})]})})]})}function uM(){const{user:t}=dt();return(t==null?void 0:t.userType)==="admin"?e.jsx(FFe,{}):e.jsx(LFe,{})}function Te({children:t}){const{isCollapsed:r}=Tb();return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(TIe,{}),e.jsxs("div",{className:"flex flex-1",children:[e.jsx(DIe,{}),e.jsx("main",{className:De("flex-1 pt-16 pb-16 lg:pb-0 transition-all duration-300 ease-in-out",r?"lg:pl-16":"lg:pl-64"),children:e.jsx("div",{className:"p-4 lg:p-6 max-w-full",children:t})})]}),e.jsx(MIe,{})]})}function BFe(){return e.jsxs(pQ,{children:[e.jsx(is,{path:"/",component:UIe}),e.jsx(is,{path:"/auth",component:$Ie}),e.jsx(is,{path:"/opportunities",component:tFe}),e.jsx(Fe,{path:"/dashboard",children:e.jsx(Te,{children:e.jsx(qIe,{})})}),e.jsx(Fe,{path:"/provider-dashboard",children:e.jsx(Te,{children:e.jsx(V6e,{})})}),e.jsx(Fe,{path:"/service-requests",children:e.jsx(Te,{children:e.jsx(jFe,{})})}),e.jsx(Fe,{path:"/branch-managers",children:e.jsx(Te,{children:e.jsx(HIe,{})})}),e.jsx(Fe,{path:"/taluk-managers",children:e.jsx(Te,{children:e.jsx(GIe,{})})}),e.jsx(Fe,{path:"/service-agents",children:e.jsx(Te,{children:e.jsx(QIe,{})})}),e.jsx(Fe,{path:"/recharge/",children:e.jsx(Te,{children:e.jsx(ZIe,{})})}),e.jsx(Fe,{path:"/recharge/mobile",children:e.jsx(Te,{children:e.jsx(FK,{})})}),e.jsx(Fe,{path:"/recharge/dth",children:e.jsx(Te,{children:e.jsx($K,{})})}),e.jsx(Fe,{path:"/recharge/electricity",children:e.jsx(Te,{children:e.jsx(LK,{})})}),e.jsx(Fe,{path:"/recharge/gas",children:e.jsx(Te,{children:e.jsx(gh,{})})}),e.jsx(Fe,{path:"/recharge/broadband",children:e.jsx(Te,{children:e.jsx(gh,{})})}),e.jsx(Fe,{path:"/recharge/water",children:e.jsx(Te,{children:e.jsx(gh,{})})}),e.jsx(Fe,{path:"/recharge/credit-card",children:e.jsx(Te,{children:e.jsx(gh,{})})}),e.jsx(Fe,{path:"/recharge/all",children:e.jsx(Te,{children:e.jsx(gh,{})})}),e.jsx(Fe,{path:"/bookings",children:e.jsx(Te,{children:e.jsx(sRe,{})})}),e.jsx(Fe,{path:"/rental",children:e.jsx(Te,{children:e.jsx(aRe,{})})}),e.jsx(Fe,{path:"/rental-marketplace",children:e.jsx(Te,{children:e.jsx(lFe,{})})}),e.jsx(is,{path:"/rental-browse",children:e.jsx(Te,{children:e.jsx(hFe,{})})}),e.jsx(is,{path:"/rental-services",children:e.jsx(Te,{children:e.jsx(pFe,{})})}),e.jsx(Fe,{path:"/admin/rental-management",children:e.jsx(Te,{children:e.jsx(oFe,{})})}),e.jsx(Fe,{path:"/admin/rental-categories",children:e.jsx(Te,{children:e.jsx(cFe,{})})}),e.jsx(Fe,{path:"/admin/rental-subcategories",children:e.jsx(Te,{children:e.jsx(uFe,{})})}),e.jsx(Fe,{path:"/taxi",children:e.jsx(Te,{children:e.jsx(uM,{})})}),e.jsx(is,{path:"/taxi-browse",children:e.jsx(Te,{children:e.jsx(lM,{})})}),e.jsx(is,{path:"/customer/taxi-browse",children:e.jsx(Te,{children:e.jsx(lM,{})})}),e.jsx(Fe,{path:"/provider/taxi-vehicles",children:e.jsx(Te,{children:e.jsx(AFe,{})})}),e.jsx(Fe,{path:"/admin/taxi-vehicle-approvals",children:e.jsx(Te,{children:e.jsx(cM,{})})}),e.jsx(Fe,{path:"/admin/taxi-categories",children:e.jsx(Te,{children:e.jsx(dM,{})})}),e.jsx(Fe,{path:"/admin/taxi-service",children:e.jsx(Te,{children:e.jsx(RFe,{})})}),e.jsx(is,{path:"/delivery-browse",children:e.jsx(Te,{children:e.jsx(TFe,{})})}),e.jsx(Fe,{path:"/provider/delivery-registration",children:e.jsx(Te,{children:e.jsx(OFe,{})})}),e.jsx(Fe,{path:"/admin/delivery-categories",children:e.jsx(Te,{children:e.jsx(EFe,{})})}),e.jsx(Fe,{path:"/admin/delivery-agent-approvals",children:e.jsx(Te,{children:e.jsx(DFe,{})})}),e.jsx(Fe,{path:"/admin/delivery-agents-management",children:e.jsx(Te,{children:e.jsx(MFe,{})})}),e.jsx(Fe,{path:"/admin/taxi-categories-management",children:e.jsx(Te,{children:e.jsx(dM,{})})}),e.jsx(Fe,{path:"/admin/taxi-vehicle-approvals",children:e.jsx(Te,{children:e.jsx(cM,{})})}),e.jsx(Fe,{path:"/admin/taxi-vehicles-management",children:e.jsx(Te,{children:e.jsx(IFe,{})})}),e.jsx(Fe,{path:"/provider/rental-equipment",children:e.jsx(Te,{children:e.jsx(AN,{})})}),e.jsx(Fe,{path:"/provider/add-equipment",children:e.jsx(Te,{children:e.jsx(AN,{})})}),e.jsx(Fe,{path:"/provider/rental-services",children:e.jsx(Te,{children:e.jsx(fFe,{})})}),e.jsx(Fe,{path:"/provider/my-rentals",children:e.jsx(Te,{children:e.jsx(xFe,{})})}),e.jsx(Fe,{path:"/customer/my-rentals",children:e.jsx(Te,{children:e.jsx(gFe,{})})}),e.jsx(Fe,{path:"/taxi",children:e.jsx(Te,{children:e.jsx(uM,{})})}),e.jsx(Fe,{path:"/taxi-old",children:e.jsx(Te,{children:e.jsx(oRe,{})})}),e.jsx(Fe,{path:"/delivery",children:e.jsx(Te,{children:e.jsx(mRe,{})})}),e.jsx(Fe,{path:"/grocery",children:e.jsx(Te,{children:e.jsx(ZD,{})})}),e.jsx(is,{path:"/grocery-fixed",children:e.jsx(Te,{children:e.jsx(ZD,{})})}),e.jsx(is,{path:"/grocery-browse",children:e.jsx(Te,{children:e.jsx(F6e,{})})}),e.jsx(Fe,{path:"/customer/grocery-browse",children:e.jsx(Te,{children:e.jsx(PT,{})})}),e.jsx(Fe,{path:"/grocery/product/:id",children:e.jsx(Te,{children:e.jsx(bRe,{})})}),e.jsx(Fe,{path:"/grocery/cart",children:e.jsx(Te,{children:e.jsx(NRe,{})})}),e.jsx(Fe,{path:"/local-products",children:e.jsx(Te,{children:e.jsx(G5e,{})})}),e.jsx(Fe,{path:"/local-products/cart",children:e.jsx(Te,{children:e.jsx(W5e,{})})}),e.jsx(Fe,{path:"/commission-config",children:e.jsx(Te,{children:e.jsx(_Re,{})})}),e.jsx(Fe,{path:"/commissions",children:e.jsx(Te,{children:e.jsx(ORe,{})})}),e.jsx(Fe,{path:"/commission-dashboard",children:e.jsx(Te,{children:e.jsx(LRe,{})})}),e.jsx(Fe,{path:"/analytics",children:e.jsx(Te,{children:e.jsx(dMe,{})})}),e.jsx(Fe,{path:"/wallet",children:e.jsx(Te,{children:e.jsx(BRe,{})})}),e.jsx(Fe,{path:"/utility",children:e.jsx(Te,{children:e.jsx(HRe,{})})}),e.jsx(is,{path:"/travel",children:e.jsx(Te,{children:e.jsx(WRe,{})})}),e.jsx(Fe,{path:"/bus-booking",children:e.jsx(Te,{children:e.jsx(GRe,{})})}),e.jsx(Fe,{path:"/travel-services",children:e.jsx(Te,{children:e.jsx(YRe,{})})}),e.jsx(Fe,{path:"/recycling",children:e.jsx(Te,{children:e.jsx(e5e,{})})}),e.jsx(Fe,{path:"/chat",children:e.jsx(Te,{children:e.jsx(g5e,{})})}),e.jsx(Fe,{path:"/booking/:id",children:e.jsx(Te,{children:e.jsx(QRe,{})})}),e.jsx(Fe,{path:"/get-associated",children:e.jsx(Te,{children:e.jsx(i3e,{})})}),e.jsx(Fe,{path:"/provider-registration",children:e.jsx(Te,{children:e.jsx(t6e,{})})}),e.jsx(Fe,{path:"/provider-registration/farmer",children:e.jsx(Te,{children:e.jsx(i6e,{})})}),e.jsx(Fe,{path:"/provider-registration/manufacturer",children:e.jsx(Te,{children:e.jsx(u6e,{})})}),e.jsx(Fe,{path:"/provider-registration/taxi-provider",children:e.jsx(Te,{children:e.jsx(h6e,{})})}),e.jsx(Fe,{path:"/provider-registration/booking-agent",children:e.jsx(Te,{children:e.jsx(f6e,{})})}),e.jsx(Fe,{path:"/provider-registration/transportation-agent",children:e.jsx(Te,{children:e.jsx(g6e,{})})}),e.jsx(Fe,{path:"/provider-registration/rental-provider",children:e.jsx(Te,{children:e.jsx(y6e,{})})}),e.jsx(Fe,{path:"/provider-registration/recycling-agent",children:e.jsx(Te,{children:e.jsx(b6e,{})})}),e.jsx(Fe,{path:"/profile",children:e.jsx(Te,{children:e.jsx(l3e,{})})}),e.jsx(Fe,{path:"/hierarchy",children:e.jsx(Te,{children:e.jsx(k3e,{})})}),e.jsx(Fe,{path:"/video-management",children:e.jsx(Te,{children:e.jsx(U6e,{})})}),e.jsx(Fe,{path:"/video-library",children:e.jsx(Te,{children:e.jsx(z6e,{})})}),e.jsx(Fe,{path:"/video-upload",children:e.jsx(Te,{children:e.jsx(K6e,{})})}),e.jsx(Fe,{path:"/video-upload-simple",children:e.jsx(Te,{children:e.jsx(W6e,{})})}),e.jsx(Fe,{path:"/video-upload-chunked",children:e.jsx(Te,{children:e.jsx(H6e,{})})}),e.jsx(Fe,{path:"/video-analytics",children:e.jsx(Te,{children:e.jsx(G6e,{})})}),e.jsx(is,{path:"/services-overview",children:e.jsx(Q6e,{})}),e.jsx(Fe,{path:"/manager-applications",children:e.jsx(Te,{children:e.jsx(A3e,{})})}),e.jsx(Fe,{path:"/admin/recycling/rates",children:e.jsx(Te,{children:e.jsx(v5e,{})})}),e.jsx(Fe,{path:"/admin/grocery/categories",children:e.jsx(Te,{children:e.jsx(b5e,{})})}),e.jsx(Fe,{path:"/admin/grocery/products",children:e.jsx(Te,{children:e.jsx(R5e,{})})}),e.jsx(Fe,{path:"/admin/grocery/products-new",children:e.jsx(Te,{children:e.jsx($5e,{})})}),e.jsx(Fe,{path:"/admin/grocery/product-requests",children:e.jsx(Te,{children:e.jsx(V5e,{})})}),e.jsx(Fe,{path:"/admin/grocery/farmer-listings",children:e.jsx(Te,{children:e.jsx(U5e,{})})}),e.jsx(Fe,{path:"/admin/grocery/farmer-product-approvals",children:e.jsx(Te,{children:e.jsx(q5e,{})})}),e.jsx(Fe,{path:"/admin/local-products",children:e.jsx(Te,{children:e.jsx(z5e,{})})}),e.jsx(Fe,{path:"/admin/local-products/new",children:e.jsx(Te,{children:e.jsx(H5e,{})})}),e.jsx(Fe,{path:"/admin/local-products/:id/details",children:e.jsx(Te,{children:e.jsx(Q5e,{})})}),e.jsx(Fe,{path:"/admin/local-products/categories",children:e.jsx(Te,{children:e.jsx(X5e,{})})}),e.jsx(Fe,{path:"/admin/service-providers",children:e.jsx(Te,{children:e.jsx(Z5e,{})})}),e.jsx(Fe,{path:"/admin/video-approvals",children:e.jsx(Te,{children:e.jsx(Y6e,{})})}),e.jsx(Fe,{path:"/admin/service-requests",children:e.jsx(Te,{children:e.jsx(bFe,{})})}),e.jsx(Fe,{path:"/customer/service-requests",children:e.jsx(Te,{children:e.jsx(NFe,{})})}),e.jsx(Fe,{path:"/agent/service-requests",children:e.jsx(Te,{children:e.jsx(wFe,{})})}),e.jsx(Fe,{path:"/manager/service-requests",children:e.jsx(Te,{children:e.jsx(SFe,{})})}),e.jsx(Fe,{path:"/branch-manager/service-requests",children:e.jsx(Te,{children:e.jsx(CFe,{})})}),e.jsx(Fe,{path:"/provider/service-requests",children:e.jsx(Te,{children:e.jsx(PFe,{})})}),e.jsx(Fe,{path:"/provider/add-local-product",children:e.jsx(Te,{children:e.jsx(gT,{})})}),e.jsx(Fe,{path:"/farm-listings",children:e.jsx(Te,{children:e.jsx(_3e,{})})}),e.jsx(Fe,{path:"/farmer/add-product",children:e.jsx(Te,{children:e.jsx(M3e,{})})}),e.jsx(Fe,{path:"/farmer/edit-product/:id",children:e.jsx(Te,{children:e.jsx(R3e,{})})}),e.jsx(Fe,{path:"/farmer/my-listings",children:e.jsx(Te,{children:e.jsx(L3e,{})})}),e.jsx(Fe,{path:"/farmer/request-product",children:e.jsx(Te,{children:e.jsx($3e,{})})}),e.jsx(Fe,{path:"/provider/add-local-product",children:e.jsx(Te,{children:e.jsx(gT,{})})}),e.jsx(Fe,{path:"/provider/my-local-products",children:e.jsx(Te,{children:e.jsx($se,{})})}),e.jsx(Fe,{path:"/provider/request-category",children:e.jsx(Te,{children:e.jsx(Qse,{})})}),e.jsx(Fe,{path:"/provider/add-grocery-product",children:e.jsx(Te,{children:e.jsx(die,{})})}),e.jsx(Fe,{path:"/provider/my-grocery-products",children:e.jsx(Te,{children:e.jsx(X6e,{})})}),e.jsx(Fe,{path:"/customer/grocery-browse",children:e.jsx(Te,{children:e.jsx(PT,{})})}),e.jsx(Fe,{path:"/provider/rental-equipment",children:e.jsx(Te,{children:e.jsx(AN,{})})}),e.jsx(is,{path:"/manager-registration",children:e.jsx(Te,{children:e.jsx(N6e,{})})}),e.jsx(is,{path:"/manager-registration/branch-manager",children:e.jsx(Te,{children:e.jsx(k6e,{})})}),e.jsx(is,{path:"/manager-registration/taluk-manager",children:e.jsx(Te,{children:e.jsx(T6e,{})})}),e.jsx(is,{path:"/manager-registration/service-agent",children:e.jsx(Te,{children:e.jsx(M6e,{})})}),e.jsx(is,{path:"/opportunities-forum",children:e.jsx(Te,{children:e.jsx(aFe,{})})}),e.jsx(is,{path:"/nomination-test",children:e.jsx(Te,{children:e.jsx(iFe,{})})}),e.jsx(is,{path:"/oil-test",children:e.jsx(Te,{children:e.jsx(I6e,{})})}),e.jsx(is,{path:"/subcategory-test",children:e.jsx(Te,{children:e.jsx(R6e,{})})}),e.jsx(is,{component:IIe})]})}function VFe(){return e.jsx(IQ,{client:pe,children:e.jsx(iJ,{children:e.jsxs(OIe,{children:[e.jsx(BFe,{}),e.jsx(aJ,{})]})})})}yF(document.getElementById("root")).render(e.jsx(VFe,{}));
